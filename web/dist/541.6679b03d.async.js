"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[541],{10541:function(t,e,n){n.d(e,{$F:function(){return M},$G:function(){return C},E2:function(){return q},L5:function(){return F},MA:function(){return D},ME:function(){return L},PX:function(){return P},Q7:function(){return A},Sq:function(){return S},VJ:function(){return x},aD:function(){return Q},aX:function(){return N},lX:function(){return I},pY:function(){return T},rd:function(){return G},uG:function(){return B},w9:function(){return b},z5:function(){return z}});var r=n(97857),a=n.n(r),u=n(15009),i=n.n(u),o=n(99289),c=n.n(o),s=n(5574),d=n.n(s),l=n(40063),g=n(73955),f=n(78551),m=n(4614),p=n(30202),h=n(4527),v=n(99346),_=n(58580),y=n(45360),w=n(62435),Z=n(24701),k=n(2938),K=n(96100),b=function(){var t=(0,Z.lr)();return d()(t,1)[0].get("id")||""},P=function(){var t,e=b(),n=(0,f.a)({queryKey:["fetchKnowledgeDetail"],initialData:{},gcTime:0,queryFn:(t=c()(i()().mark((function t(){var n,r,a;return i()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.ZP.get_kb_detail({kb_id:e});case 2:return r=t.sent,a=r.data,t.abrupt("return",null!==(n=null==a?void 0:a.data)&&void 0!==n?n:{});case 5:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)})});return{data:n.data,loading:n.isFetching}},x=function(){var t,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=(0,f.a)({queryKey:["fetchKnowledgeList"],initialData:[],gcTime:0,queryFn:(t=c()(i()().mark((function t(){var n,r,a,u,o;return i()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.ZP.getList();case 2:return a=t.sent,u=a.data,o=null!==(n=null==u||null===(r=u.data)||void 0===r?void 0:r.kbs)&&void 0!==n?n:[],t.abrupt("return",e?o.filter((function(t){return t.chunk_num>0})):o);case 6:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)})});return{list:n.data,loading:n.isFetching}},T=function(){var t=x().list;return null==t?void 0:t.map((function(t){return{label:t.name,value:t.id}}))},F=function(){var t,e=(0,k.Qe)(),n=e.searchString,r=e.handleInputChange,a=(0,_.Z)(n,{wait:500}),u=(0,m.N)({queryKey:["infiniteFetchKnowledgeList",a],queryFn:(t=c()(i()().mark((function t(e){var n,r,u,o,c;return i()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.pageParam,t.next=3,g.ZP.getList({page:r,page_size:30,keywords:a});case 3:return u=t.sent,o=u.data,c=null!==(n=null==o?void 0:o.data)&&void 0!==n?n:[],t.abrupt("return",c);case 7:case"end":return t.stop()}}),t)}))),function(e){return t.apply(this,arguments)}),initialPageParam:1,getNextPageParam:function(t,e,n){if(30*n<=t.total)return n+1}}),o=u.data,s=u.error,d=u.fetchNextPage,l=u.hasNextPage,f=u.isFetching;return{data:o,loading:f,error:s,fetchNextPage:d,hasNextPage:l,isFetching:f,isFetchingNextPage:u.isFetchingNextPage,status:u.status,handleInputChange:r,searchString:n}},L=function(){var t,e=(0,p.NL)(),n=(0,h.D)({mutationKey:["createKnowledge"],mutationFn:(t=c()(i()().mark((function t(n){var r,a,u;return i()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.ZP.createKb(n);case 2:return r=t.sent,a=r.data,0===(u=void 0===a?{}:a).code&&(y.ZP.success(l.Z.t("message.".concat(null!=n&&n.id?"modified":"created"))),e.invalidateQueries({queryKey:["fetchKnowledgeList"]})),t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)}))),function(e){return t.apply(this,arguments)})});return{data:n.data,loading:n.isPending,createKnowledge:n.mutateAsync}},q=function(){var t,e=(0,p.NL)(),n=(0,h.D)({mutationKey:["deleteKnowledge"],mutationFn:(t=c()(i()().mark((function t(n){var r,a,u;return i()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.ZP.rmKb({kb_id:n});case 2:return a=t.sent,0===(u=a.data).code&&(y.ZP.success(l.Z.t("message.deleted")),e.invalidateQueries({queryKey:["infiniteFetchKnowledgeList"]})),t.abrupt("return",null!==(r=null==u?void 0:u.data)&&void 0!==r?r:[]);case 6:case"end":return t.stop()}}),t)}))),function(e){return t.apply(this,arguments)})});return{data:n.data,loading:n.isPending,deleteKnowledge:n.mutateAsync}},D=function(){var t,e=b(),n=(0,p.NL)(),r=(0,h.D)({mutationKey:["saveKnowledge"],mutationFn:(t=c()(i()().mark((function t(r){var u,o,c;return i()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.ZP.updateKb(a()({kb_id:e},r));case 2:return u=t.sent,o=u.data,0===(c=void 0===o?{}:o).code&&(y.ZP.success(l.Z.t("message.updated")),n.invalidateQueries({queryKey:["fetchKnowledgeDetail"]})),t.abrupt("return",c);case 7:case"end":return t.stop()}}),t)}))),function(e){return t.apply(this,arguments)})});return{data:r.data,loading:r.isPending,saveKnowledgeConfiguration:r.mutateAsync}},N=function(){var t,e=b(),n=(0,K.fz)(),r=n.page,u=n.size,o=(0,h.D)({mutationKey:["testChunk"],gcTime:0,mutationFn:(t=c()(i()().mark((function t(n){var o,c,s,d,l;return i()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.ZP.retrieval_test(a()(a()({},n),{},{kb_id:null!==(o=n.kb_id)&&void 0!==o?o:e,page:r,size:u}));case 2:if(s=t.sent,0!==(d=s.data).code){t.next=7;break}return l=d.data,t.abrupt("return",a()(a()({},l),{},{documents:l.doc_aggs}));case 7:return t.abrupt("return",null!==(c=null==d?void 0:d.data)&&void 0!==c?c:{chunks:[],documents:[],total:0});case 8:case"end":return t.stop()}}),t)}))),function(e){return t.apply(this,arguments)})}),s=o.data;return{data:null!=s?s:{chunks:[],documents:[],total:0},loading:o.isPending,testChunk:o.mutateAsync}},C=function(){return(0,v.B)({mutationKey:["testChunk"]})>0},Q=function(){var t;return null!==(t=(0,v.S)({filters:{mutationKey:["testChunk"]},select:function(t){return t.state.data}}).at(-1))&&void 0!==t?t:{chunks:[],documents:[],total:0}},A=function(){return"success"===(0,v.S)({filters:{mutationKey:["testChunk"]},select:function(t){return t.state.status}}).at(-1)},I=function(){var t,e=b(),n=(0,f.a)({queryKey:["fetchTagList"],initialData:[],gcTime:0,queryFn:(t=c()(i()().mark((function t(){var n,r,a;return i()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,g.QL)(e);case 2:return n=t.sent,r=n.data,a=(null==r?void 0:r.data)||[],t.abrupt("return",a);case 6:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)})});return{list:n.data,loading:n.isFetching}},B=function(){var t,e=b(),n=(0,p.NL)(),r=(0,h.D)({mutationKey:["deleteTag"],mutationFn:(t=c()(i()().mark((function t(r){var a,u,o;return i()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,g.tc)(e,r);case 2:return u=t.sent,0===(o=u.data).code&&(y.ZP.success(l.Z.t("message.deleted")),n.invalidateQueries({queryKey:["fetchTagList"]})),t.abrupt("return",null!==(a=null==o?void 0:o.data)&&void 0!==a?a:[]);case 6:case"end":return t.stop()}}),t)}))),function(e){return t.apply(this,arguments)})});return{data:r.data,loading:r.isPending,deleteTag:r.mutateAsync}},S=function(){var t,e=b(),n=(0,p.NL)(),r=(0,h.D)({mutationKey:["renameTag"],mutationFn:(t=c()(i()().mark((function t(r){var a,u,o;return i()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,g.Re)(e,r);case 2:return u=t.sent,0===(o=u.data).code&&(y.ZP.success(l.Z.t("message.modified")),n.invalidateQueries({queryKey:["fetchTagList"]})),t.abrupt("return",null!==(a=null==o?void 0:o.data)&&void 0!==a?a:[]);case 6:case"end":return t.stop()}}),t)}))),function(e){return t.apply(this,arguments)})});return{data:r.data,loading:r.isPending,renameTag:r.mutateAsync}},z=function(){return(0,v.B)({mutationKey:["renameTag"]})>0},G=function(){var t,e=(0,w.useState)([]),n=d()(e,2),r=n[0],a=n[1],u=(0,f.a)({queryKey:["fetchTagListByKnowledgeIds"],enabled:r.length>0,initialData:[],gcTime:0,queryFn:(t=c()(i()().mark((function t(){var e,n,a;return i()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.ZP.listTagByKnowledgeIds({kb_ids:r.join(",")});case 2:return e=t.sent,n=e.data,a=(null==n?void 0:n.data)||[],t.abrupt("return",a);case 6:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)})});return{list:u.data,loading:u.isFetching,setKnowledgeIds:a}};function M(){var t,e=b(),n=(0,f.a)({queryKey:["fetchKnowledgeGraph",e],initialData:{graph:{},mind_map:{}},enabled:!!e,gcTime:0,queryFn:(t=c()(i()().mark((function t(){var n,r;return i()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,g.$V)(e);case 2:return n=t.sent,r=n.data,t.abrupt("return",null==r?void 0:r.data);case 5:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)})});return{data:n.data,loading:n.isFetching}}},73955:function(t,e,n){n.d(e,{$V:function(){return S},QL:function(){return A},Re:function(){return B},tc:function(){return I}});var r=n(60806),a=n(66582),u=n(78158),i=r.Z.create_kb,o=r.Z.update_kb,c=r.Z.rm_kb,s=r.Z.get_kb_detail,d=r.Z.kb_list,l=r.Z.get_document_list,g=r.Z.document_change_status,f=r.Z.document_rm,m=r.Z.document_delete,p=r.Z.document_create,h=r.Z.document_change_parser,v=r.Z.document_thumbnails,_=r.Z.chunk_list,y=r.Z.create_chunk,w=r.Z.set_chunk,Z=r.Z.get_chunk,k=r.Z.switch_chunk,K=r.Z.rm_chunk,b=r.Z.retrieval_test,P=r.Z.document_rename,x=r.Z.document_run,T=r.Z.document_upload,F=r.Z.web_crawl,L=r.Z.knowledge_graph,q=r.Z.document_infos,D=r.Z.upload_and_parse,N=r.Z.listTagByKnowledgeIds,C={createKb:{url:i,method:"post"},updateKb:{url:o,method:"post"},rmKb:{url:c,method:"post"},get_kb_detail:{url:s,method:"get"},getList:{url:d,method:"get"},get_document_list:{url:l,method:"get"},document_change_status:{url:g,method:"post"},document_rm:{url:f,method:"post"},document_rename:{url:P,method:"post"},document_create:{url:p,method:"post"},document_run:{url:x,method:"post"},document_change_parser:{url:h,method:"post"},document_thumbnails:{url:v,method:"get"},document_upload:{url:T,method:"post"},web_crawl:{url:F,method:"post"},document_infos:{url:q,method:"post"},setMeta:{url:r.Z.setMeta,method:"post"},chunk_list:{url:_,method:"post"},create_chunk:{url:y,method:"post"},set_chunk:{url:w,method:"post"},get_chunk:{url:Z,method:"get"},switch_chunk:{url:k,method:"post"},rm_chunk:{url:K,method:"post"},retrieval_test:{url:b,method:"post"},knowledge_graph:{url:L,method:"get"},document_delete:{url:m,method:"delete"},upload_and_parse:{url:D,method:"post"},listTagByKnowledgeIds:{url:N,method:"get"}},Q=(0,a.Z)(C,u.ZP),A=function(t){return u.ZP.get(r.Z.listTag(t))},I=function(t,e){return(0,u.v_)(r.Z.removeTag(t),{tags:e})},B=function(t,e){var n=e.fromTag,a=e.toTag;return(0,u.v_)(r.Z.renameTag(t),{fromTag:n,toTag:a})};function S(t){return u.ZP.get(r.Z.getKnowledgeGraph(t))}e.ZP=Q}}]);
//# sourceMappingURL=541.6679b03d.async.js.map