{"version":3,"file":"p__search__index.be35a610.async.js","mappings":"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","sources":["webpack:///./src/components/retrieval-documents/select-files.tsx","webpack:///./src/components/retrieval-documents/index.less?a74b","webpack:///./src/components/retrieval-documents/index.tsx","webpack:///./src/pages/search/index.less?2702","webpack:///./src/pages/search/mindmap-drawer.tsx","webpack:///./src/pages/search/hooks.ts","webpack:///./src/pages/search/sidebar.tsx","webpack:///./src/pages/search/index.tsx","webpack:///./src/assets/svg/selected-files-collapse.svg"],"sourcesContent":["import NewDocumentLink from '@/components/new-document-link';\nimport { useTranslate } from '@/hooks/common-hooks';\nimport { useSelectTestingResult } from '@/hooks/knowledge-hooks';\nimport { ITestingDocument } from '@/interfaces/database/knowledge';\nimport { EyeOutlined } from '@ant-design/icons';\nimport { Button, Table, TableProps, Tooltip } from 'antd';\n\ninterface IProps {\n  handleTesting: (ids: string[]) => void;\n  setSelectedDocumentIds: (ids: string[]) => void;\n}\n\nconst SelectFiles = ({ setSelectedDocumentIds, handleTesting }: IProps) => {\n  const { documents } = useSelectTestingResult();\n  const { t } = useTranslate('fileManager');\n\n  const columns: TableProps<ITestingDocument>['columns'] = [\n    {\n      title: 'Name',\n      dataIndex: 'doc_name',\n      key: 'doc_name',\n      render: (text) => <p>{text}</p>,\n    },\n\n    {\n      title: 'Hits',\n      dataIndex: 'count',\n      key: 'count',\n      width: 80,\n    },\n    {\n      title: 'View',\n      key: 'view',\n      width: 50,\n      render: (_, { doc_id, doc_name }) => (\n        <NewDocumentLink\n          documentName={doc_name}\n          documentId={doc_id}\n          prefix=\"document\"\n        >\n          <Tooltip title={t('preview')}>\n            <Button type=\"text\">\n              <EyeOutlined size={20} />\n            </Button>\n          </Tooltip>\n        </NewDocumentLink>\n      ),\n    },\n  ];\n\n  const rowSelection = {\n    onChange: (selectedRowKeys: React.Key[]) => {\n      handleTesting(selectedRowKeys as string[]);\n      setSelectedDocumentIds(selectedRowKeys as string[]);\n    },\n    getCheckboxProps: (record: ITestingDocument) => ({\n      disabled: record.doc_name === 'Disabled User', // Column configuration not to be checked\n      name: record.doc_name,\n    }),\n  };\n\n  return (\n    <Table\n      columns={columns}\n      dataSource={documents}\n      showHeader={false}\n      rowSelection={rowSelection}\n      rowKey={'doc_id'}\n    />\n  );\n};\n\nexport default SelectFiles;\n","// extracted by mini-css-extract-plugin\nexport default {\"selectFilesCollapse\":\"selectFilesCollapse___tHbPt\",\"selectFilesTitle\":\"selectFilesTitle___OKrhv\"};","import { ReactComponent as SelectedFilesCollapseIcon } from '@/assets/svg/selected-files-collapse.svg';\nimport { Collapse, Flex, Space } from 'antd';\nimport SelectFiles from './select-files';\n\nimport { useSelectTestingResult } from '@/hooks/knowledge-hooks';\nimport { useTranslation } from 'react-i18next';\nimport styles from './index.less';\n\ninterface IProps {\n  onTesting(documentIds: string[]): void;\n  setSelectedDocumentIds(documentIds: string[]): void;\n  selectedDocumentIds: string[];\n}\n\nconst RetrievalDocuments = ({\n  onTesting,\n  selectedDocumentIds,\n  setSelectedDocumentIds,\n}: IProps) => {\n  const { t } = useTranslation();\n  const { documents } = useSelectTestingResult();\n\n  return (\n    <Collapse\n      expandIcon={() => <SelectedFilesCollapseIcon></SelectedFilesCollapseIcon>}\n      className={styles.selectFilesCollapse}\n      items={[\n        {\n          key: '1',\n          label: (\n            <Flex\n              justify={'space-between'}\n              align=\"center\"\n              className={styles.selectFilesTitle}\n            >\n              <Space>\n                <span>\n                  {selectedDocumentIds?.length ?? 0}/{documents?.length ?? 0}\n                </span>\n                {t('knowledgeDetails.filesSelected')}\n              </Space>\n            </Flex>\n          ),\n          children: (\n            <div>\n              <SelectFiles\n                setSelectedDocumentIds={setSelectedDocumentIds}\n                handleTesting={onTesting}\n              ></SelectFiles>\n            </div>\n          ),\n        },\n      ]}\n    />\n  );\n};\n\nexport default RetrievalDocuments;\n","// extracted by mini-css-extract-plugin\nexport default {\"searchPage\":\"searchPage___TO5ok\",\"card\":\"card___scTJ7\",\"tag\":\"tag___F3dia\",\"searchSide\":\"searchSide___Ur4mG\",\"modelForm\":\"modelForm___v4GJN\",\"checkGroup\":\"checkGroup___YVVws\",\"list\":\"list___FBGDW\",\"checkbox\":\"checkbox___CWAZR\",\"knowledgeName\":\"knowledgeName___pQK8r\",\"embeddingId\":\"embeddingId___yxVE4\",\"firstRenderContent\":\"firstRenderContent___kYeDC\",\"content\":\"content___FJSce\",\"hide\":\"hide___d1U6O\",\"main\":\"main___G4gQT\",\"highlightContent\":\"highlightContent___GkhyP\",\"documentReference\":\"documentReference___Bj5k4\",\"pagination\":\"pagination___EGLXC\",\"answerWrapper\":\"answerWrapper___EIJcg\",\"globalInput\":\"globalInput___jG4B8\",\"partialInput\":\"partialInput___kQwzQ\",\"appIcon\":\"appIcon____OfF0\",\"appName\":\"appName___JGWuY\",\"textclip\":\"textclip___AoVgw\",\"popupMarkdown\":\"popupMarkdown___Zggfc\",\"mindMapFloatButton\":\"mindMapFloatButton___GL1ZJ\"};","import IndentedTree from '@/components/indented-tree/indented-tree';\nimport { IModalProps } from '@/interfaces/common';\nimport { Drawer, Flex, Progress } from 'antd';\nimport { useTranslation } from 'react-i18next';\nimport { usePendingMindMap } from './hooks';\n\ninterface IProps extends IModalProps<any> {\n  data: any;\n}\n\nconst MindMapDrawer = ({ data, hideModal, visible, loading }: IProps) => {\n  const { t } = useTranslation();\n  const percent = usePendingMindMap();\n  return (\n    <Drawer\n      title={t('chunk.mind')}\n      onClose={hideModal}\n      open={visible}\n      width={'40vw'}\n    >\n      {loading ? (\n        <Flex justify=\"center\">\n          <Progress type=\"circle\" percent={percent} size={200} />\n        </Flex>\n      ) : (\n        <IndentedTree\n          data={data}\n          show\n          style={{ width: '100%', height: '100%' }}\n        ></IndentedTree>\n      )}\n    </Drawer>\n  );\n};\n\nexport default MindMapDrawer;\n","import { useFetchMindMap, useFetchRelatedQuestions } from '@/hooks/chat-hooks';\nimport { useSetModalState } from '@/hooks/common-hooks';\nimport { useTestChunkRetrieval } from '@/hooks/knowledge-hooks';\nimport {\n  useGetPaginationWithRouter,\n  useSendMessageWithSse,\n} from '@/hooks/logic-hooks';\nimport { IAnswer } from '@/interfaces/database/chat';\nimport api from '@/utils/api';\nimport { get, isEmpty, isEqual, trim } from 'lodash';\nimport {\n  ChangeEventHandler,\n  useCallback,\n  useEffect,\n  useRef,\n  useState,\n} from 'react';\n\nexport const useSendQuestion = (kbIds: string[]) => {\n  const { send, answer, done } = useSendMessageWithSse(api.ask);\n  const { testChunk, loading } = useTestChunkRetrieval();\n  const [sendingLoading, setSendingLoading] = useState(false);\n  const [currentAnswer, setCurrentAnswer] = useState({} as IAnswer);\n  const { fetchRelatedQuestions, data: relatedQuestions } =\n    useFetchRelatedQuestions();\n  const [searchStr, setSearchStr] = useState<string>('');\n  const [isFirstRender, setIsFirstRender] = useState(true);\n  const [selectedDocumentIds, setSelectedDocumentIds] = useState<string[]>([]);\n\n  const { pagination, setPagination } = useGetPaginationWithRouter();\n\n  const sendQuestion = useCallback(\n    (question: string) => {\n      const q = trim(question);\n      if (isEmpty(q)) return;\n      setPagination({ page: 1 });\n      setIsFirstRender(false);\n      setCurrentAnswer({} as IAnswer);\n      setSendingLoading(true);\n      send({ kb_ids: kbIds, question: q });\n      testChunk({\n        kb_id: kbIds,\n        highlight: true,\n        question: q,\n        page: 1,\n        size: pagination.pageSize,\n      });\n\n      fetchRelatedQuestions(q);\n    },\n    [\n      send,\n      testChunk,\n      kbIds,\n      fetchRelatedQuestions,\n      setPagination,\n      pagination.pageSize,\n    ],\n  );\n\n  const handleSearchStrChange: ChangeEventHandler<HTMLInputElement> =\n    useCallback((e) => {\n      setSearchStr(e.target.value);\n    }, []);\n\n  const handleClickRelatedQuestion = useCallback(\n    (question: string) => () => {\n      if (sendingLoading) return;\n\n      setSearchStr(question);\n      sendQuestion(question);\n    },\n    [sendQuestion, sendingLoading],\n  );\n\n  const handleTestChunk = useCallback(\n    (documentIds: string[], page: number = 1, size: number = 10) => {\n      const q = trim(searchStr);\n      if (sendingLoading || isEmpty(q)) return;\n\n      testChunk({\n        kb_id: kbIds,\n        highlight: true,\n        question: q,\n        doc_ids: documentIds ?? selectedDocumentIds,\n        page,\n        size,\n      });\n    },\n    [sendingLoading, searchStr, kbIds, testChunk, selectedDocumentIds],\n  );\n\n  useEffect(() => {\n    if (!isEmpty(answer)) {\n      setCurrentAnswer(answer);\n    }\n  }, [answer]);\n\n  useEffect(() => {\n    if (done) {\n      setSendingLoading(false);\n    }\n  }, [done]);\n\n  return {\n    sendQuestion,\n    handleSearchStrChange,\n    handleClickRelatedQuestion,\n    handleTestChunk,\n    setSelectedDocumentIds,\n    loading,\n    sendingLoading,\n    answer: currentAnswer,\n    relatedQuestions: relatedQuestions?.slice(0, 5) ?? [],\n    searchStr,\n    isFirstRender,\n    selectedDocumentIds,\n    isSearchStrEmpty: isEmpty(trim(searchStr)),\n  };\n};\n\nexport const useFetchBackgroundImage = () => {\n  const [imgUrl, setImgUrl] = useState<string>('');\n\n  const fetchImage = useCallback(async () => {\n    try {\n      const res = await fetch(\n        '/HPImageArchive.aspx?format=js&idx=0&n=1&mkt=zh-CN',\n      );\n      const ret = await res.json();\n      const url = get(ret, 'images.0.url');\n      if (url) {\n        setImgUrl(url);\n      }\n    } catch (error) {\n      console.log('ðŸš€ ~ fetchImage ~ error:', error);\n    }\n  }, []);\n\n  useEffect(() => {\n    fetchImage();\n  }, [fetchImage]);\n\n  return `https://cn.bing.com${imgUrl}`;\n};\n\nexport const useTestRetrieval = (\n  kbIds: string[],\n  searchStr: string,\n  sendingLoading: boolean,\n) => {\n  const { testChunk, loading } = useTestChunkRetrieval();\n  const { pagination } = useGetPaginationWithRouter();\n\n  const [selectedDocumentIds, setSelectedDocumentIds] = useState<string[]>([]);\n\n  const handleTestChunk = useCallback(() => {\n    const q = trim(searchStr);\n    if (sendingLoading || isEmpty(q)) return;\n\n    testChunk({\n      kb_id: kbIds,\n      highlight: true,\n      question: q,\n      doc_ids: Array.isArray(selectedDocumentIds) ? selectedDocumentIds : [],\n      page: pagination.current,\n      size: pagination.pageSize,\n    });\n  }, [\n    sendingLoading,\n    searchStr,\n    kbIds,\n    testChunk,\n    selectedDocumentIds,\n    pagination,\n  ]);\n\n  useEffect(() => {\n    handleTestChunk();\n  }, [handleTestChunk]);\n\n  return {\n    loading,\n    selectedDocumentIds,\n    setSelectedDocumentIds,\n  };\n};\n\nexport const useShowMindMapDrawer = (kbIds: string[], question: string) => {\n  const { visible, showModal, hideModal } = useSetModalState();\n  const ref = useRef<any>();\n\n  const {\n    fetchMindMap,\n    data: mindMap,\n    loading: mindMapLoading,\n  } = useFetchMindMap();\n\n  const handleShowModal = useCallback(() => {\n    const searchParams = { question: trim(question), kb_ids: kbIds };\n    if (\n      !isEmpty(searchParams.question) &&\n      !isEqual(searchParams, ref.current)\n    ) {\n      ref.current = searchParams;\n      fetchMindMap(searchParams);\n    }\n    showModal();\n  }, [fetchMindMap, showModal, question, kbIds]);\n\n  return {\n    mindMap,\n    mindMapVisible: visible,\n    mindMapLoading,\n    showMindMapModal: handleShowModal,\n    hideMindMapModal: hideModal,\n  };\n};\n\nexport const usePendingMindMap = () => {\n  const [count, setCount] = useState<number>(0);\n  const ref = useRef<NodeJS.Timeout>();\n\n  const setCountInterval = useCallback(() => {\n    ref.current = setInterval(() => {\n      setCount((pre) => {\n        if (pre > 40) {\n          clearInterval(ref?.current);\n        }\n        return pre + 1;\n      });\n    }, 1000);\n  }, []);\n\n  useEffect(() => {\n    setCountInterval();\n    return () => {\n      clearInterval(ref?.current);\n    };\n  }, [setCountInterval]);\n\n  return Number(((count / 43) * 100).toFixed(0));\n};\n","import { useFetchKnowledgeList } from '@/hooks/knowledge-hooks';\nimport { UserOutlined } from '@ant-design/icons';\nimport type { TreeDataNode, TreeProps } from 'antd';\nimport { Avatar, Layout, Space, Spin, Tree, Typography } from 'antd';\nimport classNames from 'classnames';\nimport {\n  Dispatch,\n  SetStateAction,\n  useCallback,\n  useEffect,\n  useMemo,\n  useState,\n} from 'react';\n\nimport styles from './index.less';\n\nconst { Sider } = Layout;\n\ninterface IProps {\n  isFirstRender: boolean;\n  checkedList: string[];\n  setCheckedList: Dispatch<SetStateAction<string[]>>;\n}\n\nconst SearchSidebar = ({\n  isFirstRender,\n  checkedList,\n  setCheckedList,\n}: IProps) => {\n  const { list, loading } = useFetchKnowledgeList();\n\n  const groupedList = useMemo(() => {\n    return list.reduce((pre: TreeDataNode[], cur) => {\n      const parentItem = pre.find((x) => x.key === cur.embd_id);\n      const childItem: TreeDataNode = {\n        title: cur.name,\n        key: cur.id,\n        isLeaf: true,\n      };\n      if (parentItem) {\n        parentItem.children?.push(childItem);\n      } else {\n        pre.push({\n          title: cur.embd_id,\n          key: cur.embd_id,\n          isLeaf: false,\n          children: [childItem],\n        });\n      }\n\n      return pre;\n    }, []);\n  }, [list]);\n\n  const [expandedKeys, setExpandedKeys] = useState<React.Key[]>([]);\n  const [selectedKeys, setSelectedKeys] = useState<React.Key[]>([]);\n  const [autoExpandParent, setAutoExpandParent] = useState<boolean>(true);\n\n  const onExpand: TreeProps['onExpand'] = (expandedKeysValue) => {\n    // if not set autoExpandParent to false, if children expanded, parent can not collapse.\n    // or, you can remove all expanded children keys.\n    setExpandedKeys(expandedKeysValue);\n    setAutoExpandParent(false);\n  };\n\n  const onCheck: TreeProps['onCheck'] = (checkedKeysValue, info) => {\n    console.log('onCheck', checkedKeysValue, info);\n    const currentCheckedKeysValue = checkedKeysValue as string[];\n\n    let nextSelectedKeysValue: string[] = [];\n    const { isLeaf, checked, key, children } = info.node;\n    if (isLeaf) {\n      const item = list.find((x) => x.id === key);\n      if (!checked) {\n        const embeddingIds = currentCheckedKeysValue\n          .filter((x) => list.some((y) => y.id === x))\n          .map((x) => list.find((y) => y.id === x)?.embd_id);\n\n        if (embeddingIds.some((x) => x !== item?.embd_id)) {\n          nextSelectedKeysValue = [key as string];\n        } else {\n          nextSelectedKeysValue = currentCheckedKeysValue;\n        }\n      } else {\n        nextSelectedKeysValue = currentCheckedKeysValue;\n      }\n    } else {\n      if (!checked) {\n        nextSelectedKeysValue = [\n          key as string,\n          ...(children?.map((x) => x.key as string) ?? []),\n        ];\n      } else {\n        nextSelectedKeysValue = [];\n      }\n    }\n\n    setCheckedList(nextSelectedKeysValue);\n  };\n\n  const onSelect: TreeProps['onSelect'] = (selectedKeysValue, info) => {\n    console.log('onSelect', info);\n\n    setSelectedKeys(selectedKeysValue);\n  };\n\n  const renderTitle = useCallback(\n    (node: TreeDataNode) => {\n      const item = list.find((x) => x.id === node.key);\n      return (\n        <Space>\n          {node.isLeaf && (\n            <Avatar size={24} icon={<UserOutlined />} src={item?.avatar} />\n          )}\n          <Typography.Text\n            ellipsis={{ tooltip: node.title as string }}\n            className={node.isLeaf ? styles.knowledgeName : styles.embeddingId}\n          >\n            {node.title as string}\n          </Typography.Text>\n        </Space>\n      );\n    },\n    [list],\n  );\n\n  useEffect(() => {\n    const firstGroup = groupedList[0]?.children?.map((x) => x.key as string);\n    if (firstGroup) {\n      setCheckedList(firstGroup);\n    }\n    setExpandedKeys(groupedList.map((x) => x.key));\n  }, [groupedList, setExpandedKeys, setCheckedList]);\n\n  return (\n    <Sider\n      className={classNames(styles.searchSide, {\n        [styles.transparentSearchSide]: isFirstRender,\n      })}\n      theme={'light'}\n      width={'20%'}\n    >\n      <Spin spinning={loading}>\n        <Tree\n          className={styles.list}\n          checkable\n          onExpand={onExpand}\n          expandedKeys={expandedKeys}\n          autoExpandParent={autoExpandParent}\n          onCheck={onCheck}\n          checkedKeys={checkedList}\n          onSelect={onSelect}\n          selectedKeys={selectedKeys}\n          treeData={groupedList}\n          titleRender={renderTitle}\n        />\n      </Spin>\n    </Sider>\n  );\n};\n\nexport default SearchSidebar;\n","import FileIcon from '@/components/file-icon';\nimport HightLightMarkdown from '@/components/highlight-markdown';\nimport { ImageWithPopover } from '@/components/image';\nimport PdfDrawer from '@/components/pdf-drawer';\nimport { useClickDrawer } from '@/components/pdf-drawer/hooks';\nimport RetrievalDocuments from '@/components/retrieval-documents';\nimport SvgIcon from '@/components/svg-icon';\nimport {\n  useFetchKnowledgeList,\n  useSelectTestingResult,\n} from '@/hooks/knowledge-hooks';\nimport { useGetPaginationWithRouter } from '@/hooks/logic-hooks';\nimport { IReference } from '@/interfaces/database/chat';\nimport {\n  Card,\n  Divider,\n  Flex,\n  FloatButton,\n  Input,\n  Layout,\n  List,\n  Pagination,\n  PaginationProps,\n  Popover,\n  Skeleton,\n  Space,\n  Spin,\n  Tag,\n  Tooltip,\n} from 'antd';\nimport DOMPurify from 'dompurify';\nimport { isEmpty } from 'lodash';\nimport { useMemo, useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport MarkdownContent from '../chat/markdown-content';\nimport { useSendQuestion, useShowMindMapDrawer } from './hooks';\nimport styles from './index.less';\nimport MindMapDrawer from './mindmap-drawer';\nimport SearchSidebar from './sidebar';\n\nconst { Content } = Layout;\nconst { Search } = Input;\n\nconst SearchPage = () => {\n  const { t } = useTranslation();\n  const [checkedList, setCheckedList] = useState<string[]>([]);\n  const { chunks, total } = useSelectTestingResult();\n  const { list: knowledgeList } = useFetchKnowledgeList();\n  const checkedWithoutEmbeddingIdList = useMemo(() => {\n    return checkedList.filter((x) => knowledgeList.some((y) => y.id === x));\n  }, [checkedList, knowledgeList]);\n\n  const {\n    sendQuestion,\n    handleClickRelatedQuestion,\n    handleSearchStrChange,\n    handleTestChunk,\n    setSelectedDocumentIds,\n    answer,\n    sendingLoading,\n    relatedQuestions,\n    searchStr,\n    loading,\n    isFirstRender,\n    selectedDocumentIds,\n    isSearchStrEmpty,\n  } = useSendQuestion(checkedWithoutEmbeddingIdList);\n  const { visible, hideModal, documentId, selectedChunk, clickDocumentButton } =\n    useClickDrawer();\n  const { pagination } = useGetPaginationWithRouter();\n  const {\n    mindMapVisible,\n    hideMindMapModal,\n    showMindMapModal,\n    mindMapLoading,\n    mindMap,\n  } = useShowMindMapDrawer(checkedWithoutEmbeddingIdList, searchStr);\n\n  const onChange: PaginationProps['onChange'] = (pageNumber, pageSize) => {\n    pagination.onChange?.(pageNumber, pageSize);\n    handleTestChunk(selectedDocumentIds, pageNumber, pageSize);\n  };\n\n  const InputSearch = (\n    <Search\n      value={searchStr}\n      onChange={handleSearchStrChange}\n      placeholder={t('header.search')}\n      allowClear\n      enterButton\n      onSearch={sendQuestion}\n      size=\"large\"\n      loading={sendingLoading}\n      disabled={checkedWithoutEmbeddingIdList.length === 0}\n      className={isFirstRender ? styles.globalInput : styles.partialInput}\n    />\n  );\n\n  return (\n    <>\n      <Layout className={styles.searchPage}>\n        <SearchSidebar\n          isFirstRender={isFirstRender}\n          checkedList={checkedWithoutEmbeddingIdList}\n          setCheckedList={setCheckedList}\n        ></SearchSidebar>\n        <Layout className={isFirstRender ? styles.mainLayout : ''}>\n          <Content>\n            {isFirstRender ? (\n              <Flex justify=\"center\" className={styles.firstRenderContent}>\n                <Flex vertical align=\"center\" gap={'large'}>\n                  {InputSearch}\n                </Flex>\n              </Flex>\n            ) : (\n              <Flex className={styles.content}>\n                <section className={styles.main}>\n                  {InputSearch}\n                  <Card\n                    title={\n                      <Flex gap={10}>\n                        <img src=\"/logo.svg\" alt=\"\" width={20} />\n                        {t('chat.answerTitle')}\n                      </Flex>\n                    }\n                    className={styles.answerWrapper}\n                  >\n                    {isEmpty(answer) && sendingLoading ? (\n                      <Skeleton active />\n                    ) : (\n                      answer.answer && (\n                        <MarkdownContent\n                          loading={sendingLoading}\n                          content={answer.answer}\n                          reference={answer.reference ?? ({} as IReference)}\n                          clickDocumentButton={clickDocumentButton}\n                        ></MarkdownContent>\n                      )\n                    )}\n                  </Card>\n                  <Divider></Divider>\n                  <RetrievalDocuments\n                    selectedDocumentIds={selectedDocumentIds}\n                    setSelectedDocumentIds={setSelectedDocumentIds}\n                    onTesting={handleTestChunk}\n                  ></RetrievalDocuments>\n                  <Divider></Divider>\n                  <Spin spinning={loading}>\n                    {chunks?.length > 0 && (\n                      <List\n                        dataSource={chunks || []}\n                        className={styles.chunks}\n                        renderItem={(item) => (\n                          <List.Item>\n                            <Card className={styles.card}>\n                              <Space>\n                                <ImageWithPopover\n                                  id={item.img_id}\n                                ></ImageWithPopover>\n                                <Flex vertical gap={10}>\n                                  <Popover\n                                    content={\n                                      <div className={styles.popupMarkdown}>\n                                        <HightLightMarkdown>\n                                          {item.content_with_weight}\n                                        </HightLightMarkdown>\n                                      </div>\n                                    }\n                                  >\n                                    <div\n                                      dangerouslySetInnerHTML={{\n                                        __html: DOMPurify.sanitize(\n                                          `${item.highlight}...`,\n                                        ),\n                                      }}\n                                      className={styles.highlightContent}\n                                    ></div>\n                                  </Popover>\n                                  <Space\n                                    className={styles.documentReference}\n                                    onClick={() =>\n                                      clickDocumentButton(\n                                        item.doc_id,\n                                        item as any,\n                                      )\n                                    }\n                                  >\n                                    <FileIcon\n                                      id={item.image_id}\n                                      name={item.docnm_kwd}\n                                    ></FileIcon>\n                                    {item.docnm_kwd}\n                                  </Space>\n                                </Flex>\n                              </Space>\n                            </Card>\n                          </List.Item>\n                        )}\n                      />\n                    )}\n                  </Spin>\n                  {relatedQuestions?.length > 0 && (\n                    <Card title={t('chat.relatedQuestion')}>\n                      <Flex wrap=\"wrap\" gap={'10px 0'}>\n                        {relatedQuestions?.map((x, idx) => (\n                          <Tag\n                            key={idx}\n                            className={styles.tag}\n                            onClick={handleClickRelatedQuestion(x)}\n                          >\n                            {x}\n                          </Tag>\n                        ))}\n                      </Flex>\n                    </Card>\n                  )}\n                  <Divider></Divider>\n                  <Pagination\n                    {...pagination}\n                    total={total}\n                    onChange={onChange}\n                    className={styles.pagination}\n                  />\n                </section>\n              </Flex>\n            )}\n          </Content>\n        </Layout>\n      </Layout>\n      {!isFirstRender &&\n        !isSearchStrEmpty &&\n        !isEmpty(checkedWithoutEmbeddingIdList) && (\n          <Tooltip title={t('chunk.mind')} zIndex={1}>\n            <FloatButton\n              className={styles.mindMapFloatButton}\n              onClick={showMindMapModal}\n              icon={\n                <SvgIcon name=\"paper-clip\" width={24} height={30}></SvgIcon>\n              }\n            />\n          </Tooltip>\n        )}\n      {visible && (\n        <PdfDrawer\n          visible={visible}\n          hideModal={hideModal}\n          documentId={documentId}\n          chunk={selectedChunk}\n        ></PdfDrawer>\n      )}\n      {mindMapVisible && (\n        <MindMapDrawer\n          visible={mindMapVisible}\n          hideModal={hideMindMapModal}\n          data={mindMap}\n          loading={mindMapLoading}\n        ></MindMapDrawer>\n      )}\n    </>\n  );\n};\n\nexport default SearchPage;\n","var __defProp = Object.defineProperty;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nimport * as React from \"react\";\nconst SvgSelectedFilesCollapse = (props) => /* @__PURE__ */ React.createElement(\"svg\", __spreadValues({ width: 20, height: 20, fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\" }, props), /* @__PURE__ */ React.createElement(\"path\", { d: \"M6.667 10h6.666M6.5 17.5h7c1.4 0 2.1 0 2.635-.273a2.5 2.5 0 0 0 1.092-1.092c.273-.535.273-1.235.273-2.635v-7c0-1.4 0-2.1-.273-2.635a2.5 2.5 0 0 0-1.092-1.093C15.6 2.5 14.9 2.5 13.5 2.5h-7c-1.4 0-2.1 0-2.635.272a2.5 2.5 0 0 0-1.093 1.093C2.5 4.4 2.5 5.1 2.5 6.5v7c0 1.4 0 2.1.272 2.635a2.5 2.5 0 0 0 1.093 1.092C4.4 17.5 5.1 17.5 6.5 17.5Z\", stroke: \"#7F56D9\", strokeWidth: 2, strokeLinecap: \"round\", strokeLinejoin: \"round\" }));\nexport { SvgSelectedFilesCollapse as ReactComponent };\nexport default \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTYuNjY3IDEwaDYuNjY2TTYuNSAxNy41aDdjMS40IDAgMi4xIDAgMi42MzUtLjI3M2EyLjUgMi41IDAgMCAwIDEuMDkyLTEuMDkyYy4yNzMtLjUzNS4yNzMtMS4yMzUuMjczLTIuNjM1di03YzAtMS40IDAtMi4xLS4yNzMtMi42MzVhMi41IDIuNSAwIDAgMC0xLjA5Mi0xLjA5M0MxNS42IDIuNSAxNC45IDIuNSAxMy41IDIuNWgtN2MtMS40IDAtMi4xIDAtMi42MzUuMjcyYTIuNSAyLjUgMCAwIDAtMS4wOTMgMS4wOTNDMi41IDQuNCAyLjUgNS4xIDIuNSA2LjV2N2MwIDEuNCAwIDIuMS4yNzIgMi42MzVhMi41IDIuNSAwIDAgMCAxLjA5MyAxLjA5MkM0LjQgMTcuNSA1LjEgMTcuNSA2LjUgMTcuNVoiIHN0cm9rZT0iIzdGNTZEOSIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz48L3N2Zz4=\";\n"],"names":["_ref","setSelectedDocumentIds","handleTesting","documents","useSelectTestingResult","t","useTranslate","columns","title","dataIndex","key","render","text","_jsx","children","width","_","_ref2","doc_id","doc_name","NewDocumentLink","documentName","documentId","prefix","Tooltip","Button","type","EyeOutlined","size","rowSelection","onChange","selectedRowKeys","getCheckboxProps","record","disabled","name","Table","dataSource","showHeader","rowKey","_selectedDocumentIds$","_documents$length","onTesting","selectedDocumentIds","useTranslation","Collapse","expandIcon","SelectedFilesCollapseIcon","className","styles","items","label","Flex","justify","align","_jsxs","Space","length","SelectFiles","_useState15","_useState16","count","setCount","ref","setCountInterval","data","hideModal","visible","loading","percent","useState","_slicedToArray","useRef","useCallback","current","setInterval","pre","clearInterval","useEffect","Number","toFixed","Drawer","onClose","open","Progress","IndentedTree","show","style","height","Sider","Layout","isFirstRender","checkedList","setCheckedList","_useFetchKnowledgeLis","useFetchKnowledgeList","list","groupedList","useMemo","reduce","cur","_parentItem$children","parentItem","find","x","embd_id","childItem","id","isLeaf","push","_useState","_useState2","expandedKeys","setExpandedKeys","_useState3","_useState4","selectedKeys","setSelectedKeys","_useState5","_useState6","autoExpandParent","setAutoExpandParent","renderTitle","node","item","Avatar","icon","UserOutlined","src","avatar","Typography","Text","ellipsis","tooltip","knowledgeName","embeddingId","_groupedList$","firstGroup","map","classNames","searchSide","_defineProperty","transparentSearchSide","theme","Spin","spinning","Tree","checkable","onExpand","expandedKeysValue","onCheck","checkedKeysValue","info","console","log","currentCheckedKeysValue","nextSelectedKeysValue","_info$node","checked","filter","some","y","_list$find","_children$map","concat","_toConsumableArray","checkedKeys","onSelect","selectedKeysValue","treeData","titleRender","Content","Search","Input","_answer$reference","_useSelectTestingResu","chunks","total","knowledgeList","checkedWithoutEmbeddingIdList","_useSendQuestion","kbIds","_relatedQuestions$sli","_useSendMessageWithSs","useSendMessageWithSse","api","ask","send","answer","done","_useTestChunkRetrieva","useTestChunkRetrieval","testChunk","sendingLoading","setSendingLoading","currentAnswer","setCurrentAnswer","_useFetchRelatedQuest","useFetchRelatedQuestions","fetchRelatedQuestions","relatedQuestions","searchStr","setSearchStr","_useState7","_useState8","setIsFirstRender","_useState9","_useState10","_useGetPaginationWith","useGetPaginationWithRouter","pagination","setPagination","sendQuestion","question","q","trim","isEmpty","page","kb_ids","kb_id","highlight","pageSize","handleSearchStrChange","e","target","value","handleClickRelatedQuestion","handleTestChunk","documentIds","arguments","undefined","doc_ids","slice","isSearchStrEmpty","useSendQuestion","_useClickDrawer","useClickDrawer","selectedChunk","clickDocumentButton","_useShowMindMapDrawer","_useSetModalState","useSetModalState","showModal","_useFetchMindMap","useFetchMindMap","fetchMindMap","mindMap","mindMapVisible","mindMapLoading","showMindMapModal","searchParams","isEqual","hideMindMapModal","useShowMindMapDrawer","InputSearch","placeholder","allowClear","enterButton","onSearch","globalInput","partialInput","_Fragment","searchPage","SearchSidebar","mainLayout","firstRenderContent","vertical","gap","content","main","Card","alt","answerWrapper","Skeleton","active","MarkdownContent","reference","Divider","RetrievalDocuments","List","renderItem","Item","card","ImageWithPopover","img_id","Popover","popupMarkdown","HightLightMarkdown","content_with_weight","dangerouslySetInnerHTML","__html","DOMPurify","highlightContent","documentReference","onClick","FileIcon","image_id","docnm_kwd","wrap","idx","Tag","tag","Pagination","_objectSpread","pageNumber","_pagination$onChange","call","zIndex","FloatButton","mindMapFloatButton","SvgIcon","PdfDrawer","chunk","MindMapDrawer","__defProp","Object","defineProperty","__getOwnPropSymbols","getOwnPropertySymbols","__hasOwnProp","prototype","hasOwnProperty","__propIsEnum","propertyIsEnumerable","__defNormalProp","obj","enumerable","configurable","writable","SvgSelectedFilesCollapse","props","a","b","prop","__spreadValues","fill","xmlns","d","stroke","strokeWidth","strokeLinecap","strokeLinejoin"],"sourceRoot":""}