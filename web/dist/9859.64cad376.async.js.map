{"version":3,"file":"9859.64cad376.async.js","mappings":"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","sources":["webpack:///./src/components/file-icon/index.less?cab7","webpack:///./src/components/file-icon/index.tsx","webpack:///./src/components/highlight-markdown/index.less?13d5","webpack:///./src/components/highlight-markdown/index.tsx","webpack:///./src/components/image/index.less?25dc","webpack:///./src/components/image/index.tsx","webpack:///./src/components/indented-tree/indented-tree.tsx","webpack:///./src/components/new-document-link.tsx","webpack:///./src/components/pdf-drawer/hooks.ts","webpack:///./src/components/pdf-previewer/index.less?80cf","webpack:///./src/components/pdf-previewer/index.tsx","webpack:///./src/components/pdf-drawer/index.tsx","webpack:///./src/components/pdf-previewer/hooks.ts","webpack:///./src/hooks/knowledge-hooks.ts","webpack:///./src/pages/chat/markdown-content/index.less?ed51","webpack:///./src/pages/chat/markdown-content/index.tsx","webpack:///./src/pages/chat/utils.ts","webpack:///./src/pages/document-viewer/file-error/index.less?9a0d","webpack:///./src/pages/document-viewer/file-error/index.tsx"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"thumbnailImg\":\"thumbnailImg___cbGoI\"};","import { getExtension } from '@/utils/document-util';\nimport SvgIcon from '../svg-icon';\n\nimport { useFetchDocumentThumbnailsByIds } from '@/hooks/document-hooks';\nimport { useEffect } from 'react';\nimport styles from './index.less';\n\ninterface IProps {\n  name: string;\n  id: string;\n}\n\nconst FileIcon = ({ name, id }: IProps) => {\n  const fileExtension = getExtension(name);\n\n  const { data: fileThumbnails, setDocumentIds } =\n    useFetchDocumentThumbnailsByIds();\n  const fileThumbnail = fileThumbnails[id];\n\n  useEffect(() => {\n    if (id) {\n      setDocumentIds([id]);\n    }\n  }, [id, setDocumentIds]);\n\n  return fileThumbnail ? (\n    <img src={fileThumbnail} className={styles.thumbnailImg}></img>\n  ) : (\n    <SvgIcon name={`file-icon/${fileExtension}`} width={24}></SvgIcon>\n  );\n};\n\nexport default FileIcon;\n","// extracted by mini-css-extract-plugin\nexport default {\"text\":\"text___QzeTq\",\"code\":\"code___dMLXp\"};","import classNames from 'classnames';\nimport Markdown from 'react-markdown';\nimport { Prism as SyntaxHighlighter } from 'react-syntax-highlighter';\nimport rehypeKatex from 'rehype-katex';\nimport rehypeRaw from 'rehype-raw';\nimport remarkGfm from 'remark-gfm';\nimport remarkMath from 'remark-math';\n\nimport 'katex/dist/katex.min.css'; // `rehype-katex` does not import the CSS for you\n\nimport { preprocessLaTeX } from '@/utils/chat';\nimport styles from './index.less';\n\nconst HightLightMarkdown = ({\n  children,\n}: {\n  children: string | null | undefined;\n}) => {\n  return (\n    <Markdown\n      remarkPlugins={[remarkGfm, remarkMath]}\n      rehypePlugins={[rehypeRaw, rehypeKatex]}\n      className={classNames(styles.text)}\n      components={\n        {\n          code(props: any) {\n            const { children, className, node, ...rest } = props;\n            const match = /language-(\\w+)/.exec(className || '');\n            return match ? (\n              <SyntaxHighlighter\n                {...rest}\n                PreTag=\"div\"\n                language={match[1]}\n                // style={dark}\n              >\n                {String(children).replace(/\\n$/, '')}\n              </SyntaxHighlighter>\n            ) : (\n              <code {...rest} className={`${className} ${styles.code}`}>\n                {children}\n              </code>\n            );\n          },\n        } as any\n      }\n    >\n      {children ? preprocessLaTeX(children) : children}\n    </Markdown>\n  );\n};\n\nexport default HightLightMarkdown;\n","// extracted by mini-css-extract-plugin\nexport default {\"primitiveImg\":\"primitiveImg___VkCiH\",\"image\":\"image___BCkCB\",\"imagePreview\":\"imagePreview___qFyP3\"};","import { api_host } from '@/utils/api';\nimport { Popover } from 'antd';\nimport classNames from 'classnames';\n\nimport styles from './index.less';\n\ninterface IImage {\n  id: string;\n  className: string;\n}\n\nconst Image = ({ id, className, ...props }: IImage) => {\n  return (\n    <img\n      {...props}\n      src={`${api_host}/document/image/${id}`}\n      alt=\"\"\n      className={classNames(styles.primitiveImg, className)}\n    />\n  );\n};\n\nexport default Image;\n\nexport const ImageWithPopover = ({ id }: { id: string }) => {\n  return (\n    <Popover\n      placement=\"left\"\n      content={<Image id={id} className={styles.imagePreview}></Image>}\n    >\n      <Image id={id} className={styles.image}></Image>\n    </Popover>\n  );\n};\n","import { Rect } from '@antv/g';\nimport {\n  Badge,\n  BaseBehavior,\n  BaseNode,\n  CommonEvent,\n  ExtensionCategory,\n  Graph,\n  NodeEvent,\n  Point,\n  Polyline,\n  PolylineStyleProps,\n  register,\n  subStyleProps,\n  treeToGraphData,\n} from '@antv/g6';\nimport { TreeData } from '@antv/g6/lib/types';\nimport isEmpty from 'lodash/isEmpty';\nimport React, { useCallback, useEffect, useRef } from 'react';\nimport { ErrorBoundary, FallbackProps } from 'react-error-boundary';\n\nconst rootId = 'root';\n\nconst COLORS = [\n  '#5B8FF9',\n  '#F6BD16',\n  '#5AD8A6',\n  '#945FB9',\n  '#E86452',\n  '#6DC8EC',\n  '#FF99C3',\n  '#1E9493',\n  '#FF9845',\n  '#5D7092',\n];\n\nconst TreeEvent = {\n  COLLAPSE_EXPAND: 'collapse-expand',\n  WHEEL: 'canvas:wheel',\n};\n\nclass IndentedNode extends BaseNode {\n  static defaultStyleProps = {\n    ports: [\n      {\n        key: 'in',\n        placement: 'right-bottom',\n      },\n      {\n        key: 'out',\n        placement: 'left-bottom',\n      },\n    ],\n  } as any;\n\n  constructor(options: any) {\n    Object.assign(options.style, IndentedNode.defaultStyleProps);\n    super(options);\n  }\n\n  get childrenData() {\n    return this.attributes.context?.model.getChildrenData(this.id);\n  }\n\n  getKeyStyle(attributes: any) {\n    const [width, height] = this.getSize(attributes);\n    const keyStyle = super.getKeyStyle(attributes);\n    return {\n      width,\n      height,\n      ...keyStyle,\n      fill: 'transparent',\n    };\n  }\n\n  drawKeyShape(attributes: any, container: any) {\n    const keyStyle = this.getKeyStyle(attributes);\n    return this.upsert('key', Rect, keyStyle, container);\n  }\n\n  getLabelStyle(attributes: any) {\n    if (attributes.label === false || !attributes.labelText) return false;\n    return subStyleProps(this.getGraphicStyle(attributes), 'label') as any;\n  }\n\n  drawIconArea(attributes: any, container: any) {\n    const [, h] = this.getSize(attributes);\n    const iconAreaStyle = {\n      fill: 'transparent',\n      height: 30,\n      width: 12,\n      x: -6,\n      y: h,\n      zIndex: -1,\n    };\n    this.upsert('icon-area', Rect, iconAreaStyle, container);\n  }\n\n  forwardEvent(target: any, type: any, listener: any) {\n    if (target && !Reflect.has(target, '__bind__')) {\n      Reflect.set(target, '__bind__', true);\n      target.addEventListener(type, listener);\n    }\n  }\n\n  getCountStyle(attributes: any) {\n    const { collapsed, color } = attributes;\n    if (collapsed) {\n      const [, height] = this.getSize(attributes);\n      return {\n        backgroundFill: color,\n        cursor: 'pointer',\n        fill: '#fff',\n        fontSize: 8,\n        padding: [0, 10],\n        text: `${this.childrenData?.length}`,\n        textAlign: 'center',\n        y: height + 8,\n      };\n    }\n\n    return false;\n  }\n\n  drawCountShape(attributes: any, container: any) {\n    const countStyle = this.getCountStyle(attributes);\n    const btn = this.upsert('count', Badge, countStyle as any, container);\n\n    this.forwardEvent(btn, CommonEvent.CLICK, (event: any) => {\n      event.stopPropagation();\n      attributes.context.graph.emit(TreeEvent.COLLAPSE_EXPAND, {\n        id: this.id,\n        collapsed: false,\n      });\n    });\n  }\n\n  isShowCollapse(attributes: any) {\n    return (\n      !attributes.collapsed &&\n      Array.isArray(this.childrenData) &&\n      this.childrenData?.length > 0\n    );\n  }\n\n  getCollapseStyle(attributes: any) {\n    const { showIcon, color } = attributes;\n    if (!this.isShowCollapse(attributes)) return false;\n    const [, height] = this.getSize(attributes);\n    return {\n      visibility: showIcon ? 'visible' : 'hidden',\n      backgroundFill: color,\n      backgroundHeight: 12,\n      backgroundWidth: 12,\n      cursor: 'pointer',\n      fill: '#fff',\n      fontFamily: 'iconfont',\n      fontSize: 8,\n      text: '\\ue6e4',\n      textAlign: 'center',\n      x: -1, // half of edge line width\n      y: height + 8,\n    };\n  }\n\n  drawCollapseShape(attributes: any, container: any) {\n    const iconStyle = this.getCollapseStyle(attributes);\n    const btn = this.upsert(\n      'collapse-expand',\n      Badge,\n      iconStyle as any,\n      container,\n    );\n\n    this.forwardEvent(btn, CommonEvent.CLICK, (event: any) => {\n      event.stopPropagation();\n      attributes.context.graph.emit(TreeEvent.COLLAPSE_EXPAND, {\n        id: this.id,\n        collapsed: !attributes.collapsed,\n      });\n    });\n  }\n\n  getAddStyle(attributes: any) {\n    const { collapsed, showIcon } = attributes;\n    if (collapsed) return false;\n    const [, height] = this.getSize(attributes);\n    const color = '#ddd';\n    const lineWidth = 1;\n\n    return {\n      visibility: showIcon ? 'visible' : 'hidden',\n      backgroundFill: '#fff',\n      backgroundHeight: 12,\n      backgroundLineWidth: lineWidth,\n      backgroundStroke: color,\n      backgroundWidth: 12,\n      cursor: 'pointer',\n      fill: color,\n      fontFamily: 'iconfont',\n      text: '\\ue664',\n      textAlign: 'center',\n      x: -1,\n      y: height + (this.isShowCollapse(attributes) ? 22 : 8),\n    };\n  }\n\n  render(attributes = this.parsedAttributes, container = this) {\n    super.render(attributes, container);\n\n    this.drawCountShape(attributes, container);\n\n    this.drawIconArea(attributes, container);\n    this.drawCollapseShape(attributes, container);\n  }\n}\n\nclass IndentedEdge extends Polyline {\n  getControlPoints(\n    attributes: Required<PolylineStyleProps>,\n    sourcePoint: Point,\n    targetPoint: Point,\n  ) {\n    const [sx] = sourcePoint;\n    const [, ty] = targetPoint;\n    return [[sx, ty]] as any;\n  }\n}\n\nclass CollapseExpandTree extends BaseBehavior {\n  constructor(context: any, options: any) {\n    super(context, options);\n    this.bindEvents();\n  }\n\n  update(options: any) {\n    this.unbindEvents();\n    super.update(options);\n    this.bindEvents();\n  }\n\n  bindEvents() {\n    const { graph } = this.context;\n\n    graph.on(NodeEvent.POINTER_ENTER, this.showIcon);\n    graph.on(NodeEvent.POINTER_LEAVE, this.hideIcon);\n    graph.on(TreeEvent.COLLAPSE_EXPAND, this.onCollapseExpand);\n  }\n\n  unbindEvents() {\n    const { graph } = this.context;\n\n    graph.off(NodeEvent.POINTER_ENTER, this.showIcon);\n    graph.off(NodeEvent.POINTER_LEAVE, this.hideIcon);\n    graph.off(TreeEvent.COLLAPSE_EXPAND, this.onCollapseExpand);\n  }\n\n  status = 'idle';\n\n  showIcon = (event: any) => {\n    this.setIcon(event, true);\n  };\n\n  hideIcon = (event: any) => {\n    this.setIcon(event, false);\n  };\n\n  setIcon = (event: any, show: boolean) => {\n    if (this.status !== 'idle') return;\n    const { target } = event;\n    const id = target.id;\n    const { graph, element } = this.context;\n    graph.updateNodeData([{ id, style: { showIcon: show } }]);\n    element?.draw({ animation: false, silence: true });\n  };\n\n  onCollapseExpand = async (event: any) => {\n    this.status = 'busy';\n    const { id, collapsed } = event;\n    const { graph } = this.context;\n    if (collapsed) await graph.collapseElement(id);\n    else await graph.expandElement(id);\n    this.status = 'idle';\n  };\n}\n\nregister(ExtensionCategory.NODE, 'indented', IndentedNode);\nregister(ExtensionCategory.EDGE, 'indented', IndentedEdge);\nregister(\n  ExtensionCategory.BEHAVIOR,\n  'collapse-expand-tree',\n  CollapseExpandTree,\n);\n\ninterface IProps {\n  data: TreeData;\n  show: boolean;\n  style?: React.CSSProperties;\n}\n\nfunction fallbackRender({ error }: FallbackProps) {\n  // Call resetErrorBoundary() to reset the error boundary and retry the render.\n\n  return (\n    <div role=\"alert\">\n      <p>Something went wrong:</p>\n      <pre style={{ color: 'red' }}>{error.message}</pre>\n    </div>\n  );\n}\n\nconst IndentedTree = ({ data, show, style = {} }: IProps) => {\n  const containerRef = useRef<HTMLDivElement>(null);\n  const graphRef = useRef<Graph | null>(null);\n  const assignIds = React.useCallback(function assignIds(\n    node: TreeData,\n    parentId: string = '',\n    index = 0,\n  ) {\n    if (!node.id) node.id = parentId ? `${parentId}-${index}` : 'root';\n    if (node.children) {\n      node.children.forEach((child, idx) => assignIds(child, node.id, idx));\n    }\n  }, []);\n\n  const render = useCallback(\n    async (data: TreeData) => {\n      const graph: Graph = new Graph({\n        container: containerRef.current!,\n        x: 60,\n        node: {\n          type: 'indented',\n          style: {\n            size: (d) => [d.id.length * 6 + 10, 20],\n            labelBackground: (datum) => datum.id === rootId,\n            labelBackgroundRadius: 0,\n            labelBackgroundFill: '#576286',\n            labelFill: (datum) => (datum.id === rootId ? '#fff' : '#666'),\n            labelText: (d) => d.style?.labelText || d.id,\n            labelTextAlign: (datum) =>\n              datum.id === rootId ? 'center' : 'left',\n            labelTextBaseline: 'top',\n            color: (datum: any) => {\n              const depth = graph.getAncestorsData(datum.id, 'tree').length - 1;\n              return COLORS[depth % COLORS.length] || '#576286';\n            },\n          },\n          state: {\n            selected: {\n              lineWidth: 0,\n              labelFill: '#40A8FF',\n              labelBackground: true,\n              labelFontWeight: 'normal',\n              labelBackgroundFill: '#e8f7ff',\n              labelBackgroundRadius: 10,\n            },\n          },\n        },\n        edge: {\n          type: 'indented',\n          style: {\n            radius: 16,\n            lineWidth: 2,\n            sourcePort: 'out',\n            targetPort: 'in',\n            stroke: (datum: any) => {\n              const depth = graph.getAncestorsData(datum.source, 'tree').length;\n              return COLORS[depth % COLORS.length] || 'black';\n            },\n          },\n        },\n        layout: {\n          type: 'indented',\n          direction: 'LR',\n          isHorizontal: true,\n          indent: 40,\n          getHeight: () => 20,\n          getVGap: () => 10,\n        },\n        behaviors: [\n          'scroll-canvas',\n          'collapse-expand-tree',\n          {\n            type: 'click-select',\n            enable: (event: any) =>\n              event.targetType === 'node' && event.target.id !== rootId,\n          },\n        ],\n      });\n\n      if (graphRef.current) {\n        graphRef.current.destroy();\n      }\n\n      graphRef.current = graph;\n\n      assignIds(data);\n\n      graph?.setData(treeToGraphData(data));\n\n      graph?.render();\n    },\n    [assignIds],\n  );\n\n  useEffect(() => {\n    if (!isEmpty(data)) {\n      render(data);\n    }\n  }, [render, data]);\n\n  return (\n    <ErrorBoundary fallbackRender={fallbackRender}>\n      <div\n        id=\"tree\"\n        ref={containerRef}\n        style={{\n          width: '90vw',\n          height: '80vh',\n          display: show ? 'block' : 'none',\n          ...style,\n        }}\n      />\n    </ErrorBoundary>\n  );\n};\n\nexport default IndentedTree;\n","import {\n  getExtension,\n  isSupportedPreviewDocumentType,\n} from '@/utils/document-util';\nimport React from 'react';\n\ninterface IProps extends React.PropsWithChildren {\n  link?: string;\n  preventDefault?: boolean;\n  color?: string;\n  documentName: string;\n  documentId?: string;\n  prefix?: string;\n}\n\nconst NewDocumentLink = ({\n  children,\n  link,\n  preventDefault = false,\n  color = 'rgb(15, 79, 170)',\n  documentId,\n  documentName,\n  prefix = 'file',\n}: IProps) => {\n  let nextLink = link;\n  const extension = getExtension(documentName);\n  if (!link) {\n    nextLink = `/document/${documentId}?ext=${extension}&prefix=${prefix}`;\n  }\n\n  return (\n    <a\n      target=\"_blank\"\n      onClick={\n        !preventDefault || isSupportedPreviewDocumentType(extension)\n          ? undefined\n          : (e) => e.preventDefault()\n      }\n      href={nextLink}\n      rel=\"noreferrer\"\n      style={{ color, wordBreak: 'break-all' }}\n    >\n      {children}\n    </a>\n  );\n};\n\nexport default NewDocumentLink;\n","import { useSetModalState } from '@/hooks/common-hooks';\nimport { IReferenceChunk } from '@/interfaces/database/chat';\nimport { useCallback, useState } from 'react';\n\nexport const useClickDrawer = () => {\n  const { visible, showModal, hideModal } = useSetModalState();\n  const [selectedChunk, setSelectedChunk] = useState<IReferenceChunk>(\n    {} as IReferenceChunk,\n  );\n  const [documentId, setDocumentId] = useState<string>('');\n\n  const clickDocumentButton = useCallback(\n    (documentId: string, chunk: IReferenceChunk) => {\n      showModal();\n      setSelectedChunk(chunk);\n      setDocumentId(documentId);\n    },\n    [showModal],\n  );\n\n  return {\n    clickDocumentButton,\n    visible,\n    showModal,\n    hideModal,\n    selectedChunk,\n    documentId,\n  };\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"documentContainer\":\"documentContainer___kWzt7\"};","import {\n  useGetChunkHighlights,\n  useGetDocumentUrl,\n} from '@/hooks/document-hooks';\nimport { IReferenceChunk } from '@/interfaces/database/chat';\nimport { IChunk } from '@/interfaces/database/knowledge';\nimport FileError from '@/pages/document-viewer/file-error';\nimport { Skeleton } from 'antd';\nimport { useEffect, useRef, useState } from 'react';\nimport {\n  AreaHighlight,\n  Highlight,\n  IHighlight,\n  PdfHighlighter,\n  PdfLoader,\n  Popup,\n} from 'react-pdf-highlighter';\nimport { useCatchDocumentError } from './hooks';\n\nimport styles from './index.less';\n\ninterface IProps {\n  chunk: IChunk | IReferenceChunk;\n  documentId: string;\n  visible: boolean;\n}\n\nconst HighlightPopup = ({\n  comment,\n}: {\n  comment: { text: string; emoji: string };\n}) =>\n  comment.text ? (\n    <div className=\"Highlight__popup\">\n      {comment.emoji} {comment.text}\n    </div>\n  ) : null;\n\nconst DocumentPreviewer = ({ chunk, documentId, visible }: IProps) => {\n  const getDocumentUrl = useGetDocumentUrl(documentId);\n  const { highlights: state, setWidthAndHeight } = useGetChunkHighlights(chunk);\n  const ref = useRef<(highlight: IHighlight) => void>(() => {});\n  const [loaded, setLoaded] = useState(false);\n  const url = getDocumentUrl();\n  const error = useCatchDocumentError(url);\n\n  const resetHash = () => {};\n\n  useEffect(() => {\n    setLoaded(visible);\n  }, [visible]);\n\n  useEffect(() => {\n    if (state.length > 0 && loaded) {\n      setLoaded(false);\n      ref.current(state[0]);\n    }\n  }, [state, loaded]);\n\n  return (\n    <div className={styles.documentContainer}>\n      <PdfLoader\n        url={url}\n        beforeLoad={<Skeleton active />}\n        workerSrc=\"/pdfjs-dist/pdf.worker.min.js\"\n        errorMessage={<FileError>{error}</FileError>}\n      >\n        {(pdfDocument) => {\n          pdfDocument.getPage(1).then((page) => {\n            const viewport = page.getViewport({ scale: 1 });\n            const width = viewport.width;\n            const height = viewport.height;\n            setWidthAndHeight(width, height);\n          });\n\n          return (\n            <PdfHighlighter\n              pdfDocument={pdfDocument}\n              enableAreaSelection={(event) => event.altKey}\n              onScrollChange={resetHash}\n              scrollRef={(scrollTo) => {\n                ref.current = scrollTo;\n                setLoaded(true);\n              }}\n              onSelectionFinished={() => null}\n              highlightTransform={(\n                highlight,\n                index,\n                setTip,\n                hideTip,\n                viewportToScaled,\n                screenshot,\n                isScrolledTo,\n              ) => {\n                const isTextHighlight = !Boolean(\n                  highlight.content && highlight.content.image,\n                );\n\n                const component = isTextHighlight ? (\n                  <Highlight\n                    isScrolledTo={isScrolledTo}\n                    position={highlight.position}\n                    comment={highlight.comment}\n                  />\n                ) : (\n                  <AreaHighlight\n                    isScrolledTo={isScrolledTo}\n                    highlight={highlight}\n                    onChange={() => {}}\n                  />\n                );\n\n                return (\n                  <Popup\n                    popupContent={<HighlightPopup {...highlight} />}\n                    onMouseOver={(popupContent) =>\n                      setTip(highlight, () => popupContent)\n                    }\n                    onMouseOut={hideTip}\n                    key={index}\n                  >\n                    {component}\n                  </Popup>\n                );\n              }}\n              highlights={state}\n            />\n          );\n        }}\n      </PdfLoader>\n    </div>\n  );\n};\n\nexport default DocumentPreviewer;\n","import { IModalProps } from '@/interfaces/common';\nimport { IReferenceChunk } from '@/interfaces/database/chat';\nimport { IChunk } from '@/interfaces/database/knowledge';\nimport { Drawer } from 'antd';\nimport DocumentPreviewer from '../pdf-previewer';\n\ninterface IProps extends IModalProps<any> {\n  documentId: string;\n  chunk: IChunk | IReferenceChunk;\n}\n\nexport const PdfDrawer = ({\n  visible = false,\n  hideModal,\n  documentId,\n  chunk,\n}: IProps) => {\n  return (\n    <Drawer\n      title=\"Document Previewer\"\n      onClose={hideModal}\n      open={visible}\n      width={'50vw'}\n    >\n      <DocumentPreviewer\n        documentId={documentId}\n        chunk={chunk}\n        visible={visible}\n      ></DocumentPreviewer>\n    </Drawer>\n  );\n};\n\nexport default PdfDrawer;\n","import axios from 'axios';\nimport { useCallback, useEffect, useState } from 'react';\n\nexport const useCatchDocumentError = (url: string) => {\n  const [error, setError] = useState<string>('');\n\n  const fetchDocument = useCallback(async () => {\n    const { data } = await axios.get(url);\n    if (data.code !== 0) {\n      setError(data?.message);\n    }\n  }, [url]);\n  useEffect(() => {\n    fetchDocument();\n  }, [fetchDocument]);\n\n  return error;\n};\n","import { ResponsePostType } from '@/interfaces/database/base';\nimport {\n  IKnowledge,\n  IKnowledgeGraph,\n  IRenameTag,\n  ITestingResult,\n} from '@/interfaces/database/knowledge';\nimport i18n from '@/locales/config';\nimport kbService, {\n  getKnowledgeGraph,\n  listTag,\n  removeTag,\n  renameTag,\n} from '@/services/knowledge-service';\nimport {\n  useInfiniteQuery,\n  useIsMutating,\n  useMutation,\n  useMutationState,\n  useQuery,\n  useQueryClient,\n} from '@tanstack/react-query';\nimport { useDebounce } from 'ahooks';\nimport { message } from 'antd';\nimport { useState } from 'react';\nimport { useSearchParams } from 'umi';\nimport { useHandleSearchChange } from './logic-hooks';\nimport { useSetPaginationParams } from './route-hook';\n\nexport const useKnowledgeBaseId = (): string => {\n  const [searchParams] = useSearchParams();\n  const knowledgeBaseId = searchParams.get('id');\n\n  return knowledgeBaseId || '';\n};\n\nexport const useFetchKnowledgeBaseConfiguration = () => {\n  const knowledgeBaseId = useKnowledgeBaseId();\n\n  const { data, isFetching: loading } = useQuery<IKnowledge>({\n    queryKey: ['fetchKnowledgeDetail'],\n    initialData: {} as IKnowledge,\n    gcTime: 0,\n    queryFn: async () => {\n      const { data } = await kbService.get_kb_detail({\n        kb_id: knowledgeBaseId,\n      });\n      return data?.data ?? {};\n    },\n  });\n\n  return { data, loading };\n};\n\nexport const useFetchKnowledgeList = (\n  shouldFilterListWithoutDocument: boolean = false,\n): {\n  list: IKnowledge[];\n  loading: boolean;\n} => {\n  const { data, isFetching: loading } = useQuery({\n    queryKey: ['fetchKnowledgeList'],\n    initialData: [],\n    gcTime: 0, // https://tanstack.com/query/latest/docs/framework/react/guides/caching?from=reactQueryV3\n    queryFn: async () => {\n      const { data } = await kbService.getList();\n      const list = data?.data?.kbs ?? [];\n      return shouldFilterListWithoutDocument\n        ? list.filter((x: IKnowledge) => x.chunk_num > 0)\n        : list;\n    },\n  });\n\n  return { list: data, loading };\n};\n\nexport const useSelectKnowledgeOptions = () => {\n  const { list } = useFetchKnowledgeList();\n\n  const options = list?.map((item) => ({\n    label: item.name,\n    value: item.id,\n  }));\n\n  return options;\n};\n\nexport const useInfiniteFetchKnowledgeList = () => {\n  const { searchString, handleInputChange } = useHandleSearchChange();\n  const debouncedSearchString = useDebounce(searchString, { wait: 500 });\n\n  const PageSize = 30;\n  const {\n    data,\n    error,\n    fetchNextPage,\n    hasNextPage,\n    isFetching,\n    isFetchingNextPage,\n    status,\n  } = useInfiniteQuery({\n    queryKey: ['infiniteFetchKnowledgeList', debouncedSearchString],\n    queryFn: async ({ pageParam }) => {\n      const { data } = await kbService.getList({\n        page: pageParam,\n        page_size: PageSize,\n        keywords: debouncedSearchString,\n      });\n      const list = data?.data ?? [];\n      return list;\n    },\n    initialPageParam: 1,\n    getNextPageParam: (lastPage, pages, lastPageParam) => {\n      if (lastPageParam * PageSize <= lastPage.total) {\n        return lastPageParam + 1;\n      }\n      return undefined;\n    },\n  });\n  return {\n    data,\n    loading: isFetching,\n    error,\n    fetchNextPage,\n    hasNextPage,\n    isFetching,\n    isFetchingNextPage,\n    status,\n    handleInputChange,\n    searchString,\n  };\n};\n\nexport const useCreateKnowledge = () => {\n  const queryClient = useQueryClient();\n  const {\n    data,\n    isPending: loading,\n    mutateAsync,\n  } = useMutation({\n    mutationKey: ['createKnowledge'],\n    mutationFn: async (params: { id?: string; name: string }) => {\n      const { data = {} } = await kbService.createKb(params);\n      if (data.code === 0) {\n        message.success(\n          i18n.t(`message.${params?.id ? 'modified' : 'created'}`),\n        );\n        queryClient.invalidateQueries({ queryKey: ['fetchKnowledgeList'] });\n      }\n      return data;\n    },\n  });\n\n  return { data, loading, createKnowledge: mutateAsync };\n};\n\nexport const useDeleteKnowledge = () => {\n  const queryClient = useQueryClient();\n  const {\n    data,\n    isPending: loading,\n    mutateAsync,\n  } = useMutation({\n    mutationKey: ['deleteKnowledge'],\n    mutationFn: async (id: string) => {\n      const { data } = await kbService.rmKb({ kb_id: id });\n      if (data.code === 0) {\n        message.success(i18n.t(`message.deleted`));\n        queryClient.invalidateQueries({\n          queryKey: ['infiniteFetchKnowledgeList'],\n        });\n      }\n      return data?.data ?? [];\n    },\n  });\n\n  return { data, loading, deleteKnowledge: mutateAsync };\n};\n\n//#region knowledge configuration\n\nexport const useUpdateKnowledge = () => {\n  const knowledgeBaseId = useKnowledgeBaseId();\n  const queryClient = useQueryClient();\n  const {\n    data,\n    isPending: loading,\n    mutateAsync,\n  } = useMutation({\n    mutationKey: ['saveKnowledge'],\n    mutationFn: async (params: Record<string, any>) => {\n      const { data = {} } = await kbService.updateKb({\n        kb_id: knowledgeBaseId,\n        ...params,\n      });\n      if (data.code === 0) {\n        message.success(i18n.t(`message.updated`));\n        queryClient.invalidateQueries({ queryKey: ['fetchKnowledgeDetail'] });\n      }\n      return data;\n    },\n  });\n\n  return { data, loading, saveKnowledgeConfiguration: mutateAsync };\n};\n\n//#endregion\n\n//#region Retrieval testing\n\nexport const useTestChunkRetrieval = (): ResponsePostType<ITestingResult> & {\n  testChunk: (...params: any[]) => void;\n} => {\n  const knowledgeBaseId = useKnowledgeBaseId();\n  const { page, size: pageSize } = useSetPaginationParams();\n\n  const {\n    data,\n    isPending: loading,\n    mutateAsync,\n  } = useMutation({\n    mutationKey: ['testChunk'], // This method is invalid\n    gcTime: 0,\n    mutationFn: async (values: any) => {\n      const { data } = await kbService.retrieval_test({\n        ...values,\n        kb_id: values.kb_id ?? knowledgeBaseId,\n        page,\n        size: pageSize,\n      });\n      if (data.code === 0) {\n        const res = data.data;\n        return {\n          ...res,\n          documents: res.doc_aggs,\n        };\n      }\n      return (\n        data?.data ?? {\n          chunks: [],\n          documents: [],\n          total: 0,\n        }\n      );\n    },\n  });\n\n  return {\n    data: data ?? { chunks: [], documents: [], total: 0 },\n    loading,\n    testChunk: mutateAsync,\n  };\n};\n\nexport const useChunkIsTesting = () => {\n  return useIsMutating({ mutationKey: ['testChunk'] }) > 0;\n};\n\nexport const useSelectTestingResult = (): ITestingResult => {\n  const data = useMutationState({\n    filters: { mutationKey: ['testChunk'] },\n    select: (mutation) => {\n      return mutation.state.data;\n    },\n  });\n  return (data.at(-1) ?? {\n    chunks: [],\n    documents: [],\n    total: 0,\n  }) as ITestingResult;\n};\n\nexport const useSelectIsTestingSuccess = () => {\n  const status = useMutationState({\n    filters: { mutationKey: ['testChunk'] },\n    select: (mutation) => {\n      return mutation.state.status;\n    },\n  });\n  return status.at(-1) === 'success';\n};\n//#endregion\n\n//#region tags\n\nexport const useFetchTagList = () => {\n  const knowledgeBaseId = useKnowledgeBaseId();\n\n  const { data, isFetching: loading } = useQuery<Array<[string, number]>>({\n    queryKey: ['fetchTagList'],\n    initialData: [],\n    gcTime: 0, // https://tanstack.com/query/latest/docs/framework/react/guides/caching?from=reactQueryV3\n    queryFn: async () => {\n      const { data } = await listTag(knowledgeBaseId);\n      const list = data?.data || [];\n      return list;\n    },\n  });\n\n  return { list: data, loading };\n};\n\nexport const useDeleteTag = () => {\n  const knowledgeBaseId = useKnowledgeBaseId();\n\n  const queryClient = useQueryClient();\n  const {\n    data,\n    isPending: loading,\n    mutateAsync,\n  } = useMutation({\n    mutationKey: ['deleteTag'],\n    mutationFn: async (tags: string[]) => {\n      const { data } = await removeTag(knowledgeBaseId, tags);\n      if (data.code === 0) {\n        message.success(i18n.t(`message.deleted`));\n        queryClient.invalidateQueries({\n          queryKey: ['fetchTagList'],\n        });\n      }\n      return data?.data ?? [];\n    },\n  });\n\n  return { data, loading, deleteTag: mutateAsync };\n};\n\nexport const useRenameTag = () => {\n  const knowledgeBaseId = useKnowledgeBaseId();\n\n  const queryClient = useQueryClient();\n  const {\n    data,\n    isPending: loading,\n    mutateAsync,\n  } = useMutation({\n    mutationKey: ['renameTag'],\n    mutationFn: async (params: IRenameTag) => {\n      const { data } = await renameTag(knowledgeBaseId, params);\n      if (data.code === 0) {\n        message.success(i18n.t(`message.modified`));\n        queryClient.invalidateQueries({\n          queryKey: ['fetchTagList'],\n        });\n      }\n      return data?.data ?? [];\n    },\n  });\n\n  return { data, loading, renameTag: mutateAsync };\n};\n\nexport const useTagIsRenaming = () => {\n  return useIsMutating({ mutationKey: ['renameTag'] }) > 0;\n};\n\nexport const useFetchTagListByKnowledgeIds = () => {\n  const [knowledgeIds, setKnowledgeIds] = useState<string[]>([]);\n\n  const { data, isFetching: loading } = useQuery<Array<[string, number]>>({\n    queryKey: ['fetchTagListByKnowledgeIds'],\n    enabled: knowledgeIds.length > 0,\n    initialData: [],\n    gcTime: 0, // https://tanstack.com/query/latest/docs/framework/react/guides/caching?from=reactQueryV3\n    queryFn: async () => {\n      const { data } = await kbService.listTagByKnowledgeIds({\n        kb_ids: knowledgeIds.join(','),\n      });\n      const list = data?.data || [];\n      return list;\n    },\n  });\n\n  return { list: data, loading, setKnowledgeIds };\n};\n\n//#endregion\n\nexport function useFetchKnowledgeGraph() {\n  const knowledgeBaseId = useKnowledgeBaseId();\n\n  const { data, isFetching: loading } = useQuery<IKnowledgeGraph>({\n    queryKey: ['fetchKnowledgeGraph', knowledgeBaseId],\n    initialData: { graph: {}, mind_map: {} } as IKnowledgeGraph,\n    enabled: !!knowledgeBaseId,\n    gcTime: 0,\n    queryFn: async () => {\n      const { data } = await getKnowledgeGraph(knowledgeBaseId);\n      return data?.data;\n    },\n  });\n\n  return { data, loading };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"markdownContentWrapper\":\"markdownContentWrapper___geQCE\",\"referencePopoverWrapper\":\"referencePopoverWrapper___rn9A6\",\"referenceChunkImage\":\"referenceChunkImage___LoR67\",\"referenceImagePreview\":\"referenceImagePreview___kcQgd\",\"chunkContentText\":\"chunkContentText___vcP0P\",\"documentLink\":\"documentLink___USud0\",\"referenceIcon\":\"referenceIcon___g5Mgk\",\"cursor\":\"cursor___rRuWB\",\"blink\":\"blink___BYl7u\",\"fileThumbnail\":\"fileThumbnail___BzBir\"};","import Image from '@/components/image';\nimport SvgIcon from '@/components/svg-icon';\nimport { IReference, IReferenceChunk } from '@/interfaces/database/chat';\nimport { getExtension } from '@/utils/document-util';\nimport { InfoCircleOutlined } from '@ant-design/icons';\nimport { Button, Flex, Popover, Space } from 'antd';\nimport DOMPurify from 'dompurify';\nimport { useCallback, useEffect, useMemo } from 'react';\nimport Markdown from 'react-markdown';\nimport reactStringReplace from 'react-string-replace';\nimport SyntaxHighlighter from 'react-syntax-highlighter';\nimport rehypeKatex from 'rehype-katex';\nimport rehypeRaw from 'rehype-raw';\nimport remarkGfm from 'remark-gfm';\nimport remarkMath from 'remark-math';\nimport { visitParents } from 'unist-util-visit-parents';\n\nimport { useFetchDocumentThumbnailsByIds } from '@/hooks/document-hooks';\nimport { useTranslation } from 'react-i18next';\n\nimport 'katex/dist/katex.min.css'; // `rehype-katex` does not import the CSS for you\n\nimport { preprocessLaTeX, replaceThinkToSection } from '@/utils/chat';\nimport { replaceTextByOldReg } from '../utils';\n\nimport { pipe } from 'lodash/fp';\nimport styles from './index.less';\n\nconst reg = /(~{2}\\d+={2})/g;\n// const curReg = /(~{2}\\d+\\${2})/g;\n\nconst getChunkIndex = (match: string) => Number(match.slice(2, -2));\n// TODO: The display of the table is inconsistent with the display previously placed in the MessageItem.\nconst MarkdownContent = ({\n  reference,\n  clickDocumentButton,\n  content,\n}: {\n  content: string;\n  loading: boolean;\n  reference: IReference;\n  clickDocumentButton?: (documentId: string, chunk: IReferenceChunk) => void;\n}) => {\n  const { t } = useTranslation();\n  const { setDocumentIds, data: fileThumbnails } =\n    useFetchDocumentThumbnailsByIds();\n  const contentWithCursor = useMemo(() => {\n    let text = content;\n    if (text === '') {\n      text = t('chat.searching');\n    }\n    const nextText = replaceTextByOldReg(text);\n    return pipe(replaceThinkToSection, preprocessLaTeX)(nextText);\n  }, [content, t]);\n\n  useEffect(() => {\n    const docAggs = reference?.doc_aggs;\n    setDocumentIds(Array.isArray(docAggs) ? docAggs.map((x) => x.doc_id) : []);\n  }, [reference, setDocumentIds]);\n\n  const handleDocumentButtonClick = useCallback(\n    (\n      documentId: string,\n      chunk: IReferenceChunk,\n      isPdf: boolean,\n      documentUrl?: string,\n    ) =>\n      () => {\n        if (!isPdf) {\n          if (!documentUrl) {\n            return;\n          }\n          window.open(documentUrl, '_blank');\n        } else {\n          clickDocumentButton?.(documentId, chunk);\n        }\n      },\n    [clickDocumentButton],\n  );\n\n  const rehypeWrapReference = () => {\n    return function wrapTextTransform(tree: any) {\n      visitParents(tree, 'text', (node, ancestors) => {\n        const latestAncestor = ancestors.at(-1);\n        if (\n          latestAncestor.tagName !== 'custom-typography' &&\n          latestAncestor.tagName !== 'code'\n        ) {\n          node.type = 'element';\n          node.tagName = 'custom-typography';\n          node.properties = {};\n          node.children = [{ type: 'text', value: node.value }];\n        }\n      });\n    };\n  };\n\n  const getPopoverContent = useCallback(\n    (chunkIndex: number) => {\n      const chunks = reference?.chunks ?? [];\n      const chunkItem = chunks[chunkIndex];\n      const document = reference?.doc_aggs?.find(\n        (x) => x?.doc_id === chunkItem?.document_id,\n      );\n      const documentId = document?.doc_id;\n      const documentUrl = document?.url;\n      const fileThumbnail = documentId ? fileThumbnails[documentId] : '';\n      const fileExtension = documentId ? getExtension(document?.doc_name) : '';\n      const imageId = chunkItem?.image_id;\n      return (\n        <Flex\n          key={chunkItem?.id}\n          gap={10}\n          className={styles.referencePopoverWrapper}\n        >\n          {imageId && (\n            <Popover\n              placement=\"left\"\n              content={\n                <Image\n                  id={imageId}\n                  className={styles.referenceImagePreview}\n                ></Image>\n              }\n            >\n              <Image\n                id={imageId}\n                className={styles.referenceChunkImage}\n              ></Image>\n            </Popover>\n          )}\n          <Space direction={'vertical'}>\n            <div\n              dangerouslySetInnerHTML={{\n                __html: DOMPurify.sanitize(chunkItem?.content ?? ''),\n              }}\n              className={styles.chunkContentText}\n            ></div>\n            {documentId && (\n              <Flex gap={'small'}>\n                {fileThumbnail ? (\n                  <img\n                    src={fileThumbnail}\n                    alt=\"\"\n                    className={styles.fileThumbnail}\n                  />\n                ) : (\n                  <SvgIcon\n                    name={`file-icon/${fileExtension}`}\n                    width={24}\n                  ></SvgIcon>\n                )}\n                <Button\n                  type=\"link\"\n                  className={styles.documentLink}\n                  onClick={handleDocumentButtonClick(\n                    documentId,\n                    chunkItem,\n                    fileExtension === 'pdf',\n                    documentUrl,\n                  )}\n                >\n                  {document?.doc_name}\n                </Button>\n              </Flex>\n            )}\n          </Space>\n        </Flex>\n      );\n    },\n    [reference, fileThumbnails, handleDocumentButtonClick],\n  );\n\n  const renderReference = useCallback(\n    (text: string) => {\n      let replacedText = reactStringReplace(text, reg, (match, i) => {\n        const chunkIndex = getChunkIndex(match);\n        return (\n          <Popover content={getPopoverContent(chunkIndex)} key={i}>\n            <InfoCircleOutlined className={styles.referenceIcon} />\n          </Popover>\n        );\n      });\n\n      // replacedText = reactStringReplace(replacedText, curReg, (match, i) => (\n      //   <span className={styles.cursor} key={i}></span>\n      // ));\n\n      return replacedText;\n    },\n    [getPopoverContent],\n  );\n\n  return (\n    <Markdown\n      rehypePlugins={[rehypeWrapReference, rehypeKatex, rehypeRaw]}\n      remarkPlugins={[remarkGfm, remarkMath]}\n      className={styles.markdownContentWrapper}\n      components={\n        {\n          'custom-typography': ({ children }: { children: string }) =>\n            renderReference(children),\n          code(props: any) {\n            const { children, className, node, ...rest } = props;\n            const match = /language-(\\w+)/.exec(className || '');\n            return match ? (\n              <SyntaxHighlighter {...rest} PreTag=\"div\" language={match[1]}>\n                {String(children).replace(/\\n$/, '')}\n              </SyntaxHighlighter>\n            ) : (\n              <code {...rest} className={className}>\n                {children}\n              </code>\n            );\n          },\n        } as any\n      }\n    >\n      {contentWithCursor}\n    </Markdown>\n  );\n};\n\nexport default MarkdownContent;\n","import { MessageType } from '@/constants/chat';\nimport { IConversation, IReference } from '@/interfaces/database/chat';\nimport { isEmpty } from 'lodash';\nimport { EmptyConversationId } from './constants';\nimport { IMessage } from './interface';\n\nexport const isConversationIdExist = (conversationId: string) => {\n  return conversationId !== EmptyConversationId && conversationId !== '';\n};\n\nexport const getDocumentIdsFromConversionReference = (data: IConversation) => {\n  const documentIds = data.reference.reduce(\n    (pre: Array<string>, cur: IReference) => {\n      cur.doc_aggs\n        ?.map((x) => x.doc_id)\n        .forEach((x) => {\n          if (pre.every((y) => y !== x)) {\n            pre.push(x);\n          }\n        });\n      return pre;\n    },\n    [],\n  );\n  return documentIds.join(',');\n};\n\nexport const buildMessageItemReference = (\n  conversation: { message: IMessage[]; reference: IReference[] },\n  message: IMessage,\n) => {\n  const assistantMessages = conversation.message\n    ?.filter((x) => x.role === MessageType.Assistant)\n    .slice(1);\n  const referenceIndex = assistantMessages.findIndex(\n    (x) => x.id === message.id,\n  );\n  const reference = !isEmpty(message?.reference)\n    ? message?.reference\n    : (conversation?.reference ?? [])[referenceIndex];\n\n  return reference ?? { doc_aggs: [], chunks: [], total: 0 };\n};\n\nconst oldReg = /(#{2}\\d+\\${2})/g;\n\n// To be compatible with the old index matching mode\nexport const replaceTextByOldReg = (text: string) => {\n  return text.replace(oldReg, function (substring) {\n    return `~~${substring.slice(2, -2)}==`;\n  });\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"errorWrapper\":\"errorWrapper___QfVXQ\"};","import { Alert, Flex } from 'antd';\n\nimport { useTranslate } from '@/hooks/common-hooks';\nimport React from 'react';\nimport styles from './index.less';\n\nconst FileError = ({ children }: React.PropsWithChildren) => {\n  const { t } = useTranslate('fileManager');\n  return (\n    <Flex align=\"center\" justify=\"center\" className={styles.errorWrapper}>\n      <Alert\n        type=\"error\"\n        message={<h2>{children || t('fileError')}</h2>}\n      ></Alert>\n    </Flex>\n  );\n};\n\nexport default FileError;\n"],"names":["_ref","name","id","fileExtension","getExtension","_useFetchDocumentThum","useFetchDocumentThumbnailsByIds","fileThumbnails","data","setDocumentIds","fileThumbnail","useEffect","_jsx","src","className","styles","SvgIcon","concat","width","children","Markdown","remarkPlugins","remarkGfm","remarkMath","rehypePlugins","rehypeRaw","rehypeKatex","classNames","components","code","props","rest","node","_objectWithoutProperties","_excluded","match","exec","SyntaxHighlighter","_objectSpread","PreTag","language","String","replace","preprocessLaTeX","Image","api_host","alt","ImageWithPopover","_ref2","Popover","placement","content","rootId","COLORS","TreeEvent","IndentedNode","_BaseNode","_inherits","_super","_createSuper","options","_classCallCheck","Object","assign","style","defaultStyleProps","call","_createClass","key","get","_this$attributes$cont","this","attributes","context","model","getChildrenData","value","_this$getSize","getSize","_this$getSize2","_slicedToArray","height","keyStyle","_get","_getPrototypeOf","prototype","fill","container","getKeyStyle","upsert","Rect","label","labelText","subStyleProps","getGraphicStyle","_this$getSize3","iconAreaStyle","x","y","zIndex","target","type","listener","Reflect","has","set","addEventListener","collapsed","color","_this$childrenData","_this$getSize5","backgroundFill","cursor","fontSize","padding","text","childrenData","length","textAlign","_this","countStyle","getCountStyle","btn","Badge","forwardEvent","CommonEvent","CLICK","event","stopPropagation","graph","emit","_this$childrenData2","Array","isArray","showIcon","isShowCollapse","_this$getSize7","visibility","backgroundHeight","backgroundWidth","fontFamily","_this2","iconStyle","getCollapseStyle","_this$getSize9","backgroundLineWidth","backgroundStroke","arguments","undefined","parsedAttributes","drawCountShape","drawIconArea","drawCollapseShape","BaseNode","_defineProperty","ports","IndentedEdge","_Polyline","_super2","apply","sourcePoint","targetPoint","Polyline","CollapseExpandTree","_BaseBehavior","_super3","_this3","_assertThisInitialized","setIcon","show","status","_this3$context","element","updateNodeData","draw","animation","silence","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","collapseElement","expandElement","stop","_x","bindEvents","unbindEvents","on","NodeEvent","POINTER_ENTER","POINTER_LEAVE","hideIcon","onCollapseExpand","off","BaseBehavior","fallbackRender","error","_jsxs","role","message","register","ExtensionCategory","NODE","EDGE","BEHAVIOR","_ref3","_ref3$style","containerRef","useRef","graphRef","assignIds","React","parentId","index","forEach","child","idx","render","useCallback","_ref4","_callee2","_context2","Graph","current","size","d","labelBackground","datum","labelBackgroundRadius","labelBackgroundFill","labelFill","_d$style","labelTextAlign","labelTextBaseline","depth","getAncestorsData","state","selected","lineWidth","labelFontWeight","edge","radius","sourcePort","targetPort","stroke","source","layout","direction","isHorizontal","indent","getHeight","getVGap","behaviors","enable","targetType","destroy","setData","treeToGraphData","_x2","isEmpty","ErrorBoundary","ref","display","link","_ref$preventDefault","preventDefault","_ref$color","documentId","documentName","_ref$prefix","prefix","nextLink","extension","onClick","isSupportedPreviewDocumentType","e","href","rel","wordBreak","useClickDrawer","_useSetModalState","useSetModalState","visible","showModal","hideModal","_useState","useState","_useState2","selectedChunk","setSelectedChunk","_useState3","_useState4","setDocumentId","clickDocumentButton","chunk","HighlightPopup","comment","emoji","getDocumentUrl","useGetDocumentUrl","_useGetChunkHighlight","useGetChunkHighlights","highlights","setWidthAndHeight","loaded","setLoaded","url","useCatchDocumentError","resetHash","PdfLoader","beforeLoad","Skeleton","active","workerSrc","errorMessage","FileError","pdfDocument","getPage","then","page","viewport","getViewport","scale","PdfHighlighter","enableAreaSelection","altKey","onScrollChange","scrollRef","scrollTo","onSelectionFinished","highlightTransform","highlight","setTip","hideTip","viewportToScaled","screenshot","isScrolledTo","component","Boolean","image","Highlight","position","AreaHighlight","onChange","Popup","popupContent","onMouseOver","onMouseOut","_ref$visible","Drawer","title","onClose","open","DocumentPreviewer","setError","fetchDocument","_yield$axios$get","axios","sent","useKnowledgeBaseId","_useSearchParams","useSearchParams","useFetchKnowledgeBaseConfiguration","_queryFn","knowledgeBaseId","_useQuery","useQuery","queryKey","initialData","gcTime","queryFn","_data$data","_yield$kbService$get_","kbService","get_kb_detail","kb_id","abrupt","loading","isFetching","useFetchKnowledgeList","_queryFn2","shouldFilterListWithoutDocument","_useQuery2","_data$data$kbs","_data$data2","_yield$kbService$getL","list","getList","kbs","filter","chunk_num","useSelectKnowledgeOptions","map","item","useInfiniteFetchKnowledgeList","_queryFn3","_useHandleSearchChang","useHandleSearchChange","searchString","handleInputChange","debouncedSearchString","useDebounce","wait","_useInfiniteQuery","useInfiniteQuery","_callee3","_data$data3","pageParam","_yield$kbService$getL2","_context3","page_size","keywords","initialPageParam","getNextPageParam","lastPage","pages","lastPageParam","total","fetchNextPage","hasNextPage","isFetchingNextPage","useCreateKnowledge","_mutationFn","queryClient","useQueryClient","_useMutation","useMutation","mutationKey","mutationFn","_callee4","params","_yield$kbService$crea","_yield$kbService$crea2","_context4","createKb","success","i18n","t","invalidateQueries","isPending","createKnowledge","mutateAsync","useDeleteKnowledge","_mutationFn2","_useMutation2","_callee5","_data$data4","_yield$kbService$rmKb","_context5","rmKb","_x3","deleteKnowledge","useUpdateKnowledge","_mutationFn3","_useMutation3","_callee6","_yield$kbService$upda","_yield$kbService$upda2","_context6","updateKb","_x4","saveKnowledgeConfiguration","useTestChunkRetrieval","_mutationFn4","_useSetPaginationPara","useSetPaginationParams","pageSize","_useMutation4","_callee7","values","_values$kb_id","_data$data5","_yield$kbService$retr","res","_context7","retrieval_test","documents","doc_aggs","chunks","_x5","testChunk","useChunkIsTesting","useIsMutating","useSelectTestingResult","_data$at","useMutationState","filters","select","mutation","at","useSelectIsTestingSuccess","useFetchTagList","_queryFn4","_useQuery3","_callee8","_yield$listTag","_context8","listTag","useDeleteTag","_mutationFn5","_useMutation5","_callee9","tags","_data$data6","_yield$removeTag","_context9","removeTag","_x6","deleteTag","useRenameTag","_mutationFn6","_useMutation6","_callee10","_data$data7","_yield$renameTag","_context10","renameTag","_x7","useTagIsRenaming","useFetchTagListByKnowledgeIds","_queryFn5","knowledgeIds","setKnowledgeIds","_useQuery4","enabled","_callee11","_yield$kbService$list","_context11","listTagByKnowledgeIds","kb_ids","join","useFetchKnowledgeGraph","_queryFn6","_useQuery5","mind_map","_callee12","_yield$getKnowledgeGr","_context12","getKnowledgeGraph","reg","reference","useTranslation","contentWithCursor","useMemo","nextText","replaceTextByOldReg","pipe","replaceThinkToSection","docAggs","doc_id","handleDocumentButtonClick","isPdf","documentUrl","window","getPopoverContent","chunkIndex","_reference$chunks","_reference$doc_aggs","_chunkItem$content","chunkItem","document","find","document_id","doc_name","imageId","image_id","Flex","gap","Space","dangerouslySetInnerHTML","__html","DOMPurify","Button","renderReference","reactStringReplace","i","Number","slice","getChunkIndex","InfoCircleOutlined","tree","visitParents","ancestors","latestAncestor","tagName","properties","buildMessageItemReference","conversation","_conversation$message","_conversation$referen","referenceIndex","MessageType","Assistant","findIndex","oldReg","substring","useTranslate","align","justify","Alert"],"sourceRoot":""}