{"version":3,"file":"p__chat__index.5fdd519f.async.js","mappings":"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","sources":["webpack:///./src/components/api-service/embed-modal/index.less?e4ca","webpack:///./src/components/api-service/embed-modal/index.tsx","webpack:///./src/components/api-service/hooks.ts","webpack:///./src/components/llm-setting-items/index.less?f964","webpack:///./src/components/llm-setting-items/index.tsx","webpack:///./src/components/rename-modal/index.tsx","webpack:///./src/components/switch-fom-field.tsx","webpack:///./src/components/use-knowledge-graph-item.tsx","webpack:///./src/assets/svg/chat-app-cube.svg","webpack:///./src/assets/svg/chat-configuration-atom.svg","webpack:///./src/pages/chat/chat-configuration-modal/index.less?3283","webpack:///./src/pages/chat/chat-configuration-modal/assistant-setting.tsx","webpack:///./src/pages/chat/chat-configuration-modal/model-setting.tsx","webpack:///./src/pages/chat/chat-configuration-modal/editable-cell.tsx","webpack:///./src/pages/chat/chat-configuration-modal/prompt-engine.tsx","webpack:///./src/pages/chat/chat-configuration-modal/index.tsx","webpack:///./src/pages/chat/chat-container/index.less?a72e","webpack:///./src/pages/chat/chat-container/index.tsx","webpack:///./src/pages/chat/index.less?fa52","webpack:///./src/pages/chat/index.tsx","webpack:///./src/utils/form.ts"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"codeCard\":\"codeCard___TMIpT\",\"codeText\":\"codeText___pRkMI\",\"id\":\"id___EtPCm\",\"darkBg\":\"darkBg___aK5gz\",\"darkId\":\"darkId___ASEvo\"};","import CopyToClipboard from '@/components/copy-to-clipboard';\nimport HightLightMarkdown from '@/components/highlight-markdown';\nimport { SharedFrom } from '@/constants/chat';\nimport { useTranslate } from '@/hooks/common-hooks';\nimport { IModalProps } from '@/interfaces/common';\nimport {\n  Card,\n  Checkbox,\n  Form,\n  Modal,\n  Select,\n  Tabs,\n  TabsProps,\n  Typography,\n} from 'antd';\nimport { useMemo, useState } from 'react';\n\nimport { useIsDarkTheme } from '@/components/theme-provider';\nimport {\n  LanguageAbbreviation,\n  LanguageAbbreviationMap,\n} from '@/constants/common';\nimport { cn } from '@/lib/utils';\nimport styles from './index.less';\n\nconst { Paragraph, Link } = Typography;\n\nconst EmbedModal = ({\n  visible,\n  hideModal,\n  token = '',\n  form,\n  beta = '',\n  isAgent,\n}: IModalProps<any> & {\n  token: string;\n  form: SharedFrom;\n  beta: string;\n  isAgent: boolean;\n}) => {\n  const { t } = useTranslate('chat');\n  const isDarkTheme = useIsDarkTheme();\n\n  const [visibleAvatar, setVisibleAvatar] = useState(false);\n  const [locale, setLocale] = useState('');\n\n  const languageOptions = useMemo(() => {\n    return Object.values(LanguageAbbreviation).map((x) => ({\n      label: LanguageAbbreviationMap[x],\n      value: x,\n    }));\n  }, []);\n\n  const generateIframeSrc = () => {\n    let src = `${location.origin}/chat/share?shared_id=${token}&from=${form}&auth=${beta}`;\n    if (visibleAvatar) {\n      src += '&visible_avatar=1';\n    }\n    if (locale) {\n      src += `&locale=${locale}`;\n    }\n    return src;\n  };\n\n  const iframeSrc = generateIframeSrc();\n\n  const text = `\n  ~~~ html\n  <iframe\n  src=\"${iframeSrc}\"\n  style=\"width: 100%; height: 100%; min-height: 600px\"\n  frameborder=\"0\"\n>\n</iframe>\n~~~\n  `;\n\n  const items: TabsProps['items'] = [\n    {\n      key: '1',\n      label: t('fullScreenTitle'),\n      children: (\n        <Card\n          title={t('fullScreenDescription')}\n          extra={<CopyToClipboard text={text}></CopyToClipboard>}\n          className={styles.codeCard}\n        >\n          <div className=\"p-2\">\n            <h2 className=\"mb-3\">Option:</h2>\n\n            <Form.Item\n              label={t('avatarHidden')}\n              labelCol={{ span: 6 }}\n              wrapperCol={{ span: 18 }}\n            >\n              <Checkbox\n                checked={visibleAvatar}\n                onChange={(e) => setVisibleAvatar(e.target.checked)}\n              ></Checkbox>\n            </Form.Item>\n            <Form.Item\n              label={t('locale')}\n              labelCol={{ span: 6 }}\n              wrapperCol={{ span: 18 }}\n            >\n              <Select\n                placeholder=\"Select a locale\"\n                onChange={(value) => setLocale(value)}\n                options={languageOptions}\n                style={{ width: '100%' }}\n              />\n            </Form.Item>\n          </div>\n          <HightLightMarkdown>{text}</HightLightMarkdown>\n        </Card>\n      ),\n    },\n    {\n      key: '2',\n      label: t('partialTitle'),\n      children: t('comingSoon'),\n    },\n    {\n      key: '3',\n      label: t('extensionTitle'),\n      children: t('comingSoon'),\n    },\n  ];\n\n  const onChange = (key: string) => {\n    console.log(key);\n  };\n\n  return (\n    <Modal\n      title={t('embedIntoSite', { keyPrefix: 'common' })}\n      open={visible}\n      style={{ top: 300 }}\n      width={'50vw'}\n      onOk={hideModal}\n      onCancel={hideModal}\n    >\n      <Tabs defaultActiveKey=\"1\" items={items} onChange={onChange} />\n      <div className=\"text-base font-medium mt-4 mb-1\">\n        {t(isAgent ? 'flow' : 'chat', { keyPrefix: 'header' })}\n        <span className=\"ml-1 inline-block\">ID</span>\n      </div>\n      <Paragraph\n        copyable={{ text: token }}\n        className={cn(styles.id, {\n          [styles.darkId]: isDarkTheme,\n        })}\n      >\n        {token}\n      </Paragraph>\n      <Link\n        href={\n          isAgent\n            ? 'https://ragflow.io/docs/dev/http_api_reference#create-session-with-agent'\n            : 'https://ragflow.io/docs/dev/http_api_reference#create-session-with-chat-assistant'\n        }\n        target=\"_blank\"\n      >\n        {t('howUseId', { keyPrefix: isAgent ? 'flow' : 'chat' })}\n      </Link>\n    </Modal>\n  );\n};\n\nexport default EmbedModal;\n","import { SharedFrom } from '@/constants/chat';\nimport {\n  useSetModalState,\n  useShowDeleteConfirm,\n  useTranslate,\n} from '@/hooks/common-hooks';\nimport {\n  useCreateSystemToken,\n  useFetchManualSystemTokenList,\n  useFetchSystemTokenList,\n  useRemoveSystemToken,\n} from '@/hooks/user-setting-hooks';\nimport { IStats } from '@/interfaces/database/chat';\nimport { useQueryClient } from '@tanstack/react-query';\nimport { message } from 'antd';\nimport { useCallback } from 'react';\n\nexport const useOperateApiKey = (idKey: string, dialogId?: string) => {\n  const { removeToken } = useRemoveSystemToken();\n  const { createToken, loading: creatingLoading } = useCreateSystemToken();\n  const { data: tokenList, loading: listLoading } = useFetchSystemTokenList();\n\n  const showDeleteConfirm = useShowDeleteConfirm();\n\n  const onRemoveToken = (token: string) => {\n    showDeleteConfirm({\n      onOk: () => removeToken(token),\n    });\n  };\n\n  const onCreateToken = useCallback(() => {\n    createToken({ [idKey]: dialogId });\n  }, [createToken, idKey, dialogId]);\n\n  return {\n    removeToken: onRemoveToken,\n    createToken: onCreateToken,\n    tokenList,\n    creatingLoading,\n    listLoading,\n  };\n};\n\ntype ChartStatsType = {\n  [k in keyof IStats]: Array<{ xAxis: string; yAxis: number }>;\n};\n\nexport const useSelectChartStatsList = (): ChartStatsType => {\n  const queryClient = useQueryClient();\n  const data = queryClient.getQueriesData({ queryKey: ['fetchStats'] });\n  const stats: IStats = (data.length > 0 ? data[0][1] : {}) as IStats;\n\n  return Object.keys(stats).reduce((pre, cur) => {\n    const item = stats[cur as keyof IStats];\n    if (item.length > 0) {\n      pre[cur as keyof IStats] = item.map((x) => ({\n        xAxis: x[0] as string,\n        yAxis: x[1] as number,\n      }));\n    }\n    return pre;\n  }, {} as ChartStatsType);\n};\n\nexport const useShowTokenEmptyError = () => {\n  const { t } = useTranslate('chat');\n\n  const showTokenEmptyError = useCallback(() => {\n    message.error(t('tokenError'));\n  }, [t]);\n  return { showTokenEmptyError };\n};\n\nexport const useShowBetaEmptyError = () => {\n  const { t } = useTranslate('chat');\n\n  const showBetaEmptyError = useCallback(() => {\n    message.error(t('betaError'));\n  }, [t]);\n  return { showBetaEmptyError };\n};\n\nconst getUrlWithToken = (token: string, from: string = 'chat') => {\n  const { protocol, host } = window.location;\n  return `${protocol}//${host}/chat/share?shared_id=${token}&from=${from}`;\n};\n\nconst useFetchTokenListBeforeOtherStep = () => {\n  const { showTokenEmptyError } = useShowTokenEmptyError();\n  const { showBetaEmptyError } = useShowBetaEmptyError();\n\n  const { data: tokenList, fetchSystemTokenList } =\n    useFetchManualSystemTokenList();\n\n  let token = '',\n    beta = '';\n\n  if (Array.isArray(tokenList) && tokenList.length > 0) {\n    token = tokenList[0].token;\n    beta = tokenList[0].beta;\n  }\n\n  token =\n    Array.isArray(tokenList) && tokenList.length > 0 ? tokenList[0].token : '';\n\n  const handleOperate = useCallback(async () => {\n    const ret = await fetchSystemTokenList();\n    const list = ret;\n    if (Array.isArray(list) && list.length > 0) {\n      if (!list[0].beta) {\n        showBetaEmptyError();\n        return false;\n      }\n      return list[0]?.token;\n    } else {\n      showTokenEmptyError();\n      return false;\n    }\n  }, [fetchSystemTokenList, showBetaEmptyError, showTokenEmptyError]);\n\n  return {\n    token,\n    beta,\n    handleOperate,\n  };\n};\n\nexport const useShowEmbedModal = () => {\n  const {\n    visible: embedVisible,\n    hideModal: hideEmbedModal,\n    showModal: showEmbedModal,\n  } = useSetModalState();\n\n  const { handleOperate, token, beta } = useFetchTokenListBeforeOtherStep();\n\n  const handleShowEmbedModal = useCallback(async () => {\n    const succeed = await handleOperate();\n    if (succeed) {\n      showEmbedModal();\n    }\n  }, [handleOperate, showEmbedModal]);\n\n  return {\n    showEmbedModal: handleShowEmbedModal,\n    hideEmbedModal,\n    embedVisible,\n    embedToken: token,\n    beta,\n  };\n};\n\nexport const usePreviewChat = (idKey: string) => {\n  const { handleOperate } = useFetchTokenListBeforeOtherStep();\n\n  const open = useCallback(\n    (t: string) => {\n      window.open(\n        getUrlWithToken(\n          t,\n          idKey === 'canvasId' ? SharedFrom.Agent : SharedFrom.Chat,\n        ),\n        '_blank',\n      );\n    },\n    [idKey],\n  );\n\n  const handlePreview = useCallback(async () => {\n    const token = await handleOperate();\n    if (token) {\n      open(token);\n    }\n  }, [handleOperate, open]);\n\n  return {\n    handlePreview,\n  };\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"sliderInputNumber\":\"sliderInputNumber___ZMqQO\",\"variableSlider\":\"variableSlider___MglII\"};","import {\n  LlmModelType,\n  ModelVariableType,\n  settledModelVariableMap,\n} from '@/constants/knowledge';\nimport { Flex, Form, InputNumber, Select, Slider, Switch, Tooltip } from 'antd';\nimport camelCase from 'lodash/camelCase';\n\nimport { useTranslate } from '@/hooks/common-hooks';\nimport { useComposeLlmOptionsByModelTypes } from '@/hooks/llm-hooks';\nimport { QuestionCircleOutlined } from '@ant-design/icons';\nimport { useCallback, useMemo } from 'react';\nimport styles from './index.less';\n\ninterface IProps {\n  prefix?: string;\n  formItemLayout?: any;\n  handleParametersChange?(value: ModelVariableType): void;\n}\n\nconst LlmSettingItems = ({ prefix, formItemLayout = {} }: IProps) => {\n  const form = Form.useFormInstance();\n  const { t } = useTranslate('chat');\n  const parameterOptions = Object.values(ModelVariableType).map((x) => ({\n    label: t(camelCase(x)),\n    value: x,\n  }));\n\n  const handleParametersChange = useCallback(\n    (value: ModelVariableType) => {\n      const variable = settledModelVariableMap[value];\n      let nextVariable: Record<string, any> = variable;\n      if (prefix) {\n        nextVariable = { [prefix]: variable };\n      }\n      form.setFieldsValue(nextVariable);\n    },\n    [form, prefix],\n  );\n\n  const memorizedPrefix = useMemo(() => (prefix ? [prefix] : []), [prefix]);\n\n  const modelOptions = useComposeLlmOptionsByModelTypes([\n    LlmModelType.Chat,\n    LlmModelType.Image2text,\n  ]);\n\n  return (\n    <>\n      <Form.Item\n        label={t('model')}\n        name=\"llm_id\"\n        tooltip={t('modelTip')}\n        {...formItemLayout}\n        rules={[{ required: true, message: t('modelMessage') }]}\n      >\n        <Select\n          options={modelOptions}\n          showSearch\n          popupMatchSelectWidth={false}\n        />\n      </Form.Item>\n      <div className=\"border rounded-md\">\n        <div className=\"flex justify-between bg-slate-100 p-2 mb-2\">\n          <div className=\"space-x-1 items-center\">\n            <span className=\"text-lg font-semibold\">{t('freedom')}</span>\n            <Tooltip title={t('freedomTip')}>\n              <QuestionCircleOutlined></QuestionCircleOutlined>\n            </Tooltip>\n          </div>\n          <div className=\"w-1/4 min-w-32\">\n            <Form.Item\n              label={t('freedom')}\n              name=\"parameter\"\n              tooltip={t('freedomTip')}\n              initialValue={ModelVariableType.Precise}\n              labelCol={{ span: 0 }}\n              wrapperCol={{ span: 24 }}\n              className=\"m-0\"\n            >\n              <Select<ModelVariableType>\n                options={parameterOptions}\n                onChange={handleParametersChange}\n              />\n            </Form.Item>\n          </div>\n        </div>\n\n        <div className=\"pr-2\">\n          <Form.Item\n            label={t('temperature')}\n            tooltip={t('temperatureTip')}\n            {...formItemLayout}\n          >\n            <Flex gap={20} align=\"center\">\n              <Form.Item\n                name={'temperatureEnabled'}\n                valuePropName=\"checked\"\n                noStyle\n              >\n                <Switch size=\"small\" />\n              </Form.Item>\n              <Form.Item noStyle dependencies={['temperatureEnabled']}>\n                {({ getFieldValue }) => {\n                  const disabled = !getFieldValue('temperatureEnabled');\n                  return (\n                    <>\n                      <Flex flex={1}>\n                        <Form.Item\n                          name={[...memorizedPrefix, 'temperature']}\n                          noStyle\n                        >\n                          <Slider\n                            className={styles.variableSlider}\n                            max={1}\n                            step={0.01}\n                            disabled={disabled}\n                          />\n                        </Form.Item>\n                      </Flex>\n                      <Form.Item\n                        name={[...memorizedPrefix, 'temperature']}\n                        noStyle\n                      >\n                        <InputNumber\n                          className={styles.sliderInputNumber}\n                          max={1}\n                          min={0}\n                          step={0.01}\n                          disabled={disabled}\n                        />\n                      </Form.Item>\n                    </>\n                  );\n                }}\n              </Form.Item>\n            </Flex>\n          </Form.Item>\n          <Form.Item\n            label={t('topP')}\n            tooltip={t('topPTip')}\n            {...formItemLayout}\n          >\n            <Flex gap={20} align=\"center\">\n              <Form.Item name={'topPEnabled'} valuePropName=\"checked\" noStyle>\n                <Switch size=\"small\" />\n              </Form.Item>\n              <Form.Item noStyle dependencies={['topPEnabled']}>\n                {({ getFieldValue }) => {\n                  const disabled = !getFieldValue('topPEnabled');\n                  return (\n                    <>\n                      <Flex flex={1}>\n                        <Form.Item name={[...memorizedPrefix, 'top_p']} noStyle>\n                          <Slider\n                            className={styles.variableSlider}\n                            max={1}\n                            step={0.01}\n                            disabled={disabled}\n                          />\n                        </Form.Item>\n                      </Flex>\n                      <Form.Item name={[...memorizedPrefix, 'top_p']} noStyle>\n                        <InputNumber\n                          className={styles.sliderInputNumber}\n                          max={1}\n                          min={0}\n                          step={0.01}\n                          disabled={disabled}\n                        />\n                      </Form.Item>\n                    </>\n                  );\n                }}\n              </Form.Item>\n            </Flex>\n          </Form.Item>\n          <Form.Item\n            label={t('presencePenalty')}\n            tooltip={t('presencePenaltyTip')}\n            {...formItemLayout}\n          >\n            <Flex gap={20} align=\"center\">\n              <Form.Item\n                name={'presencePenaltyEnabled'}\n                valuePropName=\"checked\"\n                noStyle\n              >\n                <Switch size=\"small\" />\n              </Form.Item>\n              <Form.Item noStyle dependencies={['presencePenaltyEnabled']}>\n                {({ getFieldValue }) => {\n                  const disabled = !getFieldValue('presencePenaltyEnabled');\n                  return (\n                    <>\n                      <Flex flex={1}>\n                        <Form.Item\n                          name={[...memorizedPrefix, 'presence_penalty']}\n                          noStyle\n                        >\n                          <Slider\n                            className={styles.variableSlider}\n                            max={1}\n                            step={0.01}\n                            disabled={disabled}\n                          />\n                        </Form.Item>\n                      </Flex>\n                      <Form.Item\n                        name={[...memorizedPrefix, 'presence_penalty']}\n                        noStyle\n                      >\n                        <InputNumber\n                          className={styles.sliderInputNumber}\n                          max={1}\n                          min={0}\n                          step={0.01}\n                          disabled={disabled}\n                        />\n                      </Form.Item>\n                    </>\n                  );\n                }}\n              </Form.Item>\n            </Flex>\n          </Form.Item>\n          <Form.Item\n            label={t('frequencyPenalty')}\n            tooltip={t('frequencyPenaltyTip')}\n            {...formItemLayout}\n          >\n            <Flex gap={20} align=\"center\">\n              <Form.Item\n                name={'frequencyPenaltyEnabled'}\n                valuePropName=\"checked\"\n                noStyle\n              >\n                <Switch size=\"small\" />\n              </Form.Item>\n              <Form.Item noStyle dependencies={['frequencyPenaltyEnabled']}>\n                {({ getFieldValue }) => {\n                  const disabled = !getFieldValue('frequencyPenaltyEnabled');\n                  return (\n                    <>\n                      <Flex flex={1}>\n                        <Form.Item\n                          name={[...memorizedPrefix, 'frequency_penalty']}\n                          noStyle\n                        >\n                          <Slider\n                            className={styles.variableSlider}\n                            max={1}\n                            step={0.01}\n                            disabled={disabled}\n                          />\n                        </Form.Item>\n                      </Flex>\n                      <Form.Item\n                        name={[...memorizedPrefix, 'frequency_penalty']}\n                        noStyle\n                      >\n                        <InputNumber\n                          className={styles.sliderInputNumber}\n                          max={1}\n                          min={0}\n                          step={0.01}\n                          disabled={disabled}\n                        />\n                      </Form.Item>\n                    </>\n                  );\n                }}\n              </Form.Item>\n            </Flex>\n          </Form.Item>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default LlmSettingItems;\n","import { useTranslate } from '@/hooks/common-hooks';\nimport { Form, Input, Modal } from 'antd';\nimport { useEffect } from 'react';\nimport { IModalManagerChildrenProps } from '../modal-manager';\n\ninterface IProps extends Omit<IModalManagerChildrenProps, 'showModal'> {\n  loading: boolean;\n  initialName: string;\n  onOk: (name: string) => void;\n  showModal?(): void;\n}\n\nconst RenameModal = ({\n  visible,\n  hideModal,\n  loading,\n  initialName,\n  onOk,\n}: IProps) => {\n  const [form] = Form.useForm();\n  const { t } = useTranslate('common');\n\n  type FieldType = {\n    name?: string;\n  };\n\n  const handleOk = async () => {\n    const ret = await form.validateFields();\n\n    return onOk(ret.name);\n  };\n\n  const handleCancel = () => {\n    hideModal();\n  };\n\n  const onFinish = (values: any) => {\n    console.log('Success:', values);\n  };\n\n  const onFinishFailed = (errorInfo: any) => {\n    console.log('Failed:', errorInfo);\n  };\n\n  useEffect(() => {\n    if (visible) {\n      form.setFieldValue('name', initialName);\n    }\n  }, [initialName, form, visible]);\n\n  return (\n    <Modal\n      title={t('rename')}\n      open={visible}\n      onOk={handleOk}\n      onCancel={handleCancel}\n      okButtonProps={{ loading }}\n      confirmLoading={loading}\n    >\n      <Form\n        name=\"basic\"\n        labelCol={{ span: 4 }}\n        wrapperCol={{ span: 20 }}\n        style={{ maxWidth: 600 }}\n        onFinish={onFinish}\n        onFinishFailed={onFinishFailed}\n        autoComplete=\"off\"\n        form={form}\n      >\n        <Form.Item<FieldType>\n          label={t('name')}\n          name=\"name\"\n          rules={[{ required: true, message: t('namePlaceholder') }]}\n        >\n          <Input />\n        </Form.Item>\n      </Form>\n    </Modal>\n  );\n};\n\nexport default RenameModal;\n","import {\n  FormControl,\n  FormField,\n  FormItem,\n  FormLabel,\n} from '@/components/ui/form';\nimport { Switch } from '@/components/ui/switch';\nimport { ReactNode } from 'react';\nimport { useFormContext } from 'react-hook-form';\n\ninterface SwitchFormItemProps {\n  name: string;\n  label: ReactNode;\n}\n\nexport function SwitchFormField({ label, name }: SwitchFormItemProps) {\n  const form = useFormContext();\n\n  return (\n    <FormField\n      control={form.control}\n      name={name}\n      render={({ field }) => (\n        <FormItem className=\"flex justify-between\">\n          <FormLabel className=\"text-base\">{label}</FormLabel>\n          <FormControl>\n            <Switch\n              checked={field.value}\n              onCheckedChange={field.onChange}\n              aria-readonly\n              className=\"!m-0\"\n            />\n          </FormControl>\n        </FormItem>\n      )}\n    />\n  );\n}\n","import { Form, Switch } from 'antd';\nimport { useTranslation } from 'react-i18next';\nimport { SwitchFormField } from './switch-fom-field';\n\ntype IProps = {\n  filedName: string[];\n};\n\nexport function UseKnowledgeGraphItem({ filedName }: IProps) {\n  const { t } = useTranslation();\n\n  return (\n    <Form.Item\n      label={t('chat.useKnowledgeGraph')}\n      tooltip={t('chat.useKnowledgeGraphTip')}\n      name={filedName}\n      initialValue={false}\n    >\n      <Switch></Switch>\n    </Form.Item>\n  );\n}\n\ninterface UseKnowledgeGraphFormFieldProps {\n  name: string;\n}\n\nexport function UseKnowledgeGraphFormField({\n  name,\n}: UseKnowledgeGraphFormFieldProps) {\n  const { t } = useTranslation();\n\n  return (\n    <SwitchFormField\n      name={name}\n      label={t('chat.useKnowledgeGraph')}\n    ></SwitchFormField>\n  );\n}\n","var __defProp = Object.defineProperty;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nimport * as React from \"react\";\nconst SvgChatAppCube = (props) => /* @__PURE__ */ React.createElement(\"svg\", __spreadValues({ width: 15, height: 14, fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\" }, props), /* @__PURE__ */ React.createElement(\"path\", { d: \"m6.188 12.104.859.478c.165.092.248.138.335.156a.581.581 0 0 0 .236 0c.087-.018.17-.064.335-.156l.86-.478m-5.25-1.458-.833-.462c-.175-.097-.262-.146-.326-.215a.583.583 0 0 1-.125-.212c-.029-.09-.029-.19-.029-.39V8.46m0-2.917v-.91c0-.199 0-.299.03-.388a.583.583 0 0 1 .124-.212c.064-.07.151-.118.326-.215l.833-.463m2.624-1.458.86-.477c.165-.092.248-.138.335-.156a.583.583 0 0 1 .236 0c.087.018.17.064.335.156l.86.477m2.624 1.458.833.463c.175.097.262.146.326.215a.584.584 0 0 1 .125.212c.029.089.029.189.029.389v.909m0 2.917v.909c0 .2 0 .3-.03.389a.584.584 0 0 1-.124.212c-.064.07-.151.118-.326.215l-.832.462m-5.25-4.375 1.312.73m0 0 1.313-.73m-1.313.73v1.458M2.25 4.084l1.313.729m7.874 0 1.313-.73M7.5 11.376v1.459\", stroke: \"#A5A3A9\", strokeWidth: 1.5, strokeLinecap: \"round\", strokeLinejoin: \"round\" }));\nexport { SvgChatAppCube as ReactComponent };\nexport default \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTUiIGhlaWdodD0iMTQiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0ibTYuMTg4IDEyLjEwNC44NTkuNDc4Yy4xNjUuMDkyLjI0OC4xMzguMzM1LjE1NmEuNTgxLjU4MSAwIDAgMCAuMjM2IDBjLjA4Ny0uMDE4LjE3LS4wNjQuMzM1LS4xNTZsLjg2LS40NzhtLTUuMjUtMS40NTgtLjgzMy0uNDYyYy0uMTc1LS4wOTctLjI2Mi0uMTQ2LS4zMjYtLjIxNWEuNTgzLjU4MyAwIDAgMS0uMTI1LS4yMTJjLS4wMjktLjA5LS4wMjktLjE5LS4wMjktLjM5VjguNDZtMC0yLjkxN3YtLjkxYzAtLjE5OSAwLS4yOTkuMDMtLjM4OGEuNTgzLjU4MyAwIDAgMSAuMTI0LS4yMTJjLjA2NC0uMDcuMTUxLS4xMTguMzI2LS4yMTVsLjgzMy0uNDYzbTIuNjI0LTEuNDU4Ljg2LS40NzdjLjE2NS0uMDkyLjI0OC0uMTM4LjMzNS0uMTU2YS41ODMuNTgzIDAgMCAxIC4yMzYgMGMuMDg3LjAxOC4xNy4wNjQuMzM1LjE1NmwuODYuNDc3bTIuNjI0IDEuNDU4LjgzMy40NjNjLjE3NS4wOTcuMjYyLjE0Ni4zMjYuMjE1YS41ODQuNTg0IDAgMCAxIC4xMjUuMjEyYy4wMjkuMDg5LjAyOS4xODkuMDI5LjM4OXYuOTA5bTAgMi45MTd2LjkwOWMwIC4yIDAgLjMtLjAzLjM4OWEuNTg0LjU4NCAwIDAgMS0uMTI0LjIxMmMtLjA2NC4wNy0uMTUxLjExOC0uMzI2LjIxNWwtLjgzMi40NjJtLTUuMjUtNC4zNzUgMS4zMTIuNzNtMCAwIDEuMzEzLS43M20tMS4zMTMuNzN2MS40NThNMi4yNSA0LjA4NGwxLjMxMy43MjltNy44NzQgMCAxLjMxMy0uNzNNNy41IDExLjM3NnYxLjQ1OSIgc3Ryb2tlPSIjQTVBM0E5IiBzdHJva2Utd2lkdGg9IjEuNSIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+PC9zdmc+\";\n","var __defProp = Object.defineProperty;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nimport * as React from \"react\";\nconst SvgChatConfigurationAtom = (props) => /* @__PURE__ */ React.createElement(\"svg\", __spreadValues({ width: 52, height: 52, fill: \"none\", xmlns: \"http://www.w3.org/2000/svg\" }, props), /* @__PURE__ */ React.createElement(\"g\", { filter: \"url(#chat-configuration-atom_svg__a)\" }, /* @__PURE__ */ React.createElement(\"path\", { d: \"M2.5 11A9.5 9.5 0 0 1 12 1.5h28a9.5 9.5 0 0 1 9.5 9.5v28a9.5 9.5 0 0 1-9.5 9.5H12A9.5 9.5 0 0 1 2.5 39V11Z\", stroke: \"#EAECF0\", shapeRendering: \"crispEdges\" }), /* @__PURE__ */ React.createElement(\"path\", { d: \"M26 25h.01m3.525 3.535c-4.686 4.686-10.068 6.903-12.02 4.95-1.953-1.953.263-7.335 4.949-12.02 4.686-4.687 10.068-6.903 12.02-4.95 1.953 1.952-.263 7.334-4.949 12.02Zm0-7.071c4.686 4.686 6.902 10.068 4.95 12.02-1.953 1.953-7.335-.263-12.021-4.949-4.686-4.686-6.902-10.068-4.95-12.02 1.953-1.953 7.335.263 12.021 4.949ZM26.5 25a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Z\", stroke: \"#344054\", strokeWidth: 2, strokeLinecap: \"round\", strokeLinejoin: \"round\" })), /* @__PURE__ */ React.createElement(\"defs\", null, /* @__PURE__ */ React.createElement(\"filter\", { id: \"chat-configuration-atom_svg__a\", x: 0, y: 0, width: 52, height: 52, filterUnits: \"userSpaceOnUse\", colorInterpolationFilters: \"sRGB\" }, /* @__PURE__ */ React.createElement(\"feFlood\", { floodOpacity: 0, result: \"BackgroundImageFix\" }), /* @__PURE__ */ React.createElement(\"feColorMatrix\", { in: \"SourceAlpha\", values: \"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0\", result: \"hardAlpha\" }), /* @__PURE__ */ React.createElement(\"feOffset\", { dy: 1 }), /* @__PURE__ */ React.createElement(\"feGaussianBlur\", { stdDeviation: 1 }), /* @__PURE__ */ React.createElement(\"feComposite\", { in2: \"hardAlpha\", operator: \"out\" }), /* @__PURE__ */ React.createElement(\"feColorMatrix\", { values: \"0 0 0 0 0.0627451 0 0 0 0 0.0941176 0 0 0 0 0.156863 0 0 0 0.05 0\" }), /* @__PURE__ */ React.createElement(\"feBlend\", { in2: \"BackgroundImageFix\", result: \"effect1_dropShadow_550_8026\" }), /* @__PURE__ */ React.createElement(\"feBlend\", { in: \"SourceGraphic\", in2: \"effect1_dropShadow_550_8026\", result: \"shape\" }))));\nexport { SvgChatConfigurationAtom as ReactComponent };\nexport default \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTIiIGhlaWdodD0iNTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsdGVyPSJ1cmwoI2EpIj48cGF0aCBkPSJNMi41IDExQTkuNSA5LjUgMCAwIDEgMTIgMS41aDI4YTkuNSA5LjUgMCAwIDEgOS41IDkuNXYyOGE5LjUgOS41IDAgMCAxLTkuNSA5LjVIMTJBOS41IDkuNSAwIDAgMSAyLjUgMzlWMTFaIiBzdHJva2U9IiNFQUVDRjAiIHNoYXBlLXJlbmRlcmluZz0iY3Jpc3BFZGdlcyIvPjxwYXRoIGQ9Ik0yNiAyNWguMDFtMy41MjUgMy41MzVjLTQuNjg2IDQuNjg2LTEwLjA2OCA2LjkwMy0xMi4wMiA0Ljk1LTEuOTUzLTEuOTUzLjI2My03LjMzNSA0Ljk0OS0xMi4wMiA0LjY4Ni00LjY4NyAxMC4wNjgtNi45MDMgMTIuMDItNC45NSAxLjk1MyAxLjk1Mi0uMjYzIDcuMzM0LTQuOTQ5IDEyLjAyWm0wLTcuMDcxYzQuNjg2IDQuNjg2IDYuOTAyIDEwLjA2OCA0Ljk1IDEyLjAyLTEuOTUzIDEuOTUzLTcuMzM1LS4yNjMtMTIuMDIxLTQuOTQ5LTQuNjg2LTQuNjg2LTYuOTAyLTEwLjA2OC00Ljk1LTEyLjAyIDEuOTUzLTEuOTUzIDcuMzM1LjI2MyAxMi4wMjEgNC45NDlaTTI2LjUgMjVhLjUuNSAwIDEgMS0xIDAgLjUuNSAwIDAgMSAxIDBaIiBzdHJva2U9IiMzNDQwNTQiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+PC9nPjxkZWZzPjxmaWx0ZXIgaWQ9ImEiIHg9IjAiIHk9IjAiIHdpZHRoPSI1MiIgaGVpZ2h0PSI1MiIgZmlsdGVyVW5pdHM9InVzZXJTcGFjZU9uVXNlIiBjb2xvci1pbnRlcnBvbGF0aW9uLWZpbHRlcnM9InNSR0IiPjxmZUZsb29kIGZsb29kLW9wYWNpdHk9IjAiIHJlc3VsdD0iQmFja2dyb3VuZEltYWdlRml4Ii8+PGZlQ29sb3JNYXRyaXggaW49IlNvdXJjZUFscGhhIiB2YWx1ZXM9IjAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDEyNyAwIiByZXN1bHQ9ImhhcmRBbHBoYSIvPjxmZU9mZnNldCBkeT0iMSIvPjxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjEiLz48ZmVDb21wb3NpdGUgaW4yPSJoYXJkQWxwaGEiIG9wZXJhdG9yPSJvdXQiLz48ZmVDb2xvck1hdHJpeCB2YWx1ZXM9IjAgMCAwIDAgMC4wNjI3NDUxIDAgMCAwIDAgMC4wOTQxMTc2IDAgMCAwIDAgMC4xNTY4NjMgMCAwIDAgMC4wNSAwIi8+PGZlQmxlbmQgaW4yPSJCYWNrZ3JvdW5kSW1hZ2VGaXgiIHJlc3VsdD0iZWZmZWN0MV9kcm9wU2hhZG93XzU1MF84MDI2Ii8+PGZlQmxlbmQgaW49IlNvdXJjZUdyYXBoaWMiIGluMj0iZWZmZWN0MV9kcm9wU2hhZG93XzU1MF84MDI2IiByZXN1bHQ9InNoYXBlIi8+PC9maWx0ZXI+PC9kZWZzPjwvc3ZnPg==\";\n","// extracted by mini-css-extract-plugin\nexport default {\"chatConfigurationDescription\":\"chatConfigurationDescription___Marto\",\"variableContainer\":\"variableContainer___Y8OCn\",\"variableAlign\":\"variableAlign___V0wtR\",\"variableLabel\":\"variableLabel___lux8o\",\"variableIcon\":\"variableIcon___aAfD2\",\"variableTable\":\"variableTable___q3ddB\",\"editableRow\":\"editableRow____LyFZ\",\"segmentedHidden\":\"segmentedHidden___jWNN7\",\"sliderInputNumber\":\"sliderInputNumber___cS3d6\",\"variableSlider\":\"variableSlider___l0sWn\"};","import KnowledgeBaseItem from '@/components/knowledge-base-item';\nimport { useTranslate } from '@/hooks/common-hooks';\nimport { useFetchTenantInfo } from '@/hooks/user-setting-hooks';\nimport { PlusOutlined } from '@ant-design/icons';\nimport { Form, Input, message, Select, Switch, Typography, Upload } from 'antd';\nimport classNames from 'classnames';\nimport { useCallback } from 'react';\nimport { ISegmentedContentProps } from '../interface';\n\nimport styles from './index.less';\n\nconst emptyResponseField = ['prompt_config', 'empty_response'];\n\nconst AssistantSetting = ({\n  show,\n  form,\n  setHasError,\n}: ISegmentedContentProps) => {\n  const { t } = useTranslate('chat');\n  const { data } = useFetchTenantInfo(true);\n\n  const handleChange = useCallback(() => {\n    const kbIds = form.getFieldValue('kb_ids');\n    const emptyResponse = form.getFieldValue(emptyResponseField);\n\n    const required =\n      emptyResponse && ((Array.isArray(kbIds) && kbIds.length === 0) || !kbIds);\n\n    setHasError(required);\n    form.setFields([\n      {\n        name: emptyResponseField,\n        errors: required ? [t('emptyResponseMessage')] : [],\n      },\n    ]);\n  }, [form, setHasError, t]);\n\n  const normFile = (e: any) => {\n    if (Array.isArray(e)) {\n      return e;\n    }\n    return e?.fileList;\n  };\n\n  const handleTtsChange = useCallback(\n    (checked: boolean) => {\n      if (checked && !data.tts_id) {\n        message.error(`Please set TTS model firstly. \n        Setting >> Model providers >> System model settings`);\n        form.setFieldValue(['prompt_config', 'tts'], false);\n      }\n    },\n    [data, form],\n  );\n\n  const uploadButton = (\n    <button style={{ border: 0, background: 'none' }} type=\"button\">\n      <PlusOutlined />\n      <div style={{ marginTop: 8 }}>{t('upload', { keyPrefix: 'common' })}</div>\n    </button>\n  );\n\n  return (\n    <section\n      className={classNames({\n        [styles.segmentedHidden]: !show,\n      })}\n    >\n      <Form.Item\n        name={'name'}\n        label={t('assistantName')}\n        rules={[{ required: true, message: t('assistantNameMessage') }]}\n      >\n        <Input placeholder={t('namePlaceholder')} />\n      </Form.Item>\n      <Form.Item name={'description'} label={t('description')}>\n        <Input placeholder={t('descriptionPlaceholder')} />\n      </Form.Item>\n      <Form.Item\n        name=\"icon\"\n        label={t('assistantAvatar')}\n        valuePropName=\"fileList\"\n        getValueFromEvent={normFile}\n      >\n        <Upload\n          listType=\"picture-card\"\n          maxCount={1}\n          beforeUpload={() => false}\n          showUploadList={{ showPreviewIcon: false, showRemoveIcon: false }}\n        >\n          {show ? uploadButton : null}\n        </Upload>\n      </Form.Item>\n      <Form.Item\n        name={'language'}\n        label={t('language')}\n        initialValue={'English'}\n        tooltip=\"coming soon\"\n        style={{ display: 'none' }}\n      >\n        <Select\n          options={[\n            { value: 'Chinese', label: t('chinese', { keyPrefix: 'common' }) },\n            { value: 'English', label: t('english', { keyPrefix: 'common' }) },\n          ]}\n        />\n      </Form.Item>\n      <Form.Item\n        name={emptyResponseField}\n        label={t('emptyResponse')}\n        tooltip={t('emptyResponseTip')}\n      >\n        <Input placeholder=\"\" onChange={handleChange} />\n      </Form.Item>\n      <Form.Item\n        name={['prompt_config', 'prologue']}\n        label={t('setAnOpener')}\n        tooltip={t('setAnOpenerTip')}\n        initialValue={t('setAnOpenerInitial')}\n      >\n        <Input.TextArea autoSize={{ minRows: 5 }} />\n      </Form.Item>\n      <Form.Item\n        label={t('quote')}\n        valuePropName=\"checked\"\n        name={['prompt_config', 'quote']}\n        tooltip={t('quoteTip')}\n        initialValue={true}\n      >\n        <Switch />\n      </Form.Item>\n      <Form.Item\n        label={t('keyword')}\n        valuePropName=\"checked\"\n        name={['prompt_config', 'keyword']}\n        tooltip={t('keywordTip')}\n        initialValue={false}\n      >\n        <Switch />\n      </Form.Item>\n      <Form.Item\n        label={t('tts')}\n        valuePropName=\"checked\"\n        name={['prompt_config', 'tts']}\n        tooltip={t('ttsTip')}\n        initialValue={false}\n      >\n        <Switch onChange={handleTtsChange} />\n      </Form.Item>\n      <Form.Item label={'Tavily API Key'} tooltip={t('tavilyApiKeyTip')}>\n        <div className=\"flex flex-col gap-1\">\n          <Form.Item name={['prompt_config', 'tavily_api_key']} noStyle>\n            <Input.Password placeholder={t('tavilyApiKeyMessage')} />\n          </Form.Item>\n          <Typography.Link href=\"https://app.tavily.com/home\" target={'_blank'}>\n            {t('tavilyApiKeyHelp')}\n          </Typography.Link>\n        </div>\n      </Form.Item>\n      <KnowledgeBaseItem\n        required={false}\n        onChange={handleChange}\n      ></KnowledgeBaseItem>\n    </section>\n  );\n};\n\nexport default AssistantSetting;\n","import classNames from 'classnames';\nimport { useEffect } from 'react';\nimport { ISegmentedContentProps } from '../interface';\n\nimport LlmSettingItems from '@/components/llm-setting-items';\nimport {\n  ChatVariableEnabledField,\n  variableEnabledFieldMap,\n} from '@/constants/chat';\nimport { Variable } from '@/interfaces/database/chat';\nimport { setInitialChatVariableEnabledFieldValue } from '@/utils/chat';\nimport styles from './index.less';\n\nconst ModelSetting = ({\n  show,\n  form,\n  initialLlmSetting,\n  visible,\n}: ISegmentedContentProps & {\n  initialLlmSetting?: Variable;\n  visible?: boolean;\n}) => {\n  useEffect(() => {\n    if (visible) {\n      const values = Object.keys(variableEnabledFieldMap).reduce<\n        Record<string, boolean>\n      >((pre, field) => {\n        pre[field] =\n          initialLlmSetting === undefined\n            ? setInitialChatVariableEnabledFieldValue(\n                field as ChatVariableEnabledField,\n              )\n            : !!initialLlmSetting[\n                variableEnabledFieldMap[\n                  field as keyof typeof variableEnabledFieldMap\n                ] as keyof Variable\n              ];\n        return pre;\n      }, {});\n      form.setFieldsValue(values);\n    }\n  }, [form, initialLlmSetting, visible]);\n\n  return (\n    <section\n      className={classNames({\n        [styles.segmentedHidden]: !show,\n      })}\n    >\n      {visible && <LlmSettingItems prefix=\"llm_setting\"></LlmSettingItems>}\n    </section>\n  );\n};\n\nexport default ModelSetting;\n","import { Form, FormInstance, Input, InputRef } from 'antd';\nimport React, { useContext, useEffect, useRef, useState } from 'react';\n\nconst EditableContext = React.createContext<FormInstance<any> | null>(null);\n\ninterface EditableRowProps {\n  index: number;\n}\n\ninterface Item {\n  key: string;\n  name: string;\n  age: string;\n  address: string;\n}\n\nexport const EditableRow: React.FC<EditableRowProps> = ({\n  index,\n  ...props\n}) => {\n  const [form] = Form.useForm();\n  return (\n    <Form form={form} component={false}>\n      <EditableContext.Provider value={form}>\n        <tr {...props} />\n      </EditableContext.Provider>\n    </Form>\n  );\n};\n\ninterface EditableCellProps {\n  title: React.ReactNode;\n  editable: boolean;\n  children: React.ReactNode;\n  dataIndex: keyof Item;\n  record: Item;\n  handleSave: (record: Item) => void;\n}\n\nexport const EditableCell: React.FC<EditableCellProps> = ({\n  title,\n  editable,\n  children,\n  dataIndex,\n  record,\n  handleSave,\n  ...restProps\n}) => {\n  const [editing, setEditing] = useState(false);\n  const inputRef = useRef<InputRef>(null);\n  const form = useContext(EditableContext)!;\n\n  useEffect(() => {\n    if (editing) {\n      inputRef.current!.focus();\n    }\n  }, [editing]);\n\n  const toggleEdit = () => {\n    setEditing(!editing);\n    form.setFieldsValue({ [dataIndex]: record[dataIndex] });\n  };\n\n  const save = async () => {\n    try {\n      const values = await form.validateFields();\n\n      toggleEdit();\n      handleSave({ ...record, ...values });\n    } catch (errInfo) {\n      console.log('Save failed:', errInfo);\n    }\n  };\n\n  let childNode = children;\n\n  if (editable) {\n    childNode = editing ? (\n      <Form.Item\n        style={{ margin: 0 }}\n        name={dataIndex}\n        rules={[\n          {\n            required: true,\n            message: `${title} is required.`,\n          },\n        ]}\n      >\n        <Input ref={inputRef} onPressEnter={save} onBlur={save} />\n      </Form.Item>\n    ) : (\n      <div\n        className=\"editable-cell-value-wrap\"\n        style={{ paddingRight: 24 }}\n        onClick={toggleEdit}\n      >\n        {children}\n      </div>\n    );\n  }\n\n  return <td {...restProps}>{childNode}</td>;\n};\n","import SimilaritySlider from '@/components/similarity-slider';\nimport { DeleteOutlined, QuestionCircleOutlined } from '@ant-design/icons';\nimport {\n  Button,\n  Col,\n  Divider,\n  Form,\n  Input,\n  Row,\n  Switch,\n  Table,\n  TableProps,\n  Tooltip,\n} from 'antd';\nimport classNames from 'classnames';\nimport {\n  ForwardedRef,\n  forwardRef,\n  useEffect,\n  useImperativeHandle,\n  useState,\n} from 'react';\nimport { v4 as uuid } from 'uuid';\nimport {\n  VariableTableDataType as DataType,\n  IPromptConfigParameters,\n  ISegmentedContentProps,\n} from '../interface';\nimport { EditableCell, EditableRow } from './editable-cell';\n\nimport Rerank from '@/components/rerank';\nimport TopNItem from '@/components/top-n-item';\nimport { UseKnowledgeGraphItem } from '@/components/use-knowledge-graph-item';\nimport { useTranslate } from '@/hooks/common-hooks';\nimport { useSelectPromptConfigParameters } from '../hooks';\nimport styles from './index.less';\n\nconst PromptEngine = (\n  { show }: ISegmentedContentProps,\n  ref: ForwardedRef<Array<IPromptConfigParameters>>,\n) => {\n  const [dataSource, setDataSource] = useState<DataType[]>([]);\n  const parameters = useSelectPromptConfigParameters();\n  const { t } = useTranslate('chat');\n\n  const components = {\n    body: {\n      row: EditableRow,\n      cell: EditableCell,\n    },\n  };\n\n  const handleRemove = (key: string) => () => {\n    const newData = dataSource.filter((item) => item.key !== key);\n    setDataSource(newData);\n  };\n\n  const handleSave = (row: DataType) => {\n    const newData = [...dataSource];\n    const index = newData.findIndex((item) => row.key === item.key);\n    const item = newData[index];\n    newData.splice(index, 1, {\n      ...item,\n      ...row,\n    });\n    setDataSource(newData);\n  };\n\n  const handleAdd = () => {\n    setDataSource((state) => [\n      ...state,\n      {\n        key: uuid(),\n        variable: '',\n        optional: true,\n      },\n    ]);\n  };\n\n  const handleOptionalChange = (row: DataType) => (checked: boolean) => {\n    const newData = [...dataSource];\n    const index = newData.findIndex((item) => row.key === item.key);\n    const item = newData[index];\n    newData.splice(index, 1, {\n      ...item,\n      optional: checked,\n    });\n    setDataSource(newData);\n  };\n\n  useImperativeHandle(\n    ref,\n    () => {\n      return dataSource\n        .filter((x) => x.variable.trim() !== '')\n        .map((x) => ({ key: x.variable, optional: x.optional }));\n    },\n    [dataSource],\n  );\n\n  const columns: TableProps<DataType>['columns'] = [\n    {\n      title: t('key'),\n      dataIndex: 'variable',\n      key: 'variable',\n      onCell: (record: DataType) => ({\n        record,\n        editable: true,\n        dataIndex: 'variable',\n        title: 'key',\n        handleSave,\n      }),\n    },\n    {\n      title: t('optional'),\n      dataIndex: 'optional',\n      key: 'optional',\n      width: 40,\n      align: 'center',\n      render(text, record) {\n        return (\n          <Switch\n            size=\"small\"\n            checked={text}\n            onChange={handleOptionalChange(record)}\n          />\n        );\n      },\n    },\n    {\n      title: t('operation'),\n      dataIndex: 'operation',\n      width: 30,\n      key: 'operation',\n      align: 'center',\n      render(_, record) {\n        return <DeleteOutlined onClick={handleRemove(record.key)} />;\n      },\n    },\n  ];\n\n  useEffect(() => {\n    setDataSource(parameters);\n  }, [parameters]);\n\n  return (\n    <section\n      className={classNames({\n        [styles.segmentedHidden]: !show,\n      })}\n    >\n      <Form.Item\n        label={t('system')}\n        rules={[{ required: true, message: t('systemMessage') }]}\n        tooltip={t('systemTip')}\n        name={['prompt_config', 'system']}\n        initialValue={t('systemInitialValue')}\n      >\n        <Input.TextArea autoSize={{ maxRows: 8, minRows: 5 }} />\n      </Form.Item>\n      <Divider></Divider>\n      <SimilaritySlider isTooltipShown></SimilaritySlider>\n      <TopNItem></TopNItem>\n      <Form.Item\n        label={t('multiTurn')}\n        tooltip={t('multiTurnTip')}\n        name={['prompt_config', 'refine_multiturn']}\n        initialValue={true}\n      >\n        <Switch></Switch>\n      </Form.Item>\n      <UseKnowledgeGraphItem\n        filedName={['prompt_config', 'use_kg']}\n      ></UseKnowledgeGraphItem>\n      <Form.Item\n        label={t('reasoning')}\n        tooltip={t('reasoningTip')}\n        name={['prompt_config', 'reasoning']}\n        initialValue={false}\n      >\n        <Switch></Switch>\n      </Form.Item>\n      <Rerank></Rerank>\n      <section className={classNames(styles.variableContainer)}>\n        <Row align={'middle'} justify=\"end\">\n          <Col span={9} className={styles.variableAlign}>\n            <label className={styles.variableLabel}>\n              {t('variable')}\n              <Tooltip title={t('variableTip')}>\n                <QuestionCircleOutlined className={styles.variableIcon} />\n              </Tooltip>\n            </label>\n          </Col>\n          <Col span={15} className={styles.variableAlign}>\n            <Button size=\"small\" onClick={handleAdd}>\n              {t('add')}\n            </Button>\n          </Col>\n        </Row>\n        {dataSource.length > 0 && (\n          <Row>\n            <Col span={7}> </Col>\n            <Col span={17}>\n              <Table\n                dataSource={dataSource}\n                columns={columns}\n                rowKey={'key'}\n                className={styles.variableTable}\n                components={components}\n                rowClassName={() => styles.editableRow}\n              />\n            </Col>\n          </Row>\n        )}\n      </section>\n    </section>\n  );\n};\n\nexport default forwardRef(PromptEngine);\n","import { ReactComponent as ChatConfigurationAtom } from '@/assets/svg/chat-configuration-atom.svg';\nimport { IModalManagerChildrenProps } from '@/components/modal-manager';\nimport {\n  ModelVariableType,\n  settledModelVariableMap,\n} from '@/constants/knowledge';\nimport { useTranslate } from '@/hooks/common-hooks';\nimport { useFetchModelId } from '@/hooks/logic-hooks';\nimport { IDialog } from '@/interfaces/database/chat';\nimport { getBase64FromUploadFileList } from '@/utils/file-util';\nimport { removeUselessFieldsFromValues } from '@/utils/form';\nimport { Divider, Flex, Form, Modal, Segmented, UploadFile } from 'antd';\nimport { SegmentedValue } from 'antd/es/segmented';\nimport camelCase from 'lodash/camelCase';\nimport { useEffect, useRef, useState } from 'react';\nimport { IPromptConfigParameters } from '../interface';\nimport AssistantSetting from './assistant-setting';\nimport ModelSetting from './model-setting';\nimport PromptEngine from './prompt-engine';\n\nimport styles from './index.less';\n\nconst layout = {\n  labelCol: { span: 9 },\n  wrapperCol: { span: 15 },\n};\n\nconst validateMessages = {\n  required: '${label} is required!',\n  types: {\n    email: '${label} is not a valid email!',\n    number: '${label} is not a valid number!',\n  },\n  number: {\n    range: '${label} must be between ${min} and ${max}',\n  },\n};\n\nenum ConfigurationSegmented {\n  AssistantSetting = 'Assistant Setting',\n  PromptEngine = 'Prompt Engine',\n  ModelSetting = 'Model Setting',\n}\n\nconst segmentedMap = {\n  [ConfigurationSegmented.AssistantSetting]: AssistantSetting,\n  [ConfigurationSegmented.ModelSetting]: ModelSetting,\n  [ConfigurationSegmented.PromptEngine]: PromptEngine,\n};\n\ninterface IProps extends IModalManagerChildrenProps {\n  initialDialog: IDialog;\n  loading: boolean;\n  onOk: (dialog: IDialog) => void;\n  clearDialog: () => void;\n}\n\nconst ChatConfigurationModal = ({\n  visible,\n  hideModal,\n  initialDialog,\n  loading,\n  onOk,\n  clearDialog,\n}: IProps) => {\n  const [form] = Form.useForm();\n  const [hasError, setHasError] = useState(false);\n\n  const [value, setValue] = useState<ConfigurationSegmented>(\n    ConfigurationSegmented.AssistantSetting,\n  );\n  const promptEngineRef = useRef<Array<IPromptConfigParameters>>([]);\n  const modelId = useFetchModelId();\n  const { t } = useTranslate('chat');\n\n  const handleOk = async () => {\n    const values = await form.validateFields();\n    if (hasError) {\n      return;\n    }\n    const nextValues: any = removeUselessFieldsFromValues(\n      values,\n      'llm_setting.',\n    );\n    const emptyResponse = nextValues.prompt_config?.empty_response ?? '';\n\n    const icon = await getBase64FromUploadFileList(values.icon);\n\n    const finalValues = {\n      dialog_id: initialDialog.id,\n      ...nextValues,\n      vector_similarity_weight: 1 - nextValues.vector_similarity_weight,\n      prompt_config: {\n        ...nextValues.prompt_config,\n        parameters: promptEngineRef.current,\n        empty_response: emptyResponse,\n      },\n      icon,\n    };\n    onOk(finalValues);\n  };\n\n  const handleSegmentedChange = (val: SegmentedValue) => {\n    setValue(val as ConfigurationSegmented);\n  };\n\n  const handleModalAfterClose = () => {\n    clearDialog();\n    form.resetFields();\n  };\n\n  const title = (\n    <Flex gap={16}>\n      <ChatConfigurationAtom></ChatConfigurationAtom>\n      <div>\n        <b>{t('chatConfiguration')}</b>\n        <div className={styles.chatConfigurationDescription}>\n          {t('chatConfigurationDescription')}\n        </div>\n      </div>\n    </Flex>\n  );\n\n  useEffect(() => {\n    if (visible) {\n      const icon = initialDialog.icon;\n      let fileList: UploadFile[] = [];\n\n      if (icon) {\n        fileList = [{ uid: '1', name: 'file', thumbUrl: icon, status: 'done' }];\n      }\n      form.setFieldsValue({\n        ...initialDialog,\n        llm_setting:\n          initialDialog.llm_setting ??\n          settledModelVariableMap[ModelVariableType.Precise],\n        icon: fileList,\n        llm_id: initialDialog.llm_id ?? modelId,\n        vector_similarity_weight:\n          1 - (initialDialog.vector_similarity_weight ?? 0.3),\n      });\n    }\n  }, [initialDialog, form, visible, modelId]);\n\n  return (\n    <Modal\n      title={title}\n      width={688}\n      open={visible}\n      onOk={handleOk}\n      onCancel={hideModal}\n      confirmLoading={loading}\n      destroyOnClose\n      afterClose={handleModalAfterClose}\n    >\n      <Segmented\n        size={'large'}\n        value={value}\n        onChange={handleSegmentedChange}\n        options={Object.values(ConfigurationSegmented).map((x) => ({\n          label: t(camelCase(x)),\n          value: x,\n        }))}\n        block\n      />\n      <Divider></Divider>\n      <Form\n        {...layout}\n        name=\"nest-messages\"\n        form={form}\n        style={{ maxWidth: 600 }}\n        validateMessages={validateMessages}\n        colon={false}\n      >\n        {Object.entries(segmentedMap).map(([key, Element]) => (\n          <Element\n            key={key}\n            show={key === value}\n            form={form}\n            setHasError={setHasError}\n            {...(key === ConfigurationSegmented.ModelSetting\n              ? { initialLlmSetting: initialDialog.llm_setting, visible }\n              : {})}\n            {...(key === ConfigurationSegmented.PromptEngine\n              ? { ref: promptEngineRef }\n              : {})}\n          ></Element>\n        ))}\n      </Form>\n    </Modal>\n  );\n};\n\nexport default ChatConfigurationModal;\n","// extracted by mini-css-extract-plugin\nexport default {\"chatContainer\":\"chatContainer___KnZy3\",\"messageContainer\":\"messageContainer___HpbDk\"};","import MessageItem from '@/components/message-item';\nimport { MessageType } from '@/constants/chat';\nimport { Flex, Spin } from 'antd';\nimport {\n  useCreateConversationBeforeUploadDocument,\n  useGetFileIcon,\n  useGetSendButtonDisabled,\n  useSendButtonDisabled,\n  useSendNextMessage,\n} from '../hooks';\nimport { buildMessageItemReference } from '../utils';\n\nimport MessageInput from '@/components/message-input';\nimport PdfDrawer from '@/components/pdf-drawer';\nimport { useClickDrawer } from '@/components/pdf-drawer/hooks';\nimport {\n  useFetchNextConversation,\n  useGetChatSearchParams,\n} from '@/hooks/chat-hooks';\nimport { useFetchUserInfo } from '@/hooks/user-setting-hooks';\nimport { buildMessageUuidWithRole } from '@/utils/chat';\nimport { memo } from 'react';\nimport styles from './index.less';\n\ninterface IProps {\n  controller: AbortController;\n}\n\nconst ChatContainer = ({ controller }: IProps) => {\n  const { conversationId } = useGetChatSearchParams();\n  const { data: conversation } = useFetchNextConversation();\n\n  const {\n    value,\n    ref,\n    loading,\n    sendLoading,\n    derivedMessages,\n    handleInputChange,\n    handlePressEnter,\n    regenerateMessage,\n    removeMessageById,\n  } = useSendNextMessage(controller);\n\n  const { visible, hideModal, documentId, selectedChunk, clickDocumentButton } =\n    useClickDrawer();\n  const disabled = useGetSendButtonDisabled();\n  const sendDisabled = useSendButtonDisabled(value);\n  useGetFileIcon();\n  const { data: userInfo } = useFetchUserInfo();\n  const { createConversationBeforeUploadDocument } =\n    useCreateConversationBeforeUploadDocument();\n\n  return (\n    <>\n      <Flex flex={1} className={styles.chatContainer} vertical>\n        <Flex flex={1} vertical className={styles.messageContainer}>\n          <div>\n            <Spin spinning={loading}>\n              {derivedMessages?.map((message, i) => {\n                return (\n                  <MessageItem\n                    loading={\n                      message.role === MessageType.Assistant &&\n                      sendLoading &&\n                      derivedMessages.length - 1 === i\n                    }\n                    key={buildMessageUuidWithRole(message)}\n                    item={message}\n                    nickname={userInfo.nickname}\n                    avatar={userInfo.avatar}\n                    avatarDialog={conversation.avatar}\n                    reference={buildMessageItemReference(\n                      {\n                        message: derivedMessages,\n                        reference: conversation.reference,\n                      },\n                      message,\n                    )}\n                    clickDocumentButton={clickDocumentButton}\n                    index={i}\n                    removeMessageById={removeMessageById}\n                    regenerateMessage={regenerateMessage}\n                    sendLoading={sendLoading}\n                  ></MessageItem>\n                );\n              })}\n            </Spin>\n          </div>\n          <div ref={ref} />\n        </Flex>\n        <MessageInput\n          disabled={disabled}\n          sendDisabled={sendDisabled}\n          sendLoading={sendLoading}\n          value={value}\n          onInputChange={handleInputChange}\n          onPressEnter={handlePressEnter}\n          conversationId={conversationId}\n          createConversationBeforeUploadDocument={\n            createConversationBeforeUploadDocument\n          }\n        ></MessageInput>\n      </Flex>\n      <PdfDrawer\n        visible={visible}\n        hideModal={hideModal}\n        documentId={documentId}\n        chunk={selectedChunk}\n      ></PdfDrawer>\n    </>\n  );\n};\n\nexport default memo(ChatContainer);\n","// extracted by mini-css-extract-plugin\nexport default {\"chatWrapper\":\"chatWrapper___LQ6YY\",\"chatAppWrapper\":\"chatAppWrapper___hrF6r\",\"chatAppContent\":\"chatAppContent___Ri0fp\",\"chatAppCard\":\"chatAppCard___kPbxc\",\"cubeIcon\":\"cubeIcon___zAmbo\",\"chatAppCardSelected\":\"chatAppCardSelected___h9j2W\",\"chatAppCardSelectedDark\":\"chatAppCardSelectedDark___K4uSc\",\"chatTitleWrapper\":\"chatTitleWrapper___MXbZF\",\"chatTitle\":\"chatTitle___cyXkX\",\"chatTitleContent\":\"chatTitleContent___XsLt3\",\"chatSpin\":\"chatSpin___J9mE8\",\"chatTitleCard\":\"chatTitleCard___Pnbv0\",\"chatTitleCardSelected\":\"chatTitleCardSelected___A8BIt\",\"chatTitleCardSelectedDark\":\"chatTitleCardSelectedDark___isklU\",\"divider\":\"divider___d5TdM\"};","import { ReactComponent as ChatAppCube } from '@/assets/svg/chat-app-cube.svg';\nimport RenameModal from '@/components/rename-modal';\nimport { DeleteOutlined, EditOutlined } from '@ant-design/icons';\nimport {\n  Avatar,\n  Button,\n  Card,\n  Divider,\n  Dropdown,\n  Flex,\n  MenuProps,\n  Space,\n  Spin,\n  Tag,\n  Tooltip,\n  Typography,\n} from 'antd';\nimport { MenuItemProps } from 'antd/lib/menu/MenuItem';\nimport classNames from 'classnames';\nimport { useCallback, useState } from 'react';\nimport ChatConfigurationModal from './chat-configuration-modal';\nimport ChatContainer from './chat-container';\nimport {\n  useDeleteConversation,\n  useDeleteDialog,\n  useEditDialog,\n  useHandleItemHover,\n  useRenameConversation,\n  useSelectDerivedConversationList,\n} from './hooks';\n\nimport EmbedModal from '@/components/api-service/embed-modal';\nimport { useShowEmbedModal } from '@/components/api-service/hooks';\nimport SvgIcon from '@/components/svg-icon';\nimport { useTheme } from '@/components/theme-provider';\nimport { SharedFrom } from '@/constants/chat';\nimport {\n  useClickConversationCard,\n  useClickDialogCard,\n  useFetchNextDialogList,\n  useGetChatSearchParams,\n} from '@/hooks/chat-hooks';\nimport { useTranslate } from '@/hooks/common-hooks';\nimport { useSetSelectedRecord } from '@/hooks/logic-hooks';\nimport { IDialog } from '@/interfaces/database/chat';\nimport { PictureInPicture2 } from 'lucide-react';\nimport styles from './index.less';\n\nconst { Text } = Typography;\n\nconst Chat = () => {\n  const { data: dialogList, loading: dialogLoading } = useFetchNextDialogList();\n  const { onRemoveDialog } = useDeleteDialog();\n  const { onRemoveConversation } = useDeleteConversation();\n  const { handleClickDialog } = useClickDialogCard();\n  const { handleClickConversation } = useClickConversationCard();\n  const { dialogId, conversationId } = useGetChatSearchParams();\n  const { theme } = useTheme();\n  const {\n    list: conversationList,\n    addTemporaryConversation,\n    loading: conversationLoading,\n  } = useSelectDerivedConversationList();\n  const { activated, handleItemEnter, handleItemLeave } = useHandleItemHover();\n  const {\n    activated: conversationActivated,\n    handleItemEnter: handleConversationItemEnter,\n    handleItemLeave: handleConversationItemLeave,\n  } = useHandleItemHover();\n  const {\n    conversationRenameLoading,\n    initialConversationName,\n    onConversationRenameOk,\n    conversationRenameVisible,\n    hideConversationRenameModal,\n    showConversationRenameModal,\n  } = useRenameConversation();\n  const {\n    dialogSettingLoading,\n    initialDialog,\n    onDialogEditOk,\n    dialogEditVisible,\n    clearDialog,\n    hideDialogEditModal,\n    showDialogEditModal,\n  } = useEditDialog();\n  const { t } = useTranslate('chat');\n  const { currentRecord, setRecord } = useSetSelectedRecord<IDialog>();\n  const [controller, setController] = useState(new AbortController());\n  const { showEmbedModal, hideEmbedModal, embedVisible, beta } =\n    useShowEmbedModal();\n\n  const handleAppCardEnter = (id: string) => () => {\n    handleItemEnter(id);\n  };\n\n  const handleConversationCardEnter = (id: string) => () => {\n    handleConversationItemEnter(id);\n  };\n\n  const handleShowChatConfigurationModal =\n    (dialogId?: string): any =>\n    (info: any) => {\n      info?.domEvent?.preventDefault();\n      info?.domEvent?.stopPropagation();\n      showDialogEditModal(dialogId);\n    };\n\n  const handleRemoveDialog =\n    (dialogId: string): MenuItemProps['onClick'] =>\n    ({ domEvent }) => {\n      domEvent.preventDefault();\n      domEvent.stopPropagation();\n      onRemoveDialog([dialogId]);\n    };\n\n  const handleShowOverviewModal =\n    (dialog: IDialog): any =>\n    (info: any) => {\n      info?.domEvent?.preventDefault();\n      info?.domEvent?.stopPropagation();\n      setRecord(dialog);\n      showEmbedModal();\n    };\n\n  const handleRemoveConversation =\n    (conversationId: string): MenuItemProps['onClick'] =>\n    ({ domEvent }) => {\n      domEvent.preventDefault();\n      domEvent.stopPropagation();\n      onRemoveConversation([conversationId]);\n    };\n\n  const handleShowConversationRenameModal =\n    (conversationId: string): MenuItemProps['onClick'] =>\n    ({ domEvent }) => {\n      domEvent.preventDefault();\n      domEvent.stopPropagation();\n      showConversationRenameModal(conversationId);\n    };\n\n  const handleDialogCardClick = useCallback(\n    (dialogId: string) => () => {\n      handleClickDialog(dialogId);\n    },\n    [handleClickDialog],\n  );\n\n  const handleConversationCardClick = useCallback(\n    (conversationId: string, isNew: boolean) => () => {\n      handleClickConversation(conversationId, isNew ? 'true' : '');\n      setController((pre) => {\n        pre.abort();\n        return new AbortController();\n      });\n    },\n    [handleClickConversation],\n  );\n\n  const handleCreateTemporaryConversation = useCallback(() => {\n    addTemporaryConversation();\n  }, [addTemporaryConversation]);\n\n  const buildAppItems = (dialog: IDialog) => {\n    const dialogId = dialog.id;\n\n    const appItems: MenuProps['items'] = [\n      {\n        key: '1',\n        onClick: handleShowChatConfigurationModal(dialogId),\n        label: (\n          <Space>\n            <EditOutlined />\n            {t('edit', { keyPrefix: 'common' })}\n          </Space>\n        ),\n      },\n      { type: 'divider' },\n      {\n        key: '2',\n        onClick: handleRemoveDialog(dialogId),\n        label: (\n          <Space>\n            <DeleteOutlined />\n            {t('delete', { keyPrefix: 'common' })}\n          </Space>\n        ),\n      },\n      { type: 'divider' },\n      {\n        key: '3',\n        onClick: handleShowOverviewModal(dialog),\n        label: (\n          <Space>\n            {/* <KeyOutlined /> */}\n            <PictureInPicture2 className=\"size-4\" />\n            {t('embedIntoSite', { keyPrefix: 'common' })}\n          </Space>\n        ),\n      },\n    ];\n\n    return appItems;\n  };\n\n  const buildConversationItems = (conversationId: string) => {\n    const appItems: MenuProps['items'] = [\n      {\n        key: '1',\n        onClick: handleShowConversationRenameModal(conversationId),\n        label: (\n          <Space>\n            <EditOutlined />\n            {t('rename', { keyPrefix: 'common' })}\n          </Space>\n        ),\n      },\n      { type: 'divider' },\n      {\n        key: '2',\n        onClick: handleRemoveConversation(conversationId),\n        label: (\n          <Space>\n            <DeleteOutlined />\n            {t('delete', { keyPrefix: 'common' })}\n          </Space>\n        ),\n      },\n    ];\n\n    return appItems;\n  };\n\n  return (\n    <Flex className={styles.chatWrapper}>\n      <Flex className={styles.chatAppWrapper}>\n        <Flex flex={1} vertical>\n          <Button type=\"primary\" onClick={handleShowChatConfigurationModal()}>\n            {t('createAssistant')}\n          </Button>\n          <Divider></Divider>\n          <Flex className={styles.chatAppContent} vertical gap={10}>\n            <Spin spinning={dialogLoading} wrapperClassName={styles.chatSpin}>\n              {dialogList.map((x) => (\n                <Card\n                  key={x.id}\n                  hoverable\n                  className={classNames(styles.chatAppCard, {\n                    [theme === 'dark'\n                      ? styles.chatAppCardSelectedDark\n                      : styles.chatAppCardSelected]: dialogId === x.id,\n                  })}\n                  onMouseEnter={handleAppCardEnter(x.id)}\n                  onMouseLeave={handleItemLeave}\n                  onClick={handleDialogCardClick(x.id)}\n                >\n                  <Flex justify=\"space-between\" align=\"center\">\n                    <Space size={15}>\n                      <Avatar src={x.icon} shape={'square'} />\n                      <section>\n                        <b>\n                          <Text\n                            ellipsis={{ tooltip: x.name }}\n                            style={{ width: 130 }}\n                          >\n                            {x.name}\n                          </Text>\n                        </b>\n                        <div>{x.description}</div>\n                      </section>\n                    </Space>\n                    {activated === x.id && (\n                      <section>\n                        <Dropdown menu={{ items: buildAppItems(x) }}>\n                          <ChatAppCube\n                            className={styles.cubeIcon}\n                          ></ChatAppCube>\n                        </Dropdown>\n                      </section>\n                    )}\n                  </Flex>\n                </Card>\n              ))}\n            </Spin>\n          </Flex>\n        </Flex>\n      </Flex>\n      <Divider type={'vertical'} className={styles.divider}></Divider>\n      <Flex className={styles.chatTitleWrapper}>\n        <Flex flex={1} vertical>\n          <Flex\n            justify={'space-between'}\n            align=\"center\"\n            className={styles.chatTitle}\n          >\n            <Space>\n              <b>{t('chat')}</b>\n              <Tag>{conversationList.length}</Tag>\n            </Space>\n            <Tooltip title={t('newChat')}>\n              <div>\n                <SvgIcon\n                  name=\"plus-circle-fill\"\n                  width={20}\n                  onClick={handleCreateTemporaryConversation}\n                ></SvgIcon>\n              </div>\n            </Tooltip>\n          </Flex>\n          <Divider></Divider>\n          <Flex vertical gap={10} className={styles.chatTitleContent}>\n            <Spin\n              spinning={conversationLoading}\n              wrapperClassName={styles.chatSpin}\n            >\n              {conversationList.map((x) => (\n                <Card\n                  key={x.id}\n                  hoverable\n                  onClick={handleConversationCardClick(x.id, x.is_new)}\n                  onMouseEnter={handleConversationCardEnter(x.id)}\n                  onMouseLeave={handleConversationItemLeave}\n                  className={classNames(styles.chatTitleCard, {\n                    [theme === 'dark'\n                      ? styles.chatTitleCardSelectedDark\n                      : styles.chatTitleCardSelected]: x.id === conversationId,\n                  })}\n                >\n                  <Flex justify=\"space-between\" align=\"center\">\n                    <div>\n                      <Text\n                        ellipsis={{ tooltip: x.name }}\n                        style={{ width: 150 }}\n                      >\n                        {x.name}\n                      </Text>\n                    </div>\n                    {conversationActivated === x.id &&\n                      x.id !== '' &&\n                      !x.is_new && (\n                        <section>\n                          <Dropdown\n                            menu={{ items: buildConversationItems(x.id) }}\n                          >\n                            <ChatAppCube\n                              className={styles.cubeIcon}\n                            ></ChatAppCube>\n                          </Dropdown>\n                        </section>\n                      )}\n                  </Flex>\n                </Card>\n              ))}\n            </Spin>\n          </Flex>\n        </Flex>\n      </Flex>\n      <Divider type={'vertical'} className={styles.divider}></Divider>\n      <ChatContainer controller={controller}></ChatContainer>\n      {dialogEditVisible && (\n        <ChatConfigurationModal\n          visible={dialogEditVisible}\n          initialDialog={initialDialog}\n          showModal={showDialogEditModal}\n          hideModal={hideDialogEditModal}\n          loading={dialogSettingLoading}\n          onOk={onDialogEditOk}\n          clearDialog={clearDialog}\n        ></ChatConfigurationModal>\n      )}\n      <RenameModal\n        visible={conversationRenameVisible}\n        hideModal={hideConversationRenameModal}\n        onOk={onConversationRenameOk}\n        initialName={initialConversationName}\n        loading={conversationRenameLoading}\n      ></RenameModal>\n\n      {embedVisible && (\n        <EmbedModal\n          visible={embedVisible}\n          hideModal={hideEmbedModal}\n          token={currentRecord.id}\n          form={SharedFrom.Chat}\n          beta={beta}\n          isAgent={false}\n        ></EmbedModal>\n      )}\n    </Flex>\n  );\n};\n\nexport default Chat;\n","import { variableEnabledFieldMap } from '@/constants/chat';\nimport omit from 'lodash/omit';\n\n// chat model setting and generate operator\nexport const excludeUnEnabledVariables = (\n  values: any = {},\n  prefix = 'llm_setting.',\n) => {\n  const unEnabledFields: Array<keyof typeof variableEnabledFieldMap> =\n    Object.keys(variableEnabledFieldMap).filter((key) => !values[key]) as Array<\n      keyof typeof variableEnabledFieldMap\n    >;\n\n  return unEnabledFields.map(\n    (key) => `${prefix}${variableEnabledFieldMap[key]}`,\n  );\n};\n\n// chat model setting and generate operator\nexport const removeUselessFieldsFromValues = (values: any, prefix?: string) => {\n  const nextValues: any = omit(values, [\n    ...Object.keys(variableEnabledFieldMap),\n    'parameter',\n    ...excludeUnEnabledVariables(values, prefix),\n  ]);\n\n  return nextValues;\n};\n"],"names":["Paragraph","Typography","Link","_ref","src","visible","hideModal","_ref$token","token","form","_ref$beta","beta","isAgent","t","useTranslate","isDarkTheme","useIsDarkTheme","_useState","useState","_useState2","_slicedToArray","visibleAvatar","setVisibleAvatar","_useState3","_useState4","locale","setLocale","languageOptions","useMemo","Object","values","LanguageAbbreviation","map","x","label","LanguageAbbreviationMap","value","iframeSrc","concat","location","origin","text","items","key","children","_jsxs","Card","title","extra","_jsx","CopyToClipboard","className","styles","Form","Item","labelCol","span","wrapperCol","Checkbox","checked","onChange","e","target","Select","placeholder","options","style","width","HightLightMarkdown","Modal","keyPrefix","open","top","onOk","onCancel","Tabs","defaultActiveKey","console","log","copyable","cn","_defineProperty","href","useOperateApiKey","idKey","dialogId","removeToken","useRemoveSystemToken","_useCreateSystemToken","useCreateSystemToken","createToken","creatingLoading","loading","_useFetchSystemTokenL","useFetchSystemTokenList","tokenList","data","listLoading","showDeleteConfirm","useShowDeleteConfirm","useCallback","useFetchTokenListBeforeOtherStep","showTokenEmptyError","message","error","_useShowBetaEmptyErro","showBetaEmptyError","useShowBetaEmptyError","_useFetchManualSystem","useFetchManualSystemTokenList","fetchSystemTokenList","Array","isArray","length","handleOperate","_asyncToGenerator","_regeneratorRuntime","mark","_callee","ret","list","_list$","wrap","_context","prev","next","sent","abrupt","stop","useShowEmbedModal","_useSetModalState","useSetModalState","embedVisible","hideEmbedModal","showEmbedModal","showModal","_useFetchTokenListBef","_callee2","_context2","embedToken","usePreviewChat","window","from","arguments","undefined","_window$location","protocol","host","getUrlWithToken","SharedFrom","Agent","Chat","handlePreview","_callee3","_context3","prefix","_ref$formItemLayout","formItemLayout","useFormInstance","parameterOptions","ModelVariableType","camelCase","handleParametersChange","variable","settledModelVariableMap","nextVariable","setFieldsValue","memorizedPrefix","modelOptions","useComposeLlmOptionsByModelTypes","LlmModelType","Image2text","_Fragment","_objectSpread","name","tooltip","rules","required","showSearch","popupMatchSelectWidth","Tooltip","QuestionCircleOutlined","initialValue","Precise","Flex","gap","align","valuePropName","noStyle","Switch","size","dependencies","_ref2","disabled","getFieldValue","flex","_toConsumableArray","Slider","max","step","InputNumber","min","_ref3","_ref4","_ref5","initialName","_Form$useForm","useForm","handleOk","validateFields","apply","useEffect","setFieldValue","okButtonProps","confirmLoading","maxWidth","onFinish","onFinishFailed","errorInfo","autoComplete","Input","SwitchFormField","useFormContext","FormField","control","render","field","FormItem","FormLabel","FormControl","onCheckedChange","UseKnowledgeGraphItem","filedName","useTranslation","UseKnowledgeGraphFormField","__defProp","defineProperty","__getOwnPropSymbols","getOwnPropertySymbols","__hasOwnProp","prototype","hasOwnProperty","__propIsEnum","propertyIsEnumerable","__defNormalProp","obj","enumerable","configurable","writable","SvgChatAppCube","props","a","b","prop","call","__spreadValues","height","fill","xmlns","d","stroke","strokeWidth","strokeLinecap","strokeLinejoin","SvgChatConfigurationAtom","filter","shapeRendering","id","y","filterUnits","colorInterpolationFilters","floodOpacity","result","in","dy","stdDeviation","in2","operator","emptyResponseField","show","setHasError","useFetchTenantInfo","handleChange","kbIds","setFields","errors","handleTtsChange","tts_id","uploadButton","border","background","type","PlusOutlined","marginTop","classNames","getValueFromEvent","fileList","Upload","listType","maxCount","beforeUpload","showUploadList","showPreviewIcon","showRemoveIcon","display","TextArea","autoSize","minRows","Password","KnowledgeBaseItem","initialLlmSetting","keys","variableEnabledFieldMap","reduce","pre","setInitialChatVariableEnabledFieldValue","LlmSettingItems","EditableContext","React","EditableRow","index","_objectWithoutProperties","_excluded","component","Provider","EditableCell","editable","dataIndex","record","handleSave","restProps","_excluded2","editing","setEditing","inputRef","useRef","useContext","current","focus","toggleEdit","save","t0","childNode","margin","ref","onPressEnter","onBlur","paddingRight","onClick","PromptEngine","dataSource","setDataSource","parameters","useSelectPromptConfigParameters","components","body","row","cell","newData","findIndex","item","splice","handleOptionalChange","optional","useImperativeHandle","trim","columns","onCell","_","DeleteOutlined","maxRows","Divider","SimilaritySlider","isTooltipShown","TopNItem","Rerank","Row","justify","Col","Button","state","uuid","Table","rowKey","rowClassName","forwardRef","layout","validateMessages","types","email","number","range","ConfigurationSegmented","segmentedMap","AssistantSetting","ModelSetting","initialDialog","clearDialog","hasError","setValue","promptEngineRef","modelId","useFetchModelId","_nextValues$prompt_co","_nextValues$prompt_co2","nextValues","emptyResponse","icon","finalValues","removeUselessFieldsFromValues","prompt_config","empty_response","getBase64FromUploadFileList","dialog_id","vector_similarity_weight","ChatConfigurationAtom","_initialDialog$llm_se","_initialDialog$llm_id","_initialDialog$vector","uid","thumbUrl","status","llm_setting","llm_id","destroyOnClose","afterClose","resetFields","Segmented","val","block","colon","entries","Element","ChatContainer","controller","conversationId","useGetChatSearchParams","conversation","useFetchNextConversation","_useSendNextMessage","useSendNextMessage","sendLoading","derivedMessages","handleInputChange","handlePressEnter","regenerateMessage","removeMessageById","_useClickDrawer","useClickDrawer","documentId","selectedChunk","clickDocumentButton","useGetSendButtonDisabled","sendDisabled","useSendButtonDisabled","useGetFileIcon","userInfo","useFetchUserInfo","createConversationBeforeUploadDocument","useCreateConversationBeforeUploadDocument","vertical","Spin","spinning","i","MessageItem","role","MessageType","Assistant","nickname","avatar","avatarDialog","reference","buildMessageItemReference","buildMessageUuidWithRole","MessageInput","onInputChange","PdfDrawer","chunk","memo","Text","_useFetchNextDialogLi","useFetchNextDialogList","dialogList","dialogLoading","onRemoveDialog","useDeleteDialog","onRemoveConversation","useDeleteConversation","handleClickDialog","useClickDialogCard","handleClickConversation","useClickConversationCard","_useGetChatSearchPara","theme","useTheme","_useSelectDerivedConv","useSelectDerivedConversationList","conversationList","addTemporaryConversation","conversationLoading","_useHandleItemHover","useHandleItemHover","activated","handleItemEnter","handleItemLeave","_useHandleItemHover2","conversationActivated","handleConversationItemEnter","handleConversationItemLeave","_useRenameConversatio","useRenameConversation","conversationRenameLoading","initialConversationName","onConversationRenameOk","conversationRenameVisible","hideConversationRenameModal","showConversationRenameModal","_useEditDialog","useEditDialog","dialogSettingLoading","onDialogEditOk","dialogEditVisible","hideDialogEditModal","showDialogEditModal","_useSetSelectedRecord","useSetSelectedRecord","currentRecord","setRecord","AbortController","setController","_useShowEmbedModal","handleShowChatConfigurationModal","info","_info$domEvent","_info$domEvent2","domEvent","preventDefault","stopPropagation","handleRemoveDialog","handleShowOverviewModal","dialog","_info$domEvent3","_info$domEvent4","handleRemoveConversation","handleShowConversationRenameModal","handleDialogCardClick","handleConversationCardClick","isNew","abort","handleCreateTemporaryConversation","buildAppItems","Space","EditOutlined","PictureInPicture2","buildConversationItems","wrapperClassName","hoverable","onMouseEnter","onMouseLeave","Avatar","shape","ellipsis","description","Dropdown","menu","ChatAppCube","Tag","SvgIcon","is_new","ChatConfigurationModal","RenameModal","EmbedModal","omit","excludeUnEnabledVariables"],"sourceRoot":""}