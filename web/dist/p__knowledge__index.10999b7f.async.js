"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7510],{65862:function(e,n,t){t.d(n,{Z:function(){return h}});var a=t(19632),r=t.n(a),i=t(86968),o=t(48689),s=t(37446),l=t(42075),c=t(85418),d=t(67421),u=t(62435),m="delete___BGyWn",p=t(86074),h=function(e){var n=e.deleteItem,t=e.children,a=e.iconFontSize,h=void 0===a?30:a,_=e.iconFontColor,f=void 0===_?"gray":_,x=e.items,v=void 0===x?[]:x,g=e.height,j=void 0===g?24:g,k=e.needsDeletionValidation,b=void 0===k||k,w=(0,d.$G)().t,Z=(0,i.I3)(),N=(0,u.useMemo)((function(){return[{key:"1",label:(0,p.jsxs)(l.Z,{children:[w("common.delete"),(0,p.jsx)(o.Z,{})]})}].concat(r()(v))}),[w,v]);return(0,p.jsx)(c.Z,{menu:{items:N,onClick:function(e){var t=e.domEvent,a=e.key;t.preventDefault(),t.stopPropagation(),"1"===a&&(b?Z({onOk:n}):n())}},children:t||(0,p.jsx)("span",{className:m,children:(0,p.jsx)(s.Z,{rotate:90,style:{fontSize:h,color:f,cursor:"pointer",height:j}})})})}},71852:function(e,n,t){t.r(n),t.d(n,{default:function(){return X}});var a=t(10541),r=t(39259),i=t(68795),o=t(24969),s=t(86250),l=t(42075),c=t(79531),d=t(15867),u=t(75081),m=t(21687),p=t(96074),h=t(32983),_=t(67421),f=t(58533),x=t(15009),v=t.n(x),g=t(99289),j=t.n(g),k=t(5574),b=t.n(k),w=t(96330),Z=t(86968),N=t(62435),C=t(24701),M=t(9783),y=t.n(M),I=t(28382),P=t(87547),D=t(15360),T=t(20841),W=t(40411),Y=t(4393),G=t(7134),L=t(93967),O=t.n(L),B=t(65862),z=t(98236),S={container:"container___eQyW8",delete:"delete___IVvZv",content:"content___BVb9e",context:"context___rx_ll",footerTop:"footerTop___zv8Sq",titleWrapper:"titleWrapper___f7thW",title:"title___rMM_S",description:"description___G_6nv",titledark:"titledark___JUbvS",descriptiondark:"descriptiondark___AWThG",card:"card___m1xzY",bottom:"bottom___oTHOs",bottomLeft:"bottomLeft___d92Vz",leftIcon:"leftIcon___nOsbs",rightText:"rightText___N4_qm",hideRibbon:"hideRibbon___cUMiA",ribbon:"ribbon___c4quV"},F=t(86074),K=function(e){var n=e.item,t=(0,C.s0)(),i=(0,_.$G)().t,o=(0,r.jd)().data,s=(0,z.Fg)().theme,c=(0,a.E2)().deleteKnowledge,d=function(){var e=j()(v()().mark((function e(){return v()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c(n.id));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,F.jsx)(W.Z.Ribbon,{text:null==n?void 0:n.nickname,color:(null==o?void 0:o.nickname)===(null==n?void 0:n.nickname)?"#1677ff":"pink",className:O()(S.ribbon,y()({},S.hideRibbon,"team"!==n.permission)),children:(0,F.jsx)(Y.Z,{className:S.card,onClick:function(){t("/knowledge/".concat(w.Rx.Dataset,"?id=").concat(n.id),{state:{from:"list"}})},children:(0,F.jsxs)("div",{className:S.container,children:[(0,F.jsxs)("div",{className:S.content,children:[(0,F.jsx)(G.C,{size:34,icon:(0,F.jsx)(P.Z,{}),src:n.avatar}),(0,F.jsx)(B.Z,{deleteItem:d})]}),(0,F.jsxs)("div",{className:S.titleWrapper,children:[(0,F.jsx)("span",{className:"dark"===s?S.titledark:S.title,children:n.name}),(0,F.jsx)("p",{className:"dark"===s?S.descriptiondark:S.description,children:n.description})]}),(0,F.jsxs)("div",{className:S.footer,children:[(0,F.jsx)("div",{className:S.footerTop,children:(0,F.jsxs)("div",{className:S.bottomLeft,children:[(0,F.jsx)(D.Z,{className:S.leftIcon}),(0,F.jsx)("span",{className:S.rightText,children:(0,F.jsxs)(l.Z,{children:[n.doc_num,i("knowledgeList.doc")]})})]})}),(0,F.jsx)("div",{className:S.bottom,children:(0,F.jsxs)("div",{className:S.bottomLeft,children:[(0,F.jsx)(T.Z,{className:S.leftIcon}),(0,F.jsx)("span",{className:S.rightText,children:(0,I.p6)(n.update_time)})]})})]})]})})})},R=t(22150),A=t(85576),H=function(e){var n=e.visible,t=e.hideModal,a=e.loading,r=e.onOk,i=R.Z.useForm(),o=b()(i,1)[0],s=(0,_.$G)("translation",{keyPrefix:"knowledgeList"}).t,l=function(){var e=j()(v()().mark((function e(){var n;return v()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.validateFields();case 2:n=e.sent,r(n.name);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,F.jsx)(A.Z,{title:s("createKnowledgeBase"),open:n,onOk:l,onCancel:t,okButtonProps:{loading:a},children:(0,F.jsx)(R.Z,{name:"Create",labelCol:{span:4},wrapperCol:{span:20},style:{maxWidth:600},autoComplete:"off",form:o,children:(0,F.jsx)(R.Z.Item,{label:s("name"),name:"name",rules:[{required:!0,message:s("namePlaceholder")}],children:(0,F.jsx)(c.Z,{placeholder:s("namePlaceholder")})})})})},V="knowledge___CaWP3",q="topWrapper___wSBFd",E="title___K81Cs",$="description___r7Ii4",Q="topButton___AGnXw",U="knowledgeCardContainer___ouwmb",J="knowledgeEmpty___YQOlB",X=function(){var e,n=(0,r.jd)().data,t=(0,_.$G)("translation",{keyPrefix:"knowledgeList"}).t,x=function(){var e=(0,Z.pG)(),n=e.visible,t=e.hideModal,r=e.showModal,i=(0,a.ME)(),o=i.loading,s=i.createKnowledge,l=(0,C.s0)(),c=(0,N.useCallback)(function(){var e=j()(v()().mark((function e(n){var a;return v()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s({name:n});case 2:0===(null==(a=e.sent)?void 0:a.code)&&(t(),l("/knowledge/".concat(w.Rx.Configuration,"?id=").concat(a.data.kb_id)));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[s,t,l]);return{loading:o,onCreateOk:c,visible:n,hideModal:t,showModal:r}}(),g=x.visible,k=x.hideModal,b=x.showModal,M=x.onCreateOk,y=x.loading,I=(0,a.L5)(),P=I.fetchNextPage,D=I.data,T=I.hasNextPage,W=I.searchString,Y=I.handleInputChange,G=I.loading,L=(0,N.useMemo)((function(){var e,n;return null!==(e=null==D||null===(n=D.pages)||void 0===n?void 0:n.flatMap((function(e){return Array.isArray(e.kbs)?e.kbs:[]})))&&void 0!==e?e:[]}),[null==D?void 0:D.pages]),O=(0,N.useMemo)((function(){var e;return null!==(e=null==D?void 0:D.pages.at(-1).total)&&void 0!==e?e:0}),[null==D?void 0:D.pages]);return(0,F.jsxs)(s.Z,{className:V,vertical:!0,flex:1,id:"scrollableDiv",children:[(0,F.jsxs)("div",{className:q,children:[(0,F.jsxs)("div",{children:[(0,F.jsxs)("span",{className:E,children:[t("welcome"),", ",n.nickname]}),(0,F.jsx)("p",{className:$,children:t("description")})]}),(0,F.jsxs)(l.Z,{size:"large",children:[(0,F.jsx)(c.Z,{placeholder:t("searchKnowledgePlaceholder"),value:W,style:{width:220},allowClear:!0,onChange:Y,prefix:(0,F.jsx)(i.Z,{})}),(0,F.jsx)(d.ZP,{type:"primary",icon:(0,F.jsx)(o.Z,{}),onClick:b,className:Q,children:t("createKnowledgeBase")})]})]}),(0,F.jsx)(u.Z,{spinning:G,children:(0,F.jsx)(f.Z,{dataLength:null!==(e=null==L?void 0:L.length)&&void 0!==e?e:0,next:P,hasMore:T,loader:(0,F.jsx)(m.Z,{avatar:!0,paragraph:{rows:1},active:!0}),endMessage:!!O&&(0,F.jsxs)(p.Z,{plain:!0,children:[t("noMoreData")," 🤐"]}),scrollableTarget:"scrollableDiv",children:(0,F.jsx)(s.Z,{gap:"large",wrap:"wrap",className:U,children:(null==L?void 0:L.length)>0?L.map((function(e,n){return(0,F.jsx)(K,{item:e},"".concat(null==e?void 0:e.name,"-").concat(n))})):(0,F.jsx)(h.Z,{className:J})})})}),(0,F.jsx)(H,{loading:y,visible:g,hideModal:k,onOk:M})]})}},28382:function(e,n,t){t.d(n,{Qc:function(){return s},mr:function(){return o},p6:function(){return i}});var a=t(27484),r=t.n(a);function i(e){return e?r()(e).format("DD/MM/YYYY HH:mm:ss"):""}function o(e){return e?r()(e).format("HH:mm:ss"):""}function s(e){return e?r()(e).format("DD/MM/YYYY"):""}}}]);
//# sourceMappingURL=p__knowledge__index.10999b7f.async.js.map