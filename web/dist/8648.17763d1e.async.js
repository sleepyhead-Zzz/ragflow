(self.webpackChunk=self.webpackChunk||[]).push([[8648],{1079:function(e,n,t){"use strict";t.d(n,{Cs:function(){return o},Pc:function(){return l},oQ:function(){return i},qH:function(){return s},uY:function(){return c},vv:function(){return u}});var r=t(9783),a=t.n(r),o=function(e){return e.Assistant="assistant",e.User="user",e}({}),c=function(e){return e.TemperatureEnabled="temperatureEnabled",e.TopPEnabled="topPEnabled",e.PresencePenaltyEnabled="presencePenaltyEnabled",e.FrequencyPenaltyEnabled="frequencyPenaltyEnabled",e.MaxTokensEnabled="maxTokensEnabled",e}({}),u=a()(a()(a()(a()(a()({},c.TemperatureEnabled,"temperature"),c.TopPEnabled,"top_p"),c.PresencePenaltyEnabled,"presence_penalty"),c.FrequencyPenaltyEnabled,"frequency_penalty"),c.MaxTokensEnabled,"max_tokens"),s=function(e){return e.Agent="agent",e.Chat="chat",e}({}),i=function(e){return e.DialogId="dialogId",e.ConversationId="conversationId",e.isNew="isNew",e}({}),l="empty"},96330:function(e,n,t){"use strict";t.d(n,{K1:function(){return f},Rx:function(){return o},S8:function(){return s},Vr:function(){return i},cG:function(){return c},ld:function(){return l},n_:function(){return d},oQ:function(){return u}});var r=t(9783),a=t.n(r),o=function(e){return e.Dataset="dataset",e.Testing="testing",e.Configuration="configuration",e.KnowledgeGraph="knowledgeGraph",e}({}),c=function(e){return e.UNSTART="0",e.RUNNING="1",e.CANCEL="2",e.DONE="3",e.FAIL="4",e}({}),u=function(e){return e.Improvise="Improvise",e.Precise="Precise",e.Balance="Balance",e}({}),s=a()(a()(a()({},u.Improvise,{temperature:.9,top_p:.9,frequency_penalty:.2,presence_penalty:.4,max_tokens:512}),u.Precise,{temperature:.1,top_p:.3,frequency_penalty:.7,presence_penalty:.4,max_tokens:512}),u.Balance,{temperature:.5,top_p:.5,frequency_penalty:.7,presence_penalty:.4,max_tokens:512}),i=function(e){return e.Embedding="embedding",e.Chat="chat",e.Image2text="image2text",e.Speech2text="speech2text",e.Rerank="rerank",e.TTS="tts",e}({}),l=function(e){return e.DocumentId="doc_id",e.KnowledgeId="id",e}({}),d=function(e){return e.Virtual="virtual",e.Visual="visual",e}({}),f=function(e){return e.Naive="naive",e.Qa="qa",e.Resume="resume",e.Manual="manual",e.Table="table",e.Paper="paper",e.Book="book",e.Laws="laws",e.Presentation="presentation",e.Picture="picture",e.One="one",e.Audio="audio",e.Email="email",e.Tag="tag",e.KnowledgeGraph="knowledge_graph",e}({})},86968:function(e,n,t){"use strict";t.d(n,{I3:function(){return p},pG:function(){return v},qM:function(){return g}});var r=t(15009),a=t.n(r),o=t(99289),c=t.n(o),u=t(5574),s=t.n(u),i=t(21640),l=t(3321),d=(t(18446),t(62435)),f=t(67421),m=t(86074),v=function(){var e=(0,d.useState)(!1),n=s()(e,2),t=n[0],r=n[1],a=(0,d.useCallback)((function(){r(!0)}),[]),o=(0,d.useCallback)((function(){r(!1)}),[]),c=(0,d.useCallback)((function(){r(!t)}),[t]);return{visible:t,showModal:a,hideModal:o,switchVisible:c}};var p=function(){var e=l.Z.useApp().modal,n=(0,f.$G)().t;return(0,d.useCallback)((function(t){var r=t.title,o=t.content,u=t.onOk,s=t.onCancel;return new Promise((function(t,l){e.confirm({title:null!=r?r:n("common.deleteModalTitle"),icon:(0,m.jsx)(i.Z,{}),content:o,okText:n("common.ok"),okType:"danger",cancelText:n("common.cancel"),onOk:function(){return c()(a()().mark((function e(){var n;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null==u?void 0:u();case 3:n=e.sent,t(n),console.info(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),l(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},onCancel:function(){null==s||s()}})}))}),[n,e])},g=function(e){return(0,f.$G)("translation",{keyPrefix:e})}},2938:function(e,n,t){"use strict";t.d(n,{H0:function(){return N},IV:function(){return A},NT:function(){return L},Qe:function(){return K},UL:function(){return D},Y2:function(){return Q},c5:function(){return M},cE:function(){return F},ox:function(){return j},sO:function(){return V},vv:function(){return G},vy:function(){return $},y7:function(){return U},ye:function(){return q}});var r=t(19632),a=t.n(r),o=t(97857),c=t.n(o),u=t(9783),s=t.n(u),i=t(15009),l=t.n(i),d=t(99289),f=t.n(d),m=t(5574),v=t.n(m),p=t(39918),g=t(1079),h=t(40169),k=t(60806),_=t(61921),y=t(71250),b=t(45360),T=t(87066),w=t(24809),Z=t(96486),x=t(62435),S=t(67421),C=t(57632),P=t(86968),E=t(96100),I=t(39259),F=function(){var e=(0,x.useState)({}),n=v()(e,2),t=n[0],r=n[1];return{currentRecord:t,setRecord:function(e){r(e)}}},K=function(){var e=(0,x.useState)(""),n=v()(e,2),t=n[0],r=n[1];return{handleInputChange:(0,x.useCallback)((function(e){var n=e.target.value;r(n)}),[]),searchString:t}},D=function(){var e=(0,S.$G)().i18n,n=(0,I.WH)().saveSetting;return function(t){e.changeLanguage(h.Kj[t]),n({language:t})}},q=function(){var e=(0,P.qM)("common").t,n=(0,E.fz)(),t=n.setPaginationParams,r=n.page,a=n.size,o=(0,x.useCallback)((function(e,n){t(e,n)}),[t]),c=(0,x.useCallback)((function(e){t(e.page,e.pageSize)}),[t]);return{pagination:(0,x.useMemo)((function(){return{showQuickJumper:!0,total:0,showSizeChanger:!0,current:r,pageSize:a,pageSizeOptions:[1,2,10,20,50,100],onChange:o,showTotal:function(n){return"".concat(e("total")," ").concat(n)}}}),[e,o,r,a]),setPagination:c}},A=function(){var e=(0,x.useState)({}),n=v()(e,2),t=n[0],r=n[1],a=(0,x.useCallback)(f()(l()().mark((function e(){var n;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.Z.get("/conf.json");case 2:n=e.sent,r(n.data);case 4:case"end":return e.stop()}}),e)}))),[]);return(0,x.useEffect)((function(){a()}),[a]),t},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k.Z.completeConversation,n=(0,x.useState)({}),t=v()(n,2),r=t[0],a=t[1],o=(0,x.useState)(!0),u=v()(o,2),i=u[0],d=u[1],m=(0,x.useRef)(),g=(0,x.useCallback)((function(){m.current&&clearTimeout(m.current),m.current=setTimeout((function(){a({}),clearTimeout(m.current)}),1e3)}),[]),h=(0,x.useCallback)(function(){var n=f()(l()().mark((function n(t,r){var o,u,i,f,m,v,h,k,y;return l()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,d(!1),n.next=4,fetch(e,{method:"POST",headers:s()(s()({},p._n,(0,_.cD)()),"Content-Type","application/json"),body:JSON.stringify(t),signal:null==r?void 0:r.signal});case 4:u=n.sent,i=u.clone().json(),f=null==u||null===(o=u.body)||void 0===o?void 0:o.pipeThrough(new TextDecoderStream).pipeThrough(new w.m).getReader();case 7:return n.next=10,null==f?void 0:f.read();case 10:if(!(m=n.sent)){n.next=18;break}if(v=m.done,h=m.value,!v){n.next=17;break}return console.info("done"),g(),n.abrupt("break",20);case 17:try{k=JSON.parse((null==h?void 0:h.data)||""),"boolean"!=typeof(y=null==k?void 0:k.data)&&(console.info("data:",y),a(c()(c()({},y),{},{conversationId:null==t?void 0:t.conversation_id})))}catch(e){console.warn(e)}case 18:n.next=7;break;case 20:return console.info("done?"),d(!0),g(),n.next=25,i;case 25:return n.t0=n.sent,n.t1=u,n.abrupt("return",{data:n.t0,response:n.t1});case 30:n.prev=30,n.t2=n.catch(0),d(!0),g(),console.warn(n.t2);case 35:case"end":return n.stop()}}),n,null,[[0,30]])})));return function(e,t){return n.apply(this,arguments)}}(),[e,g]);return{send:h,answer:r,done:i,setDone:d,resetAnswer:g}},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k.Z.tts,n=(0,x.useCallback)(function(){var n=f()(l()().mark((function n(t){var r,a;return l()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(e,{method:"POST",headers:s()(s()({},p._n,(0,_.cD)()),"Content-Type","application/json"),body:JSON.stringify(t)});case 2:return r=n.sent,n.prev=3,n.next=6,r.clone().json();case 6:0!==(null==(a=n.sent)?void 0:a.code)&&b.ZP.error(null==a?void 0:a.message),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(3),console.warn("ðŸš€ ~ error:",n.t0);case 13:return n.abrupt("return",r);case 14:case"end":return n.stop()}}),n,null,[[3,10]])})));return function(e){return n.apply(this,arguments)}}(),[e]);return{read:n}},L=function(){var e=(0,x.useState)(""),n=v()(e,2),t=n[0],r=n[1];return{handleInputChange:function(e){var n=e.target.value.replaceAll("\\n","\n").replaceAll("\\t","\t");r(n)},value:t,setValue:r}},U=function(){var e=(0,x.useState)([]),n=v()(e,2),t=n[0],r=n[1],o=function(e){var n=(0,x.useRef)(null),t=(0,x.useCallback)((function(){var t;e&&(null===(t=n.current)||void 0===t||t.scrollIntoView({behavior:"instant"}))}),[e]);return(0,x.useEffect)((function(){t()}),[t]),n}(t),u=(0,x.useCallback)((function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";r((function(t){return[].concat(a()(t),[c()(c()({},e),{},{id:(0,y.Kj)(e)}),{role:g.Cs.Assistant,content:n,id:(0,y.Kj)(c()(c()({},e),{},{role:g.Cs.Assistant}))}])}))}),[]),s=(0,x.useCallback)((function(e){r((function(n){var t;return[].concat(a()(null!==(t=null==n?void 0:n.slice(0,-1))&&void 0!==t?t:[]),[c()({role:g.Cs.Assistant,content:e.answer,reference:e.reference,id:(0,y.Kj)({id:e.id,role:g.Cs.Assistant}),prompt:e.prompt,audio_binary:e.audio_binary},(0,Z.omit)(e,"reference"))])}))}),[]),i=(0,x.useCallback)((function(){r((function(e){var n;return null!==(n=null==e?void 0:e.slice(0,-2))&&void 0!==n?n:[]}))}),[]),l=(0,x.useCallback)((function(e){r((function(n){var t;return null!==(t=null==n?void 0:n.filter((function(n){return n.id!==e})))&&void 0!==t?t:[]}))}),[r]),d=(0,x.useCallback)((function(e){r((function(n){var t=n.findIndex((function(n){return n.id===e}));if(-1!==t){var r,o=null!==(r=n.slice(0,t+2))&&void 0!==r?r:[],u=o.at(-1);return o=u?[].concat(a()(o.slice(0,-1)),[c()(c()({},u),{},{content:"",reference:void 0,prompt:void 0})]):o}return n}))}),[r]);return{ref:o,derivedMessages:t,setDerivedMessages:r,addNewestQuestion:u,addNewestAnswer:s,removeLatestMessage:i,removeMessageById:l,removeMessagesAfterCurrentMessage:d}},G=function(e){var n=e.removeMessagesAfterCurrentMessage,t=e.sendMessage,r=e.messages,a=(0,x.useCallback)(function(){var e=f()(l()().mark((function e(a){var o,u;return l()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.id&&(n(a.id),-1!==(o=r.findIndex((function(e){return e.id===a.id})))&&(u=r.slice(0,o)),t({message:c()(c()({},a),{},{id:(0,C.Z)()}),messages:u}));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[n,t,r]);return{regenerateMessage:a}},$=function(e){var n=(0,x.useState)(""),t=v()(n,2),r=t[0],a=t[1],o=(0,x.useCallback)((function(e){return function(){a(e)}}),[]);return(0,x.useEffect)((function(){e&&a(e)}),[e]),{selectedId:r,handleItemClick:o}},j=function(){var e,n=(0,I.fS)(!0).data;return null!==(e=null==n?void 0:n.llm_id)&&void 0!==e?e:""},O={naive:128,knowledge_graph:8192},V=function(e){return(0,x.useCallback)((function(n){n in O&&e.setFieldValue(["parser_config","chunk_token_num"],O[n])}),[e])},Q=function(e){var n=e.form,t=e.visible,r=(0,x.useRef)();(0,x.useEffect)((function(){r.current=t}),[t]);var a=r.current;(0,x.useEffect)((function(){!t&&a&&n.resetFields()}),[n,a,t])}},96100:function(e,n,t){"use strict";t.d(n,{HK:function(){return d},Uu:function(){return l},fz:function(){return p},nT:function(){return v},pE:function(){return f},wy:function(){return m}});var r=t(5574),a=t.n(r),o=t(96330),c=t(62435),u=t(24701),s=function(e){return e.Second="2",e.Third="3",e}({}),i=function(e){return(0,u.TH)().pathname.split("/")[e]||""},l=function(){return i(s.Second)},d=function(){return i(s.Third)},f=function(){var e=(0,u.lr)(),n=a()(e,1)[0];return{documentId:n.get(o.ld.DocumentId)||"",knowledgeId:n.get(o.ld.KnowledgeId)||""}},m=function(){var e=(0,u.s0)();return(0,c.useCallback)((function(n){e(n,{state:{from:n}})}),[e])},v=function(){var e=(0,u.s0)(),n=f().knowledgeId;return(0,c.useCallback)((function(){e("/knowledge/".concat(o.Rx.Dataset,"?id=").concat(n))}),[n,e])},p=function(){var e=(0,u.lr)(),n=a()(e,2),t=n[0],r=n[1],o=(0,c.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1?arguments[1]:void 0;t.set("page",e.toString()),n&&t.set("size",n.toString()),r(t)}),[r,t]);return{setPaginationParams:o,page:Number(t.get("page"))||1,size:Number(t.get("size"))||10}}},39259:function(e,n,t){"use strict";t.d(n,{CV:function(){return A},F1:function(){return I},Jf:function(){return P},PI:function(){return K},WH:function(){return S},XH:function(){return x},d1:function(){return N},ef:function(){return F},fS:function(){return Z},hZ:function(){return D},jd:function(){return w},m_:function(){return q},nv:function(){return C},oH:function(){return M},v:function(){return E}});var r=t(5574),a=t.n(r),o=t(15009),c=t.n(o),u=t(99289),s=t.n(u),i=t(40169),l=t(72668),d=t(78551),f=t(30202),m=t(4527),v=t(85576),p=t(45360),g=t(27856),h=t.n(g),k=t(96486),_=t(62435),y=t(67421),b=t(24701),T=t(86074),w=function(){var e,n=(0,y.$G)().i18n,t=(0,d.a)({queryKey:["userInfo"],initialData:{},gcTime:0,queryFn:(e=s()(c()().mark((function e(){var t,r,a;return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.ZP.user_info();case 2:return r=e.sent,0===(a=r.data).code&&n.changeLanguage(i.Kj[a.data.language]),e.abrupt("return",null!==(t=null==a?void 0:a.data)&&void 0!==t?t:{});case 6:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})});return{data:t.data,loading:t.isFetching}},Z=function(){var e,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,y.$G)().t,r=(0,d.a)({queryKey:["tenantInfo"],initialData:{},gcTime:0,queryFn:(e=s()(c()().mark((function e(){var r,a,o;return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.ZP.get_tenant_info();case 2:if(r=e.sent,0!==(a=r.data).code){e.next=10;break}return o=a.data,n&&((0,k.isEmpty)(o.embd_id)||(0,k.isEmpty)(o.llm_id))&&v.Z.warning({title:t("common.warn"),content:(0,T.jsx)("div",{dangerouslySetInnerHTML:{__html:h().sanitize(t("setting.modelProvidersWarn"))}}),onOk:function(){b.m8.push("/user-setting/model")}}),o.chat_id=o.llm_id,o.speech2text_id=o.asr_id,e.abrupt("return",o);case 10:return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})});return{data:r.data,loading:r.isFetching}},x=function(){var e=Z(!0).data;return(0,_.useMemo)((function(){var n,t;return(null!==(n=null==e||null===(t=e.parser_ids)||void 0===t?void 0:t.split(","))&&void 0!==n?n:[]).map((function(e){var n=e.split(":");return{value:n[0],label:n[1]}}))}),[e])},S=function(){var e,n=(0,f.NL)(),t=(0,y.$G)().t,r=(0,m.D)({mutationKey:["saveSetting"],mutationFn:(e=s()(c()().mark((function e(r){var a,o;return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.ZP.setting(r);case 2:return a=e.sent,0===(o=a.data).code&&(p.ZP.success(t("message.modified")),n.invalidateQueries({queryKey:["userInfo"]})),e.abrupt("return",null==o?void 0:o.code);case 6:case"end":return e.stop()}}),e)}))),function(n){return e.apply(this,arguments)})});return{data:r.data,loading:r.isPending,saveSetting:r.mutateAsync}},C=function(){var e=(0,_.useState)(""),n=a()(e,2),t=n[0],r=n[1],o=(0,_.useState)(!1),u=a()(o,2),i=u[0],d=u[1];return{fetchSystemVersion:(0,_.useCallback)(s()(c()().mark((function e(){var n,t;return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(!0),e.next=4,l.ZP.getSystemVersion();case 4:n=e.sent,0===(t=n.data).code&&(r(t.data),d(!1)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),d(!1);case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))),[]),version:t,loading:i}},P=function(){var e=(0,_.useState)({}),n=a()(e,2),t=n[0],r=n[1],o=(0,_.useState)(!1),u=a()(o,2),i=u[0],d=u[1];return{systemStatus:t,fetchSystemStatus:(0,_.useCallback)(s()(c()().mark((function e(){var n,t;return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.next=3,l.ZP.getSystemStatus();case 3:n=e.sent,0===(t=n.data).code&&(r(t.data),d(!1));case 6:case"end":return e.stop()}}),e)}))),[]),loading:i}},E=function(){var e,n=(0,m.D)({mutationKey:["fetchManualSystemTokenList"],mutationFn:(e=s()(c()().mark((function e(){var n,t,r;return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.ZP.listToken();case 2:return t=e.sent,r=t.data,e.abrupt("return",null!==(n=null==r?void 0:r.data)&&void 0!==n?n:[]);case 5:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})});return{data:n.data,loading:n.isPending,fetchSystemTokenList:n.mutateAsync}},I=function(){var e,n=(0,d.a)({queryKey:["fetchSystemTokenList"],initialData:[],gcTime:0,queryFn:(e=s()(c()().mark((function e(){var n,t,r;return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.ZP.listToken();case 2:return t=e.sent,r=t.data,e.abrupt("return",null!==(n=null==r?void 0:r.data)&&void 0!==n?n:[]);case 5:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})});return{data:n.data,loading:n.isFetching,refetch:n.refetch}},F=function(){var e,n=(0,f.NL)(),t=(0,y.$G)().t,r=(0,m.D)({mutationKey:["removeSystemToken"],mutationFn:(e=s()(c()().mark((function e(r){var a,o,u;return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.ZP.removeToken({},r);case 2:return o=e.sent,0===(u=o.data).code&&(p.ZP.success(t("message.deleted")),n.invalidateQueries({queryKey:["fetchSystemTokenList"]})),e.abrupt("return",null!==(a=null==u?void 0:u.data)&&void 0!==a?a:[]);case 6:case"end":return e.stop()}}),e)}))),function(n){return e.apply(this,arguments)})});return{data:r.data,loading:r.isPending,removeToken:r.mutateAsync}},K=function(){var e,n=(0,f.NL)(),t=(0,m.D)({mutationKey:["createSystemToken"],mutationFn:(e=s()(c()().mark((function e(t){var r,a,o;return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.ZP.createToken(t);case 2:return a=e.sent,0===(o=a.data).code&&n.invalidateQueries({queryKey:["fetchSystemTokenList"]}),e.abrupt("return",null!==(r=null==o?void 0:o.data)&&void 0!==r?r:[]);case 6:case"end":return e.stop()}}),e)}))),function(n){return e.apply(this,arguments)})});return{data:t.data,loading:t.isPending,createToken:t.mutateAsync}},D=function(){var e,n=Z().data.tenant_id,t=(0,d.a)({queryKey:["listTenantUser",n],initialData:[],gcTime:0,enabled:!!n,queryFn:(e=s()(c()().mark((function e(){var t,r,a;return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.WX)(n);case 2:return r=e.sent,a=r.data,e.abrupt("return",null!==(t=null==a?void 0:a.data)&&void 0!==t?t:[]);case 5:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})});return{data:t.data,loading:t.isFetching,refetch:t.refetch}},q=function(){var e,n=Z().data,t=(0,f.NL)(),r=(0,m.D)({mutationKey:["addTenantUser"],mutationFn:(e=s()(c()().mark((function e(r){var a,o;return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.AH)(n.tenant_id,r);case 2:return a=e.sent,0===(o=a.data).code&&t.invalidateQueries({queryKey:["listTenantUser"]}),e.abrupt("return",null==o?void 0:o.code);case 6:case"end":return e.stop()}}),e)}))),function(n){return e.apply(this,arguments)})});return{data:r.data,loading:r.isPending,addTenantUser:r.mutateAsync}},A=function(){var e,n=Z().data,t=(0,f.NL)(),r=(0,y.$G)().t,a=(0,m.D)({mutationKey:["deleteTenantUser"],mutationFn:(e=s()(c()().mark((function e(a){var o,u,s,i,d;return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=a.userId,s=a.tenantId,e.next=3,(0,l.EE)({tenantId:null!=s?s:n.tenant_id,userId:u});case 3:return i=e.sent,0===(d=i.data).code&&(p.ZP.success(r("message.deleted")),t.invalidateQueries({queryKey:["listTenantUser"]}),t.invalidateQueries({queryKey:["listTenant"]})),e.abrupt("return",null!==(o=null==d?void 0:d.data)&&void 0!==o?o:[]);case 7:case"end":return e.stop()}}),e)}))),function(n){return e.apply(this,arguments)})});return{data:a.data,loading:a.isPending,deleteTenantUser:a.mutateAsync}},N=function(){var e,n=Z().data.tenant_id,t=(0,d.a)({queryKey:["listTenant",n],initialData:[],gcTime:0,enabled:!!n,queryFn:(e=s()(c()().mark((function e(){var n,t,r;return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.vh)();case 2:return t=e.sent,r=t.data,e.abrupt("return",null!==(n=null==r?void 0:r.data)&&void 0!==n?n:[]);case 5:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})});return{data:t.data,loading:t.isFetching,refetch:t.refetch}},M=function(){var e,n=(0,f.NL)(),t=(0,y.$G)().t,r=(0,m.D)({mutationKey:["agreeTenant"],mutationFn:(e=s()(c()().mark((function e(r){var a,o,u;return c()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,l.FG)(r);case 2:return o=e.sent,0===(u=o.data).code&&(p.ZP.success(t("message.operated")),n.invalidateQueries({queryKey:["listTenant"]})),e.abrupt("return",null!==(a=null==u?void 0:u.data)&&void 0!==a?a:[]);case 6:case"end":return e.stop()}}),e)}))),function(n){return e.apply(this,arguments)})});return{data:r.data,loading:r.isPending,agreeTenant:r.mutateAsync}}},72668:function(e,n,t){"use strict";t.d(n,{AH:function(){return C},EE:function(){return P},FG:function(){return I},WX:function(){return S},vh:function(){return E}});var r=t(60806),a=t(66582),o=t(78158),c=r.Z.login,u=r.Z.logout,s=r.Z.register,i=r.Z.setting,l=r.Z.user_info,d=r.Z.tenant_info,f=r.Z.factories_list,m=r.Z.llm_list,v=r.Z.my_llm,p=r.Z.set_api_key,g=r.Z.set_tenant_info,h=r.Z.add_llm,k=r.Z.delete_llm,_=r.Z.deleteFactory,y=r.Z.getSystemStatus,b=r.Z.getSystemVersion,T=r.Z.getSystemTokenList,w=r.Z.removeSystemToken,Z={login:{url:c,method:"post"},logout:{url:u,method:"get"},register:{url:s,method:"post"},setting:{url:i,method:"post"},user_info:{url:l,method:"get"},get_tenant_info:{url:d,method:"get"},set_tenant_info:{url:g,method:"post"},factories_list:{url:f,method:"get"},llm_list:{url:m,method:"get"},my_llm:{url:v,method:"get"},set_api_key:{url:p,method:"post"},add_llm:{url:h,method:"post"},delete_llm:{url:k,method:"post"},getSystemStatus:{url:y,method:"get"},getSystemVersion:{url:b,method:"get"},deleteFactory:{url:_,method:"post"},listToken:{url:T,method:"get"},createToken:{url:r.Z.createSystemToken,method:"post"},removeToken:{url:w,method:"delete"}},x=(0,a.Z)(Z,o.ZP),S=function(e){return o.ZP.get(r.Z.listTenantUser(e))},C=function(e,n){return(0,o.v_)(r.Z.addTenantUser(e),{email:n})},P=function(e){var n=e.tenantId,t=e.userId;return o.ZP.delete(r.Z.deleteTenantUser(n,t))},E=function(){return o.ZP.get(r.Z.listTenant)},I=function(e){return o.ZP.put(r.Z.agreeTenant(e))};n.ZP=x},60806:function(e,n,t){"use strict";t.d(n,{N:function(){return r}});var r="/v1";n.Z={login:"".concat(r,"/user/login"),logout:"".concat(r,"/user/logout"),register:"".concat(r,"/user/register"),setting:"".concat(r,"/user/setting"),user_info:"".concat(r,"/user/info"),tenant_info:"".concat(r,"/user/tenant_info"),set_tenant_info:"".concat(r,"/user/set_tenant_info"),addTenantUser:function(e){return"".concat(r,"/tenant/").concat(e,"/user")},listTenantUser:function(e){return"".concat(r,"/tenant/").concat(e,"/user/list")},deleteTenantUser:function(e,n){return"".concat(r,"/tenant/").concat(e,"/user/").concat(n)},listTenant:"".concat(r,"/tenant/list"),agreeTenant:function(e){return"".concat(r,"/tenant/agree/").concat(e)},factories_list:"".concat(r,"/llm/factories"),llm_list:"".concat(r,"/llm/list"),my_llm:"".concat(r,"/llm/my_llms"),set_api_key:"".concat(r,"/llm/set_api_key"),add_llm:"".concat(r,"/llm/add_llm"),delete_llm:"".concat(r,"/llm/delete_llm"),deleteFactory:"".concat(r,"/llm/delete_factory"),kb_list:"".concat(r,"/kb/list"),create_kb:"".concat(r,"/kb/create"),update_kb:"".concat(r,"/kb/update"),rm_kb:"".concat(r,"/kb/rm"),get_kb_detail:"".concat(r,"/kb/detail"),getKnowledgeGraph:function(e){return"".concat(r,"/kb/").concat(e,"/knowledge_graph")},listTag:function(e){return"".concat(r,"/kb/").concat(e,"/tags")},listTagByKnowledgeIds:"".concat(r,"/kb/tags"),removeTag:function(e){return"".concat(r,"/kb/").concat(e,"/rm_tags")},renameTag:function(e){return"".concat(r,"/kb/").concat(e,"/rename_tag")},chunk_list:"".concat(r,"/chunk/list"),create_chunk:"".concat(r,"/chunk/create"),set_chunk:"".concat(r,"/chunk/set"),get_chunk:"".concat(r,"/chunk/get"),switch_chunk:"".concat(r,"/chunk/switch"),rm_chunk:"".concat(r,"/chunk/rm"),retrieval_test:"".concat(r,"/chunk/retrieval_test"),knowledge_graph:"".concat(r,"/chunk/knowledge_graph"),get_document_list:"".concat(r,"/document/list"),document_change_status:"".concat(r,"/document/change_status"),document_rm:"".concat(r,"/document/rm"),document_delete:"".concat(r,"/api/document"),document_rename:"".concat(r,"/document/rename"),document_create:"".concat(r,"/document/create"),document_run:"".concat(r,"/document/run"),document_change_parser:"".concat(r,"/document/change_parser"),document_thumbnails:"".concat(r,"/document/thumbnails"),get_document_file:"".concat(r,"/document/get"),document_upload:"".concat(r,"/document/upload"),web_crawl:"".concat(r,"/document/web_crawl"),document_infos:"".concat(r,"/document/infos"),upload_and_parse:"".concat(r,"/document/upload_and_parse"),parse:"".concat(r,"/document/parse"),setMeta:"".concat(r,"/document/set_meta"),setDialog:"".concat(r,"/dialog/set"),getDialog:"".concat(r,"/dialog/get"),removeDialog:"".concat(r,"/dialog/rm"),listDialog:"".concat(r,"/dialog/list"),setConversation:"".concat(r,"/conversation/set"),getConversation:"".concat(r,"/conversation/get"),getConversationSSE:"".concat(r,"/conversation/getsse"),listConversation:"".concat(r,"/conversation/list"),removeConversation:"".concat(r,"/conversation/rm"),completeConversation:"".concat(r,"/conversation/completion"),deleteMessage:"".concat(r,"/conversation/delete_msg"),thumbup:"".concat(r,"/conversation/thumbup"),tts:"".concat(r,"/conversation/tts"),ask:"".concat(r,"/conversation/ask"),mindmap:"".concat(r,"/conversation/mindmap"),getRelatedQuestions:"".concat(r,"/conversation/related_questions"),createToken:"".concat(r,"/api/new_token"),listToken:"".concat(r,"/api/token_list"),removeToken:"".concat(r,"/api/rm"),getStats:"".concat(r,"/api/stats"),createExternalConversation:"".concat(r,"/api/new_conversation"),getExternalConversation:"".concat(r,"/api/conversation"),completeExternalConversation:"".concat(r,"/api/completion"),uploadAndParseExternal:"".concat(r,"/api/document/upload_and_parse"),listFile:"".concat(r,"/file/list"),uploadFile:"".concat(r,"/file/upload"),removeFile:"".concat(r,"/file/rm"),renameFile:"".concat(r,"/file/rename"),getAllParentFolder:"".concat(r,"/file/all_parent_folder"),createFolder:"".concat(r,"/file/create"),connectFileToKnowledge:"".concat(r,"/file2document/convert"),getFile:"".concat(r,"/file/get"),moveFile:"".concat(r,"/file/mv"),getSystemVersion:"".concat(r,"/system/version"),getSystemStatus:"".concat(r,"/system/status"),getSystemTokenList:"".concat(r,"/system/token_list"),createSystemToken:"".concat(r,"/system/new_token"),listSystemToken:"".concat(r,"/system/token_list"),removeSystemToken:"".concat(r,"/system/token"),listTemplates:"".concat(r,"/canvas/templates"),listCanvas:"".concat(r,"/canvas/list"),getCanvas:"".concat(r,"/canvas/get"),getCanvasSSE:"".concat(r,"/canvas/getsse"),removeCanvas:"".concat(r,"/canvas/rm"),setCanvas:"".concat(r,"/canvas/set"),resetCanvas:"".concat(r,"/canvas/reset"),runCanvas:"".concat(r,"/canvas/completion"),testDbConnect:"".concat(r,"/canvas/test_db_connect"),getInputElements:"".concat(r,"/canvas/input_elements"),debug:"".concat(r,"/canvas/debug")}},71250:function(e,n,t){"use strict";t.d(n,{Bl:function(){return l},CE:function(){return m},IC:function(){return s},Kj:function(){return i},hH:function(){return v},mN:function(){return f},mV:function(){return p},o_:function(){return d}});var r=t(97857),a=t.n(r),o=t(1079),c=t(96486),u=t(57632),s=function(e){return e!==o.Pc&&""!==e},i=function(e){return"id"in e&&e.id?e.id:(0,u.Z)()},l=function(e){var n;return null!==(n=null==e?void 0:e.map((function(e){return a()(a()({},(0,c.omit)(e,"reference")),{},{id:i(e)})})))&&void 0!==n?n:[]},d=function(){return(0,u.Z)().replace(/-/g,"")},f=function(e){return"".concat(e.role,"_").concat(e.id)},m=function(e){return e.replace(/\\\[([\s\S]*?)\\\]/g,(function(e,n){return"$$".concat(n,"$$")})).replace(/\\\(([\s\S]*?)\\\)/g,(function(e,n){return"$".concat(n,"$")}))};function v(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/<think>([\s\S]*?)<\/think>/g,'<section class="think">$1</section>')}function p(e){return e!==o.uY.MaxTokensEnabled}},66582:function(e,n,t){"use strict";var r=t(97857),a=t.n(r),o=t(57557),c=t.n(o),u=["post","delete","put"];n.Z=function(e,n){var t={},r=function(r){t[r]=function(t,o){var s=e[r].url,i=e[r];return o&&(s=s+"/"+o),u.some((function(n){return n===e[r].method.toLowerCase()}))?n(s,{method:e[r].method,data:t}):"get"===e[r].method||"GET"===e[r].method?n.get(s,a()(a()({},c()(i,["method","url"])),{},{params:t})):void 0}};for(var o in e)r(o);return t}},78158:function(e,n,t){"use strict";t.d(n,{v_:function(){return y}});var r=t(15009),a=t.n(r),o=t(99289),c=t.n(o),u=t(9783),s=t.n(u),i=t(97857),l=t.n(i),d=t(39918),f=t(40063),m=t(61921),v=t(26855),p=t(45360),g=t(11238),h=t(31098),k={200:f.Z.t("message.200"),201:f.Z.t("message.201"),202:f.Z.t("message.202"),204:f.Z.t("message.204"),400:f.Z.t("message.400"),401:f.Z.t("message.401"),403:f.Z.t("message.403"),404:f.Z.t("message.404"),406:f.Z.t("message.406"),410:f.Z.t("message.410"),413:f.Z.t("message.413"),422:f.Z.t("message.422"),500:f.Z.t("message.500"),502:f.Z.t("message.502"),503:f.Z.t("message.503"),504:f.Z.t("message.504")},_=(0,g.l7)({errorHandler:function(e){var n=e.response;if("Failed to fetch"===e.message)v.Z.error({description:f.Z.t("message.networkAnomalyDescription"),message:f.Z.t("message.networkAnomaly")});else if(n&&n.status){var t=k[n.status]||n.statusText,r=n.status,a=n.url;v.Z.error({message:"".concat(f.Z.t("message.requestError")," ").concat(r,": ").concat(a),description:t})}return null!=n?n:{data:{code:1999}}},timeout:3e5,getResponse:!0});_.interceptors.request.use((function(e,n){var t=(0,h._y)(n.data),r=(0,h._y)(n.params);return{url:e,options:l()(l()({},n),{},{data:t,params:r,headers:l()(l()({},n.skipToken?void 0:s()({},d._n,(0,m.cD)())),n.headers),interceptors:!0})}})),_.interceptors.response.use(function(){var e=c()(a()().mark((function e(n,t){var r,o;return a()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(413!==(null==n?void 0:n.status)&&504!==(null==n?void 0:n.status)||p.ZP.error(k[null==n?void 0:n.status]),"blob"!==t.responseType){e.next=3;break}return e.abrupt("return",n);case 3:return e.next=5,null==n||null===(r=n.clone())||void 0===r?void 0:r.json();case 5:return 100===(null==(o=e.sent)?void 0:o.code)?p.ZP.error(null==o?void 0:o.message):401===(null==o?void 0:o.code)?(v.Z.error({message:null==o?void 0:o.message,description:null==o?void 0:o.message,duration:3}),m.ZP.removeAll(),(0,m.rf)()):0!==(null==o?void 0:o.code)&&v.Z.error({message:"".concat(f.Z.t("message.hint")," : ").concat(null==o?void 0:o.code),description:null==o?void 0:o.message,duration:3}),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),n.ZP=_;var y=function(e,n){return _.post(e,{data:n})}},86635:function(e){function n(e){return Promise.resolve().then((function(){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}))}n.keys=function(){return[]},n.resolve=n,n.id=86635,e.exports=n},24654:function(){}}]);
//# sourceMappingURL=8648.17763d1e.async.js.map