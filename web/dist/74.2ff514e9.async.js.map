{"version":3,"file":"74.2ff514e9.async.js","mappings":"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","sources":["webpack:///./node_modules/@antv/g6/esm/utils/print.js","webpack:///./node_modules/@antv/util/esm/lodash/to-string.js","webpack:///./node_modules/@antv/util/esm/lodash/upper-first.js","webpack:///./node_modules/@antv/util/esm/lodash/is-equal.js","webpack:///./node_modules/@antv/g6/esm/constants/animation.js","webpack:///./node_modules/@antv/g6/esm/constants/change.js","webpack:///./node_modules/@antv/g6/esm/constants/events/animation.js","webpack:///./node_modules/@antv/g6/esm/constants/events/canvas.js","webpack:///./node_modules/@antv/g6/esm/constants/events/combo.js","webpack:///./node_modules/@antv/g6/esm/constants/events/common.js","webpack:///./node_modules/@antv/g6/esm/constants/events/container.js","webpack:///./node_modules/@antv/g6/esm/constants/events/edge.js","webpack:///./node_modules/@antv/g6/esm/constants/events/graph.js","webpack:///./node_modules/@antv/g6/esm/constants/events/history.js","webpack:///./node_modules/@antv/g6/esm/constants/events/node.js","webpack:///./node_modules/@antv/g6/esm/constants/graphlib.js","webpack:///./node_modules/@antv/g6/esm/constants/registry.js","webpack:///./node_modules/@antv/g6/esm/utils/theme.js","webpack:///./node_modules/@antv/g6/esm/utils/animation.js","webpack:///./node_modules/@antv/g6/esm/utils/id.js","webpack:///./node_modules/@antv/g6/esm/utils/transform.js","webpack:///./node_modules/@antv/g6/esm/animations/executor.js","webpack:///./node_modules/@antv/g6/esm/animations/index.js","webpack:///./node_modules/@antv/g6/esm/utils/diff.js","webpack:///./node_modules/@antv/g6/esm/registry/extension/index.js","webpack:///./node_modules/@antv/g6/esm/utils/extension.js","webpack:///./node_modules/@antv/g6/esm/behaviors/base-behavior.js","webpack:///./node_modules/@antv/g6/esm/utils/is.js","webpack:///./node_modules/@antv/g6/esm/utils/math.js","webpack:///./node_modules/@antv/g6/esm/utils/padding.js","webpack:///./node_modules/@antv/g6/esm/utils/bbox.js","webpack:///./node_modules/@antv/g6/esm/utils/vector.js","webpack:///./node_modules/@antv/g6/esm/utils/line.js","webpack:///./node_modules/@antv/g6/esm/utils/position.js","webpack:///./node_modules/@antv/g6/esm/utils/placement.js","webpack:///./node_modules/@antv/g6/esm/utils/point.js","webpack:///./node_modules/@antv/g6/esm/utils/shortcut.js","webpack:///./node_modules/@antv/g6/esm/behaviors/brush-select.js","webpack:///./node_modules/@antv/g6/esm/constants/element.js","webpack:///./node_modules/@antv/g6/esm/utils/traverse.js","webpack:///./node_modules/@antv/g6/esm/utils/relation.js","webpack:///./node_modules/@antv/g6/esm/utils/state.js","webpack:///./node_modules/@antv/g6/esm/behaviors/click-select.js","webpack:///./node_modules/@antv/g6/esm/utils/collapsibility.js","webpack:///./node_modules/@antv/util/esm/lodash/get.js","webpack:///./node_modules/@antv/util/esm/lodash/set.js","webpack:///./node_modules/@antv/util/esm/lodash/lower-first.js","webpack:///./node_modules/@antv/g6/esm/utils/prefix.js","webpack:///./node_modules/@antv/g6/esm/utils/size.js","webpack:///./node_modules/@antv/g6/esm/utils/style.js","webpack:///./node_modules/@antv/g6/esm/utils/cache.js","webpack:///./node_modules/@antv/g6/esm/elements/effect.js","webpack:///./node_modules/@antv/util/esm/lodash/group-by.js","webpack:///./node_modules/@antv/g6/esm/utils/palette.js","webpack:///./node_modules/@antv/g6/esm/utils/text.js","webpack:///./node_modules/@antv/util/esm/lodash/get-type.js","webpack:///./node_modules/@antv/util/esm/lodash/is-prototype.js","webpack:///./node_modules/@antv/util/esm/lodash/is-empty.js","webpack:///./node_modules/@antv/g6/esm/utils/shape.js","webpack:///./node_modules/@antv/g6/esm/utils/visibility.js","webpack:///./node_modules/@antv/g6/esm/elements/shapes/base-shape.js","webpack:///./node_modules/@antv/g6/esm/elements/shapes/label.js","webpack:///./node_modules/@antv/g6/esm/elements/shapes/badge.js","webpack:///./node_modules/@antv/g6/esm/utils/path.js","webpack:///./node_modules/@antv/g6/esm/utils/polygon.js","webpack:///./node_modules/@antv/g6/esm/elements/shapes/contour.js","webpack:///./node_modules/@antv/g6/esm/elements/shapes/icon.js","webpack:///./node_modules/@antv/g6/esm/elements/base-element.js","webpack:///./node_modules/@antv/g6/esm/elements/nodes/base-node.js","webpack:///./node_modules/@antv/g6/esm/utils/node.js","webpack:///./node_modules/@antv/g6/esm/elements/nodes/circle.js","webpack:///./node_modules/@antv/g6/esm/elements/shapes/polygon.js","webpack:///./node_modules/@antv/g6/esm/elements/nodes/donut.js","webpack:///./node_modules/@antv/g6/esm/elements/nodes/ellipse.js","webpack:///./node_modules/@antv/g6/esm/elements/nodes/html.js","webpack:///./node_modules/@antv/g6/esm/elements/nodes/image.js","webpack:///./node_modules/@antv/g6/esm/elements/nodes/triangle.js","webpack:///./node_modules/@antv/g6/esm/utils/element.js","webpack:///./node_modules/@antv/g6/esm/elements/combos/base-combo.js","webpack:///./node_modules/@antv/util/esm/lodash/filter.js","webpack:///./node_modules/@antv/util/esm/lodash/contains.js","webpack:///./node_modules/@antv/util/esm/lodash/difference.js","webpack:///./node_modules/@antv/g6/esm/utils/router/orth.js","webpack:///./node_modules/@antv/g6/esm/utils/edge.js","webpack:///./node_modules/@antv/g6/esm/utils/symbol.js","webpack:///./node_modules/@antv/g6/esm/elements/edges/base-edge.js","webpack:///./node_modules/@antv/g6/esm/elements/edges/cubic.js","webpack:///./node_modules/@antv/g6/esm/elements/edges/cubic-horizontal.js","webpack:///./node_modules/@antv/g6/esm/elements/edges/cubic-vertical.js","webpack:///./node_modules/@antv/g6/esm/elements/edges/line.js","webpack:///./node_modules/@antv/g6/esm/elements/edges/polyline.js","webpack:///./node_modules/@antv/g6/esm/elements/edges/quadratic.js","webpack:///./node_modules/@antv/g6/esm/behaviors/collapse-expand.js","webpack:///./node_modules/@antv/util/esm/lodash/unique-id.js","webpack:///./node_modules/@antv/g6/esm/behaviors/create-edge.js","webpack:///./node_modules/@antv/util/esm/lodash/debounce.js","webpack:///./node_modules/@antv/g6/esm/behaviors/drag-canvas.js","webpack:///./node_modules/@antv/g6/esm/behaviors/drag-element.js","webpack:///./node_modules/@antv/g6/esm/layouts/base-layout.js","webpack:///./node_modules/@antv/g6/esm/utils/layout.js","webpack:///./node_modules/@antv/g6/esm/behaviors/fix-element-size.js","webpack:///./node_modules/@antv/g6/esm/behaviors/focus-element.js","webpack:///./node_modules/@antv/g6/esm/behaviors/hover-activate.js","webpack:///./node_modules/@antv/g6/esm/behaviors/optimize-viewport-transform.js","webpack:///./node_modules/@antv/g6/esm/behaviors/scroll-canvas.js","webpack:///./node_modules/@antv/g6/esm/behaviors/zoom-canvas.js","webpack:///./node_modules/@antv/util/esm/lodash/reduce.js","webpack:///./node_modules/@antv/util/esm/lodash/omit.js","webpack:///./node_modules/@antv/g6/esm/utils/dom.js","webpack:///./node_modules/@antv/g6/esm/plugins/base-plugin.js","webpack:///./node_modules/@antv/g6/esm/plugins/background/index.js","webpack:///./node_modules/bubblesets-js/build/index.js","webpack:///./node_modules/@antv/g6/esm/plugins/bubble-sets.js","webpack:///./node_modules/@antv/g6/esm/plugins/contextmenu/index.js","webpack:///./node_modules/@antv/g6/esm/plugins/contextmenu/util.js","webpack:///./node_modules/@antv/g6/esm/plugins/fullscreen/index.js","webpack:///./node_modules/@antv/g6/esm/plugins/grid-line.js","webpack:///./node_modules/@antv/g6/esm/utils/change.js","webpack:///./node_modules/@antv/g6/esm/plugins/history/util.js","webpack:///./node_modules/@antv/g6/esm/plugins/history/index.js","webpack:///./node_modules/@antv/g6/esm/plugins/hull/util.js","webpack:///./node_modules/@antv/g6/esm/plugins/hull/index.js","webpack:///./node_modules/@antv/g6/esm/plugins/legend.js","webpack:///./node_modules/@antv/component/esm/util/time.js","webpack:///./node_modules/@antv/component/node_modules/@antv/util/esm/lodash/each.js","webpack:///./node_modules/@antv/component/node_modules/@antv/util/esm/lodash/reduce.js","webpack:///./node_modules/@antv/component/esm/ui/select/option.js","webpack:///./node_modules/@antv/component/esm/ui/select/select.js","webpack:///./node_modules/@antv/component/esm/ui/timebar/icons.js","webpack:///./node_modules/@antv/component/node_modules/@antv/util/esm/lodash/omit.js","webpack:///./node_modules/@antv/component/esm/ui/timebar/controller.js","webpack:///./node_modules/@antv/component/esm/ui/timebar/handle.js","webpack:///./node_modules/@antv/component/esm/ui/timebar/utils.js","webpack:///./node_modules/@antv/component/esm/ui/timebar/timebar.js","webpack:///./node_modules/@antv/util/esm/lodash/is-date.js","webpack:///./node_modules/@antv/g6/esm/plugins/timebar.js","webpack:///./node_modules/@antv/g6/esm/plugins/toolbar/index.js","webpack:///./node_modules/@antv/g6/esm/plugins/toolbar/util.js","webpack:///./node_modules/@antv/g6/esm/plugins/tooltip.js","webpack:///./node_modules/@antv/g6/esm/plugins/watermark/util.js","webpack:///./node_modules/@antv/g6/esm/plugins/watermark/index.js","webpack:///./node_modules/@antv/g6/esm/themes/base.js","webpack:///./node_modules/@antv/g6/esm/themes/dark.js","webpack:///./node_modules/@antv/g6/esm/themes/light.js","webpack:///./node_modules/@antv/g6/esm/transforms/base-transform.js","webpack:///./node_modules/@antv/g6/esm/transforms/utils.js","webpack:///./node_modules/@antv/g6/esm/transforms/collapse-expand-node.js","webpack:///./node_modules/@antv/g6/esm/utils/event/events.js","webpack:///./node_modules/@antv/g6/esm/utils/event/index.js","webpack:///./node_modules/@antv/g6/esm/runtime/animation.js","webpack:///./node_modules/@antv/g6/esm/runtime/batch.js","webpack:///./node_modules/@antv/g6/esm/runtime/behavior.js","webpack:///./node_modules/@antv/g6/esm/runtime/canvas.js","webpack:///./node_modules/@antv/util/esm/dom/create-dom.js","webpack:///./node_modules/@antv/g6/esm/utils/data.js","webpack:///./node_modules/@antv/g6/esm/utils/graphlib.js","webpack:///./node_modules/@antv/g6/esm/runtime/data.js","webpack:///./node_modules/@antv/util/esm/lodash/uniq.js","webpack:///./node_modules/@antv/g6/esm/runtime/element.js","webpack:///./node_modules/comlink/dist/esm/comlink.mjs","webpack:///./node_modules/@antv/layout/lib/supervisor.js","webpack:///./node_modules/@antv/g6/esm/runtime/layout.js","webpack:///./node_modules/@antv/g6/esm/runtime/plugin.js","webpack:///./node_modules/@antv/g6/esm/runtime/transform.js","webpack:///./node_modules/@antv/g6/esm/runtime/viewport.js","webpack:///./node_modules/@antv/g6/esm/runtime/graph.js","webpack:///./node_modules/@antv/g6/esm/utils/tree.js","webpack:///./node_modules/@antv/g6/esm/transforms/get-edge-actual-ends.js","webpack:///./node_modules/@antv/g6/esm/transforms/process-parallel-edges.js","webpack:///./node_modules/@antv/g6/esm/registry/build-in.js","webpack:///./node_modules/@antv/g6/esm/behaviors/drag-element-force.js","webpack:///./node_modules/@antv/g6/esm/behaviors/lasso-select.js","webpack:///./node_modules/@antv/g6/esm/elements/combos/circle.js","webpack:///./node_modules/@antv/g6/esm/elements/combos/rect.js","webpack:///./node_modules/@antv/g6/esm/elements/nodes/diamond.js","webpack:///./node_modules/@antv/g6/esm/elements/nodes/hexagon.js","webpack:///./node_modules/@antv/g6/esm/elements/nodes/rect.js","webpack:///./node_modules/@antv/g6/esm/elements/nodes/star.js","webpack:///./node_modules/@antv/g6/esm/palettes/index.js","webpack:///./node_modules/@antv/g6/esm/transforms/update-related-edge.js","webpack:///./node_modules/@antv/g6/esm/transforms/arrange-draw-order.js","webpack:///./node_modules/@antv/g6/esm/transforms/collapse-expand-combo.js","webpack:///./node_modules/@antv/g6/esm/registry/index.js","webpack:///./node_modules/@antv/g6/esm/preset.js","webpack:///./node_modules/@antv/hierarchy/build/hierarchy.js","webpack:///./node_modules/hull.js/src/convex.js","webpack:///./node_modules/hull.js/src/format.js","webpack:///./node_modules/hull.js/src/grid.js","webpack:///./node_modules/hull.js/src/hull.js","webpack:///./node_modules/hull.js/src/intersect.js","webpack:///./node_modules/lodash/get.js","webpack:///./node_modules/lodash/isString.js","webpack:///./node_modules/lodash/mapValues.js","webpack:///./node_modules/@umijs/babel-preset-umi/node_modules/@babel/runtime/helpers/classCallCheck.js","webpack:///./node_modules/@umijs/babel-preset-umi/node_modules/@babel/runtime/helpers/createClass.js"],"sourcesContent":["import { version } from '../version';\nconst BRAND = 'G6';\n/**\n * <zh/> 格式化打印\n *\n * <en/> Format print\n * @param message - <zh/> 消息 | <en/> Message\n * @returns <zh/> 格式化后的消息 | <en/> Formatted message\n */\nexport function format(message) {\n    return `[${BRAND} v${version}] ${message}`;\n}\nexport const print = {\n    mute: false,\n    debug: (message) => {\n        !print.mute && console.debug(format(message));\n    },\n    info: (message) => {\n        !print.mute && console.info(format(message));\n    },\n    warn: (message) => {\n        !print.mute && console.warn(format(message));\n    },\n    error: (message) => {\n        !print.mute && console.error(format(message));\n    },\n};\n//# sourceMappingURL=print.js.map","import isNil from './is-nil';\nexport default (function (value) {\n    if (isNil(value))\n        return '';\n    return value.toString();\n});\n//# sourceMappingURL=to-string.js.map","import toString from './to-string';\nvar upperFirst = function (value) {\n    var str = toString(value);\n    return str.charAt(0).toUpperCase() + str.substring(1);\n};\nexport default upperFirst;\n//# sourceMappingURL=upper-first.js.map","import isObjectLike from './is-object-like';\nimport isArrayLike from './is-array-like';\nimport isString from './is-string';\nvar isEqual = function (value, other) {\n    if (value === other) {\n        return true;\n    }\n    if (!value || !other) {\n        return false;\n    }\n    if (isString(value) || isString(other)) {\n        return false;\n    }\n    if (isArrayLike(value) || isArrayLike(other)) {\n        if (value.length !== other.length) {\n            return false;\n        }\n        var rst = true;\n        for (var i = 0; i < value.length; i++) {\n            rst = isEqual(value[i], other[i]);\n            if (!rst) {\n                break;\n            }\n        }\n        return rst;\n    }\n    if (isObjectLike(value) || isObjectLike(other)) {\n        var valueKeys = Object.keys(value);\n        var otherKeys = Object.keys(other);\n        if (valueKeys.length !== otherKeys.length) {\n            return false;\n        }\n        var rst = true;\n        for (var i = 0; i < valueKeys.length; i++) {\n            rst = isEqual(value[valueKeys[i]], other[valueKeys[i]]);\n            if (!rst) {\n                break;\n            }\n        }\n        return rst;\n    }\n    return false;\n};\nexport default isEqual;\n//# sourceMappingURL=is-equal.js.map","export const DEFAULT_ANIMATION_OPTIONS = {\n    duration: 500,\n};\nexport const DEFAULT_ELEMENTS_ANIMATION_OPTIONS = {\n    duration: 1000,\n    easing: 'cubic-bezier(0.250, 0.460, 0.450, 0.940)',\n    iterations: 1,\n    fill: 'both',\n};\n//# sourceMappingURL=animation.js.map","export const ChangeEvent = {\n    /**\n     * <zh/> 数据变更\n     *\n     * <en/> Data changes\n     */\n    CHANGE: 'change',\n};\nexport var ChangeType;\n(function (ChangeType) {\n    /**\n     * <zh/> 节点添加\n     *\n     * <en/> Node added\n     */\n    ChangeType[\"NodeAdded\"] = \"NodeAdded\";\n    /**\n     * <zh/> 节点更新\n     *\n     * <en/> Node updated\n     */\n    ChangeType[\"NodeUpdated\"] = \"NodeUpdated\";\n    /**\n     * <zh/> 节点删除\n     *\n     * <en/> Node removed\n     */\n    ChangeType[\"NodeRemoved\"] = \"NodeRemoved\";\n    /**\n     * <zh/> 边添加\n     *\n     * <en/> Edge added\n     */\n    ChangeType[\"EdgeAdded\"] = \"EdgeAdded\";\n    /**\n     * <zh/> 边更新\n     *\n     * <en/> Edge updated\n     */\n    ChangeType[\"EdgeUpdated\"] = \"EdgeUpdated\";\n    /**\n     * <zh/> 边删除\n     *\n     * <en/> Edge removed\n     */\n    ChangeType[\"EdgeRemoved\"] = \"EdgeRemoved\";\n    /**\n     * <zh/> Combo添加\n     *\n     * <en/> Combo added\n     */\n    ChangeType[\"ComboAdded\"] = \"ComboAdded\";\n    /**\n     * <zh/> Combo更新\n     *\n     * <en/> Combo updated\n     */\n    ChangeType[\"ComboUpdated\"] = \"ComboUpdated\";\n    /**\n     * <zh/> Combo删除\n     *\n     * <en/> Combo removed\n     */\n    ChangeType[\"ComboRemoved\"] = \"ComboRemoved\";\n})(ChangeType || (ChangeType = {}));\n//# sourceMappingURL=change.js.map","export var AnimationType;\n(function (AnimationType) {\n    AnimationType[\"DRAW\"] = \"draw\";\n    AnimationType[\"COLLAPSE\"] = \"collapse\";\n    AnimationType[\"EXPAND\"] = \"expand\";\n    AnimationType[\"TRANSFORM\"] = \"transform\";\n})(AnimationType || (AnimationType = {}));\n//# sourceMappingURL=animation.js.map","/**\n * <zh/> 画布事件\n *\n * <en/> Canvas event\n */\nexport var CanvasEvent;\n(function (CanvasEvent) {\n    /**\n     * <zh/> 点击时触发\n     *\n     * <en/> Triggered when click\n     */\n    CanvasEvent[\"CLICK\"] = \"canvas:click\";\n    /**\n     * <zh/> 双击时触发\n     *\n     * <en/> Triggered when double click\n     */\n    CanvasEvent[\"DBLCLICK\"] = \"canvas:dblclick\";\n    /**\n     * <zh/> 指针移入时触发\n     *\n     * <en/> Triggered when the pointer enters\n     */\n    CanvasEvent[\"POINTER_OVER\"] = \"canvas:canvas:pointerover\";\n    /**\n     * <zh/> 指针移出时触发\n     *\n     * <en/> Triggered when the pointer leaves\n     */\n    CanvasEvent[\"POINTER_LEAVE\"] = \"canvas:pointerleave\";\n    /**\n     * <zh/> 指针移入时或移入子元素时触发（不会冒泡）\n     *\n     * <en/> Triggered when the pointer enters or enters a child element (does not bubble)\n     */\n    CanvasEvent[\"POINTER_ENTER\"] = \"canvas:pointerenter\";\n    /**\n     * <zh/> 指针移动时触发\n     *\n     * <en/> Triggered when the pointer moves\n     */\n    CanvasEvent[\"POINTER_MOVE\"] = \"canvas:pointermove\";\n    /**\n     * <zh/> 指针移出时触发\n     *\n     * <en/> Triggered when the pointer leaves\n     */\n    CanvasEvent[\"POINTER_OUT\"] = \"canvas:pointerout\";\n    /**\n     * <zh/> 指针按下时触发\n     *\n     * <en/> Triggered when the pointer is pressed\n     */\n    CanvasEvent[\"POINTER_DOWN\"] = \"canvas:pointerdown\";\n    /**\n     * <zh/> 指针抬起时触发\n     *\n     * <en/> Triggered when the pointer is lifted\n     */\n    CanvasEvent[\"POINTER_UP\"] = \"canvas:pointerup\";\n    /**\n     * <zh/> 打开上下文菜单时触发\n     *\n     * <en/> Triggered when the context menu is opened\n     */\n    CanvasEvent[\"CONTEXT_MENU\"] = \"canvas:contextmenu\";\n    /**\n     * <zh/> 开始拖拽时触发\n     *\n     * <en/> Triggered when dragging starts\n     */\n    CanvasEvent[\"DRAG_START\"] = \"canvas:dragstart\";\n    /**\n     * <zh/> 拖拽过程中触发\n     *\n     * <en/> Triggered when dragging\n     */\n    CanvasEvent[\"DRAG\"] = \"canvas:drag\";\n    /**\n     * <zh/> 拖拽结束时触发\n     *\n     * <en/> Triggered when dragging ends\n     */\n    CanvasEvent[\"DRAG_END\"] = \"canvas:dragend\";\n    /**\n     * <zh/> 拖拽进入时触发\n     *\n     * <en/> Triggered when dragging enters\n     */\n    CanvasEvent[\"DRAG_ENTER\"] = \"canvas:dragenter\";\n    /**\n     * <zh/> 拖拽经过时触发\n     *\n     * <en/> Triggered when dragging passes\n     */\n    CanvasEvent[\"DRAG_OVER\"] = \"canvas:dragover\";\n    /**\n     * <zh/> 拖拽离开时触发\n     *\n     * <en/> Triggered when dragging leaves\n     */\n    CanvasEvent[\"DRAG_LEAVE\"] = \"canvas:dragleave\";\n    /**\n     * <zh/> 拖拽放下时触发\n     *\n     * <en/> Triggered when dragging is dropped\n     */\n    CanvasEvent[\"DROP\"] = \"canvas:drop\";\n    /**\n     * <zh/> 滚动时触发\n     *\n     * <en/> Triggered when scrolling\n     */\n    CanvasEvent[\"WHEEL\"] = \"canvas:wheel\";\n})(CanvasEvent || (CanvasEvent = {}));\n//# sourceMappingURL=canvas.js.map","/**\n * <zh/> 组合事件\n *\n * <en/> Combo event\n */\nexport var ComboEvent;\n(function (ComboEvent) {\n    /**\n     * <zh/> 点击时触发\n     *\n     * <en/> Triggered when click\n     */\n    ComboEvent[\"CLICK\"] = \"combo:click\";\n    /**\n     * <zh/> 双击时触发\n     *\n     * <en/> Triggered when double click\n     */\n    ComboEvent[\"DBLCLICK\"] = \"combo:dblclick\";\n    /**\n     * <zh/> 指针移入时触发\n     *\n     * <en/> Triggered when the pointer enters\n     */\n    ComboEvent[\"POINTER_OVER\"] = \"combo:pointerover\";\n    /**\n     * <zh/> 指针移出时触发\n     *\n     * <en/> Triggered when the pointer leaves\n     */\n    ComboEvent[\"POINTER_LEAVE\"] = \"combo:pointerleave\";\n    /**\n     * <zh/> 指针移入时或移入子元素时触发（不会冒泡）\n     *\n     * <en/> Triggered when the pointer enters or enters a child element (does not bubble)\n     */\n    ComboEvent[\"POINTER_ENTER\"] = \"combo:pointerenter\";\n    /**\n     * <zh/> 指针移动时触发\n     *\n     * <en/> Triggered when the pointer moves\n     */\n    ComboEvent[\"POINTER_MOVE\"] = \"combo:pointermove\";\n    /**\n     * <zh/> 指针移出时触发\n     *\n     * <en/> Triggered when the pointer leaves\n     */\n    ComboEvent[\"POINTER_OUT\"] = \"combo:pointerout\";\n    /**\n     * <zh/> 指针按下时触发\n     *\n     * <en/> Triggered when the pointer is pressed\n     */\n    ComboEvent[\"POINTER_DOWN\"] = \"combo:pointerdown\";\n    /**\n     * <zh/> 指针抬起时触发\n     *\n     * <en/> Triggered when the pointer is lifted\n     */\n    ComboEvent[\"POINTER_UP\"] = \"combo:pointerup\";\n    /**\n     * <zh/> 打开上下文菜单时触发\n     *\n     * <en/> Triggered when the context menu is opened\n     */\n    ComboEvent[\"CONTEXT_MENU\"] = \"combo:contextmenu\";\n    /**\n     * <zh/> 开始拖拽时触发\n     *\n     * <en/> Triggered when dragging starts\n     */\n    ComboEvent[\"DRAG_START\"] = \"combo:dragstart\";\n    /**\n     * <zh/> 拖拽过程中触发\n     *\n     * <en/> Triggered when dragging\n     */\n    ComboEvent[\"DRAG\"] = \"combo:drag\";\n    /**\n     * <zh/> 拖拽结束时触发\n     *\n     * <en/> Triggered when dragging ends\n     */\n    ComboEvent[\"DRAG_END\"] = \"combo:dragend\";\n    /**\n     * <zh/> 拖拽进入时触发\n     *\n     * <en/> Triggered when dragging enters\n     */\n    ComboEvent[\"DRAG_ENTER\"] = \"combo:dragenter\";\n    /**\n     * <zh/> 拖拽经过时触发\n     *\n     * <en/> Triggered when dragging passes\n     */\n    ComboEvent[\"DRAG_OVER\"] = \"combo:dragover\";\n    /**\n     * <zh/> 拖拽离开时触发\n     *\n     * <en/> Triggered when dragging leaves\n     */\n    ComboEvent[\"DRAG_LEAVE\"] = \"combo:dragleave\";\n    /**\n     * <zh/> 拖拽放下时触发\n     *\n     * <en/> Triggered when dragging is dropped\n     */\n    ComboEvent[\"DROP\"] = \"combo:drop\";\n})(ComboEvent || (ComboEvent = {}));\n//# sourceMappingURL=combo.js.map","export var CommonEvent;\n(function (CommonEvent) {\n    /**\n     * <zh/> 点击时触发\n     *\n     * <en/> Triggered when click\n     */\n    CommonEvent[\"CLICK\"] = \"click\";\n    /**\n     * <zh/> 双击时触发\n     *\n     * <en/> Triggered when double click\n     */\n    CommonEvent[\"DBLCLICK\"] = \"dblclick\";\n    /**\n     * <zh/> 指针移入时触发\n     *\n     * <en/> Triggered when the pointer enters\n     */\n    CommonEvent[\"POINTER_OVER\"] = \"pointerover\";\n    /**\n     * <zh/> 指针移出时触发\n     *\n     * <en/> Triggered when the pointer leaves\n     */\n    CommonEvent[\"POINTER_LEAVE\"] = \"pointerleave\";\n    /**\n     * <zh/> 指针移入时或移入子元素时触发（不会冒泡）\n     *\n     * <en/> Triggered when the pointer enters or enters a child element (does not bubble)\n     */\n    CommonEvent[\"POINTER_ENTER\"] = \"pointerenter\";\n    /**\n     * <zh/> 指针移动时触发\n     *\n     * <en/> Triggered when the pointer moves\n     */\n    CommonEvent[\"POINTER_MOVE\"] = \"pointermove\";\n    /**\n     * <zh/> 指针移出时触发\n     *\n     * <en/> Triggered when the pointer leaves\n     */\n    CommonEvent[\"POINTER_OUT\"] = \"pointerout\";\n    /**\n     * <zh/> 指针按下时触发\n     *\n     * <en/> Triggered when the pointer is pressed\n     */\n    CommonEvent[\"POINTER_DOWN\"] = \"pointerdown\";\n    /**\n     * <zh/> 指针抬起时触发\n     *\n     * <en/> Triggered when the pointer is lifted\n     */\n    CommonEvent[\"POINTER_UP\"] = \"pointerup\";\n    /**\n     * <zh/> 打开上下文菜单时触发\n     *\n     * <en/> Triggered when the context menu is opened\n     */\n    CommonEvent[\"CONTEXT_MENU\"] = \"contextmenu\";\n    /**\n     * <zh/> 开始拖拽时触发\n     *\n     * <en/> Triggered when dragging starts\n     */\n    CommonEvent[\"DRAG_START\"] = \"dragstart\";\n    /**\n     * <zh/> 拖拽过程中触发\n     *\n     * <en/> Triggered when dragging\n     */\n    CommonEvent[\"DRAG\"] = \"drag\";\n    /**\n     * <zh/> 拖拽结束时触发\n     *\n     * <en/> Triggered when dragging ends\n     */\n    CommonEvent[\"DRAG_END\"] = \"dragend\";\n    /**\n     * <zh/> 拖拽进入时触发\n     *\n     * <en/> Triggered when dragging enters\n     */\n    CommonEvent[\"DRAG_ENTER\"] = \"dragenter\";\n    /**\n     * <zh/> 拖拽经过时触发\n     *\n     * <en/> Triggered when dragging passes\n     */\n    CommonEvent[\"DRAG_OVER\"] = \"dragover\";\n    /**\n     * <zh/> 拖拽离开时触发\n     *\n     * <en/> Triggered when dragging leaves\n     */\n    CommonEvent[\"DRAG_LEAVE\"] = \"dragleave\";\n    /**\n     * <zh/> 拖拽放下时触发\n     *\n     * <en/> Triggered when dragging is dropped\n     */\n    CommonEvent[\"DROP\"] = \"drop\";\n    /**\n     * <zh/> 按下键盘时触发\n     *\n     * <en/> Triggered when the keyboard is pressed\n     */\n    CommonEvent[\"KEY_DOWN\"] = \"keydown\";\n    /**\n     * <zh/> 抬起键盘时触发\n     *\n     * <en/> Triggered when the keyboard is lifted\n     */\n    CommonEvent[\"KEY_UP\"] = \"keyup\";\n    /**\n     * <zh/> 滚动时触发\n     *\n     * <en/> Triggered when scrolling\n     */\n    CommonEvent[\"WHEEL\"] = \"wheel\";\n})(CommonEvent || (CommonEvent = {}));\n//# sourceMappingURL=common.js.map","export var ContainerEvent;\n(function (ContainerEvent) {\n    /**\n     * <zh/> 按下键盘时触发\n     *\n     * <en/> Triggered when the keyboard is pressed\n     */\n    ContainerEvent[\"KEY_DOWN\"] = \"keydown\";\n    /**\n     * <zh/> 抬起键盘时触发\n     *\n     * <en/> Triggered when the keyboard is lifted\n     */\n    ContainerEvent[\"KEY_UP\"] = \"keyup\";\n})(ContainerEvent || (ContainerEvent = {}));\n//# sourceMappingURL=container.js.map","/**\n * <zh/> 边事件\n *\n * <en/> Edge event\n */\nexport var EdgeEvent;\n(function (EdgeEvent) {\n    /**\n     * <zh/> 点击时触发\n     *\n     * <en/> Triggered when click\n     */\n    EdgeEvent[\"CLICK\"] = \"edge:click\";\n    /**\n     * <zh/> 双击时触发\n     *\n     * <en/> Triggered when double click\n     */\n    EdgeEvent[\"DBLCLICK\"] = \"edge:dblclick\";\n    /**\n     * <zh/> 指针移入时触发\n     *\n     * <en/> Triggered when the pointer enters\n     */\n    EdgeEvent[\"POINTER_OVER\"] = \"edge:pointerover\";\n    /**\n     * <zh/> 指针移出时触发\n     *\n     * <en/> Triggered when the pointer leaves\n     */\n    EdgeEvent[\"POINTER_LEAVE\"] = \"edge:pointerleave\";\n    /**\n     * <zh/> 指针移入时或移入子元素时触发（不会冒泡）\n     *\n     * <en/> Triggered when the pointer enters or enters a child element (does not bubble)\n     */\n    EdgeEvent[\"POINTER_ENTER\"] = \"edge:pointerenter\";\n    /**\n     * <zh/> 指针移动时触发\n     *\n     * <en/> Triggered when the pointer moves\n     */\n    EdgeEvent[\"POINTER_MOVE\"] = \"edge:pointermove\";\n    /**\n     * <zh/> 指针移出时触发\n     *\n     * <en/> Triggered when the pointer leaves\n     */\n    EdgeEvent[\"POINTER_OUT\"] = \"edge:pointerout\";\n    /**\n     * <zh/> 指针按下时触发\n     *\n     * <en/> Triggered when the pointer is pressed\n     */\n    EdgeEvent[\"POINTER_DOWN\"] = \"edge:pointerdown\";\n    /**\n     * <zh/> 指针抬起时触发\n     *\n     * <en/> Triggered when the pointer is lifted\n     */\n    EdgeEvent[\"POINTER_UP\"] = \"edge:pointerup\";\n    /**\n     * <zh/> 打开上下文菜单时触发\n     *\n     * <en/> Triggered when the context menu is opened\n     */\n    EdgeEvent[\"CONTEXT_MENU\"] = \"edge:contextmenu\";\n    /**\n     * <zh/> 拖拽进入时触发\n     *\n     * <en/> Triggered when dragging enters\n     */\n    EdgeEvent[\"DRAG_ENTER\"] = \"edge:dragenter\";\n    /**\n     * <zh/> 拖拽经过时触发\n     *\n     * <en/> Triggered when dragging passes\n     */\n    EdgeEvent[\"DRAG_OVER\"] = \"edge:dragover\";\n    /**\n     * <zh/> 拖拽离开时触发\n     *\n     * <en/> Triggered when dragging leaves\n     */\n    EdgeEvent[\"DRAG_LEAVE\"] = \"edge:dragleave\";\n    /**\n     * <zh/> 拖拽放下时触发\n     *\n     * <en/> Triggered when dragging is dropped\n     */\n    EdgeEvent[\"DROP\"] = \"edge:drop\";\n})(EdgeEvent || (EdgeEvent = {}));\n//# sourceMappingURL=edge.js.map","export var GraphEvent;\n(function (GraphEvent) {\n    /**\n     * <zh/> 画布初始化之前\n     *\n     * <en/> Before the canvas is initialized\n     */\n    GraphEvent[\"BEFORE_CANVAS_INIT\"] = \"beforecanvasinit\";\n    /**\n     * <zh/> 画布初始化之后\n     *\n     * <en/> After the canvas is initialized\n     */\n    GraphEvent[\"AFTER_CANVAS_INIT\"] = \"aftercanvasinit\";\n    /**\n     * <zh/> 视口尺寸变更之前\n     *\n     * <en/> Before the viewport size changes\n     */\n    GraphEvent[\"BEFORE_SIZE_CHANGE\"] = \"beforesizechange\";\n    /**\n     * <zh/> 视口尺寸变更之后\n     *\n     * <en/> After the viewport size changes\n     */\n    GraphEvent[\"AFTER_SIZE_CHANGE\"] = \"aftersizechange\";\n    /**\n     * <zh/> 元素创建之前\n     *\n     * <en/> Before creating element\n     */\n    GraphEvent[\"BEFORE_ELEMENT_CREATE\"] = \"beforeelementcreate\";\n    /**\n     * <zh/> 元素创建之后\n     *\n     * <en/> After creating element\n     */\n    GraphEvent[\"AFTER_ELEMENT_CREATE\"] = \"afterelementcreate\";\n    /**\n     * <zh/> 元素更新之前\n     *\n     * <en/> Before updating element\n     */\n    GraphEvent[\"BEFORE_ELEMENT_UPDATE\"] = \"beforeelementupdate\";\n    /**\n     * <zh/> 元素更新之后\n     *\n     * <en/> After updating element\n     */\n    GraphEvent[\"AFTER_ELEMENT_UPDATE\"] = \"afterelementupdate\";\n    /**\n     * <zh/> 元素销毁之前\n     *\n     * <en/> Before destroying element\n     */\n    GraphEvent[\"BEFORE_ELEMENT_DESTROY\"] = \"beforeelementdestroy\";\n    /**\n     * <zh/> 元素销毁之后\n     *\n     * <en/> After destroying element\n     */\n    GraphEvent[\"AFTER_ELEMENT_DESTROY\"] = \"afterelementdestroy\";\n    /**\n     * <zh/> 元素平移之前\n     *\n     * <en/> Before element translation\n     */\n    GraphEvent[\"BEFORE_ELEMENT_TRANSLATE\"] = \"beforeelementtranslate\";\n    /**\n     * <zh/> 元素平移之后\n     *\n     * <en/> After element translation\n     */\n    GraphEvent[\"AFTER_ELEMENT_TRANSLATE\"] = \"afterelementtranslate\";\n    /**\n     * <zh/> 绘制开始之前\n     *\n     * <en/> Before drawing\n     */\n    GraphEvent[\"BEFORE_DRAW\"] = \"beforedraw\";\n    /**\n     * <zh/> 绘制结束之后\n     *\n     * <en/> After drawing\n     */\n    GraphEvent[\"AFTER_DRAW\"] = \"afterdraw\";\n    /**\n     * <zh/> 渲染开始之前\n     *\n     * <en/> Before rendering\n     */\n    GraphEvent[\"BEFORE_RENDER\"] = \"beforerender\";\n    /**\n     * <zh/> 渲染完成之后\n     *\n     * <en/> After rendering\n     */\n    GraphEvent[\"AFTER_RENDER\"] = \"afterrender\";\n    /**\n     * <zh/> 动画开始之前\n     *\n     * <en/> Before animation\n     */\n    GraphEvent[\"BEFORE_ANIMATE\"] = \"beforeanimate\";\n    /**\n     * <zh/> 动画结束之后\n     *\n     * <en/> After animation\n     */\n    GraphEvent[\"AFTER_ANIMATE\"] = \"afteranimate\";\n    /**\n     * <zh/> 布局开始之前\n     *\n     * <en/> Before layout\n     */\n    GraphEvent[\"BEFORE_LAYOUT\"] = \"beforelayout\";\n    /**\n     * <zh/> 布局结束之后\n     *\n     * <en/> After layout\n     */\n    GraphEvent[\"AFTER_LAYOUT\"] = \"afterlayout\";\n    /**\n     * <zh/> 布局过程之前，用于流水线布局过程获取当前执行的布局\n     *\n     * <en/> Before the layout process, used to get the current layout being executed in the pipeline layout process\n     */\n    GraphEvent[\"BEFORE_STAGE_LAYOUT\"] = \"beforestagelayout\";\n    /**\n     * <zh/> 布局过程之后，用于流水线布局过程获取当前执行的布局\n     *\n     * <en/> After the layout process, used to get the current layout being executed in the pipeline layout process\n     */\n    GraphEvent[\"AFTER_STAGE_LAYOUT\"] = \"afterstagelayout\";\n    /**\n     * <zh/> 可视区域变化之前\n     *\n     * <en/> Before the visible area changes\n     */\n    GraphEvent[\"BEFORE_TRANSFORM\"] = \"beforetransform\";\n    /**\n     * <zh/> 可视区域变化之后\n     *\n     * <en/> After the visible area changes\n     */\n    GraphEvent[\"AFTER_TRANSFORM\"] = \"aftertransform\";\n    /**\n     * <zh/> 批处理开始\n     *\n     * <en/> Batch processing starts\n     */\n    GraphEvent[\"BATCH_START\"] = \"batchstart\";\n    /**\n     * <zh/> 批处理结束\n     *\n     * <en/> Batch processing ends\n     */\n    GraphEvent[\"BATCH_END\"] = \"batchend\";\n    /**\n     * <zh/> 销毁开始之前\n     *\n     * <en/> Before destruction\n     */\n    GraphEvent[\"BEFORE_DESTROY\"] = \"beforedestroy\";\n    /**\n     * <zh/> 销毁结束之后\n     *\n     * <en/> After destruction\n     */\n    GraphEvent[\"AFTER_DESTROY\"] = \"afterdestroy\";\n    /**\n     * <zh/> 渲染器变更之前\n     *\n     * <en/> Before the renderer changes\n     */\n    GraphEvent[\"BEFORE_RENDERER_CHANGE\"] = \"beforerendererchange\";\n    /**\n     * <zh/> 渲染器变更之后\n     *\n     * <en/> After the renderer changes\n     */\n    GraphEvent[\"AFTER_RENDERER_CHANGE\"] = \"afterrendererchange\";\n})(GraphEvent || (GraphEvent = {}));\n//# sourceMappingURL=graph.js.map","export var HistoryEvent;\n(function (HistoryEvent) {\n    /**\n     * <zh/> 当命令被撤销时\n     *\n     * <en/> When the command is undone\n     */\n    HistoryEvent[\"UNDO\"] = \"undo\";\n    /**\n     * <zh/> 当命令被重做时\n     *\n     * <en/> When the command is redone\n     */\n    HistoryEvent[\"REDO\"] = \"redo\";\n    /**\n     * <zh/> 当命令被取消时\n     *\n     * <en/> When the command is canceled\n     */\n    HistoryEvent[\"CANCEL\"] = \"cancel\";\n    /**\n     *  <zh/> 当命令被添加到队列时\n     *\n     *  <en/> When the command is added\n     */\n    HistoryEvent[\"ADD\"] = \"add\";\n    /**\n     * <zh/> 当历史队列被清空时\n     *\n     *  <en/> When the command queue is cleared\n     */\n    HistoryEvent[\"CLEAR\"] = \"clear\";\n    /**\n     * <zh/> 当历史队列发生变化时\n     *\n     * <en/> When the command queue changes\n     */\n    HistoryEvent[\"CHANGE\"] = \"change\";\n})(HistoryEvent || (HistoryEvent = {}));\n//# sourceMappingURL=history.js.map","/**\n * <zh/> 节点事件\n *\n * <en/> Node event\n */\nexport var NodeEvent;\n(function (NodeEvent) {\n    /**\n     * <zh/> 点击时触发\n     *\n     * <en/> Triggered when click\n     */\n    NodeEvent[\"CLICK\"] = \"node:click\";\n    /**\n     * <zh/> 双击时触发\n     *\n     * <en/> Triggered when double click\n     */\n    NodeEvent[\"DBLCLICK\"] = \"node:dblclick\";\n    /**\n     * <zh/> 指针移入时触发\n     *\n     * <en/> Triggered when the pointer enters\n     */\n    NodeEvent[\"POINTER_OVER\"] = \"node:pointerover\";\n    /**\n     * <zh/> 指针移出时触发\n     *\n     * <en/> Triggered when the pointer leaves\n     */\n    NodeEvent[\"POINTER_LEAVE\"] = \"node:pointerleave\";\n    /**\n     * <zh/> 指针移入时或移入子元素时触发（不会冒泡）\n     *\n     * <en/> Triggered when the pointer enters or enters a child element (does not bubble)\n     */\n    NodeEvent[\"POINTER_ENTER\"] = \"node:pointerenter\";\n    /**\n     * <zh/> 指针移动时触发\n     *\n     * <en/> Triggered when the pointer moves\n     */\n    NodeEvent[\"POINTER_MOVE\"] = \"node:pointermove\";\n    /**\n     * <zh/> 指针移出时触发\n     *\n     * <en/> Triggered when the pointer leaves\n     */\n    NodeEvent[\"POINTER_OUT\"] = \"node:pointerout\";\n    /**\n     * <zh/> 指针按下时触发\n     *\n     * <en/> Triggered when the pointer is pressed\n     */\n    NodeEvent[\"POINTER_DOWN\"] = \"node:pointerdown\";\n    /**\n     * <zh/> 指针抬起时触发\n     *\n     * <en/> Triggered when the pointer is lifted\n     */\n    NodeEvent[\"POINTER_UP\"] = \"node:pointerup\";\n    /**\n     * <zh/> 打开上下文菜单时触发\n     *\n     * <en/> Triggered when the context menu is opened\n     */\n    NodeEvent[\"CONTEXT_MENU\"] = \"node:contextmenu\";\n    /**\n     * <zh/> 开始拖拽时触发\n     *\n     * <en/> Triggered when dragging starts\n     */\n    NodeEvent[\"DRAG_START\"] = \"node:dragstart\";\n    /**\n     * <zh/> 拖拽过程中触发\n     *\n     * <en/> Triggered when dragging\n     */\n    NodeEvent[\"DRAG\"] = \"node:drag\";\n    /**\n     * <zh/> 拖拽结束时触发\n     *\n     * <en/> Triggered when dragging ends\n     */\n    NodeEvent[\"DRAG_END\"] = \"node:dragend\";\n    /**\n     * <zh/> 拖拽进入时触发\n     *\n     * <en/> Triggered when dragging enters\n     */\n    NodeEvent[\"DRAG_ENTER\"] = \"node:dragenter\";\n    /**\n     * <zh/> 拖拽经过时触发\n     *\n     * <en/> Triggered when dragging passes\n     */\n    NodeEvent[\"DRAG_OVER\"] = \"node:dragover\";\n    /**\n     * <zh/> 拖拽离开时触发\n     *\n     * <en/> Triggered when dragging leaves\n     */\n    NodeEvent[\"DRAG_LEAVE\"] = \"node:dragleave\";\n    /**\n     * <zh/> 拖拽放下时触发\n     *\n     * <en/> Triggered when dragging is dropped\n     */\n    NodeEvent[\"DROP\"] = \"node:drop\";\n})(NodeEvent || (NodeEvent = {}));\n//# sourceMappingURL=node.js.map","export const COMBO_KEY = 'combo';\nexport const TREE_KEY = 'tree';\n//# sourceMappingURL=graphlib.js.map","export var ExtensionCategory;\n(function (ExtensionCategory) {\n    /**\n     * <zh/> 节点元素\n     *\n     * <en/> Node element\n     */\n    ExtensionCategory[\"NODE\"] = \"node\";\n    /**\n     * <zh/> 边元素\n     *\n     * <en/> Edge element\n     */\n    ExtensionCategory[\"EDGE\"] = \"edge\";\n    /**\n     * <zh/> 组合元素\n     *\n     * <en/> Combination element\n     */\n    ExtensionCategory[\"COMBO\"] = \"combo\";\n    /**\n     * <zh/> 主题\n     *\n     * <en/> Theme\n     */\n    ExtensionCategory[\"THEME\"] = \"theme\";\n    /**\n     * <zh/> 色板\n     *\n     * <en/> Palette\n     */\n    ExtensionCategory[\"PALETTE\"] = \"palette\";\n    /**\n     * <zh/> 布局\n     *\n     * <en/> Layout\n     */\n    ExtensionCategory[\"LAYOUT\"] = \"layout\";\n    /**\n     * <zh/> 交互\n     *\n     * <en/> Behavior\n     */\n    ExtensionCategory[\"BEHAVIOR\"] = \"behavior\";\n    /**\n     * <zh/> 插件\n     *\n     * <en/> Plugin\n     */\n    ExtensionCategory[\"PLUGIN\"] = \"plugin\";\n    /**\n     * <zh/> 动画\n     *\n     * <en/> Animation\n     */\n    ExtensionCategory[\"ANIMATION\"] = \"animation\";\n    /**\n     * <zh/> 数据转换\n     *\n     * <en/> Data transform\n     */\n    ExtensionCategory[\"TRANSFORM\"] = \"transform\";\n})(ExtensionCategory || (ExtensionCategory = {}));\n//# sourceMappingURL=registry.js.map","import { ExtensionCategory } from '../constants';\nimport { getExtension } from '../registry';\nimport { print } from './print';\n/**\n * <zh/> 获取主题配置\n *\n * <en/> Get theme options\n * @param options - <zh/> 图配置项 <en/> graph options\n * @returns <zh/> 主题配置 <en/> theme options\n */\nexport function themeOf(options) {\n    const { theme } = options;\n    if (!theme)\n        return {};\n    const themeOptions = getExtension(ExtensionCategory.THEME, theme);\n    if (themeOptions)\n        return themeOptions;\n    print.warn(`The theme of ${theme} is not registered.`);\n    return {};\n}\n//# sourceMappingURL=theme.js.map","import { isEqual, isNil, isObject } from '@antv/util';\nimport { DEFAULT_ANIMATION_OPTIONS, DEFAULT_ELEMENTS_ANIMATION_OPTIONS, ExtensionCategory } from '../constants';\nimport { getExtension } from '../registry';\nimport { print } from './print';\nimport { themeOf } from './theme';\n/**\n * <zh/> 创建动画代理，对一个动画实例的操作同步到多个动画实例上\n *\n * <en/> create animation proxy, synchronize animation to multiple animation instances\n * @param args1 - <zh/> 源动画实例 | <en/> source animation instance\n * @param args2 - <zh/> 目标动画实例 | <en/> target animation instance\n * @returns <zh/> 动画代理 | <en/> animation proxy\n */\nexport function createAnimationsProxy(args1, args2) {\n    if (Array.isArray(args1) && args1.length === 0)\n        return null;\n    const sourceAnimation = Array.isArray(args1) ? args1[0] : args1;\n    const targetAnimations = Array.isArray(args1) ? args1.slice(1) : args2 || [];\n    return new Proxy(sourceAnimation, {\n        get(target, propKey) {\n            if (typeof target[propKey] === 'function' && !['onframe', 'onfinish'].includes(propKey)) {\n                return (...args) => {\n                    target[propKey](...args);\n                    targetAnimations.forEach((animation) => animation[propKey]?.(...args));\n                };\n            }\n            if (propKey === 'finished') {\n                return Promise.all([sourceAnimation.finished, ...targetAnimations.map((animation) => animation.finished)]);\n            }\n            return Reflect.get(target, propKey);\n        },\n        set(target, propKey, value) {\n            // onframe 和 onfinish 特殊处理，不用同步到所有动画实例上\n            // onframe and onfinish are specially processed and do not need to be synchronized to all animation instances\n            if (!['onframe', 'onfinish'].includes(propKey)) {\n                targetAnimations.forEach((animation) => {\n                    animation[propKey] = value;\n                });\n            }\n            return Reflect.set(target, propKey, value);\n        },\n    });\n}\n/**\n * <zh/> 预处理关键帧，过滤掉无用动画的属性\n *\n * <en/> Preprocess keyframes, filter out the properties of useless animations\n * @param keyframes - <zh/> 关键帧 | <en/> keyframes\n * @returns <zh/> 关键帧 | <en/> keyframes\n */\nexport function preprocessKeyframes(keyframes) {\n    // 转化为 PropertyIndexedKeyframes 格式方便后续处理\n    // convert to PropertyIndexedKeyframes format for subsequent processing\n    const propertyIndexedKeyframes = keyframes.reduce((acc, kf) => {\n        Object.entries(kf).forEach(([key, value]) => {\n            if (acc[key] === undefined)\n                acc[key] = [value];\n            else\n                acc[key].push(value);\n        });\n        return acc;\n    }, {});\n    // 过滤掉无用动画的属性（属性值为 undefined、或者值完全一致）\n    // filter out useless animation properties (property value is undefined, or value is exactly the same)\n    Object.entries(propertyIndexedKeyframes).forEach(([key, values]) => {\n        if (\n        // 属性值必须在每一帧都存在 / property value must exist in every frame\n        values.length !== keyframes.length ||\n            // 属性值不能为空 / property value cannot be empty\n            values.some((value) => isNil(value)) ||\n            // 属性值必须不完全一致 / property value must not be exactly the same\n            // 属性值可以是保留属性 / property value can be the reserved property\n            values.every((value) => !['sourceNode', 'targetNode', 'childrenNode'].includes(key) && isEqual(value, values[0]))) {\n            delete propertyIndexedKeyframes[key];\n        }\n    });\n    // 将 PropertyIndexedKeyframes 转化为 Keyframe 格式\n    // convert PropertyIndexedKeyframes to Keyframe format\n    const output = Object.entries(propertyIndexedKeyframes).reduce((acc, [key, values]) => {\n        values.forEach((value, index) => {\n            if (!acc[index])\n                acc[index] = { [key]: value };\n            else\n                acc[index][key] = value;\n        });\n        return acc;\n    }, []);\n    // 如果处理后所有的属性都被过滤掉，则添加一个没有实际作用的属性用于触发动画\n    // If all properties are filtered out after processing, add a property that has no actual effect to trigger the animation\n    if (keyframes.length !== 0 && output.length === 0)\n        output.push(...[{ _: 0 }, { _: 0 }]);\n    return output;\n}\n/**\n * <zh/> 获取属性的默认值\n *\n * <en/> Get default value of attribute\n * @param name - <zh/> 属性名 | <en/> Attribute name\n * @returns <zh/> 属性默认值 | <en/> Attribute default value\n * @remarks\n * <zh/> 执行动画过程中，一些属性没有显式指定属性值，但实际上在 G 中存在属性值，因此通过该方法获取其实际默认值\n *\n * <en/> During the animation, some attributes do not explicitly specify the attribute value, but in fact there is an attribute value in G, so use this method to get the actual default value\n */\nexport function inferDefaultValue(name) {\n    switch (name) {\n        case 'opacity':\n            return 1;\n        case 'x':\n        case 'y':\n        case 'z':\n        case 'zIndex':\n            return 0;\n        case 'visibility':\n            return 'visible';\n        case 'collapsed':\n            return false;\n        case 'states':\n            return [];\n        default:\n            return undefined;\n    }\n}\n/**\n * <zh/> 获取动画配置\n *\n * <en/> Get global animation configuration\n * @param options - <zh/> G6 配置项（用于获取全局动画配置） | <en/> G6 configuration(used to get global animation configuration)\n * @param localAnimation - <zh/> 局部动画配置 | <en/> local animation configuration\n * @returns <zh/> 动画配置 | <en/> animation configuration\n */\nexport function getAnimationOptions(options, localAnimation) {\n    const { animation } = options;\n    if (animation === false || localAnimation === false)\n        return false;\n    const effectTiming = { ...DEFAULT_ANIMATION_OPTIONS };\n    if (isObject(animation))\n        Object.assign(effectTiming, animation);\n    if (isObject(localAnimation))\n        Object.assign(effectTiming, localAnimation);\n    return effectTiming;\n}\n/**\n * <zh/> 获取动画配置\n *\n * <en/> Get animation configuration\n * @param options - <zh/> 动画配置项 | <en/> animation configuration\n * @returns <zh/> 动画配置 | <en/> animation configuration\n */\nfunction animationOf(options) {\n    if (typeof options === 'string') {\n        const animation = getExtension(ExtensionCategory.ANIMATION, options);\n        if (animation)\n            return animation;\n        print.warn(`The animation of ${options} is not registered.`);\n        return [];\n    }\n    return options;\n}\n/**\n * <zh/> 获取元素的动画\n *\n * <en/> Get element animation\n * @param options - <zh/> G6 配置项 | <en/> G6 configuration\n * @param elementType - <zh/> 元素类型 | <en/> element type\n * @param stage - <zh/> 动画阶段 | <en/> animation stage\n * @param localAnimation - <zh/> 局部动画配置 | <en/> local animation configuration\n * @returns <zh/> 动画时序配置 | <en/> animation timing configuration\n */\nexport function getElementAnimationOptions(options, elementType, stage, localAnimation) {\n    const { animation: globalAnimation } = options;\n    const userElementAnimation = options?.[elementType]?.animation;\n    if (userElementAnimation === false)\n        return [];\n    const useElementStageAnimation = userElementAnimation?.[stage];\n    if (useElementStageAnimation === false)\n        return [];\n    if (globalAnimation === false || localAnimation === false)\n        return [];\n    // 优先级：用户局部动画配置 > 用户动画配置 > 全局动画配置 > 主题动画配置 > 默认动画配置\n    // Priority: user local animation configuration > user animation configuration > global animation configuration > theme animation configuration > default animation configuration\n    const themeElementAnimation = themeOf(options)[elementType]?.animation;\n    const combine = (_ = []) => animationOf(_).map((animation) => ({\n        ...DEFAULT_ELEMENTS_ANIMATION_OPTIONS,\n        ...(isObject(globalAnimation) && globalAnimation),\n        ...animation,\n        ...(isObject(localAnimation) && localAnimation),\n    }));\n    if (useElementStageAnimation)\n        return combine(useElementStageAnimation);\n    if (!themeElementAnimation)\n        return [];\n    // 此时取决于主题动画配置\n    // At this time, it depends on the theme animation configuration\n    const themeElementStageAnimation = themeElementAnimation[stage];\n    if (themeElementStageAnimation === false)\n        return [];\n    return combine(themeElementStageAnimation);\n}\n//# sourceMappingURL=animation.js.map","import { format } from './print';\n/**\n * <zh/> 获取节点/边/Combo 的 ID\n *\n * <en/> get the id of node/edge/combo\n * @param data - <zh/> 节点/边/Combo 的数据 | <en/> data of node/edge/combo\n * @returns <zh/> 节点/边/Combo 的 ID | <en/> ID of node/edge/combo\n */\nexport function idOf(data) {\n    if (data.id !== undefined)\n        return data.id;\n    if (data.source !== undefined && data.target !== undefined)\n        return `${data.source}-${data.target}`;\n    throw new Error(format('The datum does not have available id.'));\n}\n/**\n * <zh/> 获取节点/Combo 的父节点 ID\n *\n * <en/> get the parent id of node/combo\n * @param data - <zh/> 节点/Combo 的数据 | <en/> data of node/combo\n * @returns <zh/> 节点/Combo 的父节点 ID | <en/> parent id of node/combo\n */\nexport function parentIdOf(data) {\n    return data.combo;\n}\n/**\n * <zh/> 获取图数据中所有节点/边/Combo 的 ID\n *\n * <en/> Get the IDs of all nodes/edges/combos in the graph data\n * @param data - <zh/> 图数据 | <en/> graph data\n * @param flat - <zh/> 是否扁平化返回 | <en/> Whether to return flat\n * @returns - <zh/> 返回元素 ID 数组 | <en/> Returns an array of element IDs\n */\nexport function idsOf(data, flat) {\n    const ids = {\n        nodes: (data.nodes || []).map(idOf),\n        edges: (data.edges || []).map(idOf),\n        combos: (data.combos || []).map(idOf),\n    };\n    return flat ? Object.values(ids).flat() : ids;\n}\n//# sourceMappingURL=id.js.map","import { deepMix } from '@antv/util';\nimport { idOf } from './id';\n/**\n * <zh/> 从 transform 字符串中替换 translate 部分\n *\n * <en/> replace the translate part from the transform string\n * @param x - <zh/> x | <en/> x\n * @param y - <zh/> y | <en/> y\n * @param z - <zh/> z | <en/> z\n * @param transform - <zh/> transform 字符串 | <en/> transform string\n * @returns <zh/> 替换后的 transform 字符串 | <en/> replaced transform string\n */\nexport function replaceTranslateInTransform(x, y, z, transform) {\n    const removedTranslate = transform ? transform.replace(/translate(3d)?\\([^)]*\\)/g, '') : '';\n    if (z === 0) {\n        return `translate(${x}, ${y})${removedTranslate}`;\n    }\n    else {\n        return `translate3d(${x}, ${y}, ${z})${removedTranslate}`;\n    }\n}\n/**\n * <zh/> 重新分配绘制任务\n *\n * <en/> Reassign drawing tasks\n * @param input - <zh>绘制数据 | <en>DrawData\n * @param type - <zh>类型 | <en>type\n * @param elementType - <zh>元素类型 | <en>element type\n * @param datum - <zh>数据 | <en>data\n * @param merge - <zh>是否合并 | <en>whether to merge\n */\nexport const reassignTo = (input, type, elementType, datum, merge = false) => {\n    const id = idOf(datum);\n    const typeName = `${elementType}s`;\n    const exitsDatum = input.add[typeName].get(id) || input.update[typeName].get(id) || input.remove[typeName].get(id) || datum;\n    Object.entries(input).forEach(([_type, value]) => {\n        if (type === _type)\n            value[typeName].set(id, merge ? deepMix(exitsDatum, datum) : exitsDatum);\n        else\n            value[typeName].delete(id);\n    });\n};\n//# sourceMappingURL=transform.js.map","import { upperFirst } from '@antv/util';\nimport { createAnimationsProxy, inferDefaultValue, preprocessKeyframes } from '../utils/animation';\nimport { replaceTranslateInTransform } from '../utils/transform';\n/**\n * <zh/> 动画语法执行器\n *\n * <en/> Animation syntax executor\n * @param element - <zh/> 要执行动画的图形 | <en/> shape to execute animation\n * @param keyframes - <zh/> 动画关键帧 | <en/> animation keyframes\n * @param options - <zh/> 动画语法 | <en/> animation syntax\n * @returns <zh/> 动画实例 | <en/> animation instance\n */\nexport const executor = (element, keyframes, options) => {\n    if (!options.length)\n        return null;\n    const [originalStyle, modifiedStyle] = keyframes;\n    /**\n     * <zh/> 获取图形关键帧样式\n     *\n     * <en/> Get the keyframe style of the shape\n     * @param shapeID - <zh/> 图形 ID | <en/> shape ID\n     * @returns <zh/> 图形关键帧样式 | <en/> keyframe style of the shape\n     */\n    const getKeyframeStyle = (shapeID) => {\n        if (shapeID) {\n            const shape = element.getShape(shapeID);\n            if (!shape)\n                return null;\n            const name = `get${upperFirst(shapeID)}Style`;\n            const styler = element?.[name]?.bind(element) || ((attrs) => attrs);\n            const fromStyle = styler?.(originalStyle) || {};\n            const toStyle = styler?.(modifiedStyle) || {};\n            return { shape, fromStyle, toStyle };\n        }\n        else {\n            const shape = element;\n            return { shape, fromStyle: originalStyle, toStyle: modifiedStyle };\n        }\n    };\n    let mainResult;\n    const subResults = options\n        .map(({ fields, shape: shapeID, states: enabledStates, ...effectTiming }) => {\n        const keyframeStyle = getKeyframeStyle(shapeID);\n        if (!keyframeStyle)\n            return null;\n        const { shape, fromStyle, toStyle } = keyframeStyle;\n        const keyframes = [{}, {}];\n        fields.forEach((attr) => {\n            Object.assign(keyframes[0], { [attr]: fromStyle[attr] ?? inferDefaultValue(attr) });\n            Object.assign(keyframes[1], { [attr]: toStyle[attr] ?? inferDefaultValue(attr) });\n        });\n        // x/y -> translate\n        if (keyframes.some((keyframe) => Object.keys(keyframe).some((attr) => ['x', 'y', 'z'].includes(attr)))) {\n            const { x = 0, y = 0, z = 0, transform = '' } = shape.attributes || {};\n            keyframes.forEach((keyframe) => {\n                keyframe.transform = replaceTranslateInTransform(keyframe.x || x, keyframe.y || y, keyframe.z || z, transform);\n            });\n        }\n        const result = shape.animate(preprocessKeyframes(keyframes), effectTiming);\n        if (shapeID === undefined)\n            mainResult = result;\n        return result;\n    })\n        .filter(Boolean);\n    const result = mainResult || subResults?.[0];\n    if (!result)\n        return null;\n    return createAnimationsProxy(result, subResults.filter((result) => result !== result));\n};\n//# sourceMappingURL=executor.js.map","/**\n * <zh/> 内置的动画元素。\n * <en/> Built-in animations.\n */\nexport { executor } from './executor';\nexport const Fade = [{ fields: ['opacity'] }];\nexport const Translate = [{ fields: ['x', 'y'] }];\nexport const NodeCollapse = [{ fields: ['x', 'y'] }];\nexport const NodeExpand = NodeCollapse;\nexport const PathIn = [{ fields: ['sourceNode', 'targetNode'] }];\nexport const PathOut = PathIn;\nexport const ComboCollapse = [{ fields: ['childrenNode', 'x', 'y'] }];\nexport const ComboExpand = ComboCollapse;\nexport const ComboCollapseExpand = [{ fields: ['childrenNode', 'x', 'y'] }];\n//# sourceMappingURL=index.js.map","import { isEqual } from '@antv/util';\n/**\n * <zh/> 比较两个数组的差异\n *\n * <en/> compare the difference between two arrays\n * @param original - <zh/> 原始数组 | <en/> original array\n * @param modified - <zh/> 修改后的数组 | <en/> modified array\n * @param key - <zh/> 比较的 key | <en/> key to compare\n * @returns <zh/> 数组差异 | <en/> array diff\n */\nexport function arrayDiff(original, modified, key) {\n    const originalMap = new Map(original.map((d) => [key(d), d]));\n    const modifiedMap = new Map(modified.map((d) => [key(d), d]));\n    const originalSet = new Set(originalMap.keys());\n    const modifiedSet = new Set(modifiedMap.keys());\n    const enter = [];\n    const update = [];\n    const exit = [];\n    const keep = [];\n    modifiedSet.forEach((key) => {\n        if (originalSet.has(key)) {\n            if (!isEqual(originalMap.get(key), modifiedMap.get(key))) {\n                update.push(modifiedMap.get(key));\n            }\n            else {\n                keep.push(modifiedMap.get(key));\n            }\n        }\n        else {\n            enter.push(modifiedMap.get(key));\n        }\n    });\n    originalSet.forEach((key) => {\n        if (!modifiedSet.has(key)) {\n            exit.push(originalMap.get(key));\n        }\n    });\n    return { enter, exit, keep, update };\n}\n//# sourceMappingURL=diff.js.map","import { getExtension } from '..';\nimport { arrayDiff } from '../../utils/diff';\nimport { parseExtensions } from '../../utils/extension';\nimport { print } from '../../utils/print';\nexport class ExtensionController {\n    context;\n    extensions = [];\n    extensionMap = {};\n    constructor(context) {\n        this.context = context;\n    }\n    setExtensions(extensions) {\n        const stdExtensions = parseExtensions(this.context.graph, this.category, extensions);\n        const { enter, update, exit, keep } = arrayDiff(this.extensions, stdExtensions, (extension) => extension.key);\n        this.createExtensions(enter);\n        this.updateExtensions([...update, ...keep]);\n        this.destroyExtensions(exit);\n        this.extensions = stdExtensions;\n    }\n    createExtension(extension) {\n        const { category } = this;\n        const { key, type } = extension;\n        const Ctor = getExtension(category, type);\n        if (!Ctor)\n            return print.warn(`The extension ${type} of ${category} is not registered.`);\n        const instance = new Ctor(this.context, extension);\n        this.extensionMap[key] = instance;\n    }\n    createExtensions(extensions) {\n        extensions.forEach((extension) => this.createExtension(extension));\n    }\n    updateExtension(extension) {\n        const { key } = extension;\n        const instance = this.extensionMap[key];\n        if (instance) {\n            instance.update(extension);\n        }\n    }\n    updateExtensions(extensions) {\n        extensions.forEach((extension) => this.updateExtension(extension));\n    }\n    destroyExtension(key) {\n        const instance = this.extensionMap[key];\n        if (instance) {\n            instance.destroy();\n            delete this.extensionMap[key];\n        }\n    }\n    destroyExtensions(extensions) {\n        extensions.forEach(({ key }) => this.destroyExtension(key));\n    }\n    destroy() {\n        Object.values(this.extensionMap).forEach((extension) => extension.destroy());\n        // @ts-expect-error force delete\n        this.context = {};\n        this.extensions = [];\n        this.extensionMap = {};\n    }\n}\n/**\n * <zh/> 模块实例基类\n *\n * <en/> Base class for extension instance\n */\nexport class BaseExtension {\n    context;\n    options;\n    events = [];\n    destroyed = false;\n    constructor(context, options) {\n        this.context = context;\n        this.options = options;\n    }\n    update(options) {\n        this.options = Object.assign(this.options, options);\n    }\n    destroy() {\n        // @ts-expect-error force delete\n        this.context = {};\n        // @ts-expect-error force delete\n        this.options = {};\n        this.destroyed = true;\n    }\n}\n//# sourceMappingURL=index.js.map","/**\n * <zh/> 将模块配置项转换为标准模块格式\n *\n * <en/> Convert extension options to standard format\n * @param graph - <zh/> 图实例 <en/> graph instance\n * @param category - <zh/> 模块类型 <en/> extension type\n * @param extensions - <zh/> 模块配置项 <en/> extension options\n * @returns <zh/> 标准模块配置项 <en/> Standard extension options\n */\nexport function parseExtensions(graph, category, extensions) {\n    const counter = {};\n    const getKey = (type) => {\n        if (!(type in counter))\n            counter[type] = 0;\n        return `${category}-${type}-${counter[type]++}`;\n    };\n    return extensions.map((extension) => {\n        if (typeof extension === 'string') {\n            return { type: extension, key: getKey(extension) };\n        }\n        if (typeof extension === 'function') {\n            return extension.call(graph);\n        }\n        if (extension.key)\n            return extension;\n        return { ...extension, key: getKey(extension.type) };\n    });\n}\n//# sourceMappingURL=extension.js.map","import { BaseExtension } from '../registry/extension';\nexport class BaseBehavior extends BaseExtension {\n}\n//# sourceMappingURL=base-behavior.js.map","/**\n * <zh/> 判断是否为边数据\n *\n * <en/> judge whether the data is edge data\n * @param data - <zh/> 元素数据 | <en/> element data\n * @returns - <zh/> 是否为边数据 | <en/> whether the data is edge data\n */\nexport function isEdgeData(data) {\n    if ('source' in data && 'target' in data)\n        return true;\n    return false;\n}\n/**\n * <zh/> 判断是否为二维向量\n *\n * <en/> Judge whether the vector is 2d\n * @param vector - <zh/> 向量 | <en/> vector\n * @returns <zh/> 是否为二维向量 | <en/> whether the vector is 2d\n */\nexport function isVector2(vector) {\n    return vector.length === 2;\n}\n/**\n * <zh/> 判断是否为三维向量\n *\n * <en/> Judge whether the vector is 3d\n * @param vector - <zh/> 向量 | <en/> vector\n * @returns <zh/> 是否为三维向量 | <en/> whether the vector is 3d\n */\nexport function isVector3(vector) {\n    return vector.length === 3;\n}\n/**\n * <zh/> 判断是否为点\n *\n * <en/> Judge whether the point is valid\n * @param p - <zh/> 点 | <en/> point\n * @returns <zh/> 是否为点 | <en/> whether the point is valid\n */\nexport function isPoint(p) {\n    if (p instanceof Float32Array)\n        return true;\n    if (Array.isArray(p) && (p.length === 2 || p.length === 3)) {\n        return p.every((elem) => typeof elem === 'number');\n    }\n    return false;\n}\n//# sourceMappingURL=is.js.map","/**\n * <zh/> 判断值是否在区间内\n *\n * <en/> Judge whether the value is in the interval\n * @param value - <zh/> 值 | <en/> value\n * @param min - <zh/> 最小值 | <en/> minimum value\n * @param max - <zh/> 最大值 | <en/> maximum value\n * @returns <zh/> 是否在区间内 | <en/> whether in the interval\n */\nexport function isBetween(value, min, max) {\n    return value >= min && value <= max;\n}\n//# sourceMappingURL=math.js.map","/**\n * <zh> 解析 padding\n *\n * <en> parse padding\n * @param padding - <zh> padding | <en> padding\n * @returns <zh> 标准 padding | <en> standard padding\n */\nexport function parsePadding(padding = 0) {\n    if (Array.isArray(padding)) {\n        const [top = 0, right = top, bottom = top, left = right] = padding;\n        return [top, right, bottom, left];\n    }\n    return [padding, padding, padding, padding];\n}\n//# sourceMappingURL=padding.js.map","import { AABB } from '@antv/g';\nimport { clone } from '@antv/util';\nimport { isPoint } from './is';\nimport { isBetween } from './math';\nimport { parsePadding } from './padding';\n/**\n * <zh/> 获取包围盒的宽度\n *\n * <en/> Retrieves the width of a bounding box\n * @param bbox - <zh/> 包围盒 | <en/> Bounding box\n * @returns <zh/> 包围盒的宽度 | <en/> Width of box\n */\nexport function getBBoxWidth(bbox) {\n    return bbox.max[0] - bbox.min[0];\n}\n/**\n * <zh/> 获取包围盒的高度\n *\n * <en/> Retrieve the height of a bounding box\n * @param bbox - <zh/> 包围盒 | <en/> Bounding box\n * @returns <zh/> 包围盒的高度 | <en/> Height of box\n */\nexport function getBBoxHeight(bbox) {\n    return bbox.max[1] - bbox.min[1];\n}\n/**\n * <zh/> 获取包围盒的尺寸\n * @param bbox - <zh/> 包围盒 | <en/> Bounding box\n * @returns <zh/> 包围盒的尺寸 | <en/> Size of box\n */\nexport function getBBoxSize(bbox) {\n    return [getBBoxWidth(bbox), getBBoxHeight(bbox)];\n}\n/**\n * <zh/> 获取节点的包围盒，兼容节点为点的情况\n *\n * <en/> Get the bounding box of the node, compatible with the case where the node is a point\n * @param node - <zh/> 节点或者点 | <en/> node or point\n * @param padding - <zh/> 内边距 | <en/> padding\n * @returns <zh/> 包围盒 | <en/> bounding box\n */\nexport function getNodeBBox(node, padding) {\n    const bbox = isPoint(node) ? getPointBBox(node) : node.getShape('key').getBounds();\n    return padding ? getExpandedBBox(bbox, padding) : bbox;\n}\n/**\n * <zh/> 获取单点的包围盒\n *\n * <en/> Get the bounding box of a single point\n * @param point - <zh/> 点 | <en/> Point\n * @returns <zh/> 包围盒 | <en/> Bounding box\n */\nexport function getPointBBox(point) {\n    const [x, y, z = 0] = point;\n    const bbox = new AABB();\n    bbox.setMinMax([x, y, z], [x, y, z]);\n    return bbox;\n}\n/**\n * <zh/> 获取扩大后的包围盒\n *\n * <en/> Get the expanded bounding box\n * @param bbox - <zh/> 包围盒 | <en/> Bounding box\n * @param padding - <zh/> 内边距 | <en/> Padding\n * @returns <zh/> 扩大后的包围盒 | <en/> The expanded bounding box\n */\nexport function getExpandedBBox(bbox, padding) {\n    const [top, right, bottom, left] = parsePadding(padding);\n    const [minX, minY, minZ] = bbox.min;\n    const [maxX, maxY, maxZ] = bbox.max;\n    const eBbox = new AABB();\n    eBbox.setMinMax([minX - left, minY - top, minZ], [maxX + right, maxY + bottom, maxZ]);\n    return eBbox;\n}\n/**\n * <zh/> 计算整体包围盒\n *\n * <en/> Calculate the overall bounding box\n * @param bboxes - <zh/> 包围盒列表 | <en/> List of bounding boxes\n * @returns <zh/> 整体包围盒 | <en/> Overall bounding box\n */\nexport function getCombinedBBox(bboxes) {\n    if (bboxes.length === 0)\n        return new AABB();\n    if (bboxes.length === 1)\n        return bboxes[0];\n    const bbox = new AABB();\n    bbox.setMinMax(bboxes[0].min, bboxes[0].max);\n    for (let i = 1; i < bboxes.length; i++) {\n        const b2 = bboxes[i];\n        bbox.setMinMax([Math.min(bbox.min[0], b2.min[0]), Math.min(bbox.min[1], b2.min[1]), Math.min(bbox.min[2], b2.min[2])], [Math.max(bbox.max[0], b2.max[0]), Math.max(bbox.max[1], b2.max[1]), Math.max(bbox.max[2], b2.max[2])]);\n    }\n    return bbox;\n}\n/**\n * <zh/> 判断点是否在给定的包围盒内\n *\n * <en/> Whether the point is contained in the given box\n * @param point - <zh/> 点 | <en/> Point\n * @param bbox - <zh/> 包围盒 | <en/> Bounding box\n * @returns  <zh/> 如果点在包围盒内返回 true，否则返回 false | <en/> Returns true if the point is inside the bounding box, false otherwise\n */\nexport function isPointInBBox(point, bbox) {\n    return isBetween(point[0], bbox.min[0], bbox.max[0]) && isBetween(point[1], bbox.min[1], bbox.max[1]);\n}\n/**\n * <zh/> 判断点是否在给定的包围盒的边界或边界的延长线上\n *\n * <en/> Whether the point is on the boundary or extension line of the given box\n * @param point - <zh/> 点 | <en/> Point\n * @param bbox - <zh/> 包围盒 | <en/> Bounding box\n * @param extended - <zh/> 是否判断边界的延长线 | <en/> Whether to judge the extension line of the boundary\n * @returns <zh/> 如果点在包围盒的边界或边界的延长线上返回 true，否则返回 false | <en/> Returns true if the point is on the boundary or extension line of the bounding box, false otherwise\n */\nexport function isPointOnBBoxBoundary(point, bbox, extended = false) {\n    const { min: [minX, minY], max: [maxX, maxY], } = bbox;\n    const onTopOrBottomLine = (point[1] === minY || point[1] === maxY) && (extended || isBetween(point[0], minX, maxX));\n    const onLeftOrRightLine = (point[0] === minX || point[0] === maxX) && (extended || isBetween(point[1], minY, maxY));\n    return onTopOrBottomLine || onLeftOrRightLine;\n}\n/**\n * <zh/> 判断点是否在给定的包围盒外\n *\n * <en/> Whether the point is outside the given box\n * @param point - <zh/> 点 | <en/> Point\n * @param bbox - <zh/> 包围盒 | <en/> Bounding box\n * @returns <zh/> 如果点在包围盒外返回 true，否则返回 false | <en/> Returns true if the point is outside the bounding box, false otherwise\n */\nexport function isPointOutsideBBox(point, bbox) {\n    return !isPointInBBox(point, bbox);\n}\n/**\n * <zh/> 获取包围盒上离点 `p` 最近的边\n *\n * <en/> Get a side of the boundary which is nearest to the point `p`\n * @param bbox - <zh/> 包围盒 | <en/> Bounding box\n * @param p - <zh/> 点 | <en/> Point\n * @returns <zh/> 离点 `p` 最近的边 | <en/> The side nearest to the point `p`\n */\nexport function getNearestSideToPoint(bbox, p) {\n    const [x, y] = p;\n    const [minX, minY] = bbox.min;\n    const [maxX, maxY] = bbox.max;\n    const left = x - minX;\n    const right = maxX - x;\n    const top = y - minY;\n    const bottom = maxY - y;\n    const min = Math.min(left, right, top, bottom);\n    return min === left ? 'left' : min === right ? 'right' : min === top ? 'top' : min === bottom ? 'bottom' : 'left';\n}\n/**\n * <zh/> 获取包围盒上离点 `p` 最近的点\n *\n * <en/> Get a point on the boundary nearest to the point `p`\n * @param bbox - <zh/> 包围盒 | <en/> Bounding box\n * @param p - <zh/> 点 | <en/> Point\n * @returns <zh/> 离点 `p` 最近的点 | <en/> The point nearest to the point `p`\n */\nexport function getNearestPointToPoint(bbox, p) {\n    const ref = clone(p);\n    if (isPointInBBox(p, bbox)) {\n        const side = getNearestSideToPoint(bbox, p);\n        switch (side) {\n            case 'left':\n                ref[0] = bbox.min[0];\n                break;\n            case 'right':\n                ref[0] = bbox.max[0];\n                break;\n            case 'top':\n                ref[1] = bbox.min[1];\n                break;\n            case 'bottom':\n                ref[1] = bbox.max[1];\n                break;\n        }\n    }\n    else {\n        const [x, y] = p;\n        const [minX, minY] = bbox.min;\n        const [maxX, maxY] = bbox.max;\n        ref[0] = isBetween(x, minX, maxX) ? x : x < minX ? minX : maxX;\n        ref[1] = isBetween(y, minY, maxY) ? y : y < minY ? minY : maxY;\n    }\n    return ref;\n}\n/**\n * The triangle center point of the bounding box\n * @param bbox - bounding box\n * @param direction - direction\n * @returns Point\n */\nexport function getTriangleCenter(bbox, direction) {\n    // todo 算法只对矩形有效\n    const { center } = bbox;\n    const [width, height] = getBBoxSize(bbox);\n    const x = direction === 'up' || direction === 'down'\n        ? center[0]\n        : direction === 'right'\n            ? center[0] - width / 6\n            : center[0] + width / 6;\n    const y = direction === 'left' || direction === 'right'\n        ? center[1]\n        : direction === 'down'\n            ? center[1] - height / 6\n            : center[1] + height / 6;\n    return [x, y];\n}\n/**\n * Get incircle radius\n * @param bbox - bounding box\n * @param direction - direction\n * @returns number\n */\nexport function getIncircleRadius(bbox, direction) {\n    let [w, h] = getBBoxSize(bbox);\n    [w, h] = direction === 'up' || direction === 'down' ? [w, h] : [h, w];\n    // 三角形的内切圆半径\n    return (h ** 2 - (Math.sqrt((w / 2) ** 2 + h ** 2) - w / 2) ** 2) / (2 * h);\n}\n//# sourceMappingURL=bbox.js.map","import { isVector2 } from './is';\nconst VECTOR_ZERO = [0, 0, 0];\n/**\n * <zh/> 两个向量求和\n *\n * <en/> Adds two vectors\n * @param a - <zh/> 第一个向量 | <en/> The first vector\n * @param b - <zh/> 第二个向量 | <en/> The second vector\n * @returns <zh/> 两个向量的和 | <en/> The sum of the two vectors\n */\nexport function add(a, b) {\n    return a.map((v, i) => v + b[i]);\n}\n/**\n * <zh/> 两个向量求差\n *\n * <en/> Subtracts two vectors\n * @param a - <zh/> 第一个向量 | <en/> The first vector\n * @param b - <zh/> 第二个向量 | <en/> The second vector\n * @returns <zh/> 两个向量的差 | <en/> The difference of the two vectors\n */\nexport function subtract(a, b) {\n    return a.map((v, i) => v - b[i]);\n}\n/**\n * <zh/> 两个向量求积或者向量和标量求积\n *\n * <en/> Multiplies two vectors or a vector and a scalar\n * @param a - <zh/> 向量 | <en/> The vector\n * @param b - <zh/> 向量或者标量 | <en/> The vector or scalar\n * @returns <zh/> 两个向量的积或者向量和标量的积 | <en/> The product of the two vectors or the product of the vector and scalar\n */\nexport function multiply(a, b) {\n    if (typeof b === 'number')\n        return a.map((v) => v * b);\n    return a.map((v, i) => v * b[i]);\n}\n/**\n * <zh/> 两个向量求商或者向量和标量求商\n *\n * <en/> Divides two vectors or a vector and a scalar\n * @param a - <zh/> 向量 | <en/> The vector\n * @param b - <zh/> 向量或者标量 | <en/> The vector or scalar\n * @returns <zh/> 两个向量的商或者向量和标量的商 | <en/> The quotient of the two vectors or the quotient of the vector and scalar\n */\nexport function divide(a, b) {\n    if (typeof b === 'number')\n        return a.map((v) => v / b);\n    return a.map((v, i) => v / b[i]);\n}\n/**\n * <zh/> 两个向量求点积\n *\n * <en/> Calculates the dot product of two vectors\n * @param a - <zh/> 第一个向量 | <en/> The first vector\n * @param b - <zh/> 第二个向量 | <en/> The second vector\n * @returns <zh/> 两个向量的点积 | <en/> The dot product of the two vectors\n */\nexport function dot(a, b) {\n    return a.reduce((sum, v, i) => sum + v * b[i], 0);\n}\n/**\n * <zh/> 两个二维向量求叉积\n *\n * <en/> Calculates the cross product of two vectors in three-dimensional Euclidean space\n * @param a - <zh/> 第一个向量 | <en/> The first vector\n * @param b - <zh/> 第二个向量 | <en/> The second vector\n * @returns <zh/> 两个向量的叉积 | <en/> The cross product of the two vectors\n */\nexport function cross(a, b) {\n    const a2 = toVector3(a);\n    const b2 = toVector3(b);\n    return [a2[1] * b2[2] - a2[2] * b2[1], a2[2] * b2[0] - a2[0] * b2[2], a2[0] * b2[1] - a2[1] * b2[0]];\n}\n/**\n * <zh/> 向量缩放\n *\n * <en/> Scales a vector by a scalar number\n * @param a  - <zh/> 向量 | <en/> The vector to scale\n * @param s - <zh/> 缩放系数 | <en/> Scale factor\n * @returns <zh/> 缩放后的向量 | <en/> The scaled vector\n */\nexport function scale(a, s) {\n    return a.map((v) => v * s);\n}\n/**\n * <zh/> 计算两个向量间的欧几里得距离\n *\n * <en/> Calculates the Euclidean distance between two vectors\n * @param a - <zh/> 第一个向量 | <en/> The first vector\n * @param b - <zh/> 第二个向量 | <en/> The second vector\n * @returns <zh/> 两个向量间的距离 | <en/> The distance between the two vectors\n */\nexport function distance(a, b) {\n    return Math.sqrt(a.reduce((sum, v, i) => sum + (v - b[i] || 0) ** 2, 0));\n}\n/**\n * <zh/> 计算两个向量间的曼哈顿距离\n *\n * <en/> Calculates the Manhattan distance between two vectors\n * @param a - <zh/> 第一个向量 | <en/> The first vector\n * @param b - <zh/> 第二个向量 | <en/> The second vector\n * @returns <zh/> 两个向量间的距离 | <en/> The distance between the two vectors\n */\nexport function manhattanDistance(a, b) {\n    return a.reduce((sum, v, i) => sum + Math.abs(v - b[i]), 0);\n}\n/**\n * <zh/> 标准化向量（使长度为 1）\n *\n * <en/> Normalizes a vector (making its length 1)\n * @param a - <zh/> 要标准化的向量 | <en/> The vector to normalize\n * @returns <zh/> 标准化后的向量 | <en/> The normalized vector\n */\nexport function normalize(a) {\n    const length = a.reduce((sum, v) => sum + v ** 2, 0);\n    return a.map((v) => v / Math.sqrt(length));\n}\n/**\n * <zh/> 计算两个向量间的夹角，输出为锐角余弦值\n *\n * <en/> Get the angle between two vectors\n * @param a - <zh/> 第一个向量 | <en/> The first vector\n * @param b - <zh/> 第二个向量 | <en/> The second vector\n * @param clockwise - <zh/> 是否顺时针 | <en/> Whether to calculate the angle in a clockwise direction\n * @returns  <zh/> 弧度值 | <en/> The angle in radians\n */\nexport function angle(a, b, clockwise = false) {\n    const determinant = a[0] * b[1] - a[1] * b[0];\n    let angle = Math.acos(multiply(a, b).reduce((sum, v) => sum + v, 0) /\n        (distance(a, VECTOR_ZERO) * distance(b, VECTOR_ZERO)));\n    // If clockwise is true and determinant is negative, adjust the angle\n    if (clockwise && determinant < 0) {\n        angle = 2 * Math.PI - angle;\n    }\n    return angle;\n}\n/**\n * <zh/> 判断两个向量是否完全相等（使用 === 比较）\n *\n * <en/> Returns whether or not the vectors exactly have the same elements in the same position (when compared with ===)\n * @param a - <zh/> 第一个向量 | <en/> The first vector\n * @param b - <zh/> 第二个向量 | <en/> The second vector\n * @returns  - <zh/> 是否相等 | <en/> Whether or not the vectors are equal\n */\nexport function exactEquals(a, b) {\n    return a.every((v, i) => v === b[i]);\n}\n/**\n * <zh/> 计算向量的垂直向量\n *\n * <en/> Calculates the perpendicular vector to a given vector\n * @param a - <zh/> 原始向量 | <en/> The original vector\n * @param clockwise - <zh/> 是否顺时针 | <en/> Whether to calculate the perpendicular vector in a clockwise direction\n * @returns <zh/> 原始向量的垂直向量 | <en/> The perpendicular vector to the original vector\n */\nexport function perpendicular(a, clockwise = true) {\n    return clockwise ? [-a[1], a[0]] : [a[1], -a[0]];\n}\n/**\n * <zh/> 计算向量的模\n *\n * <en/> Calculates the modulus of a vector\n * @param a - <zh/> 原始向量 | <en/> The original vector\n * @param b - <zh/> 模 | <en/> The modulus\n * @returns - <zh/> 向量的模 | <en/> The modulus of the vector\n */\nexport function mod(a, b) {\n    return a.map((v) => v % b);\n}\n/**\n * <zh/> 向量强制转换为二维向量\n *\n * <en/> Force vector to be two-dimensional\n * @param a - <zh/> 原始向量 | <en/> The original vector\n * @returns <zh/> 二维向量 | <en/> Two-dimensional vector\n */\nexport function toVector2(a) {\n    return [a[0], a[1]];\n}\n/**\n * <zh/> 向量强制转换为三维向量\n *\n * <en/> Force vector to be three-dimensional\n * @param a - <zh/> 原始向量 | <en/> The original vector\n * @returns  - <zh/> 三维向量 | <en/> Three-dimensional vector\n */\nexport function toVector3(a) {\n    return isVector2(a) ? [a[0], a[1], 0] : a;\n}\n//# sourceMappingURL=vector.js.map","import { isBetween } from './math';\nimport { cross, subtract } from './vector';\n/**\n * <zh/> 判断两条线段是否平行\n *\n * <en/> Judge whether two line segments are parallel\n * @param l1 - <zh/> 第一条线段 | <en/> the first line segment\n * @param l2 - <zh/> 第二条线段 | <en/> the second line segment\n * @returns <zh/> 是否平行 | <en/> whether parallel or not\n */\nexport function isLinesParallel(l1, l2) {\n    const [p1, p2] = l1;\n    const [p3, p4] = l2;\n    const v1 = subtract(p1, p2);\n    const v2 = subtract(p3, p4);\n    return cross(v1, v2).every((v) => v === 0);\n}\n/**\n * <zh/> 获取两条线段的交点\n *\n * <en/> Get the intersection of two line segments\n * @param l1 - <zh/> 第一条线段 | <en/> the first line segment\n * @param l2 - <zh/> 第二条线段 | <en/> the second line segment\n * @param extended - <zh/> 是否包含延长线上的交点 | <en/> whether to include the intersection on the extension line\n * @returns <zh/> 交点 | <en/> intersection\n */\nexport function getLinesIntersection(l1, l2, extended = false) {\n    if (isLinesParallel(l1, l2))\n        return undefined;\n    const [p1, p2] = l1;\n    const [p3, p4] = l2;\n    const t = ((p1[0] - p3[0]) * (p3[1] - p4[1]) - (p1[1] - p3[1]) * (p3[0] - p4[0])) /\n        ((p1[0] - p2[0]) * (p3[1] - p4[1]) - (p1[1] - p2[1]) * (p3[0] - p4[0]));\n    const u = p4[0] - p3[0]\n        ? (p1[0] - p3[0] + t * (p2[0] - p1[0])) / (p4[0] - p3[0])\n        : (p1[1] - p3[1] + t * (p2[1] - p1[1])) / (p4[1] - p3[1]);\n    if (!extended && (!isBetween(t, 0, 1) || !isBetween(u, 0, 1)))\n        return undefined;\n    return [p1[0] + t * (p2[0] - p1[0]), p1[1] + t * (p2[1] - p1[1])];\n}\n//# sourceMappingURL=line.js.map","import { parseAnchor } from './anchor';\nimport { parsePlacement } from './placement';\n/**\n * <zh/> 获取节点/ combo 的位置坐标\n *\n * <en/> Get the position of node/combo\n * @param datum - <zh/> 节点/ combo 的数据 | <en/> data of node/combo\n * @returns - <zh/> 坐标 | <en/> position\n */\nexport function positionOf(datum) {\n    const { x = 0, y = 0, z = 0 } = datum.style || {};\n    return [+x, +y, +z];\n}\n/**\n * <zh/> 获取相对位置坐标\n *\n * <en/> Get position by relative placement\n * @param bbox - <zh/> 元素包围盒 | <en/> element bounding box\n * @param placement - <zh/> 相对于元素的位置 | <en/> Point relative to element\n * @returns - <zh/> 坐标 | <en/> position\n */\nexport function getXYByRelativePlacement(bbox, placement) {\n    const [x, y] = placement;\n    const { min, max } = bbox;\n    return [min[0] + x * (max[0] - min[0]), min[1] + y * (max[1] - min[1])];\n}\n/**\n * <zh/> 获取位置坐标\n *\n * <en/> Get position by placement\n * @param bbox - <zh/> 元素包围盒 | <en/> element bounding box\n * @param placement - <zh/> 相对于元素的位置 | <en/> Point relative to element\n * @returns - <zh/> 坐标 | <en/> position\n */\nexport function getXYByPlacement(bbox, placement = 'center') {\n    const relativePlacement = parsePlacement(placement);\n    return getXYByRelativePlacement(bbox, relativePlacement);\n}\n/**\n * <zh/> 获取锚点坐标\n *\n * <en/> Get anchor position\n * @param bbox - <zh/> 元素包围盒 | <en/> element bounding box\n * @param anchor - <zh/> 锚点位置 | <en/> Anchor\n * @returns - <zh/> 坐标 | <en/> position\n */\nexport function getXYByAnchor(bbox, anchor) {\n    const parsedAnchor = parseAnchor(anchor);\n    return getXYByRelativePlacement(bbox, parsedAnchor);\n}\n/**\n * <zh/> 通过 rect points 路径点获取 position 方位配置.\n *\n * <en/> The rect points command is used to obtain the position and orientation configuration.\n * @param points Points\n * @returns `{ left: number; right: number; top: number; bottom: number }`\n */\nexport const getPositionByRectPoints = (points) => {\n    const [p1, p2] = points;\n    return {\n        left: Math.min(p1[0], p2[0]),\n        right: Math.max(p1[0], p2[0]),\n        top: Math.min(p1[1], p2[1]),\n        bottom: Math.max(p1[1], p2[1]),\n    };\n};\n//# sourceMappingURL=position.js.map","import { isBetween } from './math';\n/**\n * <zh/> 解析位置\n *\n * <en/> Parse position\n * @param placement - <zh/> 位置 | <en/> placement\n * @returns <zh/> 相对位置 | <en/> relative placement\n */\nexport function parsePlacement(placement) {\n    if (Array.isArray(placement)) {\n        return isBetween(placement[0], 0, 1) && isBetween(placement[1], 0, 1) ? placement : [0.5, 0.5];\n    }\n    const direction = placement.split('-');\n    const x = direction.includes('left') ? 0 : direction.includes('right') ? 1 : 0.5;\n    const y = direction.includes('top') ? 0 : direction.includes('bottom') ? 1 : 0.5;\n    return [x, y];\n}\n//# sourceMappingURL=placement.js.map","import { getBBoxHeight, getBBoxWidth } from './bbox';\nimport { getLinesIntersection, isLinesParallel } from './line';\nimport { getXYByPlacement } from './position';\nimport { add, distance, divide, normalize, subtract, toVector2 } from './vector';\n/**\n * <zh/> 将对象坐标转换为数组坐标\n * <en/> Convert object coordinates to array coordinates\n * @param point - <zh/> 对象坐标 | <en/> object coordinates\n * @returns <zh/> 数组坐标 | <en/> array coordinates\n */\nexport function parsePoint(point) {\n    return [point.x, point.y, point.z ?? 0];\n}\n/**\n * <zh/> 将数组坐标转换为对象坐标\n *\n * <en/> Convert array coordinates to object coordinates\n * @param point - <zh/> 数组坐标 | <en/> array coordinates\n * @returns <zh/> 对象坐标 | <en/> object coordinates\n */\nexport function toPointObject(point) {\n    return { x: point[0], y: point[1], z: point[2] ?? 0 };\n}\n/**\n * <zh/> 根据 X 轴坐标排序\n * <en/> Sort by X-axis coordinates\n * @param points - <zh/> 点集 | <en/> point set\n * @returns <zh/> 排序后的点集 | <en/> sorted point set\n */\nexport function sortByX(points) {\n    return points.sort((a, b) => a[0] - b[0] || a[1] - b[1]);\n}\n/**\n * <zh/> 点集去重\n *\n * <en/> Deduplicate point set\n * @param points - <zh/> 点集 | <en/> pointset\n * @returns <zh/> 去重后的点集 | <en/> deduplicated pointset\n */\nexport function deduplicate(points) {\n    const set = new Set();\n    return points.filter((p) => {\n        const key = p.join(',');\n        if (set.has(key))\n            return false;\n        set.add(key);\n        return true;\n    });\n}\n/**\n * <zh/> 对点格式化，精确到 `digits` 位的数字\n *\n * <en/> Round the point to the given precision\n * @param point - <zh/> 要舍入的点 | <en/> the point to round\n * @param digits - <zh/> 小数点后的位数 | <en/> the number of digits after the decimal point\n * @returns <zh/> 舍入后的点 | <en/> the rounded point\n */\nexport function round(point, digits = 0) {\n    return point.map((p) => parseFloat(p.toFixed(digits)));\n}\n/**\n * <zh/> 移动点，将点朝向参考点移动一定的距离\n *\n * <en/> Move `p` point along the line starting from `ref` to this point by a certain `distance`\n * @param p - <zh/> 要移动的点 | <en/> the point to move\n * @param ref - <zh/> 参考点 | <en/> the reference point\n * @param distance - <zh/> 移动的距离 | <en/> the distance to move\n * @param reverse\n * @returns <zh/> 移动后的点 | <en/> the moved point\n */\nexport function moveTo(p, ref, distance, reverse = false) {\n    const direction = reverse ? subtract(p, ref) : subtract(ref, p);\n    const normalizedDirection = normalize(direction);\n    const moveVector = [normalizedDirection[0] * distance, normalizedDirection[1] * distance];\n    return add(toVector2(p), moveVector);\n}\n/**\n * <zh/> 判断两个点是否在同一水平线上\n *\n * <en/> whether two points are on the same horizontal line\n * @param p1 - <zh/> 第一个点 | <en/> the first point\n * @param p2 - <zh/> 第二个点 | <en/> the second point\n * @returns <zh/> 返回两个点是否在同一水平线上 | <en/> is horizontal or not\n */\nexport function isHorizontal(p1, p2) {\n    return p1[1] === p2[1];\n}\n/**\n * <zh/> 判断两个点是否在同一垂直线上\n *\n * <en/> whether two points are on the same vertical line\n * @param p1 - <zh/> 第一个点 | <en/> the first point\n * @param p2 - <zh/> 第二个点 | <en/> the second point\n * @returns <zh/> 返回两个点是否在同一垂直线上 | <en/> is vertical or not\n */\nexport function isVertical(p1, p2) {\n    return p1[0] === p2[0];\n}\n/**\n * <zh/> 判断两个点是否正交，即是否在同一水平线或垂直线上\n *\n * <en/> Judges whether two points are orthogonal, that is, whether they are on the same horizontal or vertical line\n * @param p1 - <zh/> 第一个点 | <en/> the first point\n * @param p2 - <zh/> 第二个点 | <en/> the second point\n * @returns <zh/> 是否正交 | <en/> whether orthogonal or not\n */\nexport function isOrthogonal(p1, p2) {\n    return isHorizontal(p1, p2) || isVertical(p1, p2);\n}\n/**\n * <zh/> 判断是否三点共线\n *\n * <en/> Judge whether three points are collinear\n * @param p1 - <zh/> 第一个点 | <en/> the first point\n * @param p2 - <zh/> 第二个点 | <en/> the second point\n * @param p3 - <zh/> 第三个点 | <en/> the third point\n * @returns <zh/> 是否三点共线 | <en/> whether three points are collinear\n */\nexport function isCollinear(p1, p2, p3) {\n    return isLinesParallel([p1, p2], [p2, p3]);\n}\n/**\n * <zh/> 获取从多边形中心到给定点的连线与多边形边缘的交点\n *\n * <en/> Gets the intersection point between the line from the center of a polygon to a given point and the polygon's edge\n * @param p - <zh/> 从多边形中心到多边形边缘的连线的外部点 | <en/> The point outside the polygon from which the line to the polygon's center is drawn\n * @param center - <zh/> 多边形中心 | <en/> the center of the polygon\n * @param points - <zh/> 多边形顶点 | <en/> the vertices of the polygon\n * @param isRelativePos - <zh/> 顶点坐标是否相对中心点 | <en/> whether the vertex coordinates are relative to the center point\n * @returns <zh/> 交点与相交线段 | <en/> intersection and intersecting line segment\n */\nexport function getPolygonIntersectPoint(p, center, points, isRelativePos = true) {\n    for (let i = 0; i < points.length; i++) {\n        let start = points[i];\n        let end = points[(i + 1) % points.length];\n        if (isRelativePos) {\n            start = add(center, start);\n            end = add(center, end);\n        }\n        const intersect = getLinesIntersection([center, p], [start, end]);\n        if (intersect) {\n            return {\n                point: intersect,\n                line: [start, end],\n            };\n        }\n    }\n    return {\n        point: center,\n        line: undefined,\n    };\n}\n/**\n * <zh/> 判断点是否在多边形内部\n *\n * <en/> Whether point is inside the polygon (ray algo)\n * @param point - <zh/> 点 | <en/> point\n * @param points - <zh/> 多边形顶点 | <en/> polygon vertices\n * @param start - <zh/> 起始索引 | <en/> start index\n * @param end - <zh/> 结束索引 | <en/> end index\n * @returns <zh/> 是否在多边形内部 | <en/> whether inside the polygon\n */\nexport function isPointInPolygon(point, points, start, end) {\n    const x = point[0];\n    const y = point[1];\n    let inside = false;\n    if (start === undefined)\n        start = 0;\n    if (end === undefined)\n        end = points.length;\n    const len = end - start;\n    for (let i = 0, j = len - 1; i < len; j = i++) {\n        const xi = points[i + start][0];\n        const yi = points[i + start][1];\n        const xj = points[j + start][0];\n        const yj = points[j + start][1];\n        const intersect = yi > y !== yj > y && x < ((xj - xi) * (y - yi)) / (yj - yi) + xi;\n        if (intersect)\n            inside = !inside;\n    }\n    return inside;\n}\n/**\n * <zh/> 获取从矩形中心到给定点的连线与矩形边缘的交点\n *\n * <en/> Gets the intersection point between the line from the center of a rectangle to a given point and the rectangle's edge\n * @param p - <zh/> 从矩形中心到矩形边缘的连线的外部点 | <en/> The point outside the rectangle from which the line to the rectangle's center is drawn\n * @param bbox - <zh/> 矩形包围盒 | <en/> the bounding box of the rectangle\n * @returns <zh/> 交点 | <en/> intersection\n */\nexport function getRectIntersectPoint(p, bbox) {\n    const center = getXYByPlacement(bbox, 'center');\n    const corners = [\n        getXYByPlacement(bbox, 'left-top'),\n        getXYByPlacement(bbox, 'right-top'),\n        getXYByPlacement(bbox, 'right-bottom'),\n        getXYByPlacement(bbox, 'left-bottom'),\n    ];\n    return getPolygonIntersectPoint(p, center, corners, false).point;\n}\n/**\n * <zh/> 获取从椭圆中心到给定点的连线与椭圆边缘的交点\n *\n * <en/> Gets the intersection point between the line from the center of an ellipse to a given point and the ellipse's edge\n * @param p - <zh/> 从椭圆中心到椭圆边缘的连线的外部点 | <en/> The point outside the ellipse from which the line to the ellipse's center is drawn\n * The point outside the ellipse from which the line to the ellipse's center is drawn.\n * @param bbox - <zh/> 椭圆包围盒 | <en/> the bounding box of the ellipse\n * @returns <zh/> 交点 | <en/> intersection\n */\nexport function getEllipseIntersectPoint(p, bbox) {\n    const center = bbox.center;\n    const vec = subtract(p, bbox.center);\n    const angle = Math.atan2(vec[1], vec[0]);\n    if (isNaN(angle))\n        return center;\n    const rx = getBBoxWidth(bbox) / 2;\n    const ry = getBBoxHeight(bbox) / 2;\n    const intersectX = center[0] + rx * Math.cos(angle);\n    const intersectY = center[1] + ry * Math.sin(angle);\n    return [intersectX, intersectY];\n}\n/**\n * <zh/> 从两组点中找到距离最近的两个点\n * @param group1 - <zh/> 第一组点 | <en/> the first group of points\n * @param group2 - <zh/> 第二组点 | <en/> the second group of points\n * @returns <zh/> 距离最近的两个点 | <en/> the nearest two points\n */\nexport function findNearestPoints(group1, group2) {\n    let minDistance = Infinity;\n    let nearestPoints = [group1[0], group2[0]];\n    group1.forEach((p1) => {\n        group2.forEach((p2) => {\n            const dist = distance(p1, p2);\n            if (dist < minDistance) {\n                minDistance = dist;\n                nearestPoints = [p1, p2];\n            }\n        });\n    });\n    return nearestPoints;\n}\n/**\n * <zh/> 从一组线段中找到距离给定点最近的线段\n *\n * <en/> Find the line segment closest to the given point from a group of line segments\n * @param point - <zh/> 给定点 | <en/> the given point\n * @param lines - <zh/> 一组线段 | <en/> a group of line segments\n * @returns <zh/> 距离最近的线段 | <en/> the nearest line segment\n */\nexport function findNearestLine(point, lines) {\n    let minDistance = Infinity;\n    let nearestLine = [\n        [0, 0],\n        [0, 0],\n    ];\n    lines.forEach((line) => {\n        const distance = getDistanceToLine(point, line);\n        if (distance < minDistance) {\n            minDistance = distance;\n            nearestLine = line;\n        }\n    });\n    return nearestLine;\n}\n/**\n * <zh/> 获取点到线段的距离\n *\n * <en/> Get the distance from a point to a line segment\n * @param point - <zh/> 点 | <en/> the point\n * @param line - <zh/> 线段 | <en/> the line segment\n * @returns <zh/> 点到线段的距离 | <en/> the distance from the point to the line segment\n */\nexport function getDistanceToLine(point, line) {\n    const nearestPoint = findNearestPointOnLine(point, line);\n    return distance(point, nearestPoint);\n}\n/**\n * <zh/> 获取线段上距离给定点最近的点\n *\n * <en/> Get the point on the line segment closest to the given point\n * @param point - <zh/> 给定点 | <en/> the given point\n * @param line - <zh/> 线段 | <en/> the line segment\n * @returns <zh/> 线段上距离给定点最近的点 | <en/> the point on the line segment closest to the given point\n */\nexport function findNearestPointOnLine(point, line) {\n    const [x1, y1] = line[0];\n    const [x2, y2] = line[1];\n    const [x3, y3] = point;\n    const px = x2 - x1;\n    const py = y2 - y1;\n    // 若线段实际上是一个点 | If the line segment is actually a point\n    if (px === 0 && py === 0) {\n        return [x1, y1];\n    }\n    let u = ((x3 - x1) * px + (y3 - y1) * py) / (px * px + py * py);\n    if (u > 1) {\n        u = 1;\n    }\n    else if (u < 0) {\n        u = 0;\n    }\n    const x = x1 + u * px;\n    const y = y1 + u * py;\n    return [x, y];\n}\n/**\n * <zh/> 获取点集的中心点\n *\n * <en/> Get the center point of a set of points\n * @param points - <zh/> 点集 | <en/> point set\n * @returns <zh/> 中心点 | <en/> center point\n */\nexport function centerOf(points) {\n    const totalPosition = points.reduce((acc, p) => add(acc, p), [0, 0]);\n    return divide(totalPosition, points.length);\n}\n/**\n * <zh/> 按顺时针或逆时针方向对点集排序\n *\n * <en/> Sort the point set in a clockwise or counterclockwise direction\n * @param points - <zh/> 点集 | <en/> point set\n * @param clockwise - <zh/> 是否顺时针 | <en/> whether clockwise\n * @returns <zh/> 排序后的点集 | <en/> sorted point set\n */\nexport function sortByClockwise(points, clockwise = true) {\n    const center = centerOf(points);\n    return points.sort(([x1, y1], [x2, y2]) => {\n        const angle1 = Math.atan2(y1 - center[1], x1 - center[0]);\n        const angle2 = Math.atan2(y2 - center[1], x2 - center[0]);\n        return clockwise ? angle2 - angle1 : angle1 - angle2;\n    });\n}\n/**\n * <zh/> 给定的起点和终点，返回一个由这两个点和它们的对角点组成的数组\n * @param start - <zh/> 起点 | <en/> start point\n * @param end - <zh/> 终点 | <en/> end point\n * @returns <zh/> 由这两个点和它们的对角点组成的数组 | <en/> an array consisting of these two points and their diagonal points\n */\nexport function getBoundingPoints(start, end) {\n    return [start, [start[0], end[1]], end, [end[0], start[1]]];\n}\n//# sourceMappingURL=point.js.map","import { isEqual, isString } from '@antv/util';\nimport { CommonEvent } from '../constants';\nconst lowerCaseKeys = (keys) => keys.map((key) => (isString(key) ? key.toLocaleLowerCase() : key));\nexport class Shortcut {\n    map = new Map();\n    emitter;\n    recordKey = new Set();\n    constructor(emitter) {\n        this.emitter = emitter;\n        this.bindEvents();\n    }\n    bind(key, handler) {\n        if (key.length === 0)\n            return;\n        this.map.set(key, handler);\n    }\n    unbind(key, handler) {\n        this.map.forEach((h, k) => {\n            if (isEqual(k, key)) {\n                if (!handler || handler === h)\n                    this.map.delete(k);\n            }\n        });\n    }\n    unbindAll() {\n        this.map.clear();\n    }\n    match(key) {\n        // 排序\n        const recordKeyList = lowerCaseKeys(Array.from(this.recordKey)).sort();\n        const keyList = lowerCaseKeys(key).sort();\n        return isEqual(recordKeyList, keyList);\n    }\n    bindEvents() {\n        const { emitter } = this;\n        emitter.on(CommonEvent.KEY_DOWN, this.onKeyDown);\n        emitter.on(CommonEvent.KEY_UP, this.onKeyUp);\n        emitter.on(CommonEvent.WHEEL, this.onWheel);\n        emitter.on(CommonEvent.DRAG, this.onDrag);\n        // 窗口重新获得焦点后清空按键，避免按键状态异常\n        // Clear the keys when the window regains focus to avoid abnormal key states\n        window.addEventListener('focus', this.onFocus);\n    }\n    onKeyDown = (event) => {\n        if (!event?.key)\n            return;\n        this.recordKey.add(event.key);\n        this.trigger(event);\n    };\n    onKeyUp = (event) => {\n        if (!event?.key)\n            return;\n        this.recordKey.delete(event.key);\n    };\n    trigger(event) {\n        this.map.forEach((handler, key) => {\n            if (this.match(key))\n                handler(event);\n        });\n    }\n    /**\n     * <zh/> 扩展 wheel, drag 操作\n     *\n     * <en/> Extend wheel, drag operations\n     * @param eventType - event name\n     * @param event - event\n     */\n    triggerExtendKey(eventType, event) {\n        this.map.forEach((handler, key) => {\n            if (key.includes(eventType)) {\n                if (isEqual(Array.from(this.recordKey), key.filter((k) => k !== eventType))) {\n                    handler(event);\n                }\n            }\n        });\n    }\n    onWheel = (event) => {\n        this.triggerExtendKey(CommonEvent.WHEEL, event);\n    };\n    onDrag = (event) => {\n        this.triggerExtendKey(CommonEvent.DRAG, event);\n    };\n    onFocus = () => {\n        this.recordKey.clear();\n    };\n    destroy() {\n        this.unbindAll();\n        this.emitter.off(CommonEvent.KEY_DOWN, this.onKeyDown);\n        this.emitter.off(CommonEvent.KEY_UP, this.onKeyUp);\n        this.emitter.off(CommonEvent.WHEEL, this.onWheel);\n        this.emitter.off(CommonEvent.DRAG, this.onDrag);\n        window.removeEventListener('blur', this.onFocus);\n    }\n}\n//# sourceMappingURL=shortcut.js.map","import { Rect } from '@antv/g';\nimport { deepMix, isFunction } from '@antv/util';\nimport { CanvasEvent, CommonEvent } from '../constants';\nimport { idOf } from '../utils/id';\nimport { getBoundingPoints, isPointInPolygon } from '../utils/point';\nimport { Shortcut } from '../utils/shortcut';\nimport { BaseBehavior } from './base-behavior';\n/**\n * <zh/> 框选一组元素\n *\n * <en/> Brush select elements\n */\nexport class BrushSelect extends BaseBehavior {\n    static defaultOptions = {\n        animation: false,\n        enable: true,\n        enableElements: ['node', 'combo', 'edge'],\n        immediately: false,\n        mode: 'default',\n        state: 'selected',\n        trigger: ['shift'],\n        style: {\n            width: 0,\n            height: 0,\n            lineWidth: 1,\n            fill: '#1677FF',\n            stroke: '#1677FF',\n            fillOpacity: 0.1,\n            zIndex: 2,\n            pointerEvents: 'none',\n        },\n    };\n    startPoint;\n    endPoint;\n    rectShape;\n    shortcut;\n    constructor(context, options) {\n        super(context, deepMix({}, BrushSelect.defaultOptions, options));\n        this.shortcut = new Shortcut(context.graph);\n        this.onPointerDown = this.onPointerDown.bind(this);\n        this.onPointerMove = this.onPointerMove.bind(this);\n        this.onPointerUp = this.onPointerUp.bind(this);\n        this.clearStates = this.clearStates.bind(this);\n        this.bindEvents();\n    }\n    /**\n     * Triggered when the pointer is pressed\n     * @param event - Pointer event\n     * @internal\n     */\n    onPointerDown(event) {\n        if (!this.validate(event) || !this.isKeydown() || this.startPoint)\n            return;\n        const { canvas } = this.context;\n        this.rectShape = new Rect({ id: 'g6-brush-select', style: this.options.style });\n        canvas.appendChild(this.rectShape);\n        this.startPoint = [event.canvas.x, event.canvas.y];\n    }\n    /**\n     * Triggered when the pointer is moved\n     * @param event - Pointer event\n     * @internal\n     */\n    onPointerMove(event) {\n        if (!this.startPoint)\n            return;\n        const { immediately, mode } = this.options;\n        this.endPoint = getCursorPoint(event);\n        this.rectShape?.attr({\n            x: Math.min(this.endPoint[0], this.startPoint[0]),\n            y: Math.min(this.endPoint[1], this.startPoint[1]),\n            width: Math.abs(this.endPoint[0] - this.startPoint[0]),\n            height: Math.abs(this.endPoint[1] - this.startPoint[1]),\n        });\n        if (immediately && mode === 'default')\n            this.updateElementsStates(getBoundingPoints(this.startPoint, this.endPoint));\n    }\n    /**\n     * Triggered when the pointer is released\n     * @param event - Pointer event\n     * @internal\n     */\n    onPointerUp(event) {\n        if (!this.startPoint)\n            return;\n        if (!this.endPoint) {\n            this.clearBrush();\n            return;\n        }\n        this.endPoint = getCursorPoint(event);\n        this.updateElementsStates(getBoundingPoints(this.startPoint, this.endPoint));\n        this.clearBrush();\n    }\n    /**\n     * <zh/> 清除状态\n     *\n     * <en/> Clear state\n     * @internal\n     */\n    clearStates() {\n        if (this.endPoint)\n            return;\n        this.clearElementsStates();\n    }\n    /**\n     * <zh/> 清除画布上所有元素的状态\n     *\n     * <en/> Clear the state of all elements on the canvas\n     * @internal\n     */\n    clearElementsStates() {\n        const { graph } = this.context;\n        const states = Object.values(graph.getData()).reduce((acc, data) => {\n            return Object.assign({}, acc, data.reduce((acc, datum) => {\n                acc[idOf(datum)] = [];\n                return acc;\n            }, {}));\n        }, {});\n        graph.setElementState(states, this.options.animation);\n    }\n    /**\n     * <zh/> 更新选中的元素状态\n     *\n     * <en/> Update the state of the selected elements\n     * @param points - <zh/> 框选区域的顶点 | <en/> The vertex of the selection area\n     * @internal\n     */\n    updateElementsStates(points) {\n        const { graph } = this.context;\n        const { enableElements, state, mode, onSelect } = this.options;\n        const selectedIds = this.selector(graph, points, enableElements);\n        let states = {};\n        switch (mode) {\n            case 'union':\n                selectedIds.forEach((id) => {\n                    states[id] = [...graph.getElementState(id), state];\n                });\n                break;\n            case 'diff':\n                selectedIds.forEach((id) => {\n                    const prevStates = graph.getElementState(id);\n                    states[id] = prevStates.includes(state) ? prevStates.filter((s) => s !== state) : [...prevStates, state];\n                });\n                break;\n            case 'intersect':\n                selectedIds.forEach((id) => {\n                    const prevStates = graph.getElementState(id);\n                    states[id] = prevStates.includes(state) ? [state] : [];\n                });\n                break;\n            case 'default':\n            default:\n                selectedIds.forEach((id) => {\n                    states[id] = [state];\n                });\n                break;\n        }\n        if (isFunction(onSelect))\n            states = onSelect(states);\n        graph.setElementState(states, this.options.animation);\n    }\n    /**\n     * <zh/> 查找画布上在指定区域内显示的元素。当节点的包围盒中心在矩形内时，节点被选中；当边的两端节点在矩形内时，边被选中；当 combo 的包围盒中心在矩形内时，combo 被选中。\n     *\n     * <en/> Find the elements displayed in the specified area on the canvas. A node is selected if the center of its bbox is inside the rect; An edge is selected if both end nodes are inside the rect ;A combo is selected if the center of its bbox is inside the rect.\n     * @param graph - <zh/> 图实例 | <en/> Graph instance\n     * @param points - <zh/> 框选区域的顶点 | <en/> The vertex of the selection area\n     * @param itemTypes - <zh/> 元素类型 | <en/> Element type\n     * @returns <zh/> 选中的元素 ID 数组 | <en/> Selected element ID array\n     * @internal\n     */\n    selector(graph, points, itemTypes) {\n        if (!itemTypes || itemTypes.length === 0)\n            return [];\n        const elements = [];\n        const graphData = graph.getData();\n        itemTypes.forEach((itemType) => {\n            graphData[`${itemType}s`].forEach((datum) => {\n                const id = idOf(datum);\n                if (graph.getElementVisibility(id) !== 'hidden' && isPointInPolygon(graph.getElementPosition(id), points)) {\n                    elements.push(id);\n                }\n            });\n        });\n        // 如果边的两端节点都在框选范围内，则边也被选中 | If source node and target node are within the selection range, that edge is also selected\n        if (itemTypes.includes('edge')) {\n            const edges = graphData.edges;\n            edges?.forEach((edge) => {\n                const { source, target } = edge;\n                if (elements.includes(source) && elements.includes(target)) {\n                    elements.push(idOf(edge));\n                }\n            });\n        }\n        return elements;\n    }\n    clearBrush() {\n        this.rectShape?.remove();\n        this.rectShape = undefined;\n        this.startPoint = undefined;\n        this.endPoint = undefined;\n    }\n    /**\n     * <zh/> 当前按键是否和 trigger 配置一致\n     *\n     * <en/> Is the current key consistent with the trigger configuration\n     * @returns <zh/> 是否一致 | <en/> Is consistent\n     * @internal\n     */\n    isKeydown() {\n        const { trigger } = this.options;\n        const keys = (Array.isArray(trigger) ? trigger : [trigger]);\n        if (!trigger || keys.includes('drag'))\n            return true;\n        return this.shortcut.match(keys);\n    }\n    /**\n     * <zh/> 验证是否启用框选\n     *\n     * <en/> Verify whether brush select is enabled\n     * @param event - <zh/> 事件 | <en/> Event\n     * @returns <zh/> 是否启用 | <en/> Whether to enable\n     * @internal\n     */\n    validate(event) {\n        if (this.destroyed)\n            return false;\n        const { enable } = this.options;\n        if (isFunction(enable))\n            return enable(event);\n        return !!enable;\n    }\n    bindEvents() {\n        const { graph } = this.context;\n        this.unbindEvents();\n        graph.on(CommonEvent.POINTER_DOWN, this.onPointerDown);\n        graph.on(CommonEvent.POINTER_MOVE, this.onPointerMove);\n        graph.on(CommonEvent.POINTER_UP, this.onPointerUp);\n        graph.on(CanvasEvent.CLICK, this.clearStates);\n    }\n    unbindEvents() {\n        const { graph } = this.context;\n        graph.off(CommonEvent.POINTER_DOWN, this.onPointerDown);\n        graph.off(CommonEvent.POINTER_MOVE, this.onPointerMove);\n        graph.off(CommonEvent.POINTER_UP, this.onPointerUp);\n        graph.off(CanvasEvent.CLICK, this.clearStates);\n    }\n    /**\n     * <zh/> 更新配置项\n     *\n     * <en/> Update configuration\n     * @param options - <zh/> 配置项 | <en/> Options\n     * @internal\n     */\n    update(options) {\n        this.options = deepMix(this.options, options);\n    }\n    /**\n     * <zh/> 销毁\n     *\n     * <en/> Destroy\n     * @internal\n     */\n    destroy() {\n        this.unbindEvents();\n        super.destroy();\n    }\n}\nexport const getCursorPoint = (event) => {\n    return [event.canvas.x, event.canvas.y];\n};\n//# sourceMappingURL=brush-select.js.map","/**\n * <zh/> 根据不同的 node，自动计算 icon 的大小之后，乘以一下缩放系数，防止贴的太紧密\n *\n * <en/> According to the different nodes, the size of the icon is automatically calculated, and then multiplied by the following scaling factor to prevent it from being too close\n */\nexport const ICON_SIZE_RATIO = 0.8;\nexport const ELEMENT_TYPES = ['node', 'edge', 'combo'];\n//# sourceMappingURL=element.js.map","/**\n * <zh/> 执行深度优先遍历\n *\n * <en/> perform depth first traversal\n * @param node - <zh/> 起始节点 | <en/> start node\n * @param visitor - <zh/> 访问节点函数 | <en/> visitor function\n * @param navigator - <zh/> 获取子节点函数 | <en/> get children function\n * @param mode - <zh/> 访问模式，BT: 自底向上访问，TB: 自顶向下访问 | <en/> traverse mode, BT: bottom to top, TB: top to bottom\n * @param depth - <zh/> 当前深度 | <en/> current depth\n */\nexport function dfs(node, visitor, navigator, mode, depth = 0) {\n    if (mode === 'TB')\n        visitor(node, depth);\n    const children = navigator(node);\n    if (children) {\n        for (const child of children) {\n            dfs(child, visitor, navigator, mode, depth + 1);\n        }\n    }\n    if (mode === 'BT')\n        visitor(node, depth);\n}\n/**\n * <zh/> 执行广度优先遍历\n *\n * <en/> perform breadth first traversal\n * @param node - <zh/> 起始节点 | <en/> start node\n * @param visitor - <zh/> 访问节点函数 | <en/> visitor function\n * @param navigator - <zh/> 获取子节点函数 | <en/> get children function\n */\nexport function bfs(node, visitor, navigator) {\n    const queue = [[node, 0]];\n    while (queue.length) {\n        const [current, depth] = queue.shift();\n        visitor(current, depth);\n        const children = navigator(current);\n        if (children) {\n            for (const child of children) {\n                queue.push([child, depth + 1]);\n            }\n        }\n    }\n}\n//# sourceMappingURL=traverse.js.map","import { idOf } from './id';\nimport { bfs } from './traverse';\n/**\n * <zh/> 获取指定元素在 n 度关系内的所有元素的 ID\n *\n * <en/> Get the IDs of all elements within an n-degree relationship from the specified element\n * @remarks\n * <zh/> 对于节点，0 度关系是节点本身，1 度关系包括节点的直接相邻节点和边，以此类推。\n * 对于边，0 度关系是边本身，1 度关系包括边本身及其两个端点，以此类推。\n *\n * <en/> For a node, 0-degree relationship includes the node itself; 1-degree relationship includes the node's direct neighbors and their connecting edges, etc.\n * For an edge, 0-degree relationship includes the edge itself; 1-degree relationship includes the edge and its two endpoints, etc\n * @param graph - <zh/> 图实例 | <en/> graph instance\n * @param elementType - <zh/> 元素类型 | <en/> element type\n * @param elementId - <zh/> 起始元素的 ID | <en/> start element ID\n * @param degree - <zh/> 指定的度数 | <en/> the specified degree\n * @returns - <zh/> 返回节点和边的 ID 数组 | <en/> Returns an array of node and edge IDs\n */\nexport function getElementNthDegreeIds(graph, elementType, elementId, degree) {\n    if (elementType === 'combo' || elementType === 'node') {\n        return getNodeNthDegreeIds(graph, elementId, degree);\n    }\n    const edgeData = graph.getEdgeData(elementId);\n    if (!edgeData)\n        return [];\n    const sourceRelations = getNodeNthDegreeIds(graph, edgeData.source, degree - 1);\n    const targetRelations = getNodeNthDegreeIds(graph, edgeData.target, degree - 1);\n    return Array.from(new Set([...sourceRelations, ...targetRelations, elementId]));\n}\n/**\n * <zh/> 获取指定节点在 n 度关系内的所有元素的 ID\n *\n * <en/> Get all elements IDs within n-degree relationship of the specified node\n * @remarks\n * <zh/> 节点的 0 度关系是节点本身，1 度关系是节点的直接相邻节点和边，以此类推\n *\n * <en/> 0-degree relationship of a node is the node itself; 1-degree relationship is the node's neighboring nodes and related edges, etc\n * @param graph - <zh/> 图实例 | <en/> graph instance\n * @param startNodeId - <zh/> 起始节点的 ID | <en/> The ID of the starting node\n * @param degree - <zh/> 指定的度数 | <en/> The specified degree\n * @returns - <zh/> 返回节点和边的 ID 数组 | <en/> Returns an array of node and edge IDs\n */\nexport function getNodeNthDegreeIds(graph, startNodeId, degree) {\n    const visitedNodes = new Set();\n    const visitedEdges = new Set();\n    const relations = new Set();\n    bfs(startNodeId, (nodeId, depth) => {\n        if (depth > degree)\n            return;\n        relations.add(nodeId);\n        graph.getRelatedEdgesData(nodeId).forEach((edge) => {\n            const edgeId = idOf(edge);\n            if (!visitedEdges.has(edgeId) && depth < degree) {\n                relations.add(edgeId);\n                visitedEdges.add(edgeId);\n            }\n        });\n    }, (nodeId) => {\n        return graph\n            .getRelatedEdgesData(nodeId)\n            .map((edge) => (edge.source === nodeId ? edge.target : edge.source))\n            .filter((neighborNodeId) => {\n            if (!visitedNodes.has(neighborNodeId)) {\n                visitedNodes.add(neighborNodeId);\n                return true;\n            }\n            return false;\n        });\n    });\n    return Array.from(relations);\n}\n//# sourceMappingURL=relation.js.map","/**\n * <zh/> 获取元素的状态\n *\n * <en/> Get the state of the element\n * @param datum - <zh/> 元素数据 <en/> Element data\n * @returns <zh/> 状态列表 <en/> State list\n */\nexport function statesOf(datum) {\n    return datum.states || [];\n}\n//# sourceMappingURL=state.js.map","import { isFunction } from '@antv/util';\nimport { CanvasEvent, CommonEvent } from '../constants';\nimport { ELEMENT_TYPES } from '../constants/element';\nimport { idOf } from '../utils/id';\nimport { getElementNthDegreeIds } from '../utils/relation';\nimport { Shortcut } from '../utils/shortcut';\nimport { statesOf } from '../utils/state';\nimport { BaseBehavior } from './base-behavior';\n/**\n * <zh/> 点击元素\n *\n * <en/> Click Element\n * @remarks\n * <zh/> 当鼠标点击元素时，可以激活元素的状态，例如选中节点或边。当 degree 设置为 `1` 时，点击节点会高亮当前节点及其直接相邻的节点和边。\n *\n * <en/> When the mouse clicks on an element, you can activate the state of the element, such as selecting nodes or edges. When the degree is 1, clicking on a node will highlight the current node and its directly adjacent nodes and edges.\n */\nexport class ClickSelect extends BaseBehavior {\n    shortcut;\n    static defaultOptions = {\n        animation: true,\n        enable: true,\n        multiple: false,\n        trigger: ['shift'],\n        state: 'selected',\n        neighborState: 'selected',\n        unselectedState: undefined,\n        degree: 0,\n    };\n    constructor(context, options) {\n        super(context, Object.assign({}, ClickSelect.defaultOptions, options));\n        this.shortcut = new Shortcut(context.graph);\n        this.bindEvents();\n    }\n    bindEvents() {\n        const { graph } = this.context;\n        this.unbindEvents();\n        ELEMENT_TYPES.forEach((type) => {\n            graph.on(`${type}:${CommonEvent.CLICK}`, this.onClickSelect);\n        });\n        graph.on(CanvasEvent.CLICK, this.onClickCanvas);\n    }\n    onClickSelect = async (event) => {\n        if (!this.validate(event))\n            return;\n        await this.updateState(event);\n        this.options.onClick?.(event);\n    };\n    onClickCanvas = async (event) => {\n        if (!this.validate(event))\n            return;\n        await this.clearState();\n        this.options.onClick?.(event);\n    };\n    get isMultipleSelect() {\n        const { multiple, trigger } = this.options;\n        return multiple && this.shortcut.match(trigger);\n    }\n    getNeighborIds(event) {\n        const { target, targetType } = event;\n        const { graph } = this.context;\n        const { degree } = this.options;\n        return getElementNthDegreeIds(graph, targetType, target.id, typeof degree === 'function' ? degree(event) : degree).filter((id) => id !== target.id);\n    }\n    async updateState(event) {\n        const { state: selectState, unselectedState, neighborState, animation } = this.options;\n        if (!selectState && !neighborState && !unselectedState)\n            return;\n        const { target } = event;\n        const { graph } = this.context;\n        const datum = graph.getElementData(target.id);\n        const type = statesOf(datum).includes(selectState) ? 'unselect' : 'select';\n        const states = {};\n        const isMultipleSelect = this.isMultipleSelect;\n        const click = [target.id];\n        const neighbor = this.getNeighborIds(event);\n        if (!isMultipleSelect) {\n            if (type === 'select') {\n                Object.assign(states, this.getClearStates(!!unselectedState));\n                const addState = (list, state) => {\n                    list.forEach((id) => {\n                        if (!states[id])\n                            states[id] = [];\n                        states[id].push(state);\n                    });\n                };\n                addState(click, selectState);\n                addState(neighbor, neighborState);\n                if (unselectedState) {\n                    Object.keys(states).forEach((id) => {\n                        if (!click.includes(id) && !neighbor.includes(id))\n                            states[id].push(unselectedState);\n                    });\n                }\n            }\n            else\n                Object.assign(states, this.getClearStates());\n        }\n        else {\n            Object.assign(states, this.getDataStates());\n            if (type === 'select') {\n                const addState = (list, state) => {\n                    list.forEach((id) => {\n                        const datum = graph.getElementData(id);\n                        const dataStatesSet = new Set(statesOf(datum));\n                        dataStatesSet.add(state);\n                        dataStatesSet.delete(unselectedState);\n                        states[id] = Array.from(dataStatesSet);\n                    });\n                };\n                addState(click, selectState);\n                addState(neighbor, neighborState);\n                if (unselectedState) {\n                    Object.keys(states).forEach((id) => {\n                        const _states = states[id];\n                        if (!_states.includes(selectState) &&\n                            !_states.includes(neighborState) &&\n                            !_states.includes(unselectedState)) {\n                            states[id].push(unselectedState);\n                        }\n                    });\n                }\n            }\n            else {\n                const targetState = states[target.id];\n                states[target.id] = targetState.filter((s) => s !== selectState && s !== neighborState);\n                if (!targetState.includes(unselectedState))\n                    states[target.id].push(unselectedState);\n                neighbor.forEach((id) => {\n                    states[id] = states[id].filter((s) => s !== neighborState);\n                    if (!states[id].includes(selectState))\n                        states[id].push(unselectedState);\n                });\n            }\n        }\n        await graph.setElementState(states, animation);\n    }\n    getDataStates() {\n        const { graph } = this.context;\n        const { nodes, edges, combos } = graph.getData();\n        const states = {};\n        [...nodes, ...edges, ...combos].forEach((data) => {\n            states[idOf(data)] = statesOf(data);\n        });\n        return states;\n    }\n    /**\n     * <zh/> 获取需要清除的状态\n     *\n     * <en/> Get the states that need to be cleared\n     * @param complete - <zh/> 是否返回所有状态 | <en/> Whether to return all states\n     * @returns - <zh/> 需要清除的状态 | <en/> States that need to be cleared\n     */\n    getClearStates(complete = false) {\n        const { graph } = this.context;\n        const { state, unselectedState, neighborState } = this.options;\n        const statesToClear = new Set([state, unselectedState, neighborState]);\n        const { nodes, edges, combos } = graph.getData();\n        const states = {};\n        [...nodes, ...edges, ...combos].forEach((data) => {\n            const datumStates = statesOf(data);\n            const newStates = datumStates.filter((s) => !statesToClear.has(s));\n            if (complete)\n                states[idOf(data)] = newStates;\n            else if (newStates.length !== datumStates.length)\n                states[idOf(data)] = newStates;\n        });\n        return states;\n    }\n    async clearState() {\n        const { graph } = this.context;\n        await graph.setElementState(this.getClearStates(), this.options.animation);\n    }\n    validate(event) {\n        if (this.destroyed)\n            return false;\n        const { enable } = this.options;\n        if (isFunction(enable))\n            return enable(event);\n        return !!enable;\n    }\n    unbindEvents() {\n        const { graph } = this.context;\n        ELEMENT_TYPES.forEach((type) => {\n            graph.off(`${type}:${CommonEvent.CLICK}`, this.onClickSelect);\n        });\n        graph.off(CanvasEvent.CLICK, this.onClickCanvas);\n    }\n    destroy() {\n        this.unbindEvents();\n        super.destroy();\n    }\n}\n//# sourceMappingURL=click-select.js.map","/**\n * <zh/> 判断节点/组合是否收起\n *\n * <en/> Determine whether the node/combo is collapsed\n * @param nodeLike - <zh/>节点/组合数据 | <en/>Node/Combo data\n * @returns <zh/>是否收起 | <en/>Whether it is collapsed\n */\nexport function isCollapsed(nodeLike) {\n    return !!nodeLike.style?.collapsed;\n}\n//# sourceMappingURL=collapsibility.js.map","import isString from './is-string';\n/**\n * https://github.com/developit/dlv/blob/master/index.js\n * @param obj\n * @param key\n * @param defaultValue\n */\nexport default (function (obj, key, defaultValue) {\n    var p = 0;\n    var keyArr = isString(key) ? key.split('.') : key;\n    while (obj && p < keyArr.length) {\n        obj = obj[keyArr[p++]];\n    }\n    return obj === undefined || p < keyArr.length ? defaultValue : obj;\n});\n//# sourceMappingURL=get.js.map","import isObject from './is-object';\nimport isString from './is-string';\nimport isNumber from './is-number';\n/**\n * https://github.com/developit/dlv/blob/master/index.js\n * @param obj\n * @param path\n * @param value\n */\nexport default (function (obj, path, value) {\n    var o = obj;\n    var keyArr = isString(path) ? path.split('.') : path;\n    keyArr.forEach(function (key, idx) {\n        // 不是最后一个\n        if (idx < keyArr.length - 1) {\n            if (!isObject(o[key])) {\n                o[key] = isNumber(keyArr[idx + 1]) ? [] : {};\n            }\n            o = o[key];\n        }\n        else {\n            o[key] = value;\n        }\n    });\n    return obj;\n});\n//# sourceMappingURL=set.js.map","import toString from './to-string';\nvar lowerFirst = function (value) {\n    var str = toString(value);\n    return str.charAt(0).toLowerCase() + str.substring(1);\n};\nexport default lowerFirst;\n//# sourceMappingURL=lower-first.js.map","import { lowerFirst, upperFirst } from '@antv/util';\n/**\n * <zh/> 是否以某个前缀开头\n *\n * <en/> Whether starts with prefix\n * @param str - <zh/> 字符串 | <en/> string\n * @param prefix - <zh/> 前缀 | <en/> prefix\n * @returns <zh/> 是否以某个前缀开头 | <en/> whether starts with prefix\n */\nexport function startsWith(str, prefix) {\n    if (!str.startsWith(prefix))\n        return false;\n    const nextChart = str[prefix.length];\n    return nextChart >= 'A' && nextChart <= 'Z';\n}\n/**\n * <zh/> 添加前缀\n *\n * <en/> Add prefix\n * @param str - <zh/> 字符串 | <en/> string\n * @param prefix - <zh/> 前缀 | <en/> prefix\n * @returns <zh/> 添加前缀后的字符串 | <en/> string with prefix\n */\nexport function addPrefix(str, prefix) {\n    return `${prefix}${upperFirst(str)}`;\n}\n/**\n * <zh/> 移除前缀\n *\n * <en/> Remove prefix\n * @param string - <zh/> 字符串 | <en/> string\n * @param prefix - <zh/> 前缀 | <en/> prefix\n * @param lowercaseFirstLetter - <zh/> 是否小写首字母 | <en/> whether lowercase first letter\n * @returns <zh/> 移除前缀后的字符串 | <en/> string without prefix\n */\nexport function removePrefix(string, prefix, lowercaseFirstLetter = true) {\n    if (!prefix)\n        return string;\n    if (!startsWith(string, prefix))\n        return string;\n    const str = string.slice(prefix.length);\n    return lowercaseFirstLetter ? lowerFirst(str) : str;\n}\n/**\n * <zh/> 从样式中提取子样式\n *\n * <en/> Extract sub style from style\n * @param style - <zh/> 样式 | <en/> style\n * @param prefix - <zh/> 子样式前缀 | <en/> sub style prefix\n * @returns <zh/> 子样式 | <en/> sub style\n */\nexport function subStyleProps(style, prefix) {\n    const subStyle = Object.entries(style).reduce((acc, [key, value]) => {\n        if (key === 'className' || key === 'class')\n            return acc;\n        if (startsWith(key, prefix)) {\n            Object.assign(acc, { [removePrefix(key, prefix)]: value });\n        }\n        return acc;\n    }, {});\n    // 向下传递透明度，但避免覆盖子样式中的透明度属性\n    // Pass down opacity, but avoid overwriting the opacity property in the sub-style\n    if ('opacity' in style) {\n        const subOpacityKey = addPrefix('opacity', prefix);\n        const opacity = style.opacity;\n        if (subOpacityKey in style) {\n            const subOpacity = style[subOpacityKey];\n            Object.assign(subStyle, { opacity: opacity * subOpacity });\n        }\n        else\n            Object.assign(subStyle, { opacity });\n    }\n    return subStyle;\n}\n/**\n * <zh/> 从对象中提取指定前缀的属性，并移除前缀\n *\n * <en/> Extract properties with the specified prefix from the object and remove the prefix\n * @param obj - <zh/> 对象 | <en/> object\n * @param prefix - <zh/> 前缀 | <en/> prefix\n * @returns <zh/> 新对象 | <en/> new object\n */\nexport function subObject(obj, prefix) {\n    const prefixLength = prefix.length;\n    return Object.keys(obj).reduce((acc, key) => {\n        if (key.startsWith(prefix)) {\n            const newKey = key.slice(prefixLength);\n            acc[newKey] = obj[key];\n        }\n        return acc;\n    }, {});\n}\n/**\n * <zh/> 从样式中排除子样式\n *\n * <en/> Omit sub style from style\n * @param style - <zh/> 样式 | <en/> style\n * @param prefix - <zh/> 子样式前缀 | <en/> sub style prefix\n * @returns <zh/> 排除子样式后的样式 | <en/> style without sub style\n */\nexport function omitStyleProps(style, prefix) {\n    const prefixArray = typeof prefix === 'string' ? [prefix] : prefix;\n    const omitStyle = {};\n    Object.keys(style).forEach((key) => {\n        if (!prefixArray.find((p) => key.startsWith(p))) {\n            omitStyle[key] = style[key];\n        }\n    });\n    return omitStyle;\n}\n/**\n * <zh> 替换前缀\n *\n * <en/> Replace prefix\n * @param style - <zh/> 样式 | <en/> style\n * @param oldPrefix - <zh/> 旧前缀 | <en/> old prefix\n * @param newPrefix - <zh/> 新前缀 | <en/> new prefix\n * @returns <zh/> 替换前缀后的样式 | <en/> style with replaced prefix\n */\nexport function replacePrefix(style, oldPrefix, newPrefix) {\n    return Object.entries(style).reduce((acc, [key, value]) => {\n        if (startsWith(key, oldPrefix)) {\n            acc[addPrefix(removePrefix(key, oldPrefix, false), newPrefix)] = value;\n        }\n        else {\n            acc[key] = value;\n        }\n        return acc;\n    }, {});\n}\n//# sourceMappingURL=prefix.js.map","/**\n * <zh/> 解析尺寸配置 | <en/> Parse size configuration\n * @param size - <zh/> 尺寸配置 | <en/> size configuration\n * @returns <zh/> 标准尺寸格式 | <en/> standard size format\n */\nexport function parseSize(size = 0) {\n    if (typeof size === 'number')\n        return [size, size, size];\n    const [x, y = x, z = x] = size;\n    return [x, y, z];\n}\n//# sourceMappingURL=size.js.map","/**\n * <zh/> 计算支持回调的动态样式\n *\n * <en/> compute dynamic style that supports callback\n * @param callableStyle - <zh/> 动态样式 | <en/> dynamic style\n * @param context - <zh/> 样式计算迭代上下文 | <en/> style iteration context\n * @returns <zh/> 静态样式 | <en/> static style\n */\nexport function computeElementCallbackStyle(callableStyle, context) {\n    const { datum, graph } = context;\n    if (typeof callableStyle === 'function')\n        return callableStyle.call(graph, datum);\n    return Object.fromEntries(Object.entries(callableStyle).map(([key, style]) => {\n        if (typeof style === 'function')\n            return [key, style.call(graph, datum)];\n        return [key, style];\n    }));\n}\n/**\n * <zh/> 合并图形配置项\n *\n * <en/> Merge graphic configuration\n * @param opt1 - <zh/> 配置项1 | <en/> configuration 1\n * @param opt2 - <zh/> 配置项2 | <en/> configuration 2\n * @returns <zh/> 合并后的配置项 | <en/> merged configuration\n */\nexport function mergeOptions(opt1, opt2) {\n    const s1 = opt1?.style || {};\n    const s2 = opt2?.style || {};\n    return Object.assign({}, opt1, opt2, {\n        style: Object.assign({}, s1, s2),\n    });\n}\n/**\n * <zh/> 获取图形子图形样式\n *\n * <en/> Get the style of the sub-shape of the graphic\n * @param style - <zh/> 图形样式 | <en/> graphic style\n * @returns <zh/> 子图形样式 | <en/> sub-shape style\n * @remarks\n * <zh/> 从给定的属性对象中提取图形样式属性。删除特定的属性，如位置、变换和类名\n *\n * <en/> Extracts the graphic style properties from a given attribute object.\n * Removes specific properties like position, transformation, and class name.\n */\nexport function getSubShapeStyle(style) {\n    const { x, y, z, class: cls, className, transform, transformOrigin, context, zIndex, ...rest } = style;\n    return rest;\n}\n//# sourceMappingURL=style.js.map","import { get, set } from '@antv/util';\nconst CacheTargetKey = 'cachedStyle';\nconst getStyleCacheKey = (name) => `__${name}__`;\n/**\n * <zh/> 缓存图形样式\n *\n * <en/> Cache graphic style\n * @param element - <zh/> 图形元素 | <en/> graphic element\n * @param name - <zh/> 样式名 | <en/> style name\n */\nexport function cacheStyle(element, name) {\n    const names = Array.isArray(name) ? name : [name];\n    if (!get(element, CacheTargetKey))\n        set(element, CacheTargetKey, {});\n    names.forEach((n) => {\n        set(get(element, CacheTargetKey), getStyleCacheKey(n), element.attributes[n]);\n    });\n}\n/**\n * <zh/> 获取缓存的样式\n *\n * <en/> Get cached style\n * @param element - <zh/> 图形元素 | <en/> graphic element\n * @param name - <zh/> 样式名 | <en/> style name\n * @returns <zh/> 样式值 | <en/> style value\n */\nexport function getCachedStyle(element, name) {\n    return get(element, [CacheTargetKey, getStyleCacheKey(name)]);\n}\n/**\n * <zh/> 是否有缓存的样式\n *\n * <en/> Whether there is a cached style\n * @param element - <zh/> 图形元素 | <en/> graphic element\n * @param name - <zh/> 样式名 | <en/> style name\n * @returns <zh/> 是否有缓存的样式 | <en/> Whether there is a cached style\n */\nexport function hasCachedStyle(element, name) {\n    return getStyleCacheKey(name) in (get(element, CacheTargetKey) || {});\n}\n/**\n * <zh/> 设置缓存的样式\n *\n * <en/> Set cached style\n * @param element - <zh/> 图形元素 | <en/> graphic element\n * @param name - <zh/> 样式名 | <en/> style name\n * @param value - <zh/> 样式值 | <en/> style value\n */\nexport function setCacheStyle(element, name, value) {\n    set(element, [CacheTargetKey, getStyleCacheKey(name)], value);\n}\n//# sourceMappingURL=cache.js.map","import { getCachedStyle, setCacheStyle } from '../utils/cache';\n/**\n * <zh/> 基于样式属性是否变化控制函数是否执行\n *\n * <en/> Control whether the function is executed based on whether the style attribute changes\n * @param styler - <zh/> 获取样式属性函数 | <en/> Get style attribute function\n * @returns <zh/> 装饰器 | <en/> Decorator\n * @remarks\n * <zh/> 仅指定 getStyle 的情况下，会分别使用当前的 attributes 和 新的 attributes 调用函数，若两者相同，则不执行函数。\n *\n * 如果指定了 shapeKey, 则会直接获取该图形的 attributes 作为原始样式属性，通常在 getStyle 函数中获取了包围盒时使用。\n *\n * <en/> Only when getStyle is specified, the function will be called with the current attributes and the new attributes respectively. If they are the same, the function will not be executed.\n *\n * If shapeKey is specified, the attributes of the shape will be directly obtained as the original style attributes, which is usually used when the bounding box of the element is used in the getStyle function.\n */\nexport function effect(styler) {\n    return function (target, propertyKey, descriptor) {\n        const fn = descriptor.value;\n        descriptor.value = function (attr, ...rest) {\n            // 初始化后需要执行首次调用 / First call after initialization\n            const initKey = `${propertyKey}_invoke`;\n            if (!getCachedStyle(this, initKey)) {\n                setCacheStyle(this, initKey, true);\n                return fn.call(this, attr, ...rest);\n            }\n            const styleKey = `${propertyKey}_style`;\n            const original = getCachedStyle(this, styleKey);\n            const modified = styler(this, attr);\n            setCacheStyle(this, styleKey, modified);\n            if (isStyleEqual(original, modified))\n                return null;\n            return fn.call(this, attr, ...rest);\n        };\n        return descriptor;\n    };\n}\n/**\n * <zh/> 比较两个样式属性是否相等\n *\n * <en/> Compare whether two style attributes are equal\n * @param a - <zh/> 样式属性 a | <en/> Style attribute a\n * @param b - <zh/> 样式属性 b | <en/> Style attribute b\n * @param depth - <zh/> 比较深度 | <en/> Comparison depth\n * @returns <zh/> 是否相等 | <en/> Whether they are equal\n * @remarks\n * <zh/> 进行第二层浅比较用于比较 badges、ports 等复合图形属性\n *\n * <en/> Perform a second-level shallow comparison to compare complex shape attributes such as badges and ports\n */\nconst isStyleEqual = (a, b, depth = 2) => {\n    if (typeof a !== 'object' || typeof b !== 'object')\n        return a === b;\n    const keys1 = Object.keys(a);\n    const keys2 = Object.keys(b);\n    if (keys1.length !== keys2.length)\n        return false;\n    for (const key of keys1) {\n        const val1 = a[key];\n        const val2 = b[key];\n        if (depth > 1 && typeof val1 === 'object' && typeof val2 === 'object') {\n            if (!isStyleEqual(val1, val2, depth - 1))\n                return false;\n        }\n        else if (val1 !== val2)\n            return false;\n    }\n    return true;\n};\n//# sourceMappingURL=effect.js.map","import isArray from './is-array';\nimport isFunction from './is-function';\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nfunction groupBy(data, condition) {\n    if (!condition || !isArray(data)) {\n        return {};\n    }\n    var result = {};\n    // 兼容方法和 字符串的写法\n    var predicate = isFunction(condition) ? condition : function (item) { return item[condition]; };\n    var key;\n    for (var i = 0; i < data.length; i++) {\n        var item = data[i];\n        key = predicate(item);\n        if (hasOwnProperty.call(result, key)) {\n            result[key].push(item);\n        }\n        else {\n            result[key] = [item];\n        }\n    }\n    return result;\n}\nexport default groupBy;\n//# sourceMappingURL=group-by.js.map","import { groupBy } from '@antv/util';\nimport { getExtension } from '../registry';\nimport { idOf } from './id';\nimport { format } from './print';\n/**\n * <zh/> 解析色板配置\n *\n * <en/> Parse palette options\n * @param palette - <zh/> 色板配置 | <en/> PaletteOptions options\n * @returns <zh/> 标准色板配置 | <en/> Standard palette options\n */\nexport function parsePalette(palette) {\n    if (!palette)\n        return undefined;\n    if (\n    // 色板名 palette name\n    typeof palette === 'string' ||\n        // 插值函数 interpolate function\n        typeof palette === 'function' ||\n        // 颜色数组 color array\n        Array.isArray(palette)) {\n        // 默认为离散色板\n        // Default to discrete palette, default group field is id\n        return {\n            type: 'group',\n            field: (d) => d.id,\n            color: palette,\n            invert: false,\n        };\n    }\n    return palette;\n}\n/**\n * <zh/> 根据色板分配颜色\n *\n * <en/> Assign colors according to the palette\n * @param data - <zh/> 元素数据 | <en/> Element data\n * @param palette - <zh/> 色板配置 | <en/> PaletteOptions options\n * @returns <zh/> 元素颜色 | <en/> Element color\n * @remarks\n * <zh/> 返回值结果是一个以元素 id 为 key，颜色值为 value 的对象\n *\n * <en/> The return value is an object with element id as key and color value as value\n */\nexport function assignColorByPalette(data, palette) {\n    if (!palette)\n        return {};\n    const { type, color: colorPalette, field, invert } = palette;\n    const assignColor = (args) => {\n        const palette = typeof colorPalette === 'string' ? getExtension('palette', colorPalette) : colorPalette;\n        if (typeof palette === 'function') {\n            // assign by continuous\n            const result = {};\n            args.forEach(([id, value]) => {\n                result[id] = palette(invert ? 1 - value : value);\n            });\n            return result;\n        }\n        else if (Array.isArray(palette)) {\n            // assign by discrete\n            const colors = invert ? [...palette].reverse() : palette;\n            const result = {};\n            args.forEach(([id, index]) => {\n                result[id] = colors[index % palette.length];\n            });\n            return result;\n        }\n        return {};\n    };\n    const parseField = (field, datum) => typeof field === 'string' ? datum.data?.[field] : field?.(datum);\n    if (type === 'group') {\n        const groupData = groupBy(data, (datum) => {\n            if (!field)\n                return 'default';\n            const key = parseField(field, datum);\n            return key ? String(key) : 'default';\n        });\n        const groupKeys = Object.keys(groupData);\n        const assignResult = assignColor(groupKeys.map((key, index) => [key, index]));\n        const result = {};\n        Object.entries(groupData).forEach(([groupKey, groupData]) => {\n            groupData.forEach((datum) => {\n                result[idOf(datum)] = assignResult[groupKey];\n            });\n        });\n        return result;\n    }\n    else if (type === 'value') {\n        const [min, max] = data.reduce(([min, max], datum) => {\n            const value = parseField(field, datum);\n            if (typeof value !== 'number')\n                throw new Error(format(`Palette field ${field} is not a number`));\n            return [Math.min(min, value), Math.max(max, value)];\n        }, [Infinity, -Infinity]);\n        const range = max - min;\n        return assignColor(data.map((datum) => [datum.id, (parseField(field, datum) - min) / range]));\n    }\n}\n/**\n * <zh/> 获取离散色板配色\n *\n * <en/> Get discrete palette colors\n * @param colorPalette - <zh/> 色板名或着颜色数组 | <en/> Palette name or color array\n * @returns <zh/> 色板上具体颜色 | <en/> Specific color on the palette\n */\nexport function getPaletteColors(colorPalette) {\n    const palette = typeof colorPalette === 'string' ? getExtension('palette', colorPalette) : colorPalette;\n    if (typeof palette === 'function')\n        return undefined;\n    return palette;\n}\n//# sourceMappingURL=palette.js.map","import { distance } from './vector';\n/**\n * Get WordWrapWidth for a text according the the length of the label and 'maxWidth'.\n * @param length  - length\n * @param maxWidth - maxWidth\n * @returns wordWrapWidth\n */\nexport function getWordWrapWidthWithBase(length, maxWidth) {\n    let wordWrapWidth = 2 * length;\n    if (typeof maxWidth === 'string') {\n        wordWrapWidth = (length * Number(maxWidth.replace('%', ''))) / 100;\n    }\n    else if (typeof maxWidth === 'number') {\n        wordWrapWidth = maxWidth;\n    }\n    if (isNaN(wordWrapWidth))\n        wordWrapWidth = 2 * length;\n    return wordWrapWidth;\n}\n/**\n * Get the proper wordWrapWidth for a labelShape according the the 'maxWidth' of keyShape.\n * @param keyShapeBox - keyShapeBox\n * @param maxWidth - maxWidth\n * @param zoom - zoom\n * @param enableBalanceShape - enableBalanceShape\n * @returns Get WordWrapWidth by bbox\n */\nexport function getWordWrapWidthByBox(keyShapeBox, maxWidth, zoom = 1, enableBalanceShape = false) {\n    const balanceZoom = enableBalanceShape ? zoom : 1;\n    const keyShapeWidth = (keyShapeBox.max[0] - keyShapeBox.min[0]) * balanceZoom;\n    return getWordWrapWidthWithBase(keyShapeWidth, maxWidth);\n}\n/**\n * Get the proper wordWrapWidth for a labelShape according the the distance between two end points and 'maxWidth'.\n * @param points - points\n * @param maxWidth - maxWidth\n * @param zoom - zoom\n * @returns - wordWrapWidth for text\n */\nexport function getWordWrapWidthByEnds(points, maxWidth, zoom = 1) {\n    const dist = distance(points[0], points[1]) * zoom;\n    return getWordWrapWidthWithBase(dist, maxWidth);\n}\n//# sourceMappingURL=text.js.map","var toString = {}.toString;\nvar getType = function (value) {\n    return toString\n        .call(value)\n        .replace(/^\\[object /, '')\n        .replace(/]$/, '');\n};\nexport default getType;\n//# sourceMappingURL=get-type.js.map","var objectProto = Object.prototype;\nvar isPrototype = function (value) {\n    var Ctor = value && value.constructor;\n    var proto = (typeof Ctor === 'function' && Ctor.prototype) || objectProto;\n    return value === proto;\n};\nexport default isPrototype;\n//# sourceMappingURL=is-prototype.js.map","import isNil from './is-nil';\nimport isArrayLike from './is-array-like';\nimport getType from './get-type';\nimport isPrototype from './is-prototype';\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nfunction isEmpty(value) {\n    /**\n     * isEmpty(null) => true\n     * isEmpty() => true\n     * isEmpty(true) => true\n     * isEmpty(1) => true\n     * isEmpty([1, 2, 3]) => false\n     * isEmpty('abc') => false\n     * isEmpty({ a: 1 }) => false\n     */\n    if (isNil(value)) {\n        return true;\n    }\n    if (isArrayLike(value)) {\n        return !value.length;\n    }\n    var type = getType(value);\n    if (type === 'Map' || type === 'Set') {\n        return !value.size;\n    }\n    if (isPrototype(value)) {\n        return !Object.keys(value).length;\n    }\n    for (var key in value) {\n        if (hasOwnProperty.call(value, key)) {\n            return false;\n        }\n    }\n    return true;\n}\nexport default isEmpty;\n//# sourceMappingURL=is-empty.js.map","/**\n * <zh/> 获取图形的所有子元素\n *\n * <en/> Get all the child elements of the shape\n * @param shape <zh/> 图形元素 | <en/> shape\n * @returns <zh/> 子元素数组 | <en/> child elements array\n */\nexport function getDescendantShapes(shape) {\n    const succeeds = [];\n    // 遍历所有子元素，并将子元素的子元素加入到数组中\n    const traverse = (shape) => {\n        if (shape?.children.length) {\n            shape.children.forEach((child) => {\n                succeeds.push(child);\n                traverse(child);\n            });\n        }\n    };\n    traverse(shape);\n    return succeeds;\n}\n//# sourceMappingURL=shape.js.map","import { cacheStyle, getCachedStyle, hasCachedStyle } from './cache';\nimport { getDescendantShapes } from './shape';\nconst PropertyKey = 'visibility';\n/**\n * <zh/> 设置图形实例的可见性\n *\n * <en/> Set the visibility of the shape instance\n * @param shape - <zh/> 图形实例 | <en/> shape instance\n * @param visibility - <zh/> 可见性 | <en/> visibility\n * @param filter - <zh/> 筛选出需要设置可见性的图形 | <en/> Filter out the shapes that need to set visibility\n * @remarks\n * <zh/> 在设置 enableCSSParsing 为 false 的情况下，复合图形无法继承父属性，因此需要对所有子图形应用相同的可见性\n *\n * <en/> After setting enableCSSParsing to false, the compound shape cannot inherit the parent attribute, so the same visibility needs to be applied to all child shapes\n */\nexport function setVisibility(shape, visibility, filter) {\n    let shapes = [shape, ...getDescendantShapes(shape)];\n    if (filter)\n        shapes = filter?.(shapes);\n    shapes.forEach((sp) => {\n        if (!hasCachedStyle(sp, PropertyKey))\n            cacheStyle(sp, PropertyKey);\n        const cachedVisibility = getCachedStyle(sp, PropertyKey);\n        // 如果子图形为隐藏状态，始终保持隐藏状态\n        // If the child shape is hidden, keep it hidden\n        if (shape !== sp && cachedVisibility === 'hidden')\n            return;\n        sp.style.visibility = visibility;\n    });\n}\n//# sourceMappingURL=visibility.js.map","import { CustomElement } from '@antv/g';\nimport { isEmpty, isFunction, upperFirst } from '@antv/util';\nimport { createAnimationsProxy, preprocessKeyframes } from '../../utils/animation';\nimport { updateStyle } from '../../utils/element';\nimport { subObject } from '../../utils/prefix';\nimport { getSubShapeStyle } from '../../utils/style';\nimport { replaceTranslateInTransform } from '../../utils/transform';\nimport { setVisibility } from '../../utils/visibility';\nexport class BaseShape extends CustomElement {\n    constructor(options) {\n        super(options);\n        this.transformPosition(this.attributes);\n        this.render(this.attributes, this);\n        this.setVisibility();\n        this.bindEvents();\n    }\n    get parsedAttributes() {\n        return this.attributes;\n    }\n    /**\n     * <zh> 图形实例映射表\n     *\n     * <en> shape instance map\n     */\n    shapeMap = {};\n    /**\n     * <zh> 动画实例映射表\n     *\n     * <en> animation instance map\n     */\n    animateMap = {};\n    /**\n     * <zh> 创建、更新或删除图形\n     *\n     * <en> create, update or remove shape\n     * @param className - <zh> 图形名称 | <en> shape name\n     * @param Ctor - <zh> 图形类型 | <en> shape type\n     * @param style - <zh> 图形样式 | <en> shape style\n     * @param container - <zh> 容器 | <en> container\n     * @returns <zh> 图形实例 | <en> shape instance\n     */\n    upsert(className, Ctor, style, container) {\n        const target = this.shapeMap[className];\n        // remove\n        // 如果 style 为 false，则删除图形 / remove shape if style is false\n        if (style === false) {\n            if (target) {\n                container.removeChild(target);\n                delete this.shapeMap[className];\n            }\n            return;\n        }\n        // create\n        if (!target || target.destroyed) {\n            const instance = new Ctor({ className, style });\n            container.appendChild(instance);\n            this.shapeMap[className] = instance;\n            return instance;\n        }\n        // update\n        updateStyle(target, style);\n        return target;\n    }\n    /**\n     * <zh/> 使用 transform 更新图形位置\n     *\n     * <en/> Update the position of the shape using transform\n     * @param attributes - <zh/> 样式属性 | <en/> style attributes\n     */\n    transformPosition(attributes) {\n        // Use `transform: translate3d()` instead of `x/y/z`\n        const { x = 0, y = 0, z = 0, transform } = attributes;\n        if (x !== 0 || y !== 0 || z !== 0) {\n            this.style.transform = replaceTranslateInTransform(+x, +y, +z, transform);\n        }\n    }\n    update(attr = {}) {\n        const attributes = Object.assign({}, this.attributes, attr);\n        this.attr(attributes);\n        this.render(attributes, this);\n        this.transformPosition(attributes);\n        this.setVisibility();\n    }\n    bindEvents() { }\n    /**\n     * <zh/> 从给定的属性对象中提取图形样式属性。删除特定的属性，如位置、变换和类名\n     *\n     * <en/> Extracts the graphic style properties from a given attribute object.\n     * Removes specific properties like position, transformation, and class name.\n     * @param style - <zh/> 属性对象 | <en/> attribute object\n     * @returns <zh/> 仅包含样式属性的对象 | <en/> An object containing only the style properties.\n     */\n    getGraphicStyle(style) {\n        return getSubShapeStyle(style);\n    }\n    /**\n     * Get the prefix pairs for composite shapes used to handle animation\n     * @returns tuples array where each tuple contains a key corresponding to a method `get${key}Style` and its shape prefix\n     */\n    get compositeShapes() {\n        return [\n            ['badges', 'badge-'],\n            ['ports', 'port-'],\n        ];\n    }\n    animate(keyframes, options) {\n        if (keyframes.length === 0)\n            return null;\n        const animationMap = [];\n        // 如果 keyframes 中存在 x/y/z ，替换为 transform\n        // if x/y/z exists in keyframes, replace them with transform\n        if (keyframes[0].x !== undefined || keyframes[0].y !== undefined || keyframes[0].z !== undefined) {\n            const { x: _x = 0, y: _y = 0, z: _z = 0 } = this.attributes;\n            keyframes.forEach((keyframe) => {\n                const { x = _x, y = _y, z = _z } = keyframe;\n                Object.assign(keyframe, { transform: replaceTranslateInTransform(+x, +y, +z) });\n            });\n        }\n        const result = super.animate(keyframes, options);\n        if (result) {\n            releaseAnimation(this, result);\n            animationMap.push(result);\n        }\n        if (Array.isArray(keyframes) && keyframes.length > 0) {\n            // 如果 keyframes 中仅存在 skippedAttrs 中的属性，则仅更新父元素属性（跳过子图形）\n            // if only skippedAttrs exist in keyframes, only update parent element attributes (skip child shapes)\n            const skippedAttrs = ['transform', 'transformOrigin', 'x', 'y', 'z', 'zIndex'];\n            if (Object.keys(keyframes[0]).some((attr) => !skippedAttrs.includes(attr))) {\n                Object.entries(this.shapeMap).forEach(([key, shape]) => {\n                    // 如果存在方法名为 `get${key}Style` 的方法，则使用该方法获取样式，并自动为该图形实例创建动画\n                    // if there is a method named `get${key}Style`, use this method to get style and automatically create animation for the shape instance\n                    const methodName = `get${upperFirst(key)}Style`;\n                    const method = this[methodName];\n                    if (isFunction(method)) {\n                        const subKeyframes = keyframes.map((style) => method.call(this, { ...this.attributes, ...style }));\n                        const result = shape.animate(preprocessKeyframes(subKeyframes), options);\n                        if (result) {\n                            releaseAnimation(shape, result);\n                            animationMap.push(result);\n                        }\n                    }\n                });\n                const handleCompositeShapeAnimation = (shapeSet, name) => {\n                    if (!isEmpty(shapeSet)) {\n                        const methodName = `get${upperFirst(name)}Style`;\n                        const method = this[methodName];\n                        if (isFunction(method)) {\n                            const itemsKeyframes = keyframes.map((style) => method.call(this, { ...this.attributes, ...style }));\n                            Object.entries(itemsKeyframes[0]).map(([key]) => {\n                                const subKeyframes = itemsKeyframes.map((styles) => styles[key]);\n                                const shape = shapeSet[key];\n                                if (shape) {\n                                    const result = shape.animate(preprocessKeyframes(subKeyframes), options);\n                                    if (result) {\n                                        releaseAnimation(shape, result);\n                                        animationMap.push(result);\n                                    }\n                                }\n                            });\n                        }\n                    }\n                };\n                this.compositeShapes.forEach(([key, prefix]) => {\n                    const shapeSet = subObject(this.shapeMap, prefix);\n                    handleCompositeShapeAnimation(shapeSet, key);\n                });\n            }\n        }\n        return createAnimationsProxy(animationMap);\n    }\n    getShape(name) {\n        return this.shapeMap[name];\n    }\n    setVisibility() {\n        const { visibility } = this.attributes;\n        setVisibility(this, visibility);\n    }\n    destroy() {\n        this.shapeMap = {};\n        this.animateMap = {};\n        super.destroy();\n    }\n}\n/**\n * <zh/> 释放动画\n *\n * <en/> Release animation\n * @param target - <zh/> 目标对象 | <en/> target object\n * @param animation - <zh/> 动画实例 | <en/> animation instance\n * @description see: https://github.com/antvis/G/issues/1731\n */\nfunction releaseAnimation(target, animation) {\n    animation.oncancel = () => console.log('cancel');\n    animation?.finished.then(() => {\n        // @ts-expect-error private property\n        const index = target.activeAnimations.findIndex((_) => _ === animation);\n        // @ts-expect-error private property\n        if (index > -1)\n            target.activeAnimations.splice(index, 1);\n    });\n}\n//# sourceMappingURL=base-shape.js.map","import { Rect, Text } from '@antv/g';\nimport { parsePadding } from '../../utils/padding';\nimport { omitStyleProps, startsWith, subStyleProps } from '../../utils/prefix';\nimport { mergeOptions } from '../../utils/style';\nimport { BaseShape } from './base-shape';\n/**\n * <zh/> 标签\n *\n * <en/> Label\n * @remarks\n * <zh/> 标签是一种具有背景的文本图形。\n *\n * <en/> Label is a text shape with background.\n */\nexport class Label extends BaseShape {\n    static defaultStyleProps = {\n        padding: 0,\n        fontSize: 12,\n        fontFamily: 'system-ui, sans-serif',\n        wordWrap: true,\n        maxLines: 1,\n        wordWrapWidth: 128,\n        textOverflow: '...',\n        textBaseline: 'middle',\n        backgroundOpacity: 0.75,\n        backgroundZIndex: -1,\n        backgroundLineWidth: 0,\n    };\n    constructor(options) {\n        super(mergeOptions({ style: Label.defaultStyleProps }, options));\n    }\n    isTextStyle(key) {\n        return startsWith(key, 'label');\n    }\n    isBackgroundStyle(key) {\n        return startsWith(key, 'background');\n    }\n    getTextStyle(attributes) {\n        const { padding, ...style } = this.getGraphicStyle(attributes);\n        return omitStyleProps(style, 'background');\n    }\n    getBackgroundStyle(attributes) {\n        if (attributes.background === false)\n            return false;\n        const style = this.getGraphicStyle(attributes);\n        const { wordWrap, wordWrapWidth, padding } = style;\n        const backgroundStyle = subStyleProps(style, 'background');\n        const { min: [minX, minY], center: [centerX, centerY], halfExtents: [halfWidth, halfHeight], } = this.shapeMap.text.getGeometryBounds();\n        const [top, right, bottom, left] = parsePadding(padding);\n        const totalWidth = halfWidth * 2 + left + right;\n        const { width, height } = backgroundStyle;\n        if (width && height) {\n            Object.assign(backgroundStyle, { x: centerX - Number(width) / 2, y: centerY - Number(height) / 2 });\n        }\n        else {\n            Object.assign(backgroundStyle, {\n                x: minX - left,\n                y: minY - top,\n                width: wordWrap ? Math.min(totalWidth, wordWrapWidth + left + right) : totalWidth,\n                height: halfHeight * 2 + top + bottom,\n            });\n        }\n        // parse percentage radius\n        const { radius } = backgroundStyle;\n        // if radius look like '10%', convert it to number\n        if (typeof radius === 'string' && radius.endsWith('%')) {\n            const percentage = Number(radius.replace('%', '')) / 100;\n            backgroundStyle.radius = Math.min(+backgroundStyle.width, +backgroundStyle.height) * percentage;\n        }\n        return backgroundStyle;\n    }\n    render(attributes = this.parsedAttributes, container = this) {\n        this.upsert('text', Text, this.getTextStyle(attributes), container);\n        this.upsert('background', Rect, this.getBackgroundStyle(attributes), container);\n    }\n    getGeometryBounds() {\n        const shape = this.getShape('background') || this.getShape('text');\n        return shape.getGeometryBounds();\n    }\n}\n//# sourceMappingURL=label.js.map","import { mergeOptions } from '../../utils/style';\nimport { BaseShape } from './base-shape';\nimport { Label } from './label';\n/**\n * <zh/> 徽标\n *\n * <en/> Badge\n * @remarks\n * <zh/> 徽标是一种特殊的标签，通常用于展示数量或状态信息。\n *\n * <en/> Badge is a special label, usually used to display quantity or status information.\n */\nexport class Badge extends BaseShape {\n    static defaultStyleProps = {\n        padding: [2, 4, 2, 4],\n        fontSize: 10,\n        wordWrap: false,\n        backgroundRadius: '50%',\n        backgroundOpacity: 1,\n    };\n    constructor(options) {\n        super(mergeOptions({ style: Badge.defaultStyleProps }, options));\n    }\n    getBadgeStyle(attributes) {\n        return this.getGraphicStyle(attributes);\n    }\n    render(attributes = this.parsedAttributes, container = this) {\n        this.upsert('label', Label, this.getBadgeStyle(attributes), container);\n    }\n    getGeometryBounds() {\n        const labelShape = this.getShape('label');\n        const shape = labelShape.getShape('background') || labelShape.getShape('text');\n        return shape.getGeometryBounds();\n    }\n}\n//# sourceMappingURL=badge.js.map","/**\n * <zh/> points 转化为 path 路径\n *\n * <en/> points transform path.\n * @param points Point[]\n * @param isClose boolean\n * @returns path string[][]\n */\nexport function pointsToPath(points, isClose = true) {\n    const path = [];\n    points.forEach((point, index) => {\n        path.push([index === 0 ? 'M' : 'L', ...point]);\n    });\n    if (isClose) {\n        path.push(['Z']);\n    }\n    return path;\n}\nconst PATH_COMMANDS = {\n    M: ['x', 'y'],\n    m: ['dx', 'dy'],\n    H: ['x'],\n    h: ['dx'],\n    V: ['y'],\n    v: ['dy'],\n    L: ['x', 'y'],\n    l: ['dx', 'dy'],\n    Z: [],\n    z: [],\n    C: ['x1', 'y1', 'x2', 'y2', 'x', 'y'],\n    c: ['dx1', 'dy1', 'dx2', 'dy2', 'dx', 'dy'],\n    S: ['x2', 'y2', 'x', 'y'],\n    s: ['dx2', 'dy2', 'dx', 'dy'],\n    Q: ['x1', 'y1', 'x', 'y'],\n    q: ['dx1', 'dy1', 'dx', 'dy'],\n    T: ['x', 'y'],\n    t: ['dx', 'dy'],\n    A: ['rx', 'ry', 'rotation', 'large-arc', 'sweep', 'x', 'y'],\n    a: ['rx', 'ry', 'rotation', 'large-arc', 'sweep', 'dx', 'dy'],\n};\n/**\n * <zh/> 将路径字符串转换为路径段数组\n *\n * <en/> Convert a path string to an array of path segments.\n * @param path - <zh/> 路径字符串 | <en/> path string\n * @returns <zh/> 路径段数组 | <en/> path segment array\n */\nexport function parsePath(path) {\n    const items = path\n        .replace(/[\\n\\r]/g, '')\n        .replace(/-/g, ' -')\n        .replace(/(\\d*\\.)(\\d+)(?=\\.)/g, '$1$2 ')\n        .trim()\n        .split(/\\s*,|\\s+/);\n    const segments = [];\n    let currentCommand = '';\n    let currentElement = {};\n    while (items.length > 0) {\n        let it = items.shift();\n        if (it in PATH_COMMANDS) {\n            currentCommand = it;\n        }\n        else {\n            items.unshift(it);\n        }\n        currentElement = { type: currentCommand };\n        PATH_COMMANDS[currentCommand].forEach((prop) => {\n            it = items.shift(); // TODO sanity check\n            currentElement[prop] = it;\n        });\n        if (currentCommand === 'M') {\n            currentCommand = 'L';\n        }\n        else if (currentCommand === 'm') {\n            currentCommand = 'l';\n        }\n        const [type, ...values] = Object.values(currentElement);\n        segments.push([type, ...values.map(Number)]);\n    }\n    return segments;\n}\n/**\n * <zh/> 将路径转换为点数组\n *\n * <en/> Convert path to points array\n * @param path - <zh/> 路径数组 <en/> path array\n * @returns\n */\nexport function pathToPoints(path) {\n    const points = [];\n    const segments = typeof path === 'string' ? parsePath(path) : path;\n    segments.forEach((seg) => {\n        const command = seg[0];\n        if (command === 'Z') {\n            points.push(points[0]);\n            return;\n        }\n        if (command !== 'A') {\n            for (let i = 1; i < seg.length; i = i + 2) {\n                points.push([seg[i], seg[i + 1], 0]);\n            }\n        }\n        else {\n            const length = seg.length;\n            points.push([seg[length - 2], seg[length - 1], 0]);\n        }\n    });\n    return points;\n}\n/**\n * <zh/> 生成平滑闭合曲线\n *\n * <en/> Generate smooth closed curves\n * @param points - <zh/> 点集 | <en/> points\n * @returns <zh/> 平滑闭合曲线 | <en/> smooth closed curves\n */\nexport const getClosedSpline = (points) => {\n    if (points.length < 2)\n        return [\n            ['M', 0, 0],\n            ['L', 0, 0],\n        ];\n    const first = points[0];\n    const second = points[1];\n    const last = points[points.length - 1];\n    const lastSecond = points[points.length - 2];\n    points.unshift(lastSecond, last);\n    points.push(first, second);\n    const closedPath = [['M', last[0], last[1]]];\n    for (let i = 1; i < points.length - 2; i += 1) {\n        const [x0, y0] = points[i - 1];\n        const [x1, y1] = points[i];\n        const [x2, y2] = points[i + 1];\n        const [x3, y3] = i !== points.length - 2 ? points[i + 2] : [x2, y2];\n        const cp1x = x1 + (x2 - x0) / 6;\n        const cp1y = y1 + (y2 - y0) / 6;\n        const cp2x = x2 - (x3 - x1) / 6;\n        const cp2y = y2 - (y3 - y1) / 6;\n        closedPath.push(['C', cp1x, cp1y, cp2x, cp2y, x2, y2]);\n    }\n    return closedPath;\n};\n//# sourceMappingURL=path.js.map","import { isEqual } from '@antv/util';\nimport { pathToPoints } from './path';\nimport { findNearestLine, findNearestPointOnLine } from './point';\nimport { getXYByPlacement } from './position';\n/**\n * <zh/> 计算文本位置样式\n *\n * <en/> Calculate text position style\n * @param bounds - <zh/> 外包围盒 | <en/> contour bounds\n * @param placement - <zh/> 位置 | <en/> placement\n * @param offsetX - <zh/> x轴偏移 | <en/> x-axis offset\n * @param offsetY - <zh/> y轴偏移 | <en/> y-axis offset\n * @param closeToContour - <zh/> 标签位置是否贴合轮廓 | <en/> whether the label position is close to the contour\n * @param path - <zh/> 路径 | <en/> path\n * @param autoRotate - <zh/> 是否跟随轮廓旋转 | <en/> whether to rotate with the contour\n * @returns <zh/> 文本样式 | <en/> text style\n */\nexport function getPolygonTextStyleByPlacement(bounds, placement, offsetX, offsetY, closeToContour, path, autoRotate) {\n    const [x, y] = getXYByPlacement(bounds, placement);\n    const style = {\n        textAlign: placement === 'left' ? 'right' : placement === 'right' ? 'left' : 'center',\n        textBaseline: placement === 'top' ? 'bottom' : placement === 'bottom' ? 'top' : 'middle',\n        transform: `translate(${x + offsetX}, ${y + offsetY})`,\n    };\n    if (placement === 'center' || !closeToContour)\n        return style;\n    const points = pathToPoints(path);\n    if (!points || points.length <= 3)\n        return style;\n    const lines = points\n        .map((point, index) => {\n        const p1 = point;\n        const p2 = points[(index + 1) % points.length];\n        if (isEqual(p1, p2))\n            return null;\n        return [p1, p2];\n    })\n        .filter(Boolean);\n    const line = findNearestLine([x, y], lines);\n    const intersection = findNearestPointOnLine([x, y], line);\n    if (intersection && line) {\n        style.transform = `translate(${intersection[0] + offsetX}, ${intersection[1] + offsetY})`;\n        if (autoRotate) {\n            const angle = Math.atan((line[0][1] - line[1][1]) / (line[0][0] - line[1][0]));\n            style.transform += `rotate(${(angle / Math.PI) * 180}deg)`;\n            style.textAlign = 'center';\n            if (placement === 'right' || placement === 'left') {\n                if (angle > 0) {\n                    style.textBaseline = placement === 'right' ? 'bottom' : 'top';\n                }\n                else {\n                    style.textBaseline = placement === 'right' ? 'top' : 'bottom';\n                }\n            }\n        }\n    }\n    return style;\n}\n//# sourceMappingURL=polygon.js.map","import { Path } from '@antv/g';\nimport { getPolygonTextStyleByPlacement } from '../../utils/polygon';\nimport { subStyleProps } from '../../utils/prefix';\nimport { mergeOptions } from '../../utils/style';\nimport { getWordWrapWidthByBox } from '../../utils/text';\nimport { BaseShape } from './base-shape';\nimport { Label } from './label';\nexport class Contour extends BaseShape {\n    static defaultStyleProps = {\n        label: true,\n        labelPlacement: 'bottom',\n        labelCloseToPath: true,\n        labelAutoRotate: true,\n        labelOffsetX: 0,\n        labelOffsetY: 0,\n    };\n    constructor(options) {\n        super(mergeOptions({ style: Contour.defaultStyleProps }, options));\n    }\n    getLabelStyle(attributes) {\n        if (!attributes.label || !attributes.d || attributes.d.length === 0)\n            return false;\n        const { maxWidth, offsetX, offsetY, autoRotate, placement, closeToPath, ...labelStyle } = subStyleProps(this.getGraphicStyle(attributes), 'label');\n        const key = this.shapeMap.key;\n        const keyBounds = key?.getRenderBounds();\n        return Object.assign(getPolygonTextStyleByPlacement(keyBounds, placement, offsetX, offsetY, closeToPath, attributes.d, autoRotate), { wordWrapWidth: getWordWrapWidthByBox(keyBounds, maxWidth) }, labelStyle);\n    }\n    getKeyStyle(attributes) {\n        return this.getGraphicStyle(attributes);\n    }\n    render(attributes, container) {\n        this.upsert('key', Path, this.getKeyStyle(attributes), container);\n        this.upsert('label', Label, this.getLabelStyle(attributes), container);\n    }\n}\n//# sourceMappingURL=contour.js.map","import { Image as GImage, Text as GText } from '@antv/g';\nimport { BaseShape } from './base-shape';\n/**\n * <zh/> 图标\n *\n * <en/> Icon\n * @remarks\n * <zh/> 图标是一种特殊的图形，可以是图片或者文字。传入 src 属性时，会渲染图片；传入 text 属性时，会渲染文字。\n *\n * <en/> Icon is a special shape, which can be an image or text. When the src attribute is passed in, an image will be rendered; when the text attribute is passed in, text will be rendered.\n */\nexport class Icon extends BaseShape {\n    constructor(options) {\n        super(options);\n    }\n    isGImage() {\n        return !!this.getAttribute('src');\n    }\n    getIconStyle(attributes = this.attributes) {\n        const { width = 0, height = 0 } = attributes;\n        const style = this.getGraphicStyle(attributes);\n        if (this.isGImage()) {\n            return {\n                x: -width / 2,\n                y: -height / 2,\n                ...style,\n            };\n        }\n        return {\n            textBaseline: 'middle',\n            textAlign: 'center',\n            ...style,\n        };\n    }\n    render(attributes = this.attributes, container = this) {\n        this.upsert('icon', (this.isGImage() ? GImage : GText), this.getIconStyle(attributes), container);\n    }\n}\n//# sourceMappingURL=icon.js.map","import { BaseShape } from './shapes';\nexport class BaseElement extends BaseShape {\n    get context() {\n        return this.attributes.context;\n    }\n    get parsedAttributes() {\n        return this.attributes;\n    }\n    /**\n     * <zh/> 动画帧执行函数\n     *\n     * <en/> Animation frame execution function\n     */\n    onframe() { }\n    animate(keyframes, options) {\n        const animation = super.animate(keyframes, options);\n        if (animation) {\n            animation.onframe = () => this.onframe();\n            animation.finished.then(() => this.onframe());\n        }\n        return animation;\n    }\n}\n//# sourceMappingURL=base-element.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Circle as GCircle } from '@antv/g';\nimport { getPortXYByPlacement, getTextStyleByPlacement, isSimplePort } from '../../utils/element';\nimport { inferIconStyle } from '../../utils/node';\nimport { getPaletteColors } from '../../utils/palette';\nimport { getRectIntersectPoint } from '../../utils/point';\nimport { omitStyleProps, subObject, subStyleProps } from '../../utils/prefix';\nimport { parseSize } from '../../utils/size';\nimport { mergeOptions } from '../../utils/style';\nimport { getWordWrapWidthByBox } from '../../utils/text';\nimport { BaseElement } from '../base-element';\nimport { effect } from '../effect';\nimport { Badge, Icon, Label } from '../shapes';\n/**\n * <zh/> 节点元素的基类\n *\n * <en/> Base node class\n * @remarks\n * <zh/> 自定义节点时，建议将此类作为基类。这样，你只需要关注如何实现 keyShape 的绘制逻辑\n *\n * <zh/> 设计文档：https://www.yuque.com/antv/g6/gl1iof1xpzg6ed98\n *\n * <en/> When customizing a node, it is recommended to use this class as the base class. This way, you can directly focus on how to implement the drawing logic of keyShape\n *\n * <en/> Design document: https://www.yuque.com/antv/g6/gl1iof1xpzg6ed98\n */\nexport class BaseNode extends BaseElement {\n    type = 'node';\n    static defaultStyleProps = {\n        x: 0,\n        y: 0,\n        size: 32,\n        droppable: true,\n        draggable: true,\n        port: true,\n        ports: [],\n        portZIndex: 2,\n        portLinkToCenter: false,\n        badge: true,\n        badges: [],\n        badgeZIndex: 3,\n        halo: false,\n        haloDroppable: false,\n        haloLineDash: 0,\n        haloLineWidth: 12,\n        haloStrokeOpacity: 0.25,\n        haloPointerEvents: 'none',\n        haloZIndex: -1,\n        icon: true,\n        iconZIndex: 1,\n        label: true,\n        labelIsBillboard: true,\n        labelMaxWidth: '200%',\n        labelPlacement: 'bottom',\n        labelWordWrap: false,\n        labelZIndex: 0,\n    };\n    constructor(options) {\n        super(mergeOptions({ style: BaseNode.defaultStyleProps }, options));\n    }\n    getSize(attributes = this.attributes) {\n        const { size } = attributes;\n        return parseSize(size);\n    }\n    getKeyStyle(attributes) {\n        const style = this.getGraphicStyle(attributes);\n        return Object.assign(omitStyleProps(style, ['label', 'halo', 'icon', 'badge', 'port']));\n    }\n    getLabelStyle(attributes) {\n        if (attributes.label === false || !attributes.labelText)\n            return false;\n        const { placement, maxWidth, offsetX, offsetY, ...labelStyle } = subStyleProps(this.getGraphicStyle(attributes), 'label');\n        const keyBounds = this.getShape('key').getLocalBounds();\n        return Object.assign(getTextStyleByPlacement(keyBounds, placement, offsetX, offsetY), { wordWrapWidth: getWordWrapWidthByBox(keyBounds, maxWidth) }, labelStyle);\n    }\n    getHaloStyle(attributes) {\n        if (attributes.halo === false)\n            return false;\n        const { fill, ...keyStyle } = this.getKeyStyle(attributes);\n        const haloStyle = subStyleProps(this.getGraphicStyle(attributes), 'halo');\n        return { ...keyStyle, stroke: fill, ...haloStyle };\n    }\n    getIconStyle(attributes) {\n        if (attributes.icon === false || (!attributes.iconText && !attributes.iconSrc))\n            return false;\n        const iconStyle = subStyleProps(this.getGraphicStyle(attributes), 'icon');\n        return Object.assign(inferIconStyle(attributes.size, iconStyle), iconStyle);\n    }\n    getBadgesStyle(attributes) {\n        const badges = subObject(this.shapeMap, 'badge-');\n        const badgesShapeStyle = {};\n        Object.keys(badges).forEach((key) => {\n            badgesShapeStyle[key] = false;\n        });\n        if (attributes.badge === false || !attributes.badges?.length)\n            return badgesShapeStyle;\n        const { badges: badgeOptions = [], badgePalette, opacity = 1, ...restAttributes } = attributes;\n        const colors = getPaletteColors(badgePalette);\n        const badgeStyle = subStyleProps(this.getGraphicStyle(restAttributes), 'badge');\n        badgeOptions.forEach((option, i) => {\n            badgesShapeStyle[i] = {\n                backgroundFill: colors ? colors[i % colors?.length] : undefined,\n                opacity,\n                ...badgeStyle,\n                ...this.getBadgeStyle(option),\n            };\n        });\n        return badgesShapeStyle;\n    }\n    getBadgeStyle(style) {\n        const keyShape = this.getShape('key');\n        const { placement = 'top', offsetX, offsetY, ...restStyle } = style;\n        const textStyle = getTextStyleByPlacement(keyShape.getLocalBounds(), placement, offsetX, offsetY, true);\n        return { ...textStyle, ...restStyle };\n    }\n    getPortsStyle(attributes) {\n        const ports = this.getPorts();\n        const portsShapeStyle = {};\n        Object.keys(ports).forEach((key) => {\n            portsShapeStyle[key] = false;\n        });\n        if (attributes.port === false || !attributes.ports?.length)\n            return portsShapeStyle;\n        const portStyle = subStyleProps(this.getGraphicStyle(attributes), 'port');\n        const { ports: portOptions = [] } = attributes;\n        portOptions.forEach((option, index) => {\n            const key = option.key || index;\n            const mergedStyle = { ...portStyle, ...option };\n            if (isSimplePort(mergedStyle)) {\n                portsShapeStyle[key] = false;\n            }\n            else {\n                const [x, y] = this.getPortXY(attributes, option);\n                portsShapeStyle[key] = { transform: `translate(${x}, ${y})`, ...mergedStyle };\n            }\n        });\n        return portsShapeStyle;\n    }\n    getPortXY(attributes, style) {\n        const { placement = 'left' } = style;\n        const bounds = this.getShape('key').getLocalBounds();\n        return getPortXYByPlacement(bounds, placement);\n    }\n    /**\n     * Get the ports for the node.\n     * @returns Ports shape map.\n     */\n    getPorts() {\n        return subObject(this.shapeMap, 'port-');\n    }\n    /**\n     * Get the center point of the node.\n     * @returns The center point of the node.\n     */\n    getCenter() {\n        return this.getShape('key').getBounds().center;\n    }\n    /**\n     * Get the point on the outer contour of the node that is the intersection with a line starting in the center the ending in the point `p`.\n     * @param point - The point to intersect with the node.\n     * @returns The intersection point.\n     */\n    getIntersectPoint(point) {\n        const keyShapeBounds = this.getShape('key').getBounds();\n        return getRectIntersectPoint(point, keyShapeBounds);\n    }\n    drawHaloShape(attributes, container) {\n        const keyShape = this.getShape('key');\n        this.upsert('halo', keyShape.constructor, this.getHaloStyle(attributes), container);\n    }\n    drawIconShape(attributes, container) {\n        this.upsert('icon', Icon, this.getIconStyle(attributes), container);\n    }\n    drawBadgeShapes(attributes, container) {\n        const badgesStyle = this.getBadgesStyle(attributes);\n        Object.keys(badgesStyle).forEach((key) => {\n            this.upsert(`badge-${key}`, Badge, badgesStyle[key], container);\n        });\n    }\n    drawPortShapes(attributes, container) {\n        const portsStyle = this.getPortsStyle(attributes);\n        Object.keys(portsStyle).forEach((key) => {\n            this.upsert(`port-${key}`, GCircle, portsStyle[key], container);\n        });\n    }\n    drawLabelShape(attributes, container) {\n        this.upsert('label', Label, this.getLabelStyle(attributes), container);\n    }\n    // 用于装饰抽象方法 / Used to decorate abstract methods\n    _drawKeyShape(attributes, container) {\n        return this.drawKeyShape(attributes, container);\n    }\n    render(attributes = this.parsedAttributes, container = this) {\n        // 1. key shape\n        this._drawKeyShape(attributes, container);\n        if (!this.getShape('key'))\n            return;\n        // 2. halo, use shape same with keyShape\n        this.drawHaloShape(attributes, container);\n        // 3. icon\n        this.drawIconShape(attributes, container);\n        // 4. badges\n        this.drawBadgeShapes(attributes, container);\n        // 5. label\n        this.drawLabelShape(attributes, container);\n        // 6. ports\n        this.drawPortShapes(attributes, container);\n    }\n    onframe() {\n        this.drawBadgeShapes(this.parsedAttributes, this);\n        this.drawLabelShape(this.parsedAttributes, this);\n    }\n}\n__decorate([\n    effect((self, attributes) => self.getHaloStyle(attributes))\n], BaseNode.prototype, \"drawHaloShape\", null);\n__decorate([\n    effect((self, attributes) => self.getIconStyle(attributes))\n], BaseNode.prototype, \"drawIconShape\", null);\n__decorate([\n    effect((self, attributes) => self.getBadgesStyle(attributes))\n], BaseNode.prototype, \"drawBadgeShapes\", null);\n__decorate([\n    effect((self, attributes) => self.getPortsStyle(attributes))\n], BaseNode.prototype, \"drawPortShapes\", null);\n__decorate([\n    effect((self, attributes) => self.getLabelStyle(attributes))\n], BaseNode.prototype, \"drawLabelShape\", null);\n__decorate([\n    effect((self, attributes) => self.getKeyStyle(attributes))\n], BaseNode.prototype, \"_drawKeyShape\", null);\n//# sourceMappingURL=base-node.js.map","import { parseSize } from './size';\n/**\n * <zh/> 如果没有手动指定图标大小，则根据主图形尺寸自动推断\n *\n * <en/> Infer the icon size according to key size if icon size is not manually specified\n * @param size - <zh/> 主图形尺寸 | <en/> Key size\n * @param iconStyle - <zh/> 图标样式 | <en/> Icon style\n * @returns <zh/> 图标样式 | <en/> Icon style\n */\nexport function inferIconStyle(size, iconStyle) {\n    const stdSize = parseSize(size);\n    let style = {};\n    if (iconStyle.text && !iconStyle.fontSize)\n        style = { fontSize: Math.min(...stdSize) * 0.5 };\n    if (iconStyle.src && (!iconStyle.width || !iconStyle.height))\n        style = { width: stdSize[0] * 0.5, height: stdSize[1] * 0.5 };\n    return style;\n}\n//# sourceMappingURL=node.js.map","import { Circle as GCircle } from '@antv/g';\nimport { ICON_SIZE_RATIO } from '../../constants/element';\nimport { getEllipseIntersectPoint } from '../../utils/point';\nimport { mergeOptions } from '../../utils/style';\nimport { BaseNode } from './base-node';\n/**\n * <zh/> 圆形节点\n *\n * <en/> Circle node\n */\nexport class Circle extends BaseNode {\n    static defaultStyleProps = {\n        size: 32,\n    };\n    constructor(options) {\n        super(mergeOptions({ style: Circle.defaultStyleProps }, options));\n    }\n    drawKeyShape(attributes, container) {\n        return this.upsert('key', GCircle, this.getKeyStyle(attributes), container);\n    }\n    getKeyStyle(attributes) {\n        const keyStyle = super.getKeyStyle(attributes);\n        return { ...keyStyle, r: Math.min(...this.getSize(attributes)) / 2 };\n    }\n    getIconStyle(attributes) {\n        const style = super.getIconStyle(attributes);\n        const { r } = this.getShape('key').attributes;\n        const size = r * 2 * ICON_SIZE_RATIO;\n        return style ? { width: size, height: size, ...style } : false;\n    }\n    getIntersectPoint(point) {\n        const keyShapeBounds = this.getShape('key').getBounds();\n        return getEllipseIntersectPoint(point, keyShapeBounds);\n    }\n}\n//# sourceMappingURL=circle.js.map","import { Polygon as GPolygon } from '@antv/g';\nimport { getPolygonIntersectPoint } from '../../utils/point';\nimport { BaseNode } from '../nodes/base-node';\n/**\n * Abstract class for polygon nodes,i.e triangle, diamond, hexagon, etc.\n */\nexport class Polygon extends BaseNode {\n    constructor(options) {\n        super(options);\n    }\n    get parsedAttributes() {\n        return this.attributes;\n    }\n    drawKeyShape(attributes, container) {\n        return this.upsert('key', GPolygon, this.getKeyStyle(attributes), container);\n    }\n    getKeyStyle(attributes) {\n        const keyStyle = super.getKeyStyle(attributes);\n        return { ...keyStyle, points: this.getPoints(attributes) };\n    }\n    getIntersectPoint(point) {\n        const { points } = this.getShape('key').attributes;\n        const center = [+(this.attributes?.x || 0), +(this.attributes?.y || 0)];\n        return getPolygonIntersectPoint(point, center, points).point;\n    }\n}\n//# sourceMappingURL=polygon.js.map","import { Path } from '@antv/g';\nimport { isNumber, isString } from '@antv/util';\nimport { getPaletteColors } from '../../utils/palette';\nimport { subStyleProps } from '../../utils/prefix';\nimport { parseSize } from '../../utils/size';\nimport { mergeOptions } from '../../utils/style';\nimport { Circle } from './circle';\n/**\n * <zh/> 甜甜圈节点\n *\n * <en/> Donut node\n */\nexport class Donut extends Circle {\n    static defaultStyleProps = {\n        innerR: '50%',\n        donuts: [],\n        donutPalette: 'tableau',\n    };\n    constructor(options) {\n        super(mergeOptions({ style: Donut.defaultStyleProps }, options));\n    }\n    parseOuterR() {\n        const { size } = this.parsedAttributes;\n        return Math.min(...parseSize(size)) / 2;\n    }\n    parseInnerR() {\n        const { innerR } = this.parsedAttributes;\n        return isString(innerR) ? (parseInt(innerR) / 100) * this.parseOuterR() : innerR;\n    }\n    drawDonutShape(attributes, container) {\n        const { donuts } = attributes;\n        if (!donuts?.length)\n            return;\n        const parsedDonuts = donuts.map((round) => (isNumber(round) ? { value: round } : round));\n        const style = subStyleProps(this.getGraphicStyle(attributes), 'donut');\n        const colors = getPaletteColors(attributes.donutPalette);\n        if (!colors)\n            return;\n        const sum = parsedDonuts.reduce((acc, cur) => acc + (cur.value ?? 0), 0);\n        const outerR = this.parseOuterR();\n        const innerR = this.parseInnerR();\n        let start = 0;\n        parsedDonuts.forEach((round, index) => {\n            const { value = 0, color = colors[index % colors.length], ...roundStyle } = round;\n            const angle = (sum === 0 ? 1 / parsedDonuts.length : value / sum) * 360;\n            this.upsert(`round${index}`, Path, {\n                ...style,\n                d: arc(outerR, innerR, start, start + angle),\n                fill: color,\n                ...roundStyle,\n            }, container);\n            start += angle;\n        });\n    }\n    render(attributes, container = this) {\n        super.render(attributes, container);\n        this.drawDonutShape(attributes, container);\n    }\n}\nconst point = (x, y, r, angel) => [x + Math.sin(angel) * r, y - Math.cos(angel) * r];\nconst full = (x, y, R, r) => {\n    if (r <= 0 || R <= r) {\n        return [['M', x - R, y], ['A', R, R, 0, 1, 1, x + R, y], ['A', R, R, 0, 1, 1, x - R, y], ['Z']];\n    }\n    return [\n        ['M', x - R, y],\n        ['A', R, R, 0, 1, 1, x + R, y],\n        ['A', R, R, 0, 1, 1, x - R, y],\n        ['Z'],\n        ['M', x + r, y],\n        ['A', r, r, 0, 1, 0, x - r, y],\n        ['A', r, r, 0, 1, 0, x + r, y],\n        ['Z'],\n    ];\n};\nconst part = (x, y, R, r, start, end) => {\n    const [s, e] = [(start / 360) * 2 * Math.PI, (end / 360) * 2 * Math.PI];\n    const P = [point(x, y, r, s), point(x, y, R, s), point(x, y, R, e), point(x, y, r, e)];\n    const flag = e - s > Math.PI ? 1 : 0;\n    return [\n        ['M', P[0][0], P[0][1]],\n        ['L', P[1][0], P[1][1]],\n        ['A', R, R, 0, flag, 1, P[2][0], P[2][1]],\n        ['L', P[3][0], P[3][1]],\n        ['A', r, r, 0, flag, 0, P[0][0], P[0][1]],\n        ['Z'],\n    ];\n};\nconst arc = (R = 0, r = 0, start, end) => {\n    const [x, y] = [0, 0];\n    if (Math.abs(start - end) % 360 < 0.000001)\n        return full(x, y, R, r);\n    return part(x, y, R, r, start, end);\n};\n//# sourceMappingURL=donut.js.map","import { Ellipse as GEllipse } from '@antv/g';\nimport { ICON_SIZE_RATIO } from '../../constants/element';\nimport { getEllipseIntersectPoint } from '../../utils/point';\nimport { mergeOptions } from '../../utils/style';\nimport { BaseNode } from './base-node';\n/**\n * <zh/> 椭圆节点\n *\n * <en/> Ellipse node\n */\nexport class Ellipse extends BaseNode {\n    static defaultStyleProps = {\n        size: [45, 35],\n    };\n    constructor(options) {\n        super(mergeOptions({ style: Ellipse.defaultStyleProps }, options));\n    }\n    drawKeyShape(attributes, container) {\n        return this.upsert('key', GEllipse, this.getKeyStyle(attributes), container);\n    }\n    getKeyStyle(attributes) {\n        const keyStyle = super.getKeyStyle(attributes);\n        const [majorAxis, minorAxis] = this.getSize(attributes);\n        return {\n            ...keyStyle,\n            rx: majorAxis / 2,\n            ry: minorAxis / 2,\n        };\n    }\n    getIconStyle(attributes) {\n        const style = super.getIconStyle(attributes);\n        const { rx, ry } = this.getShape('key').attributes;\n        const size = Math.min(+rx, +ry) * 2 * ICON_SIZE_RATIO;\n        return style ? { width: size, height: size, ...style } : false;\n    }\n    getIntersectPoint(point) {\n        const keyShapeBounds = this.getShape('key').getBounds();\n        return getEllipseIntersectPoint(point, keyShapeBounds);\n    }\n}\n//# sourceMappingURL=ellipse.js.map","import { FederatedPointerEvent, HTML as GHTML, Rect, } from '@antv/g';\nimport { isNil, isUndefined, pick } from '@antv/util';\nimport { CommonEvent } from '../../constants';\nimport { BaseNode } from './base-node';\n/**\n * <zh/> HTML 节点\n *\n * <en/> HTML node\n * @see https://github.com/antvis/G/blob/next/packages/g/src/plugins/EventPlugin.ts\n */\nexport class HTML extends BaseNode {\n    static defaultStyleProps = {\n        size: [160, 80],\n        halo: false,\n        icon: false,\n        label: false,\n        pointerEvents: 'auto',\n    };\n    constructor(options) {\n        super({ ...options, style: Object.assign({}, HTML.defaultStyleProps, options.style) });\n    }\n    rootPointerEvent = new FederatedPointerEvent(null);\n    get eventService() {\n        return this.context.canvas.context.eventService;\n    }\n    get events() {\n        return [\n            CommonEvent.CLICK,\n            CommonEvent.POINTER_DOWN,\n            CommonEvent.POINTER_MOVE,\n            CommonEvent.POINTER_UP,\n            CommonEvent.POINTER_OVER,\n            CommonEvent.POINTER_LEAVE,\n        ];\n    }\n    getDomElement() {\n        return this.getShape('key').getDomElement();\n    }\n    getKeyStyle(attributes) {\n        const style = pick(attributes, ['innerHTML', 'pointerEvents', 'cursor']);\n        const [width, height] = this.getSize(attributes);\n        return { ...style, width, height };\n    }\n    drawKeyShape(attributes, container) {\n        const style = this.getKeyStyle(attributes);\n        const { width = 0, height = 0 } = style;\n        const bounds = this.upsert('key-container', Rect, { width, height, opacity: 0 }, container);\n        return this.upsert('key', GHTML, style, bounds);\n    }\n    connectedCallback() {\n        const element = this.getDomElement();\n        this.events.forEach((eventName) => {\n            // @ts-expect-error assert event is PointerEvent\n            element.addEventListener(eventName, this.forwardEvents);\n        });\n    }\n    attributeChangedCallback(name, oldValue, newValue) {\n        if (name === 'zIndex' && oldValue !== newValue) {\n            this.getDomElement().style.zIndex = newValue;\n        }\n    }\n    destroy() {\n        const element = this.getDomElement();\n        this.events.forEach((eventName) => {\n            // @ts-expect-error assert event is PointerEvent\n            element.removeEventListener(eventName, this.forwardEvents);\n        });\n        super.destroy();\n    }\n    forwardEvents = (nativeEvent) => {\n        const canvas = this.context.canvas;\n        const iCanvas = canvas.context.renderingContext.root.ownerDocument.defaultView;\n        const normalizedEvents = this.normalizeToPointerEvent(nativeEvent, iCanvas);\n        normalizedEvents.forEach((normalizedEvent) => {\n            const event = this.bootstrapEvent(this.rootPointerEvent, normalizedEvent, iCanvas, nativeEvent);\n            canvas.context.eventService.mapEvent(event);\n        });\n    };\n    normalizeToPointerEvent(event, canvas) {\n        const normalizedEvents = [];\n        if (canvas.isTouchEvent(event)) {\n            for (let i = 0; i < event.changedTouches.length; i++) {\n                const touch = event.changedTouches[i];\n                // use changedTouches instead of touches since touchend has no touches\n                // @see https://stackoverflow.com/a/10079076\n                if (isUndefined(touch.button))\n                    touch.button = 0;\n                if (isUndefined(touch.buttons))\n                    touch.buttons = 1;\n                if (isUndefined(touch.isPrimary)) {\n                    touch.isPrimary = event.touches.length === 1 && event.type === 'touchstart';\n                }\n                if (isUndefined(touch.width))\n                    touch.width = touch.radiusX || 1;\n                if (isUndefined(touch.height))\n                    touch.height = touch.radiusY || 1;\n                if (isUndefined(touch.tiltX))\n                    touch.tiltX = 0;\n                if (isUndefined(touch.tiltY))\n                    touch.tiltY = 0;\n                if (isUndefined(touch.pointerType))\n                    touch.pointerType = 'touch';\n                // @see https://developer.mozilla.org/zh-CN/docs/Web/API/Touch/identifier\n                if (isUndefined(touch.pointerId))\n                    touch.pointerId = touch.identifier || 0;\n                if (isUndefined(touch.pressure))\n                    touch.pressure = touch.force || 0.5;\n                if (isUndefined(touch.twist))\n                    touch.twist = 0;\n                if (isUndefined(touch.tangentialPressure))\n                    touch.tangentialPressure = 0;\n                touch.isNormalized = true;\n                touch.type = event.type;\n                normalizedEvents.push(touch);\n            }\n        }\n        else if (canvas.isMouseEvent(event)) {\n            const tempEvent = event;\n            if (isUndefined(tempEvent.isPrimary))\n                tempEvent.isPrimary = true;\n            if (isUndefined(tempEvent.width))\n                tempEvent.width = 1;\n            if (isUndefined(tempEvent.height))\n                tempEvent.height = 1;\n            if (isUndefined(tempEvent.tiltX))\n                tempEvent.tiltX = 0;\n            if (isUndefined(tempEvent.tiltY))\n                tempEvent.tiltY = 0;\n            if (isUndefined(tempEvent.pointerType))\n                tempEvent.pointerType = 'mouse';\n            if (isUndefined(tempEvent.pointerId))\n                tempEvent.pointerId = 1;\n            if (isUndefined(tempEvent.pressure))\n                tempEvent.pressure = 0.5;\n            if (isUndefined(tempEvent.twist))\n                tempEvent.twist = 0;\n            if (isUndefined(tempEvent.tangentialPressure))\n                tempEvent.tangentialPressure = 0;\n            tempEvent.isNormalized = true;\n            normalizedEvents.push(tempEvent);\n        }\n        else {\n            normalizedEvents.push(event);\n        }\n        return normalizedEvents;\n    }\n    transferMouseData(event, nativeEvent) {\n        event.isTrusted = nativeEvent.isTrusted;\n        event.srcElement = nativeEvent.srcElement;\n        event.timeStamp = performance.now();\n        event.type = nativeEvent.type;\n        event.altKey = nativeEvent.altKey;\n        event.metaKey = nativeEvent.metaKey;\n        event.shiftKey = nativeEvent.shiftKey;\n        event.ctrlKey = nativeEvent.ctrlKey;\n        event.button = nativeEvent.button;\n        event.buttons = nativeEvent.buttons;\n        event.client.x = nativeEvent.clientX;\n        event.client.y = nativeEvent.clientY;\n        event.movement.x = nativeEvent.movementX;\n        event.movement.y = nativeEvent.movementY;\n        event.page.x = nativeEvent.pageX;\n        event.page.y = nativeEvent.pageY;\n        event.screen.x = nativeEvent.screenX;\n        event.screen.y = nativeEvent.screenY;\n        event.relatedTarget = null;\n    }\n    bootstrapEvent(event, normalizedEvent, view, nativeEvent) {\n        event.view = view;\n        // @ts-ignore\n        event.originalEvent = null;\n        event.nativeEvent = nativeEvent;\n        event.pointerId = normalizedEvent.pointerId;\n        event.width = normalizedEvent.width;\n        event.height = normalizedEvent.height;\n        event.isPrimary = normalizedEvent.isPrimary;\n        event.pointerType = normalizedEvent.pointerType;\n        event.pressure = normalizedEvent.pressure;\n        event.tangentialPressure = normalizedEvent.tangentialPressure;\n        event.tiltX = normalizedEvent.tiltX;\n        event.tiltY = normalizedEvent.tiltY;\n        event.twist = normalizedEvent.twist;\n        this.transferMouseData(event, normalizedEvent);\n        const { x, y } = this.getViewportXY(normalizedEvent);\n        event.viewport.x = x;\n        event.viewport.y = y;\n        const [canvasX, canvasY] = this.context.canvas.getCanvasByViewport([x, y]);\n        event.canvas.x = canvasX;\n        event.canvas.y = canvasY;\n        event.global.copyFrom(event.canvas);\n        event.offset.copyFrom(event.canvas);\n        event.isTrusted = nativeEvent.isTrusted;\n        if (event.type === 'pointerleave') {\n            event.type = 'pointerout';\n        }\n        return event;\n    }\n    getViewportXY(nativeEvent) {\n        let x;\n        let y;\n        const { offsetX, offsetY, clientX, clientY } = nativeEvent;\n        if (this.context.canvas.context.config.supportsCSSTransform && !isNil(offsetX) && !isNil(offsetY)) {\n            x = offsetX;\n            y = offsetY;\n        }\n        else {\n            const point = this.eventService.client2Viewport({ x: clientX, y: clientY });\n            x = point.x;\n            y = point.y;\n        }\n        return { x, y };\n    }\n    onframe() {\n        super.onframe();\n        // sync opacity\n        const { opacity } = this.attributes;\n        this.getDomElement().style.opacity = `${opacity}`;\n    }\n}\n//# sourceMappingURL=html.js.map","import { Image as GImage, Rect as GRect } from '@antv/g';\nimport { ICON_SIZE_RATIO } from '../../constants/element';\nimport { subStyleProps } from '../../utils/prefix';\nimport { mergeOptions } from '../../utils/style';\nimport { add } from '../../utils/vector';\nimport { BaseNode } from './base-node';\n/**\n * <zh/> 图片节点\n *\n * <en/> Image node\n */\nexport class Image extends BaseNode {\n    static defaultStyleProps = {\n        size: 32,\n    };\n    constructor(options) {\n        super(mergeOptions({ style: Image.defaultStyleProps }, options));\n    }\n    getKeyStyle(attributes) {\n        const [width, height] = this.getSize(attributes);\n        const { fillOpacity, opacity = fillOpacity, ...keyStyle } = super.getKeyStyle(attributes);\n        return {\n            opacity,\n            ...keyStyle,\n            width,\n            height,\n            x: -width / 2,\n            y: -height / 2,\n        };\n    }\n    getHaloStyle(attributes) {\n        if (attributes.halo === false)\n            return false;\n        const { fill: keyStyleFill, stroke: keyStyleStroke, ...keyStyle } = this.getShape('key').attributes;\n        const haloStyle = subStyleProps(this.getGraphicStyle(attributes), 'halo');\n        const haloLineWidth = Number(haloStyle.lineWidth);\n        const [width, height] = add(this.getSize(attributes), [haloLineWidth, haloLineWidth]);\n        const fill = 'transparent';\n        return { ...haloStyle, width, height, fill, x: -width / 2, y: -height / 2 };\n    }\n    getIconStyle(attributes) {\n        const style = super.getIconStyle(attributes);\n        const [width, height] = this.getSize(attributes);\n        return style\n            ? {\n                width: width * ICON_SIZE_RATIO,\n                height: height * ICON_SIZE_RATIO,\n                ...style,\n            }\n            : false;\n    }\n    drawKeyShape(attributes, container) {\n        return this.upsert('key', GImage, this.getKeyStyle(attributes), container);\n    }\n    drawHaloShape(attributes, container) {\n        this.upsert('halo', GRect, this.getHaloStyle(attributes), container);\n    }\n}\n//# sourceMappingURL=image.js.map","import { isEmpty } from '@antv/util';\nimport { ICON_SIZE_RATIO } from '../../constants/element';\nimport { getIncircleRadius, getTriangleCenter } from '../../utils/bbox';\nimport { getPortXYByPlacement, getTrianglePoints, getTrianglePorts } from '../../utils/element';\nimport { subStyleProps } from '../../utils/prefix';\nimport { mergeOptions } from '../../utils/style';\nimport { Polygon } from '../shapes/polygon';\n/**\n * <zh/> 三角形节点\n *\n * <en/> Triangle node\n */\nexport class Triangle extends Polygon {\n    static defaultStyleProps = {\n        size: 40,\n        direction: 'up',\n    };\n    constructor(options) {\n        super(mergeOptions({ style: Triangle.defaultStyleProps }, options));\n    }\n    getPoints(attributes) {\n        const { direction } = attributes;\n        const [width, height] = this.getSize(attributes);\n        return getTrianglePoints(width, height, direction);\n    }\n    getPortXY(attributes, style) {\n        const { direction } = attributes;\n        const { placement = 'top' } = style;\n        const bbox = this.getShape('key').getLocalBounds();\n        const [width, height] = this.getSize(attributes);\n        const ports = getTrianglePorts(width, height, direction);\n        return getPortXYByPlacement(bbox, placement, ports, false);\n    }\n    // icon 处于内切三角形的重心\n    // icon is at the centroid of the triangle\n    getIconStyle(attributes) {\n        const { icon, iconText, iconSrc, direction } = attributes;\n        if (icon === false || isEmpty(iconText || iconSrc))\n            return false;\n        const iconStyle = subStyleProps(this.getGraphicStyle(attributes), 'icon');\n        const bbox = this.getShape('key').getLocalBounds();\n        const [x, y] = getTriangleCenter(bbox, direction);\n        const size = getIncircleRadius(bbox, direction) * 2 * ICON_SIZE_RATIO;\n        return {\n            x,\n            y,\n            width: size,\n            height: size,\n            ...iconStyle,\n        };\n    }\n}\n//# sourceMappingURL=triangle.js.map","import { get, isString, set } from '@antv/util';\nimport { BaseCombo, BaseEdge, BaseNode } from '../elements';\nimport { getBBoxHeight, getBBoxWidth } from './bbox';\nimport { isPoint } from './is';\nimport { findNearestPoints, getEllipseIntersectPoint } from './point';\nimport { getXYByPlacement } from './position';\n/**\n * <zh/> 判断是否是 Node 的实例\n *\n * <en/> Judge whether the instance is Node\n * @param shape - <zh/> 实例 | <en/> instance\n * @returns <zh/> 是否是 Node 的实例 | <en/> whether the instance is Node\n */\nexport function isNode(shape) {\n    return shape instanceof BaseNode && shape.type === 'node';\n}\n/**\n * <zh/> 判断是否是 Edge 的实例\n *\n * <en/> Judge whether the instance is Edge\n * @param shape - <zh/> 实例 | <en/> instance\n * @returns <zh/> 是否是 Edge 的实例 | <en/> whether the instance is Edge\n */\nexport function isEdge(shape) {\n    return shape instanceof BaseEdge;\n}\n/**\n * <zh/> 判断是否是 Combo 的实例\n *\n * <en/> Judge whether the instance is Combo\n * @param shape - <zh/> 实例 | <en/> instance\n * @returns <zh/> 是否是 Combo 的实例 | <en/> whether the instance is Combo\n */\nexport function isCombo(shape) {\n    return shape instanceof BaseCombo;\n}\n/**\n * <zh/> 判断是否是 Element 的实例\n *\n * <en/> Judge whether the instance is Element\n * @param shape - <zh/> 实例 | <en/> instance\n * @returns <zh/> 是否是 Element 的实例 | <en/> whether the instance is Element\n */\nexport function isElement(shape) {\n    return isNode(shape) || isEdge(shape) || isCombo(shape);\n}\n/**\n * <zh/> 判断两个节点是否相同\n *\n * <en/> Whether the two nodes are the same\n * @param node1 - <zh/> 节点1 | <en/> Node1\n * @param node2 - <zh/> 节点2 | <en/> Node2\n * @returns <zh/> 是否相同 | <en/> Whether the same\n */\nexport function isSameNode(node1, node2) {\n    if (!node1 || !node2)\n        return false;\n    return node1 === node2;\n}\nconst PORT_MAP = {\n    top: [0.5, 0],\n    right: [1, 0.5],\n    bottom: [0.5, 1],\n    left: [0, 0.5],\n    default: [0.5, 0.5],\n};\n/**\n * Get the Port x, y by `position`.\n * @param bbox - BBox of element.\n * @param placement - The position relative with element.\n * @param ports - The map of position.\n * @param isRelative - Whether the position in MAP is relative.\n * @returns [x, y]\n */\nexport function getPortXYByPlacement(bbox, placement, ports = PORT_MAP, isRelative = true) {\n    const DEFAULT = [0.5, 0.5];\n    const p = isString(placement) ? get(ports, placement.toLocaleLowerCase(), DEFAULT) : placement;\n    if (!isRelative && isString(placement))\n        return p;\n    const [x, y] = p || DEFAULT;\n    return [bbox.min[0] + getBBoxWidth(bbox) * x, bbox.min[1] + getBBoxHeight(bbox) * y];\n}\n/**\n * <zh/> 获取节点上的所有连接桩\n *\n * <en/> Get all ports\n * @param node - <zh/> 节点 | <en/> Node\n * @returns <zh/> 所有连接桩 | <en/> All Ports\n */\nexport function getAllPorts(node) {\n    if (!node)\n        return {};\n    // 1. 需要绘制的连接桩 | Get the ports that need to be drawn\n    const ports = node.getPorts();\n    // 2. 不需要额外绘制的连接桩 | Get the ports that do not need to be drawn\n    const portsStyle = node.attributes.ports || [];\n    portsStyle.forEach((portStyle, i) => {\n        const { key, placement } = portStyle;\n        if (isSimplePort(portStyle)) {\n            ports[key || i] ||= getXYByPlacement(node.getShape('key').getBounds(), placement);\n        }\n    });\n    return ports;\n}\n/**\n * <zh/> 是否为简单连接桩，如果是则不会额外绘制图形\n *\n * <en/> Whether it is a simple port, which will not draw additional graphics\n * @param portStyle - <zh/> 连接桩样式 | <en/> Port Style\n * @returns <zh/> 是否是简单连接桩 | <en/> Whether it is a simple port\n */\nexport function isSimplePort(portStyle) {\n    const { r } = portStyle;\n    return !r || Number(r) === 0;\n}\n/**\n * <zh/> 获取连接桩的位置\n *\n * <en/> Get the position of the port\n * @param port - <zh/> 连接桩 | <en/> Port\n * @returns <zh/> 连接桩的位置 | <en/> Port Position\n */\nexport function getPortPosition(port) {\n    return isPoint(port) ? port : port.getPosition();\n}\n/**\n * <zh/> 查找起始连接桩和目标连接桩\n *\n * <en/> Find the source port and target port\n * @param sourceNode - <zh/> 起始节点 | <en/> Source Node\n * @param targetNode - <zh/> 目标节点 | <en/> Target Node\n * @param sourcePortKey - <zh/> 起始连接桩的 key | <en/> Source Port Key\n * @param targetPortKey - <zh/> 目标连接桩的 key | <en/> Target Port Key\n * @returns <zh/> 起始连接桩和目标连接桩 | <en/> Source Port and Target Port\n */\nexport function findPorts(sourceNode, targetNode, sourcePortKey, targetPortKey) {\n    const sourcePort = findPort(sourceNode, targetNode, sourcePortKey, targetPortKey);\n    const targetPort = findPort(targetNode, sourceNode, targetPortKey, sourcePortKey);\n    return [sourcePort, targetPort];\n}\n/**\n * <zh/> 查找节点上的最有可能连接的连接桩\n *\n * <en/> Find the most likely connected port on the node\n * @remarks\n * 1. If `portKey` is specified, return the port.\n * 2. If `portKey` is not specified, return the port closest to the opposite connection points.\n * 3. If the node has no ports, return undefined.\n * @param node - <zh/> 节点 | <en/> Node\n * @param oppositeNode - <zh/> 对端节点 | <en/> Opposite Node\n * @param portKey - <zh/> 连接桩的 key | <en/> Port Key\n * @param oppositePortKey - <zh/> 对端连接桩的 key | <en/> Opposite Port Key\n * @returns <zh/> 连接桩 | <en/> Port\n */\nexport function findPort(node, oppositeNode, portKey, oppositePortKey) {\n    const portsMap = getAllPorts(node);\n    if (portKey)\n        return portsMap[portKey];\n    const ports = Object.values(portsMap);\n    if (ports.length === 0)\n        return undefined;\n    const positions = ports.map((port) => getPortPosition(port));\n    const oppositePositions = findConnectionPoints(oppositeNode, oppositePortKey);\n    const [nearestPosition] = findNearestPoints(positions, oppositePositions);\n    return ports.find((port) => getPortPosition(port) === nearestPosition);\n}\n/**\n * <zh/> 寻找节点上所有可能的连接点\n *\n * <en/> Find all possible connection points on the node\n * @remarks\n * 1. If `portKey` is specified, return the position of the port.\n * 2. If `portKey` is not specified, return positions of all ports.\n * 3. If the node has no ports, return the center of the node.\n * @param node - <zh/> 节点 | <en/> Node\n * @param portKey\n * @returns <zh/> 连接点 | <en/> Connection Point\n */\nfunction findConnectionPoints(node, portKey) {\n    const allPortsMap = getAllPorts(node);\n    if (portKey)\n        return [getPortPosition(allPortsMap[portKey])];\n    const oppositePorts = Object.values(allPortsMap);\n    return oppositePorts.length > 0 ? oppositePorts.map((port) => getPortPosition(port)) : [node.getCenter()];\n}\n/**\n * <zh/> 获取连接点, 即从节点或连接桩中心到另一端的连线在节点或连接桩边界上的交点\n *\n * <en/> Get the connection point\n * @param node - <zh/> 节点或连接桩 | <en/> Node or Port\n * @param opposite - <zh/> 对端的具体点或节点 | <en/> Opposite Point or Node\n * @returns <zh/> 连接点 | <en/> Connection Point\n */\nexport function getConnectionPoint(node, opposite) {\n    return isCombo(node) || isNode(node)\n        ? getNodeConnectionPoint(node, opposite)\n        : getPortConnectionPoint(node, opposite);\n}\n/**\n * <zh/> 获取连接桩的连接点，即从连接桩中心到另一端的连线在连接桩边界上的交点\n *\n * <en/> Get the connection point of the port\n * @param port - <zh/> 连接桩 | <en/> Port\n * @param opposite - <zh/> 对端的具体点或节点 | <en/> Opposite Point or Node\n * @param oppositePort - <zh/> 对端连接桩 | <en/> Opposite Port\n * @returns <zh/> 连接桩的连接点 | <en/> Port Point\n */\nexport function getPortConnectionPoint(port, opposite) {\n    if (!port || !opposite)\n        return [0, 0, 0];\n    if (isPoint(port))\n        return port;\n    // 1. linkToCenter 为 true，则返回连接桩的中心 | If linkToCenter is true, return the center of the port\n    if (port.attributes.linkToCenter)\n        return port.getPosition();\n    // 2. 推导对端的具体点：如果是连接桩，则返回连接桩的中心；如果是节点，则返回节点的中心；如果是具体点则直接返回\n    // 2. Derive the specific point of the opposite: if it is a port, return the center of the port; if it is a node, return the center of the node; if it is a specific point, return directly\n    const oppositePosition = isPoint(opposite)\n        ? opposite\n        : isNode(opposite)\n            ? opposite.getCenter()\n            : opposite.getPosition();\n    // 3. 返回连接桩边界上的交点 | Return the intersection point on the port boundary\n    return getEllipseIntersectPoint(oppositePosition, port.getBounds());\n}\n/**\n * <zh/> 获取节点的连接点\n *\n * <en/> Get the Node Connection Point\n * @param node - <zh/> 节点 | <en/> Node\n * @param opposite - <zh/> 对端的具体点或节点 | <en/> Opposite Point or Node\n * @param oppositePort - <zh/> 对端连接桩 | <en/> Opposite Port\n * @returns <zh/> 节点的连接点 | <en/> Node Point\n */\nexport function getNodeConnectionPoint(node, opposite) {\n    if (!node || !opposite)\n        return [0, 0, 0];\n    const oppositePosition = isPoint(opposite)\n        ? opposite\n        : isNode(opposite)\n            ? opposite.getCenter()\n            : opposite.getPosition();\n    return node.getIntersectPoint(oppositePosition) || node.getCenter();\n}\n/**\n * Get the Text style by `position`.\n * @param bbox - BBox of element.\n * @param placement - The position relative with element.\n * @param offsetX - The offset x.\n * @param offsetY - The offset y.\n * @param isReverseBaseline - Whether reverse the baseline.\n * @returns Partial<TextStyleProps>\n */\nexport function getTextStyleByPlacement(bbox, placement = 'bottom', offsetX = 0, offsetY = 0, isReverseBaseline = false) {\n    const direction = placement.split('-');\n    const [x, y] = getXYByPlacement(bbox, placement);\n    const textAlign = direction.includes('left') ? 'right' : direction.includes('right') ? 'left' : 'center';\n    let textBaseline = direction.includes('top')\n        ? 'bottom'\n        : direction.includes('bottom')\n            ? 'top'\n            : 'middle';\n    if (isReverseBaseline) {\n        textBaseline = textBaseline === 'top' ? 'bottom' : textBaseline === 'bottom' ? 'top' : textBaseline;\n    }\n    return {\n        transform: `translate(${x + offsetX}, ${y + offsetY})`,\n        textBaseline,\n        textAlign,\n    };\n}\n/**\n * <zh/> 获取五角星的顶点\n *\n * <en/> Get Star Points\n * @param outerR - <zh/> 外半径 | <en/> outer radius\n * @param innerR - <zh/> 内半径 | <en/> inner radius\n * @returns <zh/> 五角星的顶点 | <en/> Star Points\n */\nexport function getStarPoints(outerR, innerR) {\n    return [\n        [0, -outerR],\n        [innerR * Math.cos((3 * Math.PI) / 10), -innerR * Math.sin((3 * Math.PI) / 10)],\n        [outerR * Math.cos(Math.PI / 10), -outerR * Math.sin(Math.PI / 10)],\n        [innerR * Math.cos(Math.PI / 10), innerR * Math.sin(Math.PI / 10)],\n        [outerR * Math.cos((3 * Math.PI) / 10), outerR * Math.sin((3 * Math.PI) / 10)],\n        [0, innerR],\n        [-outerR * Math.cos((3 * Math.PI) / 10), outerR * Math.sin((3 * Math.PI) / 10)],\n        [-innerR * Math.cos(Math.PI / 10), innerR * Math.sin(Math.PI / 10)],\n        [-outerR * Math.cos(Math.PI / 10), -outerR * Math.sin(Math.PI / 10)],\n        [-innerR * Math.cos((3 * Math.PI) / 10), -innerR * Math.sin((3 * Math.PI) / 10)],\n    ];\n}\n/**\n * Get Star Port Point.\n * @param outerR - outer radius\n * @param innerR - inner radius\n * @returns Port points for Star.\n */\nexport function getStarPorts(outerR, innerR) {\n    const r = {};\n    r['top'] = [0, -outerR];\n    r['left'] = [-outerR * Math.cos(Math.PI / 10), -outerR * Math.sin(Math.PI / 10)];\n    r['left-bottom'] = [-outerR * Math.cos((3 * Math.PI) / 10), outerR * Math.sin((3 * Math.PI) / 10)];\n    r['bottom'] = [0, innerR];\n    r['right-bottom'] = [outerR * Math.cos((3 * Math.PI) / 10), outerR * Math.sin((3 * Math.PI) / 10)];\n    r['right'] = r['default'] = [outerR * Math.cos(Math.PI / 10), -outerR * Math.sin(Math.PI / 10)];\n    return r;\n}\n/**\n * <zh/> 获取三角形的顶点\n *\n * <en/> Get the points of a triangle\n * @param width - <zh/> 宽度 | <en/> width\n * @param height - <zh/> 高度 | <en/> height\n * @param direction - <zh/> 三角形的方向 | <en/> The direction of the triangle\n * @returns <zh/> 矩形的顶点 | <en/> The points of a rectangle\n */\nexport function getTrianglePoints(width, height, direction) {\n    const halfHeight = height / 2;\n    const halfWidth = width / 2;\n    const MAP = {\n        up: [\n            [-halfWidth, halfHeight],\n            [halfWidth, halfHeight],\n            [0, -halfHeight],\n        ],\n        left: [\n            [-halfWidth, 0],\n            [halfWidth, halfHeight],\n            [halfWidth, -halfHeight],\n        ],\n        right: [\n            [-halfWidth, halfHeight],\n            [-halfWidth, -halfHeight],\n            [halfWidth, 0],\n        ],\n        down: [\n            [-halfWidth, -halfHeight],\n            [halfWidth, -halfHeight],\n            [0, halfHeight],\n        ],\n    };\n    return MAP[direction] || MAP['up'];\n}\n/**\n * <zh/> 获取三角形的连接桩\n *\n * <en/> Get the Ports of Triangle.\n * @param width - <zh/> 宽度 | <en/> width\n * @param height - <zh/> 高度 | <en/> height\n * @param direction - <zh/> 三角形的方向 | <en/> The direction of the triangle\n * @returns <zh/> 三角形的连接桩 | <en/> The Ports of Triangle\n */\nexport function getTrianglePorts(width, height, direction) {\n    const halfHeight = height / 2;\n    const halfWidth = width / 2;\n    const ports = {};\n    if (direction === 'down') {\n        ports['bottom'] = ports['default'] = [0, halfHeight];\n        ports['right'] = [halfWidth, -halfHeight];\n        ports['left'] = [-halfWidth, -halfHeight];\n    }\n    else if (direction === 'left') {\n        ports['top'] = [halfWidth, -halfHeight];\n        ports['bottom'] = [halfWidth, halfHeight];\n        ports['left'] = ports['default'] = [-halfWidth, 0];\n    }\n    else if (direction === 'right') {\n        ports['top'] = [-halfWidth, -halfHeight];\n        ports['bottom'] = [-halfWidth, halfHeight];\n        ports['right'] = ports['default'] = [halfWidth, 0];\n    }\n    else {\n        //up\n        ports['left'] = [-halfWidth, halfHeight];\n        ports['top'] = ports['default'] = [0, -halfHeight];\n        ports['right'] = [halfWidth, halfHeight];\n    }\n    return ports;\n}\n/**\n * <zh/> 获取矩形的顶点\n *\n * <en/> Get the points of a rectangle\n * @param width - <zh/> 宽度 | <en/> width\n * @param height - <zh/> 高度 | <en/> height\n * @returns <zh/> 矩形的顶点 | <en/> The points of a rectangle\n */\nexport function getBoundingPoints(width, height) {\n    return [\n        [width / 2, -height / 2],\n        [width / 2, height / 2],\n        [-width / 2, height / 2],\n        [-width / 2, -height / 2],\n    ];\n}\n/**\n * Get Diamond PathArray.\n * @param width - diamond width\n * @param height - diamond height\n * @returns The PathArray for G\n */\nexport function getDiamondPoints(width, height) {\n    return [\n        [0, -height / 2],\n        [width / 2, 0],\n        [0, height / 2],\n        [-width / 2, 0],\n    ];\n}\n/**\n * <zh/> 元素是否可见\n *\n * <en/> Whether the element is visible\n * @param element - <zh/> 元素 | <en/> element\n * @returns <zh/> 是否可见 | <en/> whether the element is visible\n */\nexport function isVisible(element) {\n    return get(element, ['style', 'visibility']) !== 'hidden';\n}\n/**\n * <zh/> 更新图形样式\n *\n * <en/> Update shape style\n * @param shape - <zh/> 图形 | <en/> shape\n * @param style - <zh/> 样式 | <en/> style\n */\nexport function updateStyle(shape, style) {\n    if ('update' in shape)\n        shape.update(style);\n    else\n        shape.attr(style);\n}\n/**\n * Get Hexagon PathArray\n * @param outerR - <zh/> 外接圆半径 | <en/> the  radius of circumscribed circle\n *  @returns The PathArray for G\n */\nexport function getHexagonPoints(outerR) {\n    return [\n        [0, outerR],\n        [(outerR * Math.sqrt(3)) / 2, outerR / 2],\n        [(outerR * Math.sqrt(3)) / 2, -outerR / 2],\n        [0, -outerR],\n        [(-outerR * Math.sqrt(3)) / 2, -outerR / 2],\n        [(-outerR * Math.sqrt(3)) / 2, outerR / 2],\n    ];\n}\n/**\n * <zh/> 将图形标记为即将销毁，用于在 element controller 中识别要销毁的元素\n *\n * <en/> Mark the element as to be destroyed, used to identify the element to be destroyed in the element controller\n * @param element - <zh/> 图形 | <en/> element\n */\nexport function markToBeDestroyed(element) {\n    set(element, '__to_be_destroyed__', true);\n}\n/**\n * <zh/> 判断图形是否即将销毁\n *\n * <en/> Determine whether the element is to be destroyed\n * @param element - <zh/> 图形 | <en/> element\n * @returns <zh/> 是否即将销毁 | <en/> whether the element is to be destroyed\n */\nexport function isToBeDestroyed(element) {\n    return get(element, '__to_be_destroyed__', false);\n}\n//# sourceMappingURL=element.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { AABB } from '@antv/g';\nimport { isFunction } from '@antv/util';\nimport { COMBO_KEY } from '../../constants';\nimport { getBBoxHeight, getBBoxWidth, getCombinedBBox, getExpandedBBox } from '../../utils/bbox';\nimport { idOf } from '../../utils/id';\nimport { parsePadding } from '../../utils/padding';\nimport { getXYByPlacement, positionOf } from '../../utils/position';\nimport { subStyleProps } from '../../utils/prefix';\nimport { parseSize } from '../../utils/size';\nimport { mergeOptions } from '../../utils/style';\nimport { add, divide } from '../../utils/vector';\nimport { effect } from '../effect';\nimport { BaseNode } from '../nodes';\nimport { Icon } from '../shapes';\n/**\n * <zh/> 组合元素的基类\n *\n * <en/> Base class of combo\n * @remarks\n * <zh/> 自定义组合时，推荐使用这个类作为基类。这样，用户只需要专注于实现 keyShape 的绘制逻辑\n *\n * <en/> When customizing a combo, it is recommended to use this class as the base class. In this way, users only need to focus on the logic of drawing keyShape\n */\nexport class BaseCombo extends BaseNode {\n    type = 'combo';\n    static defaultStyleProps = {\n        childrenNode: [],\n        droppable: true,\n        draggable: true,\n        collapsed: false,\n        collapsedSize: 32,\n        collapsedMarker: true,\n        collapsedMarkerZIndex: 1,\n        collapsedMarkerFontSize: 12,\n        collapsedMarkerTextAlign: 'center',\n        collapsedMarkerTextBaseline: 'middle',\n        collapsedMarkerType: 'child-count',\n    };\n    constructor(options) {\n        super(mergeOptions({ style: BaseCombo.defaultStyleProps }, options));\n        this.updateComboPosition(this.parsedAttributes);\n    }\n    getKeySize(attributes) {\n        const { collapsed, childrenNode = [] } = attributes;\n        if (childrenNode.length === 0)\n            return this.getEmptyKeySize(attributes);\n        return collapsed ? this.getCollapsedKeySize(attributes) : this.getExpandedKeySize(attributes);\n    }\n    getEmptyKeySize(attributes) {\n        const { padding, collapsedSize } = attributes;\n        const [top, right, bottom, left] = parsePadding(padding);\n        return add(parseSize(collapsedSize), [left + right, top + bottom, 0]);\n    }\n    getCollapsedKeySize(attributes) {\n        return parseSize(attributes.collapsedSize);\n    }\n    getExpandedKeySize(attributes) {\n        const contentBBox = this.getContentBBox(attributes);\n        return [getBBoxWidth(contentBBox), getBBoxHeight(contentBBox), 0];\n    }\n    getContentBBox(attributes) {\n        const { context, childrenNode = [], padding } = attributes;\n        const children = childrenNode.map((id) => context.element.getElement(id)).filter(Boolean);\n        if (children.length === 0) {\n            const bbox = new AABB();\n            const { x = 0, y = 0, size } = attributes;\n            const [width, height] = parseSize(size);\n            bbox.setMinMax([x - width / 2, y - height / 2, 0], [x + width / 2, y + height / 2, 0]);\n            return bbox;\n        }\n        const childrenBBox = getCombinedBBox(children.map((child) => child.getBounds()));\n        if (!padding)\n            return childrenBBox;\n        return getExpandedBBox(childrenBBox, padding);\n    }\n    drawCollapsedMarkerShape(attributes, container) {\n        this.upsert('collapsed-marker', Icon, this.getCollapsedMarkerStyle(attributes), container);\n    }\n    getCollapsedMarkerStyle(attributes) {\n        if (!attributes.collapsed || !attributes.collapsedMarker)\n            return false;\n        const { type, ...collapsedMarkerStyle } = subStyleProps(this.getGraphicStyle(attributes), 'collapsedMarker');\n        const keyShape = this.getShape('key');\n        const [x, y] = getXYByPlacement(keyShape.getLocalBounds(), 'center');\n        const style = { ...collapsedMarkerStyle, x, y };\n        if (type) {\n            const text = this.getCollapsedMarkerText(type, attributes);\n            Object.assign(style, { text });\n        }\n        return style;\n    }\n    getCollapsedMarkerText(type, attributes) {\n        const { context, childrenData = [] } = attributes;\n        const { model } = context;\n        if (type === 'descendant-count')\n            return model.getDescendantsData(this.id).length.toString();\n        if (type === 'child-count')\n            return childrenData.length.toString();\n        if (type === 'node-count')\n            return model\n                .getDescendantsData(this.id)\n                .filter((datum) => model.getElementType(idOf(datum)) === 'node')\n                .length.toString();\n        if (isFunction(type))\n            return type(childrenData);\n        return '';\n    }\n    getComboZIndex(attributes) {\n        const ancestors = this.context.model.getAncestorsData(this.id, COMBO_KEY) || [];\n        return ancestors.length;\n    }\n    getComboPosition(attributes) {\n        const { x = 0, y = 0, collapsed, context, childrenData = [] } = attributes;\n        if (childrenData.length === 0)\n            return [+x, +y, 0];\n        if (collapsed) {\n            const { model } = context;\n            const descendants = model.getDescendantsData(this.id).filter((datum) => !model.isCombo(idOf(datum)));\n            if (descendants.length > 0) {\n                // combo 被收起，返回平均中心位置 / combo is collapsed, return the average center position\n                const totalPosition = descendants.reduce((acc, datum) => add(acc, positionOf(datum)), [0, 0, 0]);\n                return divide(totalPosition, descendants.length);\n            }\n            // empty combo\n            return [+x, +y, 0];\n        }\n        return this.getContentBBox(attributes).center;\n    }\n    getComboStyle(attributes) {\n        const { zIndex = this.getComboZIndex(attributes) } = attributes;\n        const [x, y] = this.getComboPosition(attributes);\n        // x/y will be used to calculate position later.\n        return { x, y, transform: `translate(${x}, ${y})`, zIndex };\n    }\n    updateComboPosition(attributes) {\n        const comboStyle = this.getComboStyle(attributes);\n        Object.assign(this.style, comboStyle);\n        // Sync combo position to model\n        const { x, y } = comboStyle;\n        this.context.model.syncComboDatum({ id: this.id, style: { x, y } });\n    }\n    render(attributes, container = this) {\n        super.render(attributes, container);\n        // collapsed marker\n        this.drawCollapsedMarkerShape(attributes, container);\n    }\n    update(attr = {}) {\n        super.update(attr);\n        this.updateComboPosition(this.parsedAttributes);\n    }\n    onframe() {\n        super.onframe();\n        // 收起状态下，通过动画来更新位置\n        // Update position through animation in collapsed state\n        if (!this.attributes.collapsed)\n            this.updateComboPosition(this.parsedAttributes);\n        this.drawKeyShape(this.parsedAttributes, this);\n    }\n    animate(keyframes, options) {\n        const animation = super.animate(this.attributes.collapsed\n            ? keyframes\n            : // 如果当前 combo 是展开状态，则动画不受 x, y, z, transform 影响，仅由子元素决定位置\n                // If the current combo is in the expanded state, the animation is not affected by x, y, z, transform, and the position is determined only by the child elements\n                keyframes.map(({ x, y, z, transform, ...keyframe }) => keyframe), options);\n        if (!animation)\n            return animation;\n        return new Proxy(animation, {\n            set: (target, propKey, value) => {\n                if (propKey === 'currentTime')\n                    Promise.resolve().then(() => this.onframe());\n                return Reflect.set(target, propKey, value);\n            },\n        });\n    }\n}\n__decorate([\n    effect((self, attributes) => self.getCollapsedMarkerStyle(attributes))\n], BaseCombo.prototype, \"drawCollapsedMarkerShape\", null);\n//# sourceMappingURL=base-combo.js.map","import isArrayLike from './is-array-like';\nvar filter = function (arr, func) {\n    if (!isArrayLike(arr)) {\n        return arr;\n    }\n    var result = [];\n    for (var index = 0; index < arr.length; index++) {\n        var value = arr[index];\n        if (func(value, index)) {\n            result.push(value);\n        }\n    }\n    return result;\n};\nexport default filter;\n//# sourceMappingURL=filter.js.map","import isArrayLike from './is-array-like';\nvar contains = function (arr, value) {\n    if (!isArrayLike(arr)) {\n        return false;\n    }\n    return arr.indexOf(value) > -1;\n};\nexport default contains;\n//# sourceMappingURL=contains.js.map","import filter from './filter';\nimport contains from './contains';\n/**\n * Flattens `array` a single level deep.\n *\n * @param {Array} arr The array to inspect.\n * @param {Array} values The values to exclude.\n * @return {Array} Returns the new array of filtered values.\n * @example\n * difference([2, 1], [2, 3]);  // => [1]\n */\nvar difference = function (arr, values) {\n    if (values === void 0) { values = []; }\n    return filter(arr, function (value) { return !contains(values, value); });\n};\nexport default difference;\n//# sourceMappingURL=difference.js.map","import { difference, isEqual } from '@antv/util';\nimport { getBBoxHeight, getBBoxWidth, getCombinedBBox, getNearestPointToPoint, getNodeBBox, isPointInBBox, isPointOnBBoxBoundary, isPointOutsideBBox, } from '../bbox';\nimport { isOrthogonal, moveTo, round } from '../point';\nimport { angle, distance, subtract, toVector3 } from '../vector';\n/**\n * <zh/> 获取两点之间的直角线段路径\n *\n * <en/> Get the orthogonal line segment path between two points\n * @param sourcePoint - <zh/> 起始点 | <en/> start point\n * @param targetPoint - <zh/> 终止点 | <en/> end point\n * @param sourceBBox - <zh/> 起始节点的包围盒 | <en/> bounding box of the start node\n * @param targetBBox - <zh/> 终止节点的包围盒 | <en/> bounding box of the end node\n * @param controlPoints - <zh/> 控制点 | <en/> control points\n * @param padding - <zh/> 内边距 | <en/> padding\n * @returns <zh/> 直角线段路径 | <en/> orthogonal line segment path\n */\nexport function orth(sourcePoint, targetPoint, sourceBBox, targetBBox, controlPoints, padding) {\n    const points = [sourcePoint, ...controlPoints, targetPoint];\n    // direction of previous route segment\n    let direction = null;\n    const result = [];\n    for (let fromIdx = 0, len = points.length; fromIdx < len - 1; fromIdx++) {\n        const toIdx = fromIdx + 1;\n        const from = points[fromIdx];\n        const to = points[toIdx];\n        const isOrth = isOrthogonal(from, to);\n        let route = null;\n        if (fromIdx === 0) {\n            if (toIdx === len - 1) {\n                // source -> target\n                if (sourceBBox.intersects(targetBBox)) {\n                    route = insideNode(from, to, sourceBBox, targetBBox);\n                }\n                else if (!isOrth) {\n                    route = nodeToNode(from, to, sourceBBox, targetBBox);\n                }\n            }\n            else {\n                // source -> point\n                if (isPointInBBox(to, sourceBBox)) {\n                    route = insideNode(from, to, sourceBBox, getNodeBBox(to, padding), direction);\n                }\n                else if (!isOrth) {\n                    route = nodeToPoint(from, to, sourceBBox);\n                }\n            }\n        }\n        else if (toIdx === len - 1) {\n            // point -> target\n            if (isPointInBBox(from, targetBBox)) {\n                route = insideNode(from, to, getNodeBBox(from, padding), targetBBox, direction);\n            }\n            else if (!isOrth) {\n                route = pointToNode(from, to, targetBBox, direction);\n            }\n        }\n        else if (!isOrth) {\n            // point -> point\n            route = pointToPoint(from, to, direction);\n        }\n        // set direction for next iteration\n        if (route) {\n            result.push(...route.points);\n            direction = route.direction;\n        }\n        else {\n            // orthogonal route and not looped\n            direction = getDirection(from, to);\n        }\n        if (toIdx < len - 1)\n            result.push(to);\n    }\n    return result;\n}\n/**\n * Direction to opposites direction map\n */\nconst opposites = {\n    N: 'S',\n    S: 'N',\n    W: 'E',\n    E: 'W',\n};\n/**\n * Direction to radians map\n */\nconst radians = {\n    N: -Math.PI / 2,\n    S: Math.PI / 2,\n    E: 0,\n    W: Math.PI,\n};\n/**\n * <zh/> 获取两点之间的方向，从 `from` 到 `to` 的方向\n *\n * <en/> Get the direction between two points, the direction from `from` to `to`\n * @param from - <zh/> 起始点 | <en/> start point\n * @param to - <zh/> 终止点 | <en/> end point\n * @returns <zh/> 方向 | <en/> direction\n */\nexport function getDirection(from, to) {\n    const [fx, fy] = from;\n    const [tx, ty] = to;\n    if (fx === tx) {\n        return fy > ty ? 'N' : 'S';\n    }\n    if (fy === ty) {\n        return fx > tx ? 'W' : 'E';\n    }\n    return null;\n}\n/**\n * <zh/> 获取包围盒的尺寸，根据方向返回宽度或者高度\n *\n * <en/> Get the size of the bounding box, return the width or height according to the direction\n * @param bbox - <zh/> 包围盒 | <en/> bounding box\n * @param direction - <zh/> 方向 | <en/> direction\n * @returns <zh/> 尺寸 | <en/> size\n */\nexport function getBBoxSize(bbox, direction) {\n    return direction === 'N' || direction === 'S' ? getBBoxHeight(bbox) : getBBoxWidth(bbox);\n}\n/**\n * <zh/> 从一个点到另一个点计算正交路由\n *\n * <en/> Calculate orthogonal route from one point to another\n * @param from - <zh/> 起始点 | <en/> start point\n * @param to - <zh/> 终止点 | <en/> end point\n * @param direction - <zh/> 前一条线段的方向 | <en/> direction of the previous segment\n * @returns <zh/> 正交路由 | <en/> orthogonal route\n */\nexport function pointToPoint(from, to, direction) {\n    const p1 = [from[0], to[1]];\n    const p2 = [to[0], from[1]];\n    const d1 = getDirection(from, p1);\n    const d2 = getDirection(from, p2);\n    const opposite = direction ? opposites[direction] : null;\n    const p = d1 === direction || (d1 !== opposite && d2 !== direction) ? p1 : p2;\n    return { points: [p], direction: getDirection(p, to) };\n}\n/**\n * <zh/> 从节点到点计算正交路由\n *\n * <en/> Calculate orthogonal route from node to point\n * @param from - <zh/> 起始点 | <en/> start point\n * @param to - <zh/> 终止点 | <en/> end point\n * @param fromBBox - <zh/> 起始节点的包围盒 | <en/> bounding box of the start node\n * @returns <zh/> 正交路由 | <en/> orthogonal route\n */\nexport function nodeToPoint(from, to, fromBBox) {\n    const p = freeJoin(from, to, fromBBox);\n    return { points: [p], direction: getDirection(p, to) };\n}\n/**\n * <zh/> 从点到节点计算正交路由\n *\n * <en/> Calculate orthogonal route from point to node\n * @param from - <zh/> 起始点 | <en/> start point\n * @param to - <zh/> 终止点 | <en/> end point\n * @param toBBox - <zh/> 终止节点的包围盒 | <en/> bounding box of the end node\n * @param direction - <zh/> 前一条线段的方向 | <en/> direction of the previous segment\n * @returns <zh/> 正交路由 | <en/> orthogonal route\n */\nexport function pointToNode(from, to, toBBox, direction) {\n    const points = [\n        [to[0], from[1]],\n        [from[0], to[1]],\n    ];\n    const freePoints = points.filter((p) => isPointOutsideBBox(p, toBBox) && !isPointOnBBoxBoundary(p, toBBox, true));\n    const freeDirectionPoints = freePoints.filter((p) => getDirection(p, from) !== direction);\n    if (freeDirectionPoints.length > 0) {\n        // Pick a point which bears the same direction as the previous segment.\n        const p = freeDirectionPoints.find((p) => getDirection(from, p) === direction) || freeDirectionPoints[0];\n        return {\n            points: [p],\n            direction: getDirection(p, to),\n        };\n    }\n    else {\n        // Here we found only points which are either contained in the element or they would create\n        // a link segment going in opposites direction from the previous one.\n        // We take the point inside element and move it outside the element in the direction the\n        // route is going. Now we can join this point with the current end (using freeJoin).\n        const p = difference(points, freePoints)[0];\n        const p2 = moveTo(to, p, getBBoxSize(toBBox, direction) / 2);\n        const p1 = freeJoin(p2, from, toBBox);\n        return {\n            points: [p1, p2],\n            direction: getDirection(p2, to),\n        };\n    }\n}\n/**\n * <zh/> 从节点到节点计算正交路由\n *\n * <en/> Calculate orthogonal route from node to node\n * @param from - <zh/> 起始点 | <en/> start point\n * @param to - <zh/> 终止点 | <en/> end point\n * @param fromBBox - <zh/> 起始节点的包围盒 | <en/> bounding box of the start node\n * @param toBBox - <zh/> 终止节点的包围盒 | <en/> bounding box of the end node\n * @returns <zh/> 正交路由 | <en/> orthogonal route\n */\nexport function nodeToNode(from, to, fromBBox, toBBox) {\n    let route = nodeToPoint(from, to, fromBBox);\n    const p1 = toVector3(route.points[0]);\n    if (isPointInBBox(p1, toBBox)) {\n        route = nodeToPoint(to, from, toBBox);\n        const p2 = toVector3(route.points[0]);\n        if (isPointInBBox(p2, fromBBox)) {\n            const fromBorder = moveTo(from, p1, getBBoxSize(fromBBox, getDirection(from, p1)) / 2);\n            const toBorder = moveTo(to, p2, getBBoxSize(toBBox, getDirection(to, p2)) / 2);\n            const midPoint = [(fromBorder[0] + toBorder[0]) / 2, (fromBorder[1] + toBorder[1]) / 2];\n            const startRoute = nodeToPoint(from, midPoint, fromBBox);\n            const endRoute = pointToNode(midPoint, to, toBBox, startRoute.direction);\n            route.points = [startRoute.points[0], endRoute.points[0]];\n            route.direction = endRoute.direction;\n        }\n    }\n    return route;\n}\n/**\n * <zh/> 在两个节点内部计算路由\n *\n * <en/> Calculate route inside two nodes\n * @param from - <zh/> 起始点 | <en/> start point\n * @param to - <zh/> 终止点 | <en/> end point\n * @param fromBBox - <zh/> 起始节点的包围盒 | <en/> bounding box of the start node\n * @param toBBox - <zh/> 终止节点的包围盒 | <en/> bounding box of the end node\n * @param direction - <zh/> 方向 | <en/> direction\n * @returns <zh/> 正交路由 | <en/> orthogonal route\n */\nexport function insideNode(from, to, fromBBox, toBBox, direction) {\n    const DEFAULT_OFFSET = 0.01;\n    const boundary = getCombinedBBox([fromBBox, toBBox]);\n    const reversed = distance(to, boundary.center) > distance(from, boundary.center);\n    const [start, end] = reversed ? [to, from] : [from, to];\n    const halfPerimeter = getBBoxHeight(boundary) + getBBoxWidth(boundary);\n    let p1;\n    if (direction) {\n        const ref = [\n            start[0] + halfPerimeter * Math.cos(radians[direction]),\n            start[1] + halfPerimeter * Math.sin(radians[direction]),\n        ];\n        // `getNearestPointToPoint` returns a point on the boundary, so we need to move it a bit to ensure it's outside the element and then get the correct `p2` via `freeJoin`.\n        p1 = moveTo(getNearestPointToPoint(boundary, ref), ref, DEFAULT_OFFSET);\n    }\n    else {\n        p1 = moveTo(getNearestPointToPoint(boundary, start), start, -DEFAULT_OFFSET);\n    }\n    let p2 = freeJoin(p1, end, boundary);\n    let points = [round(p1, 2), round(p2, 2)];\n    if (isEqual(round(p1), round(p2))) {\n        const rad = angle(subtract(p1, start), [1, 0, 0]) + Math.PI / 2;\n        p2 = [end[0] + halfPerimeter * Math.cos(rad), end[1] + halfPerimeter * Math.sin(rad), 0];\n        p2 = round(moveTo(getNearestPointToPoint(boundary, p2), end, -DEFAULT_OFFSET), 2);\n        const p3 = freeJoin(p1, p2, boundary);\n        points = [p1, p3, p2];\n    }\n    return {\n        points: reversed ? points.reverse() : points,\n        direction: reversed ? getDirection(p1, to) : getDirection(p2, to),\n    };\n}\n/**\n * <zh/> 返回一个点 `p`，使得线段 p,p1 和 p,p2 互相垂直，p 尽可能不在给定的包围盒内\n *\n * <en/> Returns a point `p` where lines p,p1 and p,p2 are perpendicular and p is not contained in the given box\n * @param p1 - <zh/> 点 | <en/> point\n * @param p2 - <zh/> 点 | <en/> point\n * @param bbox - <zh/> 包围盒 | <en/> bounding box\n * @returns <zh/> 点 | <en/> point\n */\nexport function freeJoin(p1, p2, bbox) {\n    let p = [p1[0], p2[1]];\n    if (isPointInBBox(p, bbox)) {\n        p = [p2[0], p1[1]];\n    }\n    return p;\n}\n//# sourceMappingURL=orth.js.map","import { isEqual, isNumber } from '@antv/util';\nimport { getBBoxHeight, getBBoxSize, getBBoxWidth, getNearestSideToPoint, getNodeBBox } from './bbox';\nimport { isCollapsed } from './collapsibility';\nimport { getAllPorts, getNodeConnectionPoint, getPortConnectionPoint, getPortPosition } from './element';\nimport { idOf } from './id';\nimport { isCollinear, isHorizontal, moveTo, parsePoint } from './point';\nimport { freeJoin } from './router/orth';\nimport { add, distance, manhattanDistance, multiply, normalize, perpendicular, subtract } from './vector';\n/**\n * <zh/> 获取标签的位置样式\n *\n * <en/> Get the style of the label's position\n * @param key - <zh/> 边对象 | <en/> The edge object\n * @param placement - <zh/> 标签位置 | <en/> Position of the label\n * @param autoRotate - <zh/> 是否自动旋转 | <en/> Whether to auto-rotate\n * @param offsetX - <zh/> 标签相对于边的水平偏移量 | <en/> Horizontal offset of the label relative to the edge\n * @param offsetY - <zh/> 标签相对于边的垂直偏移量 | <en/> Vertical offset of the label relative to the edge\n * @returns <zh/> 标签的位置样式 | <en/> Returns the style of the label's position\n */\nexport function getLabelPositionStyle(key, placement, autoRotate, offsetX, offsetY) {\n    const START_RATIO = 0;\n    const MIDDLE_RATIO = 0.5;\n    const END_RATIO = 0.99;\n    let ratio = typeof placement === 'number' ? placement : MIDDLE_RATIO;\n    if (placement === 'start')\n        ratio = START_RATIO;\n    if (placement === 'end')\n        ratio = END_RATIO;\n    const point = parsePoint(key.getPoint(ratio));\n    const pointOffset = parsePoint(key.getPoint(ratio + 0.01));\n    let textAlign = placement === 'start' ? 'left' : placement === 'end' ? 'right' : 'center';\n    if (isHorizontal(point, pointOffset) || !autoRotate) {\n        const [x, y] = getXYByPlacement(key, ratio, offsetX, offsetY);\n        return { transform: `translate(${x}, ${y})`, textAlign };\n    }\n    let angle = Math.atan2(pointOffset[1] - point[1], pointOffset[0] - point[0]);\n    const isRevert = pointOffset[0] < point[0];\n    if (isRevert) {\n        textAlign = textAlign === 'center' ? textAlign : textAlign === 'left' ? 'right' : 'left';\n        offsetX *= -1;\n        angle += Math.PI;\n    }\n    const [x, y] = getXYByPlacement(key, ratio, offsetX, offsetY, angle);\n    const transform = `translate(${x}, ${y}) rotate(${(angle / Math.PI) * 180}deg)`;\n    return {\n        textAlign,\n        transform,\n    };\n}\n/**\n * <zh/> 获取边上徽标的位置样式\n *\n * <en/> Get the position style of the badge on the edge\n * @param shapeMap - <zh/> 边上的图形映射 | <en/> Shape map on the edge\n * @param placement - <zh/> 徽标位置 | <en/> Badge position\n * @param labelPlacement - <zh/> 标签位置 | <en/> Label position\n * @param offsetX - <zh/> 水平偏移量 | <en/> Horizontal offset\n * @param offsetY - <zh/> 垂直偏移量 | <en/> Vertical offset\n * @returns <zh/> 徽标的位置样式 | <en/> Position style of the badge\n */\nexport function getBadgePositionStyle(shapeMap, placement, labelPlacement, offsetX, offsetY) {\n    const badgeWidth = shapeMap.badge?.getGeometryBounds().halfExtents[0] * 2 || 0;\n    const labelWidth = shapeMap.label?.getGeometryBounds().halfExtents[0] * 2 || 0;\n    return getLabelPositionStyle(shapeMap.key, labelPlacement, true, (labelWidth ? (labelWidth / 2 + badgeWidth / 2) * (placement === 'suffix' ? 1 : -1) : 0) + offsetX, offsetY);\n}\n/**\n * <zh/> 获取给定边上的指定位置的坐标\n *\n * <en/> Get the coordinates at the specified position on the given edge\n * @param key - <zh/> 边实例 | <en/> Edge instance\n * @param ratio - <zh/> 位置比率 | <en/> Position ratio\n * @param offsetX - <zh/> 水平偏移量 | <en/> Horizontal offset\n * @param offsetY - <zh/> 垂直偏移量 | <en/> Vertical offset\n * @param angle - <zh/> 旋转角度 | <en/> Rotation angle\n * @returns <zh/> 坐标 | <en/> Coordinates\n */\nfunction getXYByPlacement(key, ratio, offsetX, offsetY, angle) {\n    const [pointX, pointY] = parsePoint(key.getPoint(ratio));\n    let actualOffsetX = offsetX;\n    let actualOffsetY = offsetY;\n    if (angle) {\n        actualOffsetX = offsetX * Math.cos(angle) - offsetY * Math.sin(angle);\n        actualOffsetY = offsetX * Math.sin(angle) + offsetY * Math.cos(angle);\n    }\n    return [pointX + actualOffsetX, pointY + actualOffsetY];\n}\n/** ==================== Curve Edge =========================== */\n/**\n * <zh/> 计算曲线的控制点\n *\n * <en/> Calculate the control point of the curve\n * @param sourcePoint - <zh/> 起点 | <en/> Source point\n * @param targetPoint - <zh/> 终点 | <en/> Target point\n * @param curvePosition - <zh/> 控制点在连线上的相对位置（取值范围为 0-1） | <en/> The relative position of the control point on the line (value range from 0 to 1)\n * @param curveOffset - <zh/> 控制点距离两端点连线的距离 | <en/> The distance between the control point and the line\n * @returns <zh/> 控制点 | <en/> Control points\n */\nexport function getCurveControlPoint(sourcePoint, targetPoint, curvePosition, curveOffset) {\n    if (isEqual(sourcePoint, targetPoint))\n        return sourcePoint;\n    const lineVector = subtract(targetPoint, sourcePoint);\n    const controlPoint = [\n        sourcePoint[0] + curvePosition * lineVector[0],\n        sourcePoint[1] + curvePosition * lineVector[1],\n    ];\n    const perpVector = normalize(perpendicular(lineVector, false));\n    controlPoint[0] += curveOffset * perpVector[0];\n    controlPoint[1] += curveOffset * perpVector[1];\n    return controlPoint;\n}\n/**\n * <zh/> 解析控制点距离两端点连线的距离 `curveOffset`\n *\n * <en/> parse the distance of the control point from the line `curveOffset`\n * @param curveOffset - <zh/> curveOffset | <en/> curveOffset\n * @returns <zh/> 标准 curveOffset | <en/> standard curveOffset\n */\nexport function parseCurveOffset(curveOffset) {\n    if (isNumber(curveOffset))\n        return [curveOffset, -curveOffset];\n    return curveOffset;\n}\n/**\n * <zh/> 解析控制点在两端点连线上的相对位置 `curvePosition`，范围为`0-1`\n *\n * <en/> parse the relative position of the control point on the line `curvePosition`\n * @param curvePosition - <zh/> curvePosition | <en/> curvePosition\n * @returns <zh/> 标准 curvePosition | <en/> standard curvePosition\n */\nexport function parseCurvePosition(curvePosition) {\n    if (isNumber(curvePosition))\n        return [curvePosition, 1 - curvePosition];\n    return curvePosition;\n}\n/**\n * <zh/> 获取二次贝塞尔曲线绘制路径\n *\n * <en/> Calculate the path for drawing a quadratic Bessel curve\n * @param sourcePoint - <zh/> 边的起点 | <en/> Source point\n * @param targetPoint - <zh/> 边的终点 | <en/> Target point\n * @param controlPoint - <zh/> 控制点 | <en/> Control point\n * @returns <zh/> 返回绘制曲线的路径 | <en/> Returns curve path\n */\nexport function getQuadraticPath(sourcePoint, targetPoint, controlPoint) {\n    return [\n        ['M', sourcePoint[0], sourcePoint[1]],\n        ['Q', controlPoint[0], controlPoint[1], targetPoint[0], targetPoint[1]],\n    ];\n}\n/**\n * <zh/> 获取三次贝塞尔曲线绘制路径\n *\n * <en/> Calculate the path for drawing a cubic Bessel curve\n * @param sourcePoint - <zh/> 边的起点 | <en/> Source point\n * @param targetPoint - <zh/> 边的终点 | <en/> Target point\n * @param controlPoints - <zh/> 控制点 | <en/> Control point\n * @returns <zh/> 返回绘制曲线的路径 | <en/> Returns curve path\n */\nexport function getCubicPath(sourcePoint, targetPoint, controlPoints) {\n    return [\n        ['M', sourcePoint[0], sourcePoint[1]],\n        [\n            'C',\n            controlPoints[0][0],\n            controlPoints[0][1],\n            controlPoints[1][0],\n            controlPoints[1][1],\n            targetPoint[0],\n            targetPoint[1],\n        ],\n    ];\n}\n/** ==================== Polyline Edge =========================== */\n/**\n * <zh/> 获取折线的绘制路径\n *\n * <en/> Calculates the path for drawing a polyline\n * @param points - <zh/> 折线的顶点 | <en/> The vertices of the polyline\n * @param radius - <zh/> 圆角半径 | <en/> Radius of the rounded corner\n * @param z - <zh/> 路径是否闭合 | <en/> Whether the path is closed\n * @returns <zh/> 返回绘制折线的路径 | <en/> Returns the path for drawing a polyline\n */\nexport function getPolylinePath(points, radius = 0, z = false) {\n    const sourcePoint = points[0];\n    const targetPoint = points[points.length - 1];\n    const controlPoints = points.slice(1, points.length - 1);\n    const pathArray = [['M', sourcePoint[0], sourcePoint[1]]];\n    controlPoints.forEach((midPoint, i) => {\n        const prevPoint = controlPoints[i - 1] || sourcePoint;\n        const nextPoint = controlPoints[i + 1] || targetPoint;\n        if (!isCollinear(prevPoint, midPoint, nextPoint) && radius) {\n            const [ps, pt] = getBorderRadiusPoints(prevPoint, midPoint, nextPoint, radius);\n            pathArray.push(['L', ps[0], ps[1]], ['Q', midPoint[0], midPoint[1], pt[0], pt[1]], ['L', pt[0], pt[1]]);\n        }\n        else {\n            pathArray.push(['L', midPoint[0], midPoint[1]]);\n        }\n    });\n    pathArray.push(['L', targetPoint[0], targetPoint[1]]);\n    if (z)\n        pathArray.push(['Z']);\n    return pathArray;\n}\n/**\n * <zh/> 根据给定的半径计算出不共线的三点生成贝塞尔曲线的控制点，以模拟接近圆弧\n *\n * <en/> Calculates the control points of the Bezier curve generated by three non-collinear points according to the given radius to simulate an arc\n * @param prevPoint - <zh/> 前一个点 | <en/> Previous point\n * @param midPoint - <zh/> 中间点 | <en/> Middle point\n * @param nextPoint - <zh/> 后一个点 | <en/> Next point\n * @param radius - <zh/> 圆角半径 | <en/> Radius of the rounded corner\n * @returns <zh/> 返回控制点 | <en/> Returns control points\n */\nexport function getBorderRadiusPoints(prevPoint, midPoint, nextPoint, radius) {\n    const d0 = manhattanDistance(prevPoint, midPoint);\n    const d1 = manhattanDistance(nextPoint, midPoint);\n    // 取给定的半径和最小半径之间的较小值 | use the smaller value between the given radius and the minimum radius\n    const r = Math.min(radius, Math.min(d0, d1) / 2);\n    const ps = [\n        midPoint[0] - (r / d0) * (midPoint[0] - prevPoint[0]),\n        midPoint[1] - (r / d0) * (midPoint[1] - prevPoint[1]),\n    ];\n    const pt = [\n        midPoint[0] - (r / d1) * (midPoint[0] - nextPoint[0]),\n        midPoint[1] - (r / d1) * (midPoint[1] - nextPoint[1]),\n    ];\n    return [ps, pt];\n}\n/** ==================== Loop Edge =========================== */\nexport const getRadians = (bbox) => {\n    const halfPI = Math.PI / 2;\n    const halfHeight = getBBoxHeight(bbox) / 2;\n    const halfWidth = getBBoxWidth(bbox) / 2;\n    const angleWithX = Math.atan2(halfHeight, halfWidth) / 2;\n    const angleWithY = Math.atan2(halfWidth, halfHeight) / 2;\n    return {\n        top: [-halfPI - angleWithY, -halfPI + angleWithY],\n        'top-right': [-halfPI + angleWithY, -angleWithX],\n        'right-top': [-halfPI + angleWithY, -angleWithX],\n        right: [-angleWithX, angleWithX],\n        'bottom-right': [angleWithX, halfPI - angleWithY],\n        'right-bottom': [angleWithX, halfPI - angleWithY],\n        bottom: [halfPI - angleWithY, halfPI + angleWithY],\n        'bottom-left': [halfPI + angleWithY, Math.PI - angleWithX],\n        'left-bottom': [halfPI + angleWithY, Math.PI - angleWithX],\n        left: [Math.PI - angleWithX, Math.PI + angleWithX],\n        'top-left': [Math.PI + angleWithX, -halfPI - angleWithY],\n        'left-top': [Math.PI + angleWithX, -halfPI - angleWithY],\n    };\n};\n/**\n * <zh/> 获取环形边的起点和终点\n *\n * <en/> Get the start and end points of the loop edge\n * @param node - <zh/> 节点实例 | <en/> Node instance\n * @param placement - <zh/> 环形边相对于节点位置 | <en/> Loop position relative to the node\n * @param clockwise - <zh/> 是否顺时针 | <en/> Whether to draw the loop clockwise\n * @param sourcePort - <zh/> 起点连接桩 | <en/> Source port\n * @param targetPort - <zh/> 终点连接桩 | <en/> Target port\n * @returns <zh/> 起点和终点 | <en/> Start and end points\n */\nexport function getLoopEndpoints(node, placement, clockwise, sourcePort, targetPort) {\n    const bbox = getNodeBBox(node);\n    const center = node.getCenter();\n    let sourcePoint = sourcePort && getPortPosition(sourcePort);\n    let targetPoint = targetPort && getPortPosition(targetPort);\n    if (!sourcePoint || !targetPoint) {\n        const radians = getRadians(bbox);\n        const angle1 = radians[placement][0];\n        const angle2 = radians[placement][1];\n        const [width, height] = getBBoxSize(bbox);\n        const r = Math.max(width, height);\n        const point1 = add(center, [r * Math.cos(angle1), r * Math.sin(angle1), 0]);\n        const point2 = add(center, [r * Math.cos(angle2), r * Math.sin(angle2), 0]);\n        sourcePoint = getNodeConnectionPoint(node, point1);\n        targetPoint = getNodeConnectionPoint(node, point2);\n        if (!clockwise) {\n            [sourcePoint, targetPoint] = [targetPoint, sourcePoint];\n        }\n    }\n    return [sourcePoint, targetPoint];\n}\n/**\n * <zh/> 获取环形边的绘制路径\n *\n * <en/> Get the path of the loop edge\n * @param node - <zh/> 节点实例 | <en/> Node instance\n * @param placement - <zh/> 环形边相对于节点位置 | <en/> Loop position relative to the node\n * @param clockwise - <zh/> 是否顺时针 | <en/> Whether to draw the loop clockwise\n * @param dist - <zh/> 从节点 keyShape 边缘到自环顶部的距离 | <en/> The distance from the edge of the node keyShape to the top of the self-loop\n * @param sourcePortKey - <zh/> 起点连接桩 key | <en/> Source port key\n * @param targetPortKey - <zh/> 终点连接桩 key | <en/> Target port key\n * @returns <zh/> 返回绘制环形边的路径 | <en/> Returns the path of the loop edge\n */\nexport function getCubicLoopPath(node, placement, clockwise, dist, sourcePortKey, targetPortKey) {\n    const sourcePort = node.getPorts()[(sourcePortKey || targetPortKey)];\n    const targetPort = node.getPorts()[(targetPortKey || sourcePortKey)];\n    // 1. 获取起点和终点 | Get the start and end points\n    let [sourcePoint, targetPoint] = getLoopEndpoints(node, placement, clockwise, sourcePort, targetPort);\n    // 2. 获取控制点 | Get the control points\n    const controlPoints = getCubicLoopControlPoints(node, sourcePoint, targetPoint, dist);\n    // 3. 如果定义了连接桩，调整端点以与连接桩边界相交 | If the port is defined, adjust the endpoint to intersect with the port boundary\n    if (sourcePort)\n        sourcePoint = getPortConnectionPoint(sourcePort, controlPoints[0]);\n    if (targetPort)\n        targetPoint = getPortConnectionPoint(targetPort, controlPoints[controlPoints.length - 1]);\n    return getCubicPath(sourcePoint, targetPoint, controlPoints);\n}\n/**\n * <zh/> 获取环形边的控制点\n *\n * <en/> Get the control points of the loop edge\n * @param node - <zh/> 节点实例 | <en/> Node instance\n * @param sourcePoint - <zh/> 起点 | <en/> Source point\n * @param targetPoint - <zh/> 终点 | <en/> Target point\n * @param dist - <zh/> 从节点 keyShape 边缘到自环顶部的距离 | <en/> The distance from the edge of the node keyShape to the top of the self-loop\n * @returns <zh/> 控制点 | <en/> Control points\n */\nexport function getCubicLoopControlPoints(node, sourcePoint, targetPoint, dist) {\n    const center = node.getCenter();\n    if (isEqual(sourcePoint, targetPoint)) {\n        const direction = subtract(sourcePoint, center);\n        const adjustment = [\n            dist * Math.sign(direction[0]) || dist / 2,\n            dist * Math.sign(direction[1]) || -dist / 2,\n            0,\n        ];\n        return [add(sourcePoint, adjustment), add(targetPoint, multiply(adjustment, [1, -1, 1]))];\n    }\n    return [\n        moveTo(center, sourcePoint, distance(center, sourcePoint) + dist),\n        moveTo(center, targetPoint, distance(center, targetPoint) + dist),\n    ];\n}\n/**\n * <zh/> 获取环形折线边的绘制路径\n *\n * <en/> Get the path of the loop polyline edge\n * @param node - <zh/> 节点实例 | <en/> Node instance\n * @param radius - <zh/> 圆角半径 | <en/> Radius of the rounded corner\n * @param placement - <zh/> 环形边相对于节点位置 | <en/> Loop position relative to the node\n * @param clockwise - <zh/> 是否顺时针 | <en/> Whether to draw the loop clockwise\n * @param dist - <zh/> 从节点 keyShape 边缘到自环顶部的距离 | <en/> The distance from the edge of the node keyShape to the top of the self-loop\n * @param sourcePortKey - <zh/> 起点连接桩 key | <en/> Source port key\n * @param targetPortKey - <zh/> 终点连接桩 key | <en/> Target port key\n * @returns <zh/> 返回绘制环形折线边的路径 | <en/> Returns the path of the loop polyline edge\n */\nexport function getPolylineLoopPath(node, radius, placement, clockwise, dist, sourcePortKey, targetPortKey) {\n    const allPortsMap = getAllPorts(node);\n    const sourcePort = allPortsMap[(sourcePortKey || targetPortKey)];\n    const targetPort = allPortsMap[(targetPortKey || sourcePortKey)];\n    // 1. 获取起点和终点 | Get the start and end points\n    let [sourcePoint, targetPoint] = getLoopEndpoints(node, placement, clockwise, sourcePort, targetPort);\n    // 2. 获取控制点 | Get the control points\n    const controlPoints = getPolylineLoopControlPoints(node, sourcePoint, targetPoint, dist);\n    // 3. 如果定义了连接桩，调整端点以与连接桩边界相交 | If the port is defined, adjust the endpoint to intersect with the port boundary\n    if (sourcePort)\n        sourcePoint = getPortConnectionPoint(sourcePort, controlPoints[0]);\n    if (targetPort)\n        targetPoint = getPortConnectionPoint(targetPort, controlPoints[controlPoints.length - 1]);\n    return getPolylinePath([sourcePoint, ...controlPoints, targetPoint], radius);\n}\n/**\n * <zh/> 获取环形折线边的控制点\n *\n * <en/> Get the control points of the loop polyline edge\n * @param node - <zh/> 节点实例 | <en/> Node instance\n * @param sourcePoint - <zh/> 起点 | <en/> Source point\n * @param targetPoint - <zh/> 终点 | <en/> Target point\n * @param dist - <zh/> 从节点 keyShape 边缘到自环顶部的距离 | <en/> The distance from the edge of the node keyShape to the top of the self-loop\n * @returns <zh/> 控制点 | <en/> Control points\n */\nexport function getPolylineLoopControlPoints(node, sourcePoint, targetPoint, dist) {\n    const controlPoints = [];\n    const bbox = getNodeBBox(node);\n    // 1. 起点和终点相同 | The start and end points are the same\n    if (isEqual(sourcePoint, targetPoint)) {\n        const side = getNearestSideToPoint(bbox, sourcePoint);\n        switch (side) {\n            case 'left':\n                controlPoints.push([sourcePoint[0] - dist, sourcePoint[1]]);\n                controlPoints.push([sourcePoint[0] - dist, sourcePoint[1] + dist]);\n                controlPoints.push([sourcePoint[0], sourcePoint[1] + dist]);\n                break;\n            case 'right':\n                controlPoints.push([sourcePoint[0] + dist, sourcePoint[1]]);\n                controlPoints.push([sourcePoint[0] + dist, sourcePoint[1] + dist]);\n                controlPoints.push([sourcePoint[0], sourcePoint[1] + dist]);\n                break;\n            case 'top':\n                controlPoints.push([sourcePoint[0], sourcePoint[1] - dist]);\n                controlPoints.push([sourcePoint[0] + dist, sourcePoint[1] - dist]);\n                controlPoints.push([sourcePoint[0] + dist, sourcePoint[1]]);\n                break;\n            case 'bottom':\n                controlPoints.push([sourcePoint[0], sourcePoint[1] + dist]);\n                controlPoints.push([sourcePoint[0] + dist, sourcePoint[1] + dist]);\n                controlPoints.push([sourcePoint[0] + dist, sourcePoint[1]]);\n                break;\n        }\n    }\n    else {\n        const sourceSide = getNearestSideToPoint(bbox, sourcePoint);\n        const targetSide = getNearestSideToPoint(bbox, targetPoint);\n        // 2. 起点与终点同边 | The start and end points are on the same side\n        if (sourceSide === targetSide) {\n            const side = sourceSide;\n            let x, y;\n            switch (side) {\n                case 'left':\n                    x = Math.min(sourcePoint[0], targetPoint[0]) - dist;\n                    controlPoints.push([x, sourcePoint[1]]);\n                    controlPoints.push([x, targetPoint[1]]);\n                    break;\n                case 'right':\n                    x = Math.max(sourcePoint[0], targetPoint[0]) + dist;\n                    controlPoints.push([x, sourcePoint[1]]);\n                    controlPoints.push([x, targetPoint[1]]);\n                    break;\n                case 'top':\n                    y = Math.min(sourcePoint[1], targetPoint[1]) - dist;\n                    controlPoints.push([sourcePoint[0], y]);\n                    controlPoints.push([targetPoint[0], y]);\n                    break;\n                case 'bottom':\n                    y = Math.max(sourcePoint[1], targetPoint[1]) + dist;\n                    controlPoints.push([sourcePoint[0], y]);\n                    controlPoints.push([targetPoint[0], y]);\n                    break;\n            }\n        }\n        else {\n            // 3. 起点与终点不同边 | The start and end points are on different sides\n            const getPointOffSide = (side, point) => {\n                return {\n                    left: [point[0] - dist, point[1]],\n                    right: [point[0] + dist, point[1]],\n                    top: [point[0], point[1] - dist],\n                    bottom: [point[0], point[1] + dist],\n                }[side];\n            };\n            const p1 = getPointOffSide(sourceSide, sourcePoint);\n            const p2 = getPointOffSide(targetSide, targetPoint);\n            const p3 = freeJoin(p1, p2, bbox);\n            controlPoints.push(p1, p3, p2);\n        }\n    }\n    return controlPoints;\n}\n/**\n * <zh/> 获取子图内的所有边，并按照内部边和外部边分组\n *\n * <en/> Get all the edges in the subgraph and group them into internal and external edges\n * @param ids - <zh/> 节点 ID 数组 | <en/> Node ID array\n * @param getRelatedEdges - <zh/> 获取节点邻边 | <en/> Get node edges\n * @returns <zh/> 子图边 | <en/> Subgraph edges\n */\nexport function getSubgraphRelatedEdges(ids, getRelatedEdges) {\n    const edges = new Set();\n    const internal = new Set();\n    const external = new Set();\n    ids.forEach((id) => {\n        const relatedEdges = getRelatedEdges(id);\n        relatedEdges.forEach((edge) => {\n            edges.add(edge);\n            if (ids.includes(edge.source) && ids.includes(edge.target))\n                internal.add(edge);\n            else\n                external.add(edge);\n        });\n    });\n    return { edges: Array.from(edges), internal: Array.from(internal), external: Array.from(external) };\n}\n/**\n * <zh/> 获取边的实际连接节点\n *\n * <en/> Get the actual connected object of the edge\n * @param node - <zh/> 逻辑连接节点数据 | <en/> Logical connection node data\n * @param getParentData - <zh/> 获取父节点数据 | <en/> Get parent node data\n * @returns <zh/> 实际连接节点数据 | <en/> Actual connected node data\n */\nexport function findActualConnectNodeData(node, getParentData) {\n    const path = [];\n    let current = node;\n    while (current) {\n        path.push(current);\n        const parent = getParentData(idOf(current));\n        if (parent)\n            current = parent;\n        else\n            break;\n    }\n    if (path.some((n) => n.style?.collapsed)) {\n        const index = path.reverse().findIndex(isCollapsed);\n        return path[index] || path.at(-1);\n    }\n    return node;\n}\n/**\n * <zh/> 获取箭头大小，若用户未指定，则根据线宽自动计算\n *\n * <en/> Get the size of the arrow\n * @param lineWidth - <zh/> 箭头所在边的线宽 | <en/> The line width of the edge where the arrow is located\n * @param size - <zh/> 自定义箭头大小 | <en/> Custom arrow size\n * @returns <zh/> 箭头大小 | <en/> Arrow size\n */\nexport function getArrowSize(lineWidth, size) {\n    if (size)\n        return size;\n    if (lineWidth < 4)\n        return 10;\n    if (lineWidth === 4)\n        return 12;\n    return lineWidth * 2.5;\n}\n//# sourceMappingURL=edge.js.map","/**\n * ○\n */\nexport const circle = (width, height) => {\n    const r = Math.max(width, height) / 2;\n    return [['M', -width / 2, 0], ['A', r, r, 0, 1, 0, 2 * r - width / 2, 0], ['A', r, r, 0, 1, 0, -width / 2, 0], ['Z']];\n};\n/**\n * ▷\n */\nexport const triangle = (width, height) => {\n    return [['M', -width / 2, 0], ['L', width / 2, -height / 2], ['L', width / 2, height / 2], ['Z']];\n};\n/**\n * ◇\n */\nexport const diamond = (width, height) => {\n    return [['M', -width / 2, 0], ['L', 0, -height / 2], ['L', width / 2, 0], ['L', 0, height / 2], ['Z']];\n};\n/**\n * >>\n */\nexport const vee = (width, height) => {\n    return [\n        ['M', -width / 2, 0],\n        ['L', width / 2, -height / 2],\n        ['L', (4 * width) / 5 - width / 2, 0],\n        ['L', width / 2, height / 2],\n        ['Z'],\n    ];\n};\n/**\n * □\n */\nexport const rect = (width, height) => {\n    return [\n        ['M', -width / 2, -height / 2],\n        ['L', width / 2, -height / 2],\n        ['L', width / 2, height / 2],\n        ['L', -width / 2, height / 2],\n        ['Z'],\n    ];\n};\n/**\n * □▷\n */\nexport const triangleRect = (width, height) => {\n    const tWidth = width / 2;\n    const rWidth = width / 7;\n    const rBeginX = width - rWidth;\n    return [\n        ['M', -tWidth, 0],\n        ['L', 0, -height / 2],\n        ['L', 0, height / 2],\n        ['Z'],\n        ['M', rBeginX - tWidth, -height / 2],\n        ['L', rBeginX + rWidth - tWidth, -height / 2],\n        ['L', rBeginX + rWidth - tWidth, height / 2],\n        ['L', rBeginX - tWidth, height / 2],\n        ['Z'],\n    ];\n};\n/**\n * >\n */\nexport const simple = (width, height) => {\n    return [\n        ['M', width / 2, -height / 2],\n        ['L', -width / 2, 0],\n        ['L', width / 2, 0],\n        ['L', -width / 2, 0],\n        ['L', width / 2, height / 2],\n    ];\n};\n//# sourceMappingURL=symbol.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Image, Path } from '@antv/g';\nimport { isFunction, pick } from '@antv/util';\nimport { getBBoxHeight, getBBoxWidth, getNodeBBox } from '../../utils/bbox';\nimport { getArrowSize, getBadgePositionStyle, getCubicLoopPath, getLabelPositionStyle } from '../../utils/edge';\nimport { findPorts, getConnectionPoint, isSameNode } from '../../utils/element';\nimport { omitStyleProps, subStyleProps } from '../../utils/prefix';\nimport { parseSize } from '../../utils/size';\nimport { mergeOptions } from '../../utils/style';\nimport * as Symbol from '../../utils/symbol';\nimport { getWordWrapWidthByEnds } from '../../utils/text';\nimport { BaseElement } from '../base-element';\nimport { effect } from '../effect';\nimport { Badge, Label } from '../shapes';\n/**\n * <zh/> 边元素基类\n *\n * <en/> Base class of the edge\n */\nexport class BaseEdge extends BaseElement {\n    type = 'edge';\n    static defaultStyleProps = {\n        badge: true,\n        badgeOffsetX: 0,\n        badgeOffsetY: 0,\n        badgePlacement: 'suffix',\n        isBillboard: true,\n        label: true,\n        labelAutoRotate: true,\n        labelIsBillboard: true,\n        labelMaxWidth: '80%',\n        labelOffsetX: 4,\n        labelOffsetY: 0,\n        labelPlacement: 'center',\n        labelTextBaseline: 'middle',\n        labelWordWrap: false,\n        halo: false,\n        haloDroppable: false,\n        haloLineDash: 0,\n        haloLineWidth: 12,\n        haloPointerEvents: 'none',\n        haloStrokeOpacity: 0.25,\n        haloZIndex: -1,\n        loop: true,\n        startArrow: false,\n        startArrowLineDash: 0,\n        startArrowLineJoin: 'round',\n        startArrowLineWidth: 1,\n        startArrowTransformOrigin: 'center',\n        startArrowType: 'vee',\n        endArrow: false,\n        endArrowLineDash: 0,\n        endArrowLineJoin: 'round',\n        endArrowLineWidth: 1,\n        endArrowTransformOrigin: 'center',\n        endArrowType: 'vee',\n        loopPlacement: 'top',\n        loopClockwise: true,\n    };\n    constructor(options) {\n        super(mergeOptions({ style: BaseEdge.defaultStyleProps }, options));\n    }\n    get sourceNode() {\n        const { context, sourceNode: source } = this.parsedAttributes;\n        return context.element.getElement(source);\n    }\n    get targetNode() {\n        const { context, targetNode: target } = this.parsedAttributes;\n        return context.element.getElement(target);\n    }\n    getKeyStyle(attributes) {\n        const { loop, ...style } = this.getGraphicStyle(attributes);\n        const { sourceNode, targetNode } = this;\n        const d = loop && isSameNode(sourceNode, targetNode) ? this.getLoopPath(attributes) : this.getKeyPath(attributes);\n        return {\n            d,\n            ...omitStyleProps(style, ['halo', 'label', 'startArrow', 'endArrow']),\n        };\n    }\n    getLoopPath(attributes) {\n        const { sourcePort, targetPort } = attributes;\n        const node = this.sourceNode;\n        const bbox = getNodeBBox(node);\n        const defaultDist = Math.max(getBBoxWidth(bbox), getBBoxHeight(bbox));\n        const { placement, clockwise, dist = defaultDist, } = subStyleProps(this.getGraphicStyle(attributes), 'loop');\n        return getCubicLoopPath(node, placement, clockwise, dist, sourcePort, targetPort);\n    }\n    getEndpoints(attributes) {\n        const { sourcePort: sourcePortKey, targetPort: targetPortKey } = attributes;\n        const { sourceNode, targetNode } = this;\n        const [sourcePort, targetPort] = findPorts(sourceNode, targetNode, sourcePortKey, targetPortKey);\n        const sourcePoint = getConnectionPoint(sourcePort || sourceNode, targetPort || targetNode);\n        const targetPoint = getConnectionPoint(targetPort || targetNode, sourcePort || sourceNode);\n        return [sourcePoint, targetPoint];\n    }\n    getHaloStyle(attributes) {\n        if (attributes.halo === false)\n            return false;\n        const keyStyle = this.getKeyStyle(attributes);\n        const haloStyle = subStyleProps(this.getGraphicStyle(attributes), 'halo');\n        return { ...keyStyle, ...haloStyle };\n    }\n    getLabelStyle(attributes) {\n        if (attributes.label === false || !attributes.labelText)\n            return false;\n        const labelStyle = subStyleProps(this.getGraphicStyle(attributes), 'label');\n        const { placement, offsetX, offsetY, autoRotate, maxWidth, ...restStyle } = labelStyle;\n        const labelPositionStyle = getLabelPositionStyle(this.shapeMap.key, placement, autoRotate, offsetX, offsetY);\n        const bbox = this.shapeMap.key.getLocalBounds();\n        const wordWrapWidth = getWordWrapWidthByEnds([bbox.min, bbox.max], maxWidth);\n        return Object.assign({ wordWrapWidth }, labelPositionStyle, restStyle);\n    }\n    getBadgeStyle(attributes) {\n        if (attributes.badge === false || !attributes.badgeText)\n            return false;\n        const { offsetX, offsetY, placement, ...badgeStyle } = subStyleProps(attributes, 'badge');\n        return Object.assign(badgeStyle, getBadgePositionStyle(this.shapeMap, placement, attributes.labelPlacement, offsetX, offsetY));\n    }\n    drawArrow(attributes, type) {\n        const isStart = type === 'start';\n        const arrowType = type === 'start' ? 'startArrow' : 'endArrow';\n        const enable = attributes[arrowType];\n        const keyShape = this.shapeMap.key;\n        if (enable) {\n            const arrowStyle = this.getArrowStyle(attributes, isStart);\n            const [marker, markerOffset, arrowOffset] = isStart\n                ? ['markerStart', 'markerStartOffset', 'startArrowOffset']\n                : ['markerEnd', 'markerEndOffset', 'endArrowOffset'];\n            const arrow = keyShape.parsedStyle[marker];\n            // update\n            if (arrow)\n                arrow.attr(arrowStyle);\n            // create\n            else {\n                const Ctor = arrowStyle.src ? Image : Path;\n                const arrowShape = new Ctor({ style: arrowStyle });\n                keyShape.style[marker] = arrowShape;\n            }\n            keyShape.style[markerOffset] = attributes[arrowOffset] || arrowStyle.width / 2 + +arrowStyle.lineWidth;\n        }\n        else {\n            // destroy\n            const marker = isStart ? 'markerStart' : 'markerEnd';\n            keyShape.style[marker]?.destroy();\n            keyShape.style[marker] = null;\n        }\n    }\n    getArrowStyle(attributes, isStart) {\n        const keyStyle = this.getShape('key').attributes;\n        const arrowType = isStart ? 'startArrow' : 'endArrow';\n        const { size, type, ...arrowStyle } = subStyleProps(this.getGraphicStyle(attributes), arrowType);\n        const [width, height] = parseSize(getArrowSize(keyStyle.lineWidth, size));\n        const arrowFn = isFunction(type) ? type : Symbol[type] || Symbol.triangle;\n        const d = arrowFn(width, height);\n        return Object.assign(pick(keyStyle, ['stroke', 'strokeOpacity', 'fillOpacity']), { width, height }, { ...(d && { d, fill: type === 'simple' ? '' : keyStyle.stroke }) }, arrowStyle);\n    }\n    drawLabelShape(attributes, container) {\n        this.upsert('label', Label, this.getLabelStyle(attributes), container);\n    }\n    drawHaloShape(attributes, container) {\n        this.upsert('halo', Path, this.getHaloStyle(attributes), container);\n    }\n    drawBadgeShape(attributes, container) {\n        this.upsert('badge', Badge, this.getBadgeStyle(attributes), container);\n    }\n    drawSourceArrow(attributes) {\n        this.drawArrow(attributes, 'start');\n    }\n    drawTargetArrow(attributes) {\n        this.drawArrow(attributes, 'end');\n    }\n    drawKeyShape(attributes, container) {\n        const key = this.upsert('key', Path, this.getKeyStyle(attributes), container);\n        return key;\n    }\n    render(attributes = this.parsedAttributes, container = this) {\n        // 1. key shape\n        this.drawKeyShape(attributes, container);\n        if (!this.getShape('key'))\n            return;\n        // 2. arrows\n        this.drawSourceArrow(attributes);\n        this.drawTargetArrow(attributes);\n        // 3. label\n        this.drawLabelShape(attributes, container);\n        // 4. halo\n        this.drawHaloShape(attributes, container);\n        // 5. badges\n        this.drawBadgeShape(attributes, container);\n    }\n    onframe() {\n        this.drawKeyShape(this.parsedAttributes, this);\n        this.drawSourceArrow(this.parsedAttributes);\n        this.drawTargetArrow(this.parsedAttributes);\n        this.drawHaloShape(this.parsedAttributes, this);\n        this.drawLabelShape(this.parsedAttributes, this);\n        this.drawBadgeShape(this.parsedAttributes, this);\n    }\n    animate(keyframes, options) {\n        const animation = super.animate(keyframes, options);\n        if (!animation)\n            return animation;\n        // 设置 currentTime 时触发更新\n        // Trigger update when setting currentTime\n        return new Proxy(animation, {\n            set: (target, propKey, value) => {\n                // 需要推迟 onframe 调用时机，等待节点位置更新完成\n                // Need to delay the timing of the onframe call, wait for the node position update to complete\n                if (propKey === 'currentTime')\n                    Promise.resolve().then(() => this.onframe());\n                return Reflect.set(target, propKey, value);\n            },\n        });\n    }\n}\n__decorate([\n    effect((self, attributes) => self.getLabelStyle(attributes))\n], BaseEdge.prototype, \"drawLabelShape\", null);\n__decorate([\n    effect((self, attributes) => self.getHaloStyle(attributes))\n], BaseEdge.prototype, \"drawHaloShape\", null);\n__decorate([\n    effect((self, attributes) => self.getBadgeStyle(attributes))\n], BaseEdge.prototype, \"drawBadgeShape\", null);\n__decorate([\n    effect((self, attributes) => self.getArrowStyle(attributes, 'start'))\n], BaseEdge.prototype, \"drawSourceArrow\", null);\n__decorate([\n    effect((self, attributes) => self.getArrowStyle(attributes, 'end'))\n], BaseEdge.prototype, \"drawTargetArrow\", null);\n__decorate([\n    effect((self, attributes) => self.getKeyStyle(attributes))\n], BaseEdge.prototype, \"drawKeyShape\", null);\n//# sourceMappingURL=base-edge.js.map","import { getCubicPath, getCurveControlPoint, parseCurveOffset, parseCurvePosition } from '../../utils/edge';\nimport { mergeOptions } from '../../utils/style';\nimport { BaseEdge } from './base-edge';\n/**\n * <zh/> 三次贝塞尔曲线\n *\n * <en/> Cubic Bezier curve\n */\nexport class Cubic extends BaseEdge {\n    static defaultStyleProps = {\n        curvePosition: 0.5,\n        curveOffset: 20,\n    };\n    constructor(options) {\n        super(mergeOptions({ style: Cubic.defaultStyleProps }, options));\n    }\n    /**\n     * @inheritdoc\n     */\n    getKeyPath(attributes) {\n        const [sourcePoint, targetPoint] = this.getEndpoints(attributes);\n        const { controlPoints, curvePosition, curveOffset } = attributes;\n        const actualControlPoints = this.getControlPoints(sourcePoint, targetPoint, parseCurvePosition(curvePosition), parseCurveOffset(curveOffset), controlPoints);\n        return getCubicPath(sourcePoint, targetPoint, actualControlPoints);\n    }\n    getControlPoints(sourcePoint, targetPoint, curvePosition, curveOffset, controlPoints) {\n        return controlPoints?.length === 2\n            ? controlPoints\n            : [\n                getCurveControlPoint(sourcePoint, targetPoint, curvePosition[0], curveOffset[0]),\n                getCurveControlPoint(sourcePoint, targetPoint, curvePosition[1], curveOffset[1]),\n            ];\n    }\n}\n//# sourceMappingURL=cubic.js.map","import { mergeOptions } from '../../utils/style';\nimport { Cubic } from './cubic';\n/**\n * <zh/> 水平方向的三次贝塞尔曲线\n *\n * <en/> Cubic Bezier curve in horizontal direction\n * @remarks\n * <zh/> 特别注意，计算控制点时主要考虑 x 轴上的距离，忽略 y 轴的变化\n *\n * <en/> Please note that when calculating the control points, the distance on the x-axis is mainly considered, and the change on the y-axis is ignored\n */\nexport class CubicHorizontal extends Cubic {\n    static defaultStyleProps = {\n        curvePosition: [0.5, 0.5],\n        curveOffset: [0, 0],\n    };\n    constructor(options) {\n        super(mergeOptions({ style: CubicHorizontal.defaultStyleProps }, options));\n    }\n    getControlPoints(sourcePoint, targetPoint, curvePosition, curveOffset) {\n        const xDist = targetPoint[0] - sourcePoint[0];\n        return [\n            [sourcePoint[0] + xDist * curvePosition[0] + curveOffset[0], sourcePoint[1]],\n            [targetPoint[0] - xDist * curvePosition[1] + curveOffset[1], targetPoint[1]],\n        ];\n    }\n}\n//# sourceMappingURL=cubic-horizontal.js.map","import { mergeOptions } from '../../utils/style';\nimport { Cubic } from './cubic';\n/**\n * <zh/> 垂直方向的三次贝塞尔曲线\n *\n * <en/> Cubic Bezier curve in vertical direction\n * @remarks\n * <zh/> 特别注意，计算控制点时主要考虑 y 轴上的距离，忽略 x 轴的变化\n *\n * <en/> Please note that when calculating the control points, the distance on the y-axis is mainly considered, and the change on the x-axis is ignored\n */\nexport class CubicVertical extends Cubic {\n    static defaultStyleProps = {\n        curvePosition: [0.5, 0.5],\n        curveOffset: [0, 0],\n    };\n    constructor(options) {\n        super(mergeOptions({ style: CubicVertical.defaultStyleProps }, options));\n    }\n    getControlPoints(sourcePoint, targetPoint, curvePosition, curveOffset) {\n        const yDist = targetPoint[1] - sourcePoint[1];\n        return [\n            [sourcePoint[0], sourcePoint[1] + yDist * curvePosition[0] + curveOffset[0]],\n            [targetPoint[0], targetPoint[1] - yDist * curvePosition[1] + curveOffset[1]],\n        ];\n    }\n}\n//# sourceMappingURL=cubic-vertical.js.map","import { mergeOptions } from '../../utils/style';\nimport { BaseEdge } from './base-edge';\n/**\n * <zh/> 直线\n *\n * <en/> Line\n * @remarks\n * <img width=\"300\" src=\"https://mdn.alipayobjects.com/huamei_qa8qxu/afts/img/A*YbpvTa4liAEAAAAAAAAAAAAADmJ7AQ/original\" />\n */\nexport class Line extends BaseEdge {\n    static defaultStyleProps = {};\n    constructor(options) {\n        super(mergeOptions({ style: Line.defaultStyleProps }, options));\n    }\n    getKeyPath(attributes) {\n        const [sourcePoint, targetPoint] = this.getEndpoints(attributes);\n        return [\n            ['M', sourcePoint[0], sourcePoint[1]],\n            ['L', targetPoint[0], targetPoint[1]],\n        ];\n    }\n}\n//# sourceMappingURL=line.js.map","import { getBBoxHeight, getBBoxWidth, getNodeBBox } from '../../utils/bbox';\nimport { getPolylineLoopPath, getPolylinePath } from '../../utils/edge';\nimport { findPorts, getConnectionPoint, getPortPosition } from '../../utils/element';\nimport { subStyleProps } from '../../utils/prefix';\nimport { orth } from '../../utils/router/orth';\nimport { mergeOptions } from '../../utils/style';\nimport { BaseEdge } from './base-edge';\n/**\n * <zh/> 折线\n *\n * <en/> Polyline\n */\nexport class Polyline extends BaseEdge {\n    static defaultStyleProps = {\n        radius: 0,\n        controlPoints: [],\n        router: false,\n        routerName: 'orth',\n        routerPadding: 10,\n    };\n    constructor(options) {\n        super(mergeOptions({ style: Polyline.defaultStyleProps }, options));\n    }\n    getKeyPath(attributes) {\n        const { radius } = attributes;\n        const { sourceNode, targetNode } = this;\n        // 1. 获取连接点（若有连接桩，取连接桩中心；反之，取节点中心）和连接桩 | Get connection points (if port, take port center; otherwise, take node center) and ports\n        const { sourcePoint, targetPoint, sourcePort, targetPort } = this.getEndpointsAndPorts(attributes);\n        // 2. 计算控制点 | Calculate control points\n        const controlPoints = this.getControlPoints(attributes, sourcePoint, targetPoint);\n        // 3. 计算实际的连接点 | Calculate the actual connection points\n        const newSourcePoint = getConnectionPoint(sourcePort || sourceNode, controlPoints[0] || targetPort || targetNode);\n        const newTargetPoint = getConnectionPoint(targetPort || targetNode, controlPoints[controlPoints.length - 1] || sourcePort || sourceNode);\n        // 4. 获取路径 | Get the path\n        return getPolylinePath([newSourcePoint, ...controlPoints, newTargetPoint], radius);\n    }\n    getEndpointsAndPorts(attributes) {\n        const { sourcePort: sourcePortKey, targetPort: targetPortKey } = attributes;\n        const { sourceNode, targetNode } = this;\n        const [sourcePort, targetPort] = findPorts(sourceNode, targetNode, sourcePortKey, targetPortKey);\n        return {\n            sourcePoint: sourcePort ? getPortPosition(sourcePort) : sourceNode.getCenter(),\n            targetPoint: targetPort ? getPortPosition(targetPort) : targetNode.getCenter(),\n            sourcePort,\n            targetPort,\n        };\n    }\n    getControlPoints(attributes, sourcePoint, targetPoint) {\n        const { controlPoints, router, routerPadding } = attributes;\n        const { sourceNode, targetNode } = this;\n        if (!router)\n            return [...controlPoints];\n        const sourceBBox = getNodeBBox(sourceNode, routerPadding);\n        const targetBBox = getNodeBBox(targetNode, routerPadding);\n        return orth(sourcePoint, targetPoint, sourceBBox, targetBBox, controlPoints, routerPadding);\n    }\n    getLoopPath(attributes) {\n        const { sourcePort: sourcePortKey, targetPort: targetPortKey, radius } = attributes;\n        const node = this.sourceNode;\n        const bbox = getNodeBBox(node);\n        // 默认转折点距离为 bbox 的最大宽高的 1/4 | Default distance of the turning point is 1/4 of the maximum width and height of the bbox\n        const defaultDist = Math.max(getBBoxWidth(bbox), getBBoxHeight(bbox)) / 4;\n        const { placement, clockwise, dist = defaultDist, } = subStyleProps(this.getGraphicStyle(attributes), 'loop');\n        return getPolylineLoopPath(node, radius, placement, clockwise, dist, sourcePortKey, targetPortKey);\n    }\n}\n//# sourceMappingURL=polyline.js.map","import { getCurveControlPoint, getQuadraticPath } from '../../utils/edge';\nimport { mergeOptions } from '../../utils/style';\nimport { BaseEdge } from './base-edge';\n/**\n * <zh/> 二次贝塞尔曲线\n *\n * <en/> Quadratic Bezier curve\n */\nexport class Quadratic extends BaseEdge {\n    static defaultStyleProps = {\n        curvePosition: 0.5,\n        curveOffset: 30,\n    };\n    constructor(options) {\n        super(mergeOptions({ style: Quadratic.defaultStyleProps }, options));\n    }\n    getKeyPath(attributes) {\n        const { curvePosition, curveOffset } = attributes;\n        const [sourcePoint, targetPoint] = this.getEndpoints(attributes);\n        const controlPoint = attributes.controlPoint || getCurveControlPoint(sourcePoint, targetPoint, curvePosition, curveOffset);\n        return getQuadraticPath(sourcePoint, targetPoint, controlPoint);\n    }\n}\n//# sourceMappingURL=quadratic.js.map","import { isFunction } from '@antv/util';\nimport { CommonEvent } from '../constants';\nimport { isCollapsed } from '../utils/collapsibility';\nimport { isElement } from '../utils/element';\nimport { BaseBehavior } from './base-behavior';\n/**\n * <zh/> 展开/收起组合元素交互\n *\n * <en/> Collapse/Expand Combo behavior\n * @remarks\n * <zh/> 通过双击 Combo 进行展开或收起 Combo。\n *\n * <en/> Expand or collapse a Combo by double-clicking on it.\n */\nexport class CollapseExpand extends BaseBehavior {\n    static defaultOptions = {\n        enable: true,\n        animation: true,\n        trigger: CommonEvent.DBLCLICK,\n    };\n    constructor(context, options) {\n        super(context, Object.assign({}, CollapseExpand.defaultOptions, options));\n        this.bindEvents();\n    }\n    update(options) {\n        this.unbindEvents();\n        super.update(options);\n        this.bindEvents();\n    }\n    bindEvents() {\n        const { graph } = this.context;\n        const { trigger } = this.options;\n        graph.on(`node:${trigger}`, this.onCollapseExpand);\n        graph.on(`combo:${trigger}`, this.onCollapseExpand);\n    }\n    unbindEvents() {\n        const { graph } = this.context;\n        const { trigger } = this.options;\n        graph.off(`node:${trigger}`, this.onCollapseExpand);\n        graph.off(`combo:${trigger}`, this.onCollapseExpand);\n    }\n    onCollapseExpand = async (event) => {\n        if (!this.validate(event))\n            return;\n        const { target } = event;\n        if (!isElement(target))\n            return;\n        const id = target.id;\n        const { model, graph } = this.context;\n        const data = model.getElementDataById(id);\n        if (!data)\n            return false;\n        const { onCollapse, onExpand, animation } = this.options;\n        if (isCollapsed(data)) {\n            await graph.expandElement(id, animation);\n            onExpand?.(id);\n        }\n        else {\n            await graph.collapseElement(id, animation);\n            onCollapse?.(id);\n        }\n    };\n    validate(event) {\n        if (this.destroyed)\n            return false;\n        const { enable } = this.options;\n        if (isFunction(enable))\n            return enable(event);\n        return !!enable;\n    }\n    destroy() {\n        this.unbindEvents();\n        super.destroy();\n    }\n}\n//# sourceMappingURL=collapse-expand.js.map","var map = {};\nexport default (function (prefix) {\n    prefix = prefix || 'g';\n    if (!map[prefix]) {\n        map[prefix] = 1;\n    }\n    else {\n        map[prefix] += 1;\n    }\n    return prefix + map[prefix];\n});\n//# sourceMappingURL=unique-id.js.map","import { isFunction, uniqueId } from '@antv/util';\nimport { CanvasEvent, ComboEvent, CommonEvent, EdgeEvent, NodeEvent } from '../constants';\nimport { BaseBehavior } from './base-behavior';\nconst ASSIST_EDGE_ID = 'g6-create-edge-assist-edge-id';\nconst ASSIST_NODE_ID = 'g6-create-edge-assist-node-id';\n/**\n * <zh/> 创建边交互\n *\n * <en/> Create edge behavior\n * @remarks\n * <zh/> 通过拖拽或点击节点创建边，支持自定义边样式。\n *\n * <en/> Create edges by dragging or clicking nodes, and support custom edge styles.\n */\nexport class CreateEdge extends BaseBehavior {\n    static defaultOptions = {\n        animation: true,\n        enable: true,\n        style: {},\n        trigger: 'drag',\n        onCreate: (data) => data,\n        onFinish: () => { },\n    };\n    source;\n    constructor(context, options) {\n        super(context, Object.assign({}, CreateEdge.defaultOptions, options));\n        this.bindEvents();\n    }\n    /**\n     * Update options\n     * @param options - The options to update\n     * @internal\n     */\n    update(options) {\n        super.update(options);\n        this.bindEvents();\n    }\n    bindEvents() {\n        const { graph } = this.context;\n        const { trigger } = this.options;\n        this.unbindEvents();\n        if (trigger === 'click') {\n            graph.on(NodeEvent.CLICK, this.handleCreateEdge);\n            graph.on(ComboEvent.CLICK, this.handleCreateEdge);\n            graph.on(CanvasEvent.CLICK, this.cancelEdge);\n            graph.on(EdgeEvent.CLICK, this.cancelEdge);\n        }\n        else {\n            graph.on(NodeEvent.DRAG_START, this.handleCreateEdge);\n            graph.on(ComboEvent.DRAG_START, this.handleCreateEdge);\n            graph.on(CommonEvent.POINTER_UP, this.drop);\n        }\n        graph.on(CommonEvent.POINTER_MOVE, this.updateAssistEdge);\n    }\n    drop = async (event) => {\n        const { targetType } = event;\n        if (['combo', 'node'].includes(targetType) && this.source) {\n            await this.handleCreateEdge(event);\n        }\n        else {\n            await this.cancelEdge();\n        }\n    };\n    handleCreateEdge = async (event) => {\n        if (!this.validate(event))\n            return;\n        const { graph, canvas, batch, element } = this.context;\n        const { style } = this.options;\n        if (this.source) {\n            this.createEdge(event);\n            await this.cancelEdge();\n            return;\n        }\n        batch.startBatch();\n        canvas.setCursor('crosshair');\n        this.source = this.getSelectedNodeIDs([event.target.id])[0];\n        graph.addNodeData([\n            {\n                id: ASSIST_NODE_ID,\n                style: {\n                    visibility: 'hidden',\n                    ports: [{ key: 'port-1', placement: [0.5, 0.5] }],\n                },\n            },\n        ]);\n        graph.addEdgeData([\n            {\n                id: ASSIST_EDGE_ID,\n                source: this.source,\n                target: ASSIST_NODE_ID,\n                style: {\n                    pointerEvents: 'none',\n                    ...style,\n                },\n            },\n        ]);\n        await element.draw({ animation: false })?.finished;\n    };\n    updateAssistEdge = async (event) => {\n        if (!this.source)\n            return;\n        const { model, element } = this.context;\n        model.translateNodeTo(ASSIST_NODE_ID, [event.canvas.x, event.canvas.y]);\n        await element.draw({ animation: false, silence: true })?.finished;\n    };\n    createEdge = (event) => {\n        const { graph } = this.context;\n        const { style, onFinish, onCreate } = this.options;\n        const targetId = event.target?.id;\n        if (targetId === undefined || this.source === undefined)\n            return;\n        const target = this.getSelectedNodeIDs([event.target.id])?.[0];\n        const id = `${this.source}-${target}-${uniqueId()}`;\n        const edgeData = onCreate({ id, source: this.source, target, style });\n        graph.addEdgeData([edgeData]);\n        onFinish(edgeData);\n    };\n    cancelEdge = async () => {\n        if (!this.source)\n            return;\n        const { graph, element, batch } = this.context;\n        graph.removeNodeData([ASSIST_NODE_ID]);\n        this.source = undefined;\n        await element.draw({ animation: false })?.finished;\n        batch.endBatch();\n    };\n    getSelectedNodeIDs(currTarget) {\n        return Array.from(new Set(this.context.graph\n            .getElementDataByState('node', this.options.state)\n            .map((node) => node.id)\n            .concat(currTarget)));\n    }\n    validate(event) {\n        if (this.destroyed)\n            return false;\n        const { enable } = this.options;\n        if (isFunction(enable))\n            return enable(event);\n        return !!enable;\n    }\n    unbindEvents() {\n        const { graph } = this.context;\n        graph.off(NodeEvent.CLICK, this.handleCreateEdge);\n        graph.off(ComboEvent.CLICK, this.handleCreateEdge);\n        graph.off(CanvasEvent.CLICK, this.cancelEdge);\n        graph.off(EdgeEvent.CLICK, this.cancelEdge);\n        graph.off(NodeEvent.DRAG_START, this.handleCreateEdge);\n        graph.off(ComboEvent.DRAG_START, this.handleCreateEdge);\n        graph.off(CommonEvent.POINTER_UP, this.drop);\n        graph.off(CommonEvent.POINTER_MOVE, this.updateAssistEdge);\n    }\n    destroy() {\n        this.unbindEvents();\n        super.destroy();\n    }\n}\n//# sourceMappingURL=create-edge.js.map","function debounce(func, wait, immediate) {\n    var timeout;\n    return function () {\n        var context = this, args = arguments;\n        var later = function () {\n            timeout = null;\n            if (!immediate) {\n                func.apply(context, args);\n            }\n        };\n        var callNow = immediate && !timeout;\n        clearTimeout(timeout);\n        timeout = setTimeout(later, wait);\n        if (callNow) {\n            func.apply(context, args);\n        }\n    };\n}\nexport default debounce;\n//# sourceMappingURL=debounce.js.map","import { debounce, isFunction, isObject } from '@antv/util';\nimport { CanvasEvent } from '../constants';\nimport { Shortcut } from '../utils/shortcut';\nimport { multiply } from '../utils/vector';\nimport { BaseBehavior } from './base-behavior';\n/**\n * <zh/> 拖拽画布交互\n *\n * <en/> Drag canvas behavior\n */\nexport class DragCanvas extends BaseBehavior {\n    static defaultOptions = {\n        enable: true,\n        sensitivity: 10,\n    };\n    shortcut;\n    defaultCursor;\n    constructor(context, options) {\n        super(context, Object.assign({}, DragCanvas.defaultOptions, options));\n        this.shortcut = new Shortcut(context.graph);\n        this.bindEvents();\n        this.defaultCursor = this.context.canvas.getConfig().cursor || 'default';\n    }\n    /**\n     * <zh/> 更新配置\n     *\n     * <en/> Update options\n     * @param options - <zh/> 配置项 | <en/> Options\n     * @internal\n     */\n    update(options) {\n        this.unbindEvents();\n        super.update(options);\n        this.bindEvents();\n    }\n    bindEvents() {\n        const { trigger } = this.options;\n        const { graph } = this.context;\n        if (isObject(trigger)) {\n            const { up = [], down = [], left = [], right = [] } = trigger;\n            this.shortcut.bind(up, (event) => this.onTranslate([0, 1], event));\n            this.shortcut.bind(down, (event) => this.onTranslate([0, -1], event));\n            this.shortcut.bind(left, (event) => this.onTranslate([1, 0], event));\n            this.shortcut.bind(right, (event) => this.onTranslate([-1, 0], event));\n        }\n        else {\n            graph.on(CanvasEvent.DRAG_START, this.onDragStart);\n            graph.on(CanvasEvent.DRAG, this.onDrag);\n            graph.on(CanvasEvent.DRAG_END, this.onDragEnd);\n        }\n    }\n    isDragging = false;\n    onDragStart = (event) => {\n        if (!this.validate(event))\n            return;\n        if (event.targetType !== 'canvas')\n            return;\n        this.isDragging = true;\n        this.context.canvas.setCursor('grabbing');\n    };\n    onDrag = (event) => {\n        if (!this.isDragging)\n            return;\n        const { x, y } = event.movement;\n        if ((x | y) !== 0) {\n            this.translate([x, y], false);\n        }\n    };\n    onDragEnd = () => {\n        this.isDragging = false;\n        this.context.canvas.setCursor(this.defaultCursor);\n        this.options.onFinish?.();\n    };\n    invokeOnFinish = debounce(() => {\n        this.options.onFinish?.();\n    }, 300);\n    async onTranslate(value, event) {\n        if (!this.validate(event))\n            return;\n        const { sensitivity } = this.options;\n        const delta = sensitivity * -1;\n        await this.translate(multiply(value, delta), this.options.animation);\n        this.invokeOnFinish();\n    }\n    /**\n     * <zh/> 平移画布\n     *\n     * <en/> Translate canvas\n     * @param offset - <zh/> 平移距离 | <en/> Translation distance\n     * @param animation - <zh/> 动画配置 | <en/> Animation configuration\n     * @internal\n     */\n    async translate(offset, animation) {\n        await this.context.graph.translateBy(offset, animation);\n    }\n    validate(event) {\n        if (this.destroyed)\n            return false;\n        const { enable } = this.options;\n        if (isFunction(enable))\n            return enable(event);\n        return !!enable;\n    }\n    unbindEvents() {\n        this.shortcut.unbindAll();\n        const { graph } = this.context;\n        graph.off(CanvasEvent.DRAG_START, this.onDragStart);\n        graph.off(CanvasEvent.DRAG, this.onDrag);\n        graph.off(CanvasEvent.DRAG_END, this.onDragEnd);\n    }\n    destroy() {\n        this.shortcut.destroy();\n        this.context.canvas.setCursor(this.defaultCursor);\n        super.destroy();\n    }\n}\n//# sourceMappingURL=drag-canvas.js.map","import { Rect } from '@antv/g';\nimport { isFunction } from '@antv/util';\nimport { COMBO_KEY, CanvasEvent, ComboEvent, CommonEvent } from '../constants';\nimport { getBBoxSize, getCombinedBBox } from '../utils/bbox';\nimport { idOf } from '../utils/id';\nimport { subStyleProps } from '../utils/prefix';\nimport { divide, subtract } from '../utils/vector';\nimport { BaseBehavior } from './base-behavior';\n/**\n * <zh/> 拖拽元素交互\n *\n * <en/> Drag element behavior\n */\nexport class DragElement extends BaseBehavior {\n    static defaultOptions = {\n        animation: true,\n        enable: (event) => ['node', 'combo'].includes(event.targetType),\n        dropEffect: 'move',\n        state: 'selected',\n        hideEdge: 'none',\n        shadow: false,\n        shadowZIndex: 100,\n        shadowFill: '#F3F9FF',\n        shadowFillOpacity: 0.5,\n        shadowStroke: '#1890FF',\n        shadowStrokeOpacity: 0.9,\n        shadowLineDash: [5, 5],\n        cursor: {\n            default: 'default',\n            grab: 'grab',\n            grabbing: 'grabbing',\n        },\n    };\n    enable = false;\n    enableElements = ['node', 'combo'];\n    target = [];\n    shadow;\n    shadowOrigin = [0, 0];\n    hiddenEdges = [];\n    isDragging = false;\n    get animation() {\n        if (!this.options.shadow)\n            return false;\n        return this.options.animation;\n    }\n    constructor(context, options) {\n        super(context, Object.assign({}, DragElement.defaultOptions, options));\n        this.onDragStart = this.onDragStart.bind(this);\n        this.onDrag = this.onDrag.bind(this);\n        this.onDragEnd = this.onDragEnd.bind(this);\n        this.onDrop = this.onDrop.bind(this);\n        this.bindEvents();\n    }\n    /**\n     * <zh/> 更新元素拖拽配置\n     *\n     * <en/> Update the element dragging configuration\n     * @param options - <zh/> 配置项 | <en/> options\n     * @internal\n     */\n    update(options) {\n        this.unbindEvents();\n        super.update(options);\n        this.bindEvents();\n    }\n    bindEvents() {\n        const { graph } = this.context;\n        this.enableElements.forEach((type) => {\n            graph.on(`${type}:${CommonEvent.DRAG_START}`, this.onDragStart);\n            graph.on(`${type}:${CommonEvent.DRAG}`, this.onDrag);\n            graph.on(`${type}:${CommonEvent.DRAG_END}`, this.onDragEnd);\n            graph.on(`${type}:${CommonEvent.POINTER_ENTER}`, this.setCursor);\n            graph.on(`${type}:${CommonEvent.POINTER_LEAVE}`, this.setCursor);\n        });\n        if (['link'].includes(this.options.dropEffect)) {\n            graph.on(ComboEvent.DROP, this.onDrop);\n            graph.on(CanvasEvent.DROP, this.onDrop);\n        }\n    }\n    /**\n     * <zh/> 获取当前选中的节点 id 集合\n     *\n     * <en/> Get the id collection of the currently selected node\n     * @param currTarget - <zh/> 当前拖拽目标元素 id 集合 | <en/> The id collection of the current drag target element\n     * @returns <zh/> 当前选中的节点 id 集合 | <en/> The id collection of the currently selected node\n     * @internal\n     */\n    getSelectedNodeIDs(currTarget) {\n        return Array.from(new Set(this.context.graph\n            .getElementDataByState('node', this.options.state)\n            .map((node) => node.id)\n            .concat(currTarget)));\n    }\n    /**\n     * Get the delta of the drag\n     * @param event - drag event object\n     * @returns delta\n     * @internal\n     */\n    getDelta(event) {\n        const zoom = this.context.graph.getZoom();\n        return divide([event.dx, event.dy], zoom);\n    }\n    /**\n     * <zh/> 拖拽开始时的回调\n     *\n     * <en/> Callback when dragging starts\n     * @param event - <zh/> 拖拽事件对象 | <en/> drag event object\n     * @internal\n     */\n    onDragStart(event) {\n        this.enable = this.validate(event);\n        if (!this.enable)\n            return;\n        const { batch, canvas } = this.context;\n        canvas.setCursor(this.options.cursor?.grabbing || 'grabbing');\n        this.isDragging = true;\n        batch.startBatch();\n        this.target = this.getSelectedNodeIDs([event.target.id]);\n        this.hideEdge();\n        this.context.graph.frontElement(this.target);\n        if (this.options.shadow)\n            this.createShadow(this.target);\n    }\n    /**\n     * <zh/> 拖拽过程中的回调\n     *\n     * <en/> Callback when dragging\n     * @param event - <zh/> 拖拽事件对象 | <en/> drag event object\n     * @internal\n     */\n    onDrag(event) {\n        if (!this.enable)\n            return;\n        const delta = this.getDelta(event);\n        if (this.options.shadow)\n            this.moveShadow(delta);\n        else\n            this.moveElement(this.target, delta);\n    }\n    /**\n     * <zh/> 元素拖拽结束的回调\n     *\n     * <en/> Callback when dragging ends\n     * @internal\n     */\n    onDragEnd() {\n        this.enable = false;\n        if (this.options.shadow) {\n            if (!this.shadow)\n                return;\n            this.shadow.style.visibility = 'hidden';\n            const { x = 0, y = 0 } = this.shadow.attributes;\n            const [dx, dy] = subtract([+x, +y], this.shadowOrigin);\n            this.moveElement(this.target, [dx, dy]);\n        }\n        this.showEdges();\n        this.options.onFinish?.(this.target);\n        const { batch, canvas } = this.context;\n        batch.endBatch();\n        canvas.setCursor(this.options.cursor?.grab || 'grab');\n        this.isDragging = false;\n        this.target = [];\n    }\n    /**\n     * <zh/> 拖拽放下的回调\n     *\n     * <en/> Callback when dragging is released\n     * @param event - <zh/> 拖拽事件对象 | <en/> drag event object\n     */\n    onDrop = async (event) => {\n        if (this.options.dropEffect !== 'link')\n            return;\n        const { model, element } = this.context;\n        const modifiedParentId = event.target.id;\n        this.target.forEach((id) => {\n            const originalParent = model.getParentData(id, COMBO_KEY);\n            // 如果是在原父 combo 内部拖拽，需要刷新 combo 数据\n            // If it is a drag and drop within the original parent combo, you need to refresh the combo data\n            if (originalParent && idOf(originalParent) === modifiedParentId) {\n                model.refreshComboData(modifiedParentId);\n            }\n            model.setParent(id, modifiedParentId, COMBO_KEY);\n        });\n        await element?.draw({ animation: true })?.finished;\n    };\n    setCursor = (event) => {\n        if (this.isDragging)\n            return;\n        const { type } = event;\n        const { canvas } = this.context;\n        const { cursor } = this.options;\n        if (type === CommonEvent.POINTER_ENTER)\n            canvas.setCursor(cursor?.grab || 'grab');\n        else\n            canvas.setCursor(cursor?.default || 'default');\n    };\n    /**\n     * <zh/> 验证元素是否允许拖拽\n     *\n     * <en/> Verify if the element is allowed to be dragged\n     * @param event - <zh/> 拖拽事件对象 | <en/> drag event object\n     * @returns <zh/> 是否允许拖拽 | <en/> Whether to allow dragging\n     * @internal\n     */\n    validate(event) {\n        if (this.destroyed)\n            return false;\n        const { enable } = this.options;\n        if (isFunction(enable))\n            return enable(event);\n        return !!enable;\n    }\n    /**\n     * <zh/> 移动元素\n     *\n     * <en/> Move the element\n     * @param ids - <zh/> 元素 id 集合 | <en/> element id collection\n     * @param offset <zh/> 偏移量 | <en/> offset\n     * @internal\n     */\n    async moveElement(ids, offset) {\n        const { graph, model } = this.context;\n        const { dropEffect } = this.options;\n        if (dropEffect === 'move')\n            ids.forEach((id) => model.refreshComboData(id));\n        graph.translateElementBy(Object.fromEntries(ids.map((id) => [id, offset])), false);\n    }\n    moveShadow(offset) {\n        if (!this.shadow)\n            return;\n        const { x = 0, y = 0 } = this.shadow.attributes;\n        const [dx, dy] = offset;\n        this.shadow.attr({ x: +x + dx, y: +y + dy });\n    }\n    createShadow(target) {\n        const shadowStyle = subStyleProps(this.options, 'shadow');\n        const bbox = getCombinedBBox(target.map((id) => this.context.element.getElement(id).getBounds()));\n        const [x, y] = bbox.min;\n        this.shadowOrigin = [x, y];\n        const [width, height] = getBBoxSize(bbox);\n        const positionStyle = { width, height, x, y };\n        if (this.shadow) {\n            this.shadow.attr({\n                ...shadowStyle,\n                ...positionStyle,\n                visibility: 'visible',\n            });\n        }\n        else {\n            this.shadow = new Rect({\n                style: {\n                    $layer: 'transient',\n                    ...shadowStyle,\n                    ...positionStyle,\n                    pointerEvents: 'none',\n                },\n            });\n            this.context.canvas.appendChild(this.shadow);\n        }\n    }\n    showEdges() {\n        if (this.options.shadow || this.hiddenEdges.length === 0)\n            return;\n        this.context.graph.showElement(this.hiddenEdges);\n        this.hiddenEdges = [];\n    }\n    /**\n     * Hide the edge\n     * @internal\n     */\n    hideEdge() {\n        const { hideEdge, shadow } = this.options;\n        if (hideEdge === 'none' || shadow)\n            return;\n        const { graph } = this.context;\n        if (hideEdge === 'all')\n            this.hiddenEdges = graph.getEdgeData().map(idOf);\n        else {\n            this.hiddenEdges = Array.from(new Set(this.target.map((id) => graph.getRelatedEdgesData(id, hideEdge).map(idOf)).flat()));\n        }\n        graph.hideElement(this.hiddenEdges);\n    }\n    unbindEvents() {\n        const { graph } = this.context;\n        this.enableElements.forEach((type) => {\n            graph.off(`${type}:${CommonEvent.DRAG_START}`, this.onDragStart);\n            graph.off(`${type}:${CommonEvent.DRAG}`, this.onDrag);\n            graph.off(`${type}:${CommonEvent.DRAG_END}`, this.onDragEnd);\n            graph.off(`${type}:${CommonEvent.POINTER_ENTER}`, this.setCursor);\n            graph.off(`${type}:${CommonEvent.POINTER_LEAVE}`, this.setCursor);\n        });\n        graph.off(`combo:${CommonEvent.DROP}`, this.onDrop);\n        graph.off(`canvas:${CommonEvent.DROP}`, this.onDrop);\n    }\n    destroy() {\n        this.unbindEvents();\n        this.shadow?.destroy();\n        super.destroy();\n    }\n}\n//# sourceMappingURL=drag-element.js.map","export class BaseLayout {\n    options;\n    context;\n    constructor(context, options) {\n        this.context = context;\n        this.options = options || {};\n    }\n    stop;\n    tick;\n}\n//# sourceMappingURL=base-layout.js.map","import { Graph as Graphlib } from '@antv/graphlib';\nimport { deepMix, isNumber } from '@antv/util';\nimport { COMBO_KEY } from '../constants';\nimport { BaseLayout } from '../layouts/base-layout';\nimport { idOf } from './id';\nimport { parsePoint } from './point';\n/**\n * <zh/> 判断是否是 combo 布局\n *\n * <en/> Determine if it is a combo layout\n * @param options - <zh/> 布局配置项 | <en/> Layout options\n * @returns <zh/> 是否是 combo 布局 | <en/> Whether it is a combo layout\n */\nexport function isComboLayout(options) {\n    const { type } = options;\n    if (['comboCombined', 'comboForce'].includes(type))\n        return true;\n    if (type === 'antv-dagre' && options.sortByCombo)\n        return true;\n    return false;\n}\n/**\n * <zh/> 判断是否是树图布局\n *\n * <en/> Determine if it is a tree layout\n * @param options - <zh/> 布局配置项 | <en/> Layout options\n * @returns <zh/> 是否是树图布局 | <en/> Whether it is a tree layout\n */\nexport function isTreeLayout(options) {\n    const { type } = options;\n    return ['compact-box', 'mindmap', 'dendrogram', 'indented'].includes(type);\n}\n/**\n * <zh/> 数据中是否指定了位置\n *\n * <en/> Is the position specified in the data\n * @param data - <zh/> 数据 | <en/> Data\n * @returns <zh/> 是否指定了位置 | <en/> Is the position specified\n */\nexport function isPositionSpecified(data) {\n    return isNumber(data.x) && isNumber(data.y);\n}\n/**\n * <zh/> 将图布局结果转换为 G6 数据\n *\n * <en/> Convert the layout result to G6 data\n * @param layoutMapping - <zh/> 布局映射 | <en/> Layout mapping\n * @returns <zh/> G6 数据 | <en/> G6 data\n */\nexport function layoutMapping2GraphData(layoutMapping) {\n    const { nodes, edges } = layoutMapping;\n    const data = { nodes: [], edges: [], combos: [] };\n    nodes.forEach((nodeLike) => {\n        const target = nodeLike.data._isCombo ? data.combos : data.nodes;\n        const { x, y, z = 0 } = nodeLike.data;\n        target?.push({\n            id: nodeLike.id,\n            style: { x, y, z },\n        });\n    });\n    edges.forEach((edge) => {\n        const { id, source, target, data: { points = [], controlPoints = points.slice(1, points.length - 1) }, } = edge;\n        data.edges.push({\n            id: id,\n            source: source,\n            target: target,\n            style: {\n                /**\n                 * antv-dagre 返回 controlPoints，dagre 返回 points\n                 * antv-dagre returns controlPoints, dagre returns points\n                 */\n                ...(controlPoints?.length ? { controlPoints: controlPoints.map(parsePoint) } : {}),\n            },\n        });\n    });\n    return data;\n}\n/**\n * <zh/> 将 @antv/layout 布局适配为 G6 布局\n *\n * <en/> Adapt @antv/layout layout to G6 layout\n * @param Ctor - <zh/> 布局类 | <en/> Layout class\n * @param context - <zh/> 运行时上下文 | <en/> Runtime context\n * @returns <zh/> G6 布局类 | <en/> G6 layout class\n */\nexport function layoutAdapter(Ctor, context) {\n    class AdaptLayout extends BaseLayout {\n        instance;\n        id;\n        constructor(context, options) {\n            super(context, options);\n            this.instance = new Ctor({});\n            this.id = this.instance.id;\n            if ('stop' in this.instance && 'tick' in this.instance) {\n                const instance = this.instance;\n                this.stop = instance.stop.bind(instance);\n                this.tick = (iterations) => {\n                    const tickResult = instance.tick(iterations);\n                    return layoutMapping2GraphData(tickResult);\n                };\n            }\n        }\n        async execute(model, options) {\n            return layoutMapping2GraphData(await this.instance.execute(this.graphData2LayoutModel(model), this.transformOptions(deepMix({}, this.options, options))));\n        }\n        transformOptions(options) {\n            const { onTick } = options;\n            if (!onTick)\n                return options;\n            options.onTick = (data) => onTick(layoutMapping2GraphData(data));\n            return options;\n        }\n        graphData2LayoutModel(data) {\n            const { nodes = [], edges = [], combos = [] } = data;\n            const nodesToLayout = nodes.map((datum) => {\n                const id = idOf(datum);\n                const { data, style, combo } = datum;\n                const result = {\n                    id,\n                    data: {\n                        ...data,\n                        // antv-dagre 会读取 data.parentId\n                        // antv-dagre will read data.parentId\n                        ...(combo ? { parentId: combo } : {}),\n                    },\n                    style: { ...style },\n                };\n                // 一些布局会从 data 中读取位置信息\n                if (style?.x)\n                    Object.assign(result.data, { x: style.x });\n                if (style?.y)\n                    Object.assign(result.data, { y: style.y });\n                if (style?.z)\n                    Object.assign(result.data, { z: style.z });\n                return result;\n            });\n            const nodesIdMap = new Map(nodesToLayout.map((node) => [node.id, node]));\n            const edgesToLayout = edges\n                .filter((edge) => {\n                const { source, target } = edge;\n                return nodesIdMap.has(source) && nodesIdMap.has(target);\n            })\n                .map((edge) => {\n                const { source, target, data, style } = edge;\n                return { id: idOf(edge), source, target, data: { ...data }, style: { ...style } };\n            });\n            const combosToLayout = combos.map((combo) => {\n                return { id: idOf(combo), data: { _isCombo: true, ...combo.data }, style: { ...combo.style } };\n            });\n            const layoutModel = new Graphlib({\n                nodes: [...nodesToLayout, ...combosToLayout],\n                edges: edgesToLayout,\n            });\n            if (context.model.model.hasTreeStructure(COMBO_KEY)) {\n                layoutModel.attachTreeStructure(COMBO_KEY);\n                // 同步层级关系 / Synchronize hierarchical relationships\n                nodesToLayout.forEach((node) => {\n                    const parent = context.model.model.getParent(node.id, COMBO_KEY);\n                    if (parent && layoutModel.hasNode(parent.id)) {\n                        layoutModel.setParent(node.id, parent.id, COMBO_KEY);\n                    }\n                });\n            }\n            return layoutModel;\n        }\n    }\n    return AdaptLayout;\n}\n/**\n * <zh/> 调用布局成员方法\n *\n * <en/> Call layout member methods\n * @remarks\n * <zh/> 提供一种通用的调用方式来调用 G6 布局和 \\@antv/layout 布局上的方法\n *\n * <en/> Provide a common way to call methods on G6 layout and \\@antv/layout layout\n * @param layout - <zh/> 布局实例 | <en/> Layout instance\n * @param method - <zh/> 方法名 | <en/> Method name\n * @param args - <zh/> 参数 | <en/> Arguments\n * @returns <zh/> 返回值 | <en/> Return value\n */\nexport function invokeLayoutMethod(layout, method, ...args) {\n    if (method in layout) {\n        return layout[method](...args);\n    }\n    // invoke AdaptLayout method\n    if ('instance' in layout) {\n        const instance = layout.instance;\n        if (method in instance)\n            return instance[method](...args);\n    }\n    return null;\n}\n/**\n * <zh/> 获取布局成员属性\n *\n * <en/> Get layout member properties\n * @param layout - <zh/> 布局实例 | <en/> Layout instance\n * @param name - <zh/> 属性名 | <en/> Property name\n * @returns <zh/> 返回值 | <en/> Return value\n */\nexport function getLayoutProperty(layout, name) {\n    if (name in layout)\n        return layout[name];\n    if ('instance' in layout) {\n        const instance = layout.instance;\n        if (name in instance)\n            return instance[name];\n    }\n    return null;\n}\n//# sourceMappingURL=layout.js.map","import { isFunction, isNumber } from '@antv/util';\nimport { GraphEvent } from '../constants';\nimport { cacheStyle, getCachedStyle, hasCachedStyle } from '../utils/cache';\nimport { idOf } from '../utils/id';\nimport { getDescendantShapes } from '../utils/shape';\nimport { BaseBehavior } from './base-behavior';\n/**\n * <zh/> 缩放画布过程中固定元素大小\n *\n * <en/> Fix element size while zooming\n */\nexport class FixElementSize extends BaseBehavior {\n    static defaultOptions = {\n        enable: (event) => event.data.scale < 1,\n        state: 'selected',\n        edge: [\n            {\n                shape: (shapes) => shapes.find((shape) => shape.className === 'key'),\n                fields: ['lineWidth'],\n            },\n            {\n                shape: (shapes) => shapes.find((shape) => shape.parentElement?.className === 'label' && shape.className === 'text'),\n                fields: ['fontSize'],\n            },\n        ],\n    };\n    elementCache = new Map();\n    constructor(context, options) {\n        super(context, Object.assign({}, FixElementSize.defaultOptions, options));\n        this.bindEvents();\n    }\n    isZoomEvent = (event) => 'scale' in event.data;\n    fixElementSize = async (event) => {\n        if (!this.isZoomEvent(event) || !this.validate(event))\n            return;\n        const { graph, element } = this.context;\n        const { node, edge, state } = this.options;\n        const elementData = [...graph.getElementDataByState('node', state), ...graph.getElementDataByState('edge', state)];\n        if (!elementData.length)\n            return;\n        const currentScale = event.data.scale || graph.getZoom();\n        elementData.forEach((elementData) => {\n            const id = idOf(elementData);\n            const el = element?.getElement(id);\n            const type = graph.getElementType(id);\n            const config = type === 'edge' ? edge : node;\n            if (!config) {\n                this.elementCache.set(id, el);\n                if (type === 'edge') {\n                    el.style.transformOrigin = 'center';\n                }\n                // FIXME: 修改 Path 的 localScale 属性时遇到问题，导致边会偏移错位\n                el.setLocalScale(1 / currentScale);\n                return;\n            }\n            const descendantShapes = getDescendantShapes(el);\n            const configs = Array.isArray(config) ? config : [config];\n            configs.forEach((config) => {\n                const { shape: shapeFilter, fields } = config;\n                const shape = shapeFilter(descendantShapes);\n                fields.forEach((field) => {\n                    if (!hasCachedStyle(shape, field))\n                        cacheStyle(shape, field);\n                    const oriFieldValue = getCachedStyle(shape, field);\n                    if (!isNumber(oriFieldValue))\n                        return;\n                    shape.style[field] = oriFieldValue / currentScale;\n                });\n            });\n        });\n    };\n    resetTransform = async () => {\n        if (this.elementCache) {\n            this.elementCache.forEach((el) => el.setLocalScale(1));\n            this.elementCache.clear();\n        }\n    };\n    bindEvents() {\n        const { graph } = this.context;\n        graph.on(GraphEvent.AFTER_TRANSFORM, this.fixElementSize);\n        graph.on(GraphEvent.BEFORE_DRAW, this.resetTransform);\n    }\n    unbindEvents() {\n        const { graph } = this.context;\n        graph.off(GraphEvent.AFTER_TRANSFORM, this.fixElementSize);\n        graph.off(GraphEvent.BEFORE_DRAW, this.resetTransform);\n    }\n    validate(event) {\n        if (this.destroyed)\n            return false;\n        const { enable } = this.options;\n        if (isFunction(enable))\n            return enable(event);\n        return !!enable;\n    }\n    destroy() {\n        this.unbindEvents();\n        super.destroy();\n    }\n}\n//# sourceMappingURL=fix-element-size.js.map","import { isFunction } from '@antv/util';\nimport { CommonEvent } from '../constants';\nimport { ELEMENT_TYPES } from '../constants/element';\nimport { BaseBehavior } from './base-behavior';\n/**\n * <zh/> 聚焦元素交互行为\n *\n * <en/> Focus element behavior\n * @remarks\n * <zh/> 点击元素时，将元素聚焦到视图中心。\n *\n * <en/> When an element is clicked, the element is focused to the center of the view.\n */\nexport class FocusElement extends BaseBehavior {\n    static defaultOptions = {\n        animation: {\n            easing: 'ease-in',\n            duration: 500,\n        },\n        enable: true,\n    };\n    constructor(context, options) {\n        super(context, Object.assign({}, FocusElement.defaultOptions, options));\n        this.bindEvents();\n    }\n    bindEvents() {\n        const { graph } = this.context;\n        this.unbindEvents();\n        ELEMENT_TYPES.forEach((type) => {\n            graph.on(`${type}:${CommonEvent.CLICK}`, this.focus);\n        });\n    }\n    focus = async (event) => {\n        if (!this.validate(event))\n            return;\n        const { graph } = this.context;\n        await graph.focusElement(event.target.id, this.options.animation);\n    };\n    validate(event) {\n        if (this.destroyed)\n            return false;\n        const { enable } = this.options;\n        if (isFunction(enable))\n            return enable(event);\n        return !!enable;\n    }\n    unbindEvents() {\n        const { graph } = this.context;\n        ELEMENT_TYPES.forEach((type) => {\n            graph.off(`${type}:${CommonEvent.CLICK}`, this.focus);\n        });\n    }\n    destroy() {\n        this.unbindEvents();\n        super.destroy();\n    }\n}\n//# sourceMappingURL=focus-element.js.map","import { isFunction } from '@antv/util';\nimport { CommonEvent } from '../constants';\nimport { ELEMENT_TYPES } from '../constants/element';\nimport { idsOf } from '../utils/id';\nimport { getElementNthDegreeIds } from '../utils/relation';\nimport { BaseBehavior } from './base-behavior';\n/**\n * <zh/> 悬浮元素交互\n *\n * <en/> Hover element behavior\n * @remarks\n * <zh/> 当鼠标悬停在元素上时，可以激活元素的状态，例如高亮节点或边。\n *\n * <en/> When the mouse hovers over an element, you can activate the state of the element, such as highlighting nodes or edges.\n */\nexport class HoverActivate extends BaseBehavior {\n    static defaultOptions = {\n        animation: false,\n        enable: true,\n        degree: 0,\n        state: 'active',\n        inactiveState: undefined,\n    };\n    isFrozen = false;\n    constructor(context, options) {\n        super(context, Object.assign({}, HoverActivate.defaultOptions, options));\n        this.bindEvents();\n    }\n    toggleFrozen = (e) => {\n        this.isFrozen = e.type === 'dragstart';\n    };\n    bindEvents() {\n        const { graph } = this.context;\n        this.unbindEvents();\n        ELEMENT_TYPES.forEach((type) => {\n            graph.on(`${type}:${CommonEvent.POINTER_OVER}`, this.hoverElement);\n            graph.on(`${type}:${CommonEvent.POINTER_OUT}`, this.hoverElement);\n        });\n        const canvas = this.context.canvas.document;\n        canvas.addEventListener(`${CommonEvent.DRAG_START}`, this.toggleFrozen);\n        canvas.addEventListener(`${CommonEvent.DRAG_END}`, this.toggleFrozen);\n    }\n    hoverElement = (event) => {\n        if (!this.validate(event))\n            return;\n        const isOver = event.type === CommonEvent.POINTER_OVER;\n        this.updateElementsState(event, isOver);\n        const { onHover, onHoverEnd } = this.options;\n        if (isOver)\n            onHover?.(event);\n        else\n            onHoverEnd?.(event);\n    };\n    updateElementsState = (event, add) => {\n        if (!this.options.state && !this.options.inactiveState)\n            return;\n        const { graph } = this.context;\n        const { state, degree, animation, inactiveState } = this.options;\n        const { targetType, target } = event;\n        const activeIds = degree\n            ? getElementNthDegreeIds(graph, targetType, target.id, degree)\n            : [target.id];\n        const states = {};\n        if (state) {\n            Object.assign(states, this.getElementsState(activeIds, state, add));\n        }\n        if (inactiveState) {\n            const inactiveIds = idsOf(graph.getData(), true).filter((id) => !activeIds.includes(id));\n            Object.assign(states, this.getElementsState(inactiveIds, inactiveState, add));\n        }\n        graph.setElementState(states, animation);\n    };\n    getElementsState = (ids, state, add) => {\n        const { graph } = this.context;\n        const states = {};\n        ids.forEach((id) => {\n            const currentState = graph.getElementState(id);\n            const updatedState = add ? [...currentState, state] : currentState.filter((s) => s !== state);\n            states[id] = updatedState;\n        });\n        return states;\n    };\n    validate(event) {\n        if (this.destroyed || this.isFrozen)\n            return false;\n        const { enable } = this.options;\n        if (isFunction(enable))\n            return enable(event);\n        return !!enable;\n    }\n    unbindEvents() {\n        const { graph } = this.context;\n        ELEMENT_TYPES.forEach((type) => {\n            graph.off(`${type}:${CommonEvent.POINTER_OVER}`, this.hoverElement);\n            graph.off(`${type}:${CommonEvent.POINTER_OUT}`, this.hoverElement);\n        });\n        const canvas = this.context.canvas.document;\n        canvas.removeEventListener(`${CommonEvent.DRAG_START}`, this.toggleFrozen);\n        canvas.removeEventListener(`${CommonEvent.DRAG_END}`, this.toggleFrozen);\n    }\n    destroy() {\n        this.unbindEvents();\n        super.destroy();\n    }\n}\n//# sourceMappingURL=hover-activate.js.map","import { debounce, isFunction } from '@antv/util';\nimport { GraphEvent } from '../constants';\nimport { setVisibility } from '../utils/visibility';\nimport { BaseBehavior } from './base-behavior';\n/**\n * <zh/> 操作画布过程中隐藏元素\n *\n * <en/> Hide elements during canvas operations (dragging, zooming, scrolling)\n */\nexport class OptimizeViewportTransform extends BaseBehavior {\n    static defaultOptions = {\n        enable: true,\n        debounce: 200,\n        shapes: { node: ['key'] },\n    };\n    isVisible = true;\n    constructor(context, options) {\n        super(context, Object.assign({}, OptimizeViewportTransform.defaultOptions, options));\n        this.bindEvents();\n    }\n    filterShapes = (shapes, classnames) => {\n        return shapes.filter((shape) => shape.className && !classnames?.includes(shape.className));\n    };\n    setElementsVisibility = (elements, visibility, excludedClassnames) => {\n        elements.forEach((element) => {\n            setVisibility(element, visibility, excludedClassnames && ((shapes) => this.filterShapes(shapes, excludedClassnames)));\n        });\n    };\n    hideShapes = (event) => {\n        if (!this.validate(event) || !this.isVisible)\n            return;\n        const { element } = this.context;\n        const { shapes = {} } = this.options;\n        this.setElementsVisibility(element.getNodes(), 'hidden', shapes.node);\n        this.setElementsVisibility(element.getEdges(), 'hidden', shapes.edge);\n        this.setElementsVisibility(element.getCombos(), 'hidden', shapes.combo);\n        this.isVisible = false;\n    };\n    showShapes = debounce((event) => {\n        if (!this.validate(event) || this.isVisible)\n            return;\n        const { element } = this.context;\n        this.setElementsVisibility(element.getNodes(), 'visible');\n        this.setElementsVisibility(element.getEdges(), 'visible');\n        this.setElementsVisibility(element.getCombos(), 'visible');\n        this.isVisible = true;\n    }, this.options.debounce);\n    bindEvents() {\n        const { graph } = this.context;\n        graph.on(GraphEvent.BEFORE_TRANSFORM, this.hideShapes);\n        graph.on(GraphEvent.AFTER_TRANSFORM, this.showShapes);\n    }\n    unbindEvents() {\n        const { graph } = this.context;\n        graph.off(GraphEvent.BEFORE_TRANSFORM, this.hideShapes);\n        graph.off(GraphEvent.AFTER_TRANSFORM, this.showShapes);\n    }\n    validate(event) {\n        if (this.destroyed)\n            return false;\n        const { enable } = this.options;\n        if (isFunction(enable))\n            return enable(event);\n        return !!enable;\n    }\n    destroy() {\n        this.unbindEvents();\n        super.destroy();\n    }\n}\n//# sourceMappingURL=optimize-viewport-transform.js.map","import { isFunction, isObject } from '@antv/util';\nimport { CommonEvent } from '../constants';\nimport { Shortcut } from '../utils/shortcut';\nimport { BaseBehavior } from './base-behavior';\n/**\n * <zh/> 滚动画布交互\n *\n * <en/> Scroll canvas behavior\n */\nexport class ScrollCanvas extends BaseBehavior {\n    static defaultOptions = {\n        enable: true,\n        sensitivity: 1,\n    };\n    shortcut;\n    constructor(context, options) {\n        super(context, Object.assign({}, ScrollCanvas.defaultOptions, options));\n        this.shortcut = new Shortcut(context.graph);\n        this.bindEvents();\n    }\n    /**\n     * <zh/> 更新配置\n     *\n     * <en/> Update options\n     * @param options - <zh/> 配置项 | <en/> Options\n     * @internal\n     */\n    update(options) {\n        super.update(options);\n        this.bindEvents();\n    }\n    bindEvents() {\n        const { trigger } = this.options;\n        this.shortcut.unbindAll();\n        if (isObject(trigger)) {\n            this.graphDom?.removeEventListener(CommonEvent.WHEEL, this.onWheel);\n            const { up = [], down = [], left = [], right = [] } = trigger;\n            this.shortcut.bind(up, (event) => this.scroll([0, -10], event));\n            this.shortcut.bind(down, (event) => this.scroll([0, 10], event));\n            this.shortcut.bind(left, (event) => this.scroll([-10, 0], event));\n            this.shortcut.bind(right, (event) => this.scroll([10, 0], event));\n        }\n        else {\n            /**\n             * 这里必需在原生canvas上绑定wheel事件，参考：\n             * https://g.antv.antgroup.com/api/event/faq#%E5%9C%A8-chrome-%E4%B8%AD%E7%A6%81%E6%AD%A2%E9%A1%B5%E9%9D%A2%E9%BB%98%E8%AE%A4%E6%BB%9A%E5%8A%A8%E8%A1%8C%E4%B8%BA\n             */\n            this.graphDom?.addEventListener(CommonEvent.WHEEL, this.onWheel, { passive: false });\n        }\n    }\n    get graphDom() {\n        return this.context.graph.getCanvas().getContextService().getDomElement();\n    }\n    onWheel = async (event) => {\n        event.preventDefault();\n        const diffX = event.deltaX;\n        const diffY = event.deltaY;\n        await this.scroll([-diffX, -diffY], event);\n    };\n    formatDisplacement([dx, dy]) {\n        const { direction, sensitivity } = this.options;\n        dx = dx * sensitivity;\n        dy = dy * sensitivity;\n        if (direction === 'x') {\n            dy = 0;\n        }\n        else if (direction === 'y') {\n            dx = 0;\n        }\n        return [dx, dy];\n    }\n    async scroll(value, event) {\n        if (!this.validate(event))\n            return;\n        const { onFinish } = this.options;\n        const graph = this.context.graph;\n        const formattedValue = this.formatDisplacement(value);\n        await graph.translateBy(formattedValue, false);\n        onFinish?.();\n    }\n    validate(event) {\n        if (this.destroyed)\n            return false;\n        const { enable } = this.options;\n        if (isFunction(enable))\n            return enable(event);\n        return !!enable;\n    }\n    /**\n     * <zh/> 销毁画布滚动\n     *\n     * <en/> Destroy the canvas scrolling\n     */\n    destroy() {\n        this.shortcut.destroy();\n        this.graphDom?.removeEventListener(CommonEvent.WHEEL, this.onWheel);\n        super.destroy();\n    }\n}\n//# sourceMappingURL=scroll-canvas.js.map","import { clamp, isArray, isFunction, isObject } from '@antv/util';\nimport { CommonEvent } from '../constants';\nimport { parsePoint } from '../utils/point';\nimport { Shortcut } from '../utils/shortcut';\nimport { BaseBehavior } from './base-behavior';\n/**\n * <zh/> 缩放画布交互\n *\n * <en/> Zoom canvas behavior\n */\nexport class ZoomCanvas extends BaseBehavior {\n    static defaultOptions = {\n        animation: { duration: 200 },\n        enable: true,\n        sensitivity: 1,\n        trigger: [],\n    };\n    shortcut;\n    constructor(context, options) {\n        super(context, Object.assign({}, ZoomCanvas.defaultOptions, options));\n        this.shortcut = new Shortcut(context.graph);\n        this.bindEvents();\n    }\n    /**\n     * <zh/> 更新配置\n     *\n     * <en/> Update options\n     * @param options - <zh/> 配置项 | <en/> Options\n     * @internal\n     */\n    update(options) {\n        super.update(options);\n        this.bindEvents();\n    }\n    bindEvents() {\n        const { trigger } = this.options;\n        this.shortcut.unbindAll();\n        if (isArray(trigger)) {\n            this.preventDefault(CommonEvent.WHEEL);\n            this.shortcut.bind([...trigger, CommonEvent.WHEEL], (event) => {\n                const { deltaX, deltaY } = event;\n                this.zoom(-(deltaY ?? deltaX), event, false);\n            });\n        }\n        if (isObject(trigger)) {\n            const { zoomIn = [], zoomOut = [], reset = [], } = trigger;\n            this.shortcut.bind(zoomIn, (event) => this.zoom(10, event, this.options.animation));\n            this.shortcut.bind(zoomOut, (event) => this.zoom(-10, event, this.options.animation));\n            this.shortcut.bind(reset, this.onReset);\n        }\n    }\n    /**\n     * <zh/> 缩放画布\n     *\n     * <en/> Zoom canvas\n     * @param value - <zh/> 缩放值， > 0 放大， < 0 缩小 | <en/> Zoom value, > 0 zoom in, < 0 zoom out\n     * @param event - <zh/> 事件对象 | <en/> Event object\n     * @param animation - <zh/> 缩放动画配置 | <en/> Zoom animation configuration\n     */\n    zoom = async (value, event, animation) => {\n        if (!this.validate(event))\n            return;\n        const { graph } = this.context;\n        let origin;\n        if ('viewport' in event) {\n            origin = parsePoint(event.viewport);\n        }\n        const { sensitivity, onFinish } = this.options;\n        const ratio = 1 + (clamp(value, -50, 50) * sensitivity) / 100;\n        const zoom = graph.getZoom();\n        await graph.zoomTo(zoom * ratio, animation, origin);\n        onFinish?.();\n    };\n    onReset = async () => {\n        await this.context.graph.zoomTo(1, this.options.animation);\n    };\n    /**\n     * <zh/> 验证是否可以缩放\n     *\n     * <en/> Verify whether it can be zoomed\n     * @param event - <zh/> 事件对象 | <en/> Event object\n     * @returns <zh/> 是否可以缩放 | <en/> Whether it can be zoomed\n     * @internal\n     */\n    validate(event) {\n        if (this.destroyed)\n            return false;\n        const { enable } = this.options;\n        if (isFunction(enable))\n            return enable(event);\n        return !!enable;\n    }\n    preventDefault(eventName) {\n        const listener = (e) => e.preventDefault();\n        const container = this.context.canvas.getContainer();\n        if (!container)\n            return;\n        container.addEventListener(eventName, listener);\n    }\n    /**\n     * <zh/> 销毁缩放画布\n     *\n     * <en/> Destroy zoom canvas\n     */\n    destroy() {\n        this.shortcut.destroy();\n        super.destroy();\n    }\n}\n//# sourceMappingURL=zoom-canvas.js.map","import each from './each';\nimport isArray from './is-array';\nimport isPlainObject from './is-plain-object';\nvar reduce = function (arr, fn, init) {\n    if (!isArray(arr) && !isPlainObject(arr)) {\n        return arr;\n    }\n    var result = init;\n    each(arr, function (data, i) {\n        result = fn(result, data, i);\n    });\n    return result;\n};\nexport default reduce;\n//# sourceMappingURL=reduce.js.map","import reduce from './reduce';\nexport default (function (obj, keys) {\n    return reduce(obj, function (r, curr, key) {\n        if (!keys.includes(key)) {\n            r[key] = curr;\n        }\n        return r;\n    }, {});\n});\n//# sourceMappingURL=omit.js.map","import { isNumber } from '@antv/util';\nconst parseInt10 = (d) => (d ? parseInt(d) : 0);\n/**\n * Get the container's bounding size.\n * @param container dom element.\n * @returns the container width and height\n */\nfunction getContainerSize(container) {\n    const style = getComputedStyle(container);\n    const wrapperWidth = container.clientWidth || parseInt10(style.width);\n    const wrapperHeight = container.clientHeight || parseInt10(style.height);\n    const widthPadding = parseInt10(style.paddingLeft) + parseInt10(style.paddingRight);\n    const heightPadding = parseInt10(style.paddingTop) + parseInt10(style.paddingBottom);\n    return [wrapperWidth - widthPadding, wrapperHeight - heightPadding];\n}\n/**\n * Get the size of Graph.\n * @param container container of Graph\n * @returns Size of Graph\n */\nexport function sizeOf(container) {\n    let effectiveWidth = 640;\n    let effectiveHeight = 480;\n    const [containerWidth, containerHeight] = getContainerSize(container);\n    effectiveWidth = containerWidth || effectiveWidth;\n    effectiveHeight = containerHeight || effectiveHeight;\n    /** Minimum width */\n    const MIN_CHART_WIDTH = 1;\n    /** Minimum height */\n    const MIN_CHART_HEIGHT = 1;\n    return [\n        Math.max(isNumber(effectiveWidth) ? effectiveWidth : MIN_CHART_WIDTH, MIN_CHART_WIDTH),\n        Math.max(isNumber(effectiveHeight) ? effectiveHeight : MIN_CHART_HEIGHT, MIN_CHART_HEIGHT),\n    ];\n}\n/**\n * Create a plugin DOM element.\n * @param type - plugin type\n * @param cover - cover the container\n * @returns plugin DOM element\n */\nexport function createPluginContainer(type, cover = true) {\n    const el = document.createElement('div');\n    el.setAttribute('class', `g6-${type}`);\n    el.style.position = 'absolute';\n    el.style.display = 'block';\n    if (cover) {\n        el.style.inset = '0px';\n        el.style.height = '100%';\n        el.style.width = '100%';\n        el.style.overflow = 'hidden';\n        el.style.pointerEvents = 'none';\n    }\n    return el;\n}\n/**\n * Create a DOM element, if exists, remove it and create a new one.\n * @param id - id\n * @param tag - tag\n * @param style - style\n * @param innerHTML - innerHTML\n * @param container - container\n * @returns new DOM element\n */\nexport function insertDOM(id, tag = 'div', style = {}, innerHTML = '', container = document.body) {\n    // 如果存在则删除\n    const dom = document.getElementById(id);\n    if (dom)\n        dom.remove();\n    // 重新创建\n    const div = document.createElement(tag);\n    div.innerHTML = innerHTML;\n    div.id = id;\n    Object.assign(div.style, style);\n    container.appendChild(div);\n    return div;\n}\n/**\n * Insert a DOM element before the first child of the container.\n * @param container - container\n * @param element - element\n */\nexport function insertBefore(container, element) {\n    const firstChild = container.firstChild;\n    if (firstChild) {\n        container.insertBefore(element, firstChild);\n    }\n    else {\n        container.appendChild(element);\n    }\n}\n//# sourceMappingURL=dom.js.map","import { BaseExtension } from '../registry/extension';\nexport class BasePlugin extends BaseExtension {\n}\n//# sourceMappingURL=base-plugin.js.map","import { omit } from '@antv/util';\nimport { createPluginContainer } from '../../utils/dom';\nimport { BasePlugin } from '../base-plugin';\n/**\n * <zh/> 背景图\n *\n * <en/> Background image\n * @remarks\n * <zh/> 支持为图画布设置一个背景图片，让画布更有层次感、叙事性。\n *\n * <en/> Support setting a background image for the canvas to make the canvas more hierarchical and narrative.\n */\nexport class Background extends BasePlugin {\n    static defaultOptions = {\n        transition: 'background 0.5s',\n        backgroundSize: 'cover',\n    };\n    $element = createPluginContainer('background');\n    constructor(context, options) {\n        super(context, Object.assign({}, Background.defaultOptions, options));\n        const $container = this.context.canvas.getContainer();\n        $container.prepend(this.$element);\n        this.update(options);\n    }\n    /**\n     * <zh/> 更新背景图配置\n     *\n     * <en/> Update the background image configuration\n     * @param options - <zh/> 配置项 | <en/> Options\n     * @internal\n     */\n    async update(options) {\n        super.update(options);\n        // Set the background style.\n        Object.assign(this.$element.style, omit(this.options, ['key', 'type']));\n    }\n    /**\n     * <zh/> 销毁背景图\n     *\n     * <en/> Destroy the background image\n     */\n    destroy() {\n        super.destroy();\n        // Remove the background dom.\n        this.$element.remove();\n    }\n}\n//# sourceMappingURL=index.js.map","/**\n * bubblesets-js\n * https://github.com/upsetjs/bubblesets-js\n *\n * Copyright (c) 2021-2022 Samuel Gratzl <sam@sgratzl.com>\n */\n\nfunction linePtSegDistSq(lx1, ly1, lx2, ly2, x, y) {\n    const x1 = lx1;\n    const y1 = ly1;\n    const x2 = lx2 - x1;\n    const y2 = ly2 - y1;\n    let px = x - x1;\n    let py = y - y1;\n    let dotprod = px * x2 + py * y2;\n    let projlenSq = 0;\n    if (dotprod <= 0) {\n        projlenSq = 0;\n    }\n    else {\n        px = x2 - px;\n        py = y2 - py;\n        dotprod = px * x2 + py * y2;\n        if (dotprod <= 0) {\n            projlenSq = 0;\n        }\n        else {\n            projlenSq = (dotprod * dotprod) / (x2 * x2 + y2 * y2);\n        }\n    }\n    const lenSq = px * px + py * py - projlenSq;\n    if (lenSq < 0) {\n        return 0;\n    }\n    return lenSq;\n}\nfunction ptsDistanceSq(x1, y1, x2, y2) {\n    return (x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2);\n}\nfunction doublePointsEqual(x1, y1, x2, y2, delta) {\n    return ptsDistanceSq(x1, y1, x2, y2) < delta * delta;\n}\nfunction round(digits) {\n    if (!Number.isFinite(digits)) {\n        return (v) => v;\n    }\n    if (digits === 0) {\n        return Math.round;\n    }\n    const factor = Math.pow(10, digits);\n    return (v) => Math.round(v * factor) / factor;\n}\n\nfunction lineBoundingBox(line) {\n    const minX = Math.min(line.x1, line.x2);\n    const maxX = Math.max(line.x1, line.x2);\n    const minY = Math.min(line.y1, line.y2);\n    const maxY = Math.max(line.y1, line.y2);\n    return {\n        x: minX,\n        y: minY,\n        x2: maxX,\n        y2: maxY,\n        width: maxX - minX,\n        height: maxY - minY,\n    };\n}\nclass Line {\n    constructor(x1, y1, x2, y2) {\n        this.x1 = x1;\n        this.y1 = y1;\n        this.x2 = x2;\n        this.y2 = y2;\n    }\n    equals(that) {\n        return this.x1 === that.x1 && this.y1 === that.y1 && this.x2 === that.x2 && this.y2 === that.y2;\n    }\n    draw(ctx) {\n        ctx.moveTo(this.x1, this.y1);\n        ctx.lineTo(this.x2, this.y2);\n    }\n    toString() {\n        return `Line(from=(${this.x1},${this.y1}),to=(${this.x2},${this.y2}))`;\n    }\n    static from(l) {\n        return new Line(l.x1, l.y1, l.x2, l.y2);\n    }\n    cuts(px, py) {\n        if (this.y1 === this.y2) {\n            return false;\n        }\n        if ((py < this.y1 && py <= this.y2) || (py > this.y1 && py >= this.y2)) {\n            return false;\n        }\n        if (px > this.x1 && px >= this.x2) {\n            return false;\n        }\n        if (px < this.x1 && px <= this.x2) {\n            return true;\n        }\n        const cross = this.x1 + ((py - this.y1) * (this.x2 - this.x1)) / (this.y2 - this.y1);\n        return px <= cross;\n    }\n    distSquare(x, y) {\n        return linePtSegDistSq(this.x1, this.y1, this.x2, this.y2, x, y);\n    }\n    ptClose(x, y, r) {\n        if (this.x1 < this.x2) {\n            if (x < this.x1 - r || x > this.x2 + r) {\n                return false;\n            }\n        }\n        else {\n            if (x < this.x2 - r || x > this.x1 + r) {\n                return false;\n            }\n        }\n        if (this.y1 < this.y2) {\n            if (y < this.y1 - r || y > this.y2 + r) {\n                return false;\n            }\n        }\n        else {\n            if (y < this.y2 - r || y > this.y1 + r) {\n                return false;\n            }\n        }\n        return true;\n    }\n}\n\nvar EState;\n(function (EState) {\n    EState[EState[\"POINT\"] = 1] = \"POINT\";\n    EState[EState[\"PARALLEL\"] = 2] = \"PARALLEL\";\n    EState[EState[\"COINCIDENT\"] = 3] = \"COINCIDENT\";\n    EState[EState[\"NONE\"] = 4] = \"NONE\";\n})(EState || (EState = {}));\nclass Intersection {\n    constructor(state, x = 0, y = 0) {\n        this.state = state;\n        this.x = x;\n        this.y = y;\n    }\n}\nfunction intersectLineLine(la, lb) {\n    const uaT = (lb.x2 - lb.x1) * (la.y1 - lb.y1) - (lb.y2 - lb.y1) * (la.x1 - lb.x1);\n    const ubT = (la.x2 - la.x1) * (la.y1 - lb.y1) - (la.y2 - la.y1) * (la.x1 - lb.x1);\n    const uB = (lb.y2 - lb.y1) * (la.x2 - la.x1) - (lb.x2 - lb.x1) * (la.y2 - la.y1);\n    if (uB) {\n        const ua = uaT / uB;\n        const ub = ubT / uB;\n        if (0 <= ua && ua <= 1 && 0 <= ub && ub <= 1) {\n            return new Intersection(EState.POINT, la.x1 + ua * (la.x2 - la.x1), la.y1 + ua * (la.y2 - la.y1));\n        }\n        return new Intersection(EState.NONE);\n    }\n    return new Intersection(uaT === 0 || ubT === 0 ? EState.COINCIDENT : EState.PARALLEL);\n}\nfunction fractionAlongLineA(la, lb) {\n    const uaT = (lb.x2 - lb.x1) * (la.y1 - lb.y1) - (lb.y2 - lb.y1) * (la.x1 - lb.x1);\n    const ubT = (la.x2 - la.x1) * (la.y1 - lb.y1) - (la.y2 - la.y1) * (la.x1 - lb.x1);\n    const uB = (lb.y2 - lb.y1) * (la.x2 - la.x1) - (lb.x2 - lb.x1) * (la.y2 - la.y1);\n    if (uB) {\n        const ua = uaT / uB;\n        const ub = ubT / uB;\n        if (0 <= ua && ua <= 1 && 0 <= ub && ub <= 1) {\n            return ua;\n        }\n    }\n    return Number.POSITIVE_INFINITY;\n}\nfunction hasFractionToLineCenter(bounds, line) {\n    function testLine(xa, ya, xb, yb) {\n        let testDistance = fractionAlongLineA(line, new Line(xa, ya, xb, yb));\n        testDistance = Math.abs(testDistance - 0.5);\n        if (testDistance >= 0 && testDistance <= 1) {\n            return 1;\n        }\n        return 0;\n    }\n    let countIntersections = testLine(bounds.x, bounds.y, bounds.x2, bounds.y);\n    countIntersections += testLine(bounds.x, bounds.y, bounds.x, bounds.y2);\n    if (countIntersections > 1) {\n        return true;\n    }\n    countIntersections += testLine(bounds.x, bounds.y2, bounds.x2, bounds.y2);\n    if (countIntersections > 1) {\n        return true;\n    }\n    countIntersections += testLine(bounds.x2, bounds.y, bounds.x2, bounds.y2);\n    return countIntersections > 0;\n}\nvar OutCode;\n(function (OutCode) {\n    OutCode[OutCode[\"LEFT\"] = 0] = \"LEFT\";\n    OutCode[OutCode[\"TOP\"] = 1] = \"TOP\";\n    OutCode[OutCode[\"RIGHT\"] = 2] = \"RIGHT\";\n    OutCode[OutCode[\"BOTTOM\"] = 3] = \"BOTTOM\";\n})(OutCode || (OutCode = {}));\nfunction outcode(bounds, px, py) {\n    const out = new Set();\n    if (bounds.width <= 0) {\n        out.add(OutCode.LEFT);\n        out.add(OutCode.RIGHT);\n    }\n    else if (px < bounds.x) {\n        out.add(OutCode.LEFT);\n    }\n    else if (px > bounds.x + bounds.width) {\n        out.add(OutCode.RIGHT);\n    }\n    if (bounds.height <= 0) {\n        out.add(OutCode.TOP);\n        out.add(OutCode.BOTTOM);\n    }\n    else if (py < bounds.y) {\n        out.add(OutCode.TOP);\n    }\n    else if (py > bounds.y + bounds.height) {\n        out.add(OutCode.BOTTOM);\n    }\n    return out;\n}\nfunction intersectsLine(bounds, line) {\n    let x1 = line.x1;\n    let y1 = line.y1;\n    const x2 = line.x2;\n    const y2 = line.y2;\n    const out2 = Array.from(outcode(bounds, x2, y2));\n    if (out2.length === 0) {\n        return true;\n    }\n    let out1 = outcode(bounds, x1, y1);\n    while (out1.size !== 0) {\n        for (const a of out2) {\n            if (out1.has(a)) {\n                return false;\n            }\n        }\n        if (out1.has(OutCode.RIGHT) || out1.has(OutCode.LEFT)) {\n            let x = bounds.x;\n            if (out1.has(OutCode.RIGHT)) {\n                x += bounds.width;\n            }\n            y1 = y1 + ((x - x1) * (y2 - y1)) / (x2 - x1);\n            x1 = x;\n        }\n        else {\n            let y = bounds.y;\n            if (out1.has(OutCode.BOTTOM)) {\n                y += bounds.height;\n            }\n            x1 = x1 + ((y - y1) * (x2 - x1)) / (y2 - y1);\n            y1 = y;\n        }\n        out1 = outcode(bounds, x1, y1);\n    }\n    return true;\n}\nfunction fractionToLineCenter(bounds, line) {\n    let minDistance = Number.POSITIVE_INFINITY;\n    let countIntersections = 0;\n    function testLine(xa, ya, xb, yb) {\n        let testDistance = fractionAlongLineA(line, new Line(xa, ya, xb, yb));\n        testDistance = Math.abs(testDistance - 0.5);\n        if (testDistance >= 0 && testDistance <= 1) {\n            countIntersections++;\n            if (testDistance < minDistance) {\n                minDistance = testDistance;\n            }\n        }\n    }\n    testLine(bounds.x, bounds.y, bounds.x2, bounds.y);\n    testLine(bounds.x, bounds.y, bounds.x, bounds.y2);\n    if (countIntersections > 1) {\n        return minDistance;\n    }\n    testLine(bounds.x, bounds.y2, bounds.x2, bounds.y2);\n    if (countIntersections > 1) {\n        return minDistance;\n    }\n    testLine(bounds.x2, bounds.y, bounds.x2, bounds.y2);\n    if (countIntersections === 0) {\n        return -1;\n    }\n    return minDistance;\n}\nfunction testIntersection(line, bounds) {\n    let count = 0;\n    const top = intersectLineLine(line, new Line(bounds.x, bounds.y, bounds.x2, bounds.y));\n    count += top.state === EState.POINT ? 1 : 0;\n    const left = intersectLineLine(line, new Line(bounds.x, bounds.y, bounds.x, bounds.y2));\n    count += left.state === EState.POINT ? 1 : 0;\n    const bottom = intersectLineLine(line, new Line(bounds.x, bounds.y2, bounds.x2, bounds.y2));\n    count += bottom.state === EState.POINT ? 1 : 0;\n    const right = intersectLineLine(line, new Line(bounds.x2, bounds.y, bounds.x2, bounds.y2));\n    count += right.state === EState.POINT ? 1 : 0;\n    return { top, left, bottom, right, count };\n}\n\nclass Rectangle {\n    constructor(x, y, width, height) {\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n    }\n    get x2() {\n        return this.x + this.width;\n    }\n    get y2() {\n        return this.y + this.height;\n    }\n    get cx() {\n        return this.x + this.width / 2;\n    }\n    get cy() {\n        return this.y + this.height / 2;\n    }\n    get radius() {\n        return Math.max(this.width, this.height) / 2;\n    }\n    static from(r) {\n        return new Rectangle(r.x, r.y, r.width, r.height);\n    }\n    equals(that) {\n        return this.x === that.x && this.y === that.y && this.width === that.width && this.height === that.height;\n    }\n    clone() {\n        return new Rectangle(this.x, this.y, this.width, this.height);\n    }\n    add(that) {\n        const x = Math.min(this.x, that.x);\n        const y = Math.min(this.y, that.y);\n        const x2 = Math.max(this.x2, that.x + that.width);\n        const y2 = Math.max(this.y2, that.y + that.height);\n        this.x = x;\n        this.y = y;\n        this.width = x2 - x;\n        this.height = y2 - y;\n    }\n    addPoint(p) {\n        const x = Math.min(this.x, p.x);\n        const y = Math.min(this.y, p.y);\n        const x2 = Math.max(this.x2, p.x);\n        const y2 = Math.max(this.y2, p.y);\n        this.x = x;\n        this.y = y;\n        this.width = x2 - x;\n        this.height = y2 - y;\n    }\n    toString() {\n        return `Rectangle[x=${this.x}, y=${this.y}, w=${this.width}, h=${this.height}]`;\n    }\n    draw(ctx) {\n        ctx.rect(this.x, this.y, this.width, this.height);\n    }\n    containsPt(px, py) {\n        return px >= this.x && px <= this.x2 && py >= this.y && py <= this.y2;\n    }\n    get area() {\n        return this.width * this.height;\n    }\n    intersects(that) {\n        if (this.area <= 0 || that.width <= 0 || that.height <= 0) {\n            return false;\n        }\n        return that.x + that.width > this.x && that.y + that.height > this.y && that.x < this.x2 && that.y < this.y2;\n    }\n    distSquare(tempX, tempY) {\n        if (this.containsPt(tempX, tempY)) {\n            return 0;\n        }\n        const code = outcode(this, tempX, tempY);\n        if (code.has(OutCode.TOP)) {\n            if (code.has(OutCode.LEFT)) {\n                return ptsDistanceSq(tempX, tempY, this.x, this.y);\n            }\n            if (code.has(OutCode.RIGHT)) {\n                return ptsDistanceSq(tempX, tempY, this.x2, this.y);\n            }\n            return (this.y - tempY) * (this.y - tempY);\n        }\n        if (code.has(OutCode.BOTTOM)) {\n            if (code.has(OutCode.LEFT)) {\n                return ptsDistanceSq(tempX, tempY, this.x, this.y2);\n            }\n            if (code.has(OutCode.RIGHT)) {\n                return ptsDistanceSq(tempX, tempY, this.x2, this.y2);\n            }\n            return (tempY - this.y2) * (tempY - this.y2);\n        }\n        if (code.has(OutCode.LEFT)) {\n            return (this.x - tempX) * (this.x - tempX);\n        }\n        if (code.has(OutCode.RIGHT)) {\n            return (tempX - this.x2) * (tempX - this.x2);\n        }\n        return 0;\n    }\n}\nfunction boundingBox(path) {\n    if (path.length === 0) {\n        return null;\n    }\n    const first = path[0];\n    const bb = new Rectangle(first.x, first.y, 0, 0);\n    for (const point of path) {\n        bb.addPoint(point);\n    }\n    return bb;\n}\n\nclass Circle {\n    constructor(cx, cy, radius) {\n        this.cx = cx;\n        this.cy = cy;\n        this.radius = radius;\n    }\n    get x() {\n        return this.cx - this.radius;\n    }\n    get x2() {\n        return this.cx + this.radius;\n    }\n    get width() {\n        return this.radius * 2;\n    }\n    get y() {\n        return this.cy - this.radius;\n    }\n    get y2() {\n        return this.cy + this.radius;\n    }\n    get height() {\n        return this.radius * 2;\n    }\n    static from(r) {\n        return new Circle(r.cx, r.cy, r.radius);\n    }\n    containsPt(x, y) {\n        return ptsDistanceSq(this.cx, this.cy, x, y) < this.radius * this.radius;\n    }\n    distSquare(tempX, tempY) {\n        const dist = ptsDistanceSq(this.cx, this.cy, tempX, tempY);\n        if (dist < this.radius * this.radius) {\n            return 0;\n        }\n        const offset = Math.sqrt(dist) - this.radius;\n        return offset * offset;\n    }\n    draw(ctx) {\n        ctx.ellipse(this.cx, this.cy, this.radius, this.radius, 0, 0, Math.PI * 2);\n    }\n}\n\nclass Area {\n    constructor(pixelGroup, i = 0, j = 0, pixelX = 0, pixelY = 0, width = 10, height = 10, pixels = new Float32Array(Math.max(0, width * height)).fill(0)) {\n        this.pixelGroup = pixelGroup;\n        this.i = i;\n        this.j = j;\n        this.pixelX = pixelX;\n        this.pixelY = pixelY;\n        this.width = width;\n        this.height = height;\n        this.area = pixels;\n    }\n    createSub(rect, pixelPos) {\n        return new Area(this.pixelGroup, rect.x, rect.y, pixelPos.x, pixelPos.y, rect.width, rect.height);\n    }\n    static fromPixelRegion(pixelRect, pixelGroup) {\n        return new Area(pixelGroup, 0, 0, pixelRect.x, pixelRect.y, Math.ceil(pixelRect.width / pixelGroup), Math.ceil(pixelRect.height / pixelGroup));\n    }\n    copy(sub, pixelPoint) {\n        return new Area(this.pixelGroup, this.scaleX(pixelPoint.x), this.scaleY(pixelPoint.y), pixelPoint.x, pixelPoint.y, sub.width, sub.height, sub.area);\n    }\n    boundX(pos) {\n        if (pos < this.i) {\n            return this.i;\n        }\n        if (pos >= this.width) {\n            return this.width - 1;\n        }\n        return pos;\n    }\n    boundY(pos) {\n        if (pos < this.j) {\n            return this.j;\n        }\n        if (pos >= this.height) {\n            return this.height - 1;\n        }\n        return pos;\n    }\n    scaleX(pixel) {\n        return this.boundX(Math.floor((pixel - this.pixelX) / this.pixelGroup));\n    }\n    scaleY(pixel) {\n        return this.boundY(Math.floor((pixel - this.pixelY) / this.pixelGroup));\n    }\n    scale(pixelRect) {\n        const x = this.scaleX(pixelRect.x);\n        const y = this.scaleY(pixelRect.y);\n        const x2 = this.boundX(Math.ceil((pixelRect.x + pixelRect.width - this.pixelX) / this.pixelGroup));\n        const y2 = this.boundY(Math.ceil((pixelRect.y + pixelRect.height - this.pixelY) / this.pixelGroup));\n        const width = x2 - x;\n        const height = y2 - y;\n        return new Rectangle(x, y, width, height);\n    }\n    invertScaleX(v) {\n        return Math.round(v * this.pixelGroup + this.pixelX);\n    }\n    invertScaleY(v) {\n        return Math.round(v * this.pixelGroup + this.pixelY);\n    }\n    addPadding(rect, pixelPadding) {\n        const padding = Math.ceil(pixelPadding / this.pixelGroup);\n        const x = this.boundX(rect.x - padding);\n        const y = this.boundY(rect.y - padding);\n        const x2 = this.boundX(rect.x2 + padding);\n        const y2 = this.boundY(rect.y2 + padding);\n        const width = x2 - x;\n        const height = y2 - y;\n        return new Rectangle(x, y, width, height);\n    }\n    get(i, j) {\n        if (i < 0 || j < 0 || i >= this.width || j >= this.height) {\n            return Number.NaN;\n        }\n        return this.area[i + j * this.width];\n    }\n    inc(i, j, v) {\n        if (i < 0 || j < 0 || i >= this.width || j >= this.height) {\n            return;\n        }\n        this.area[i + j * this.width] += v;\n    }\n    set(i, j, v) {\n        if (i < 0 || j < 0 || i >= this.width || j >= this.height) {\n            return;\n        }\n        this.area[i + j * this.width] = v;\n    }\n    incArea(sub, factor) {\n        if (sub.width <= 0 || sub.height <= 0 || factor === 0) {\n            return;\n        }\n        const w = this.width;\n        const aw = sub.width;\n        const i1 = Math.max(0, sub.i);\n        const j1 = Math.max(0, sub.j);\n        const i2 = Math.min(sub.i + sub.width, w);\n        const j2 = Math.min(sub.j + sub.height, this.height);\n        if (j2 <= 0 || i2 <= 0 || i1 >= w || j2 >= this.height) {\n            return;\n        }\n        for (let j = j1; j < j2; j++) {\n            const subRow = (j - sub.j) * aw;\n            const row = j * w;\n            for (let i = i1; i < i2; i++) {\n                const v = sub.area[i - sub.i + subRow];\n                if (v === 0) {\n                    continue;\n                }\n                this.area[i + row] += factor * v;\n            }\n        }\n    }\n    fill(value) {\n        this.area.fill(value);\n    }\n    fillArea(rect, value) {\n        const offset = rect.x + rect.y * this.width;\n        for (let j = 0; j < rect.height; j++) {\n            const pos = offset + j * this.width;\n            this.area.fill(value, pos, pos + rect.width);\n        }\n    }\n    fillHorizontalLine(i, j, width, value) {\n        const offset = i + j * this.width;\n        this.area.fill(value, offset, offset + width);\n    }\n    fillVerticalLine(i, j, height, value) {\n        const offset = i + j * this.width;\n        for (let k = 0; k < height; k++) {\n            this.area[offset + k * this.width] = value;\n        }\n    }\n    clear() {\n        this.area.fill(0);\n    }\n    toString() {\n        let r = '';\n        for (let j = 0; j < this.height; j++) {\n            const row = j * this.width;\n            for (let i = 0; i < this.width; i++) {\n                const v = this.area[row + i];\n                r += v.toFixed(1).padStart(6);\n                r += ' ';\n            }\n            r += '\\n';\n        }\n        return r;\n    }\n    draw(ctx, offset = true) {\n        if (this.width <= 0 || this.height <= 0) {\n            return;\n        }\n        ctx.save();\n        if (offset) {\n            ctx.translate(this.pixelX, this.pixelY);\n        }\n        const min = this.area.reduce((acc, v) => Math.min(acc, v), Number.POSITIVE_INFINITY);\n        const max = this.area.reduce((acc, v) => Math.max(acc, v), Number.NEGATIVE_INFINITY);\n        const scale = (v) => (v - min) / (max - min);\n        ctx.scale(this.pixelGroup, this.pixelGroup);\n        for (let i = 0; i < this.width; i++) {\n            for (let j = 0; j < this.height; j++) {\n                const v = this.area[i + j * this.width];\n                ctx.fillStyle = `rgba(0, 0, 0, ${scale(v)})`;\n                ctx.fillRect(i, j, 1, 1);\n            }\n        }\n        ctx.restore();\n    }\n    drawThreshold(ctx, threshold, offset = true) {\n        if (this.width <= 0 || this.height <= 0) {\n            return;\n        }\n        ctx.save();\n        if (offset) {\n            ctx.translate(this.pixelX, this.pixelY);\n        }\n        ctx.scale(this.pixelGroup, this.pixelGroup);\n        for (let i = 0; i < this.width; i++) {\n            for (let j = 0; j < this.height; j++) {\n                const v = this.area[i + j * this.width];\n                ctx.fillStyle = v > threshold ? 'black' : 'white';\n                ctx.fillRect(i, j, 1, 1);\n            }\n        }\n        ctx.restore();\n    }\n}\n\nfunction addPadding(rect, padding) {\n    const map = (r) => ({\n        x: r.x - padding,\n        y: r.y - padding,\n        width: r.width + 2 * padding,\n        height: r.height + 2 * padding,\n    });\n    if (Array.isArray(rect)) {\n        return rect.map(map);\n    }\n    return map(rect);\n}\n\nfunction createLineInfluenceArea(line, potentialArea, padding) {\n    return createGenericInfluenceArea(Object.assign(lineBoundingBox(line), {\n        distSquare: (x, y) => linePtSegDistSq(line.x1, line.y1, line.x2, line.y2, x, y),\n    }), potentialArea, padding);\n}\nfunction createGenericInfluenceArea(shape, potentialArea, padding) {\n    const lr = addPadding(shape, padding);\n    const scaled = potentialArea.scale(lr);\n    const area = potentialArea.createSub(scaled, lr);\n    sample(area, potentialArea, padding, (x, y) => shape.distSquare(x, y));\n    return area;\n}\nfunction sample(area, potentialArea, padding, distanceFunction) {\n    const padding2 = padding * padding;\n    for (let y = 0; y < area.height; y++) {\n        for (let x = 0; x < area.width; x++) {\n            const tempX = potentialArea.invertScaleX(area.i + x);\n            const tempY = potentialArea.invertScaleY(area.j + y);\n            const distanceSq = distanceFunction(tempX, tempY);\n            if (distanceSq === 0) {\n                area.set(x, y, padding2);\n                continue;\n            }\n            if (distanceSq < padding2) {\n                const dr = padding - Math.sqrt(distanceSq);\n                area.set(x, y, dr * dr);\n            }\n        }\n    }\n    return area;\n}\nfunction createRectangleInfluenceArea(rect, potentialArea, padding) {\n    const scaled = potentialArea.scale(rect);\n    const padded = potentialArea.addPadding(scaled, padding);\n    const area = potentialArea.createSub(padded, { x: rect.x - padding, y: rect.y - padding });\n    const paddingLeft = scaled.x - padded.x;\n    const paddingTop = scaled.y - padded.y;\n    const paddingRight = padded.x2 - scaled.x2;\n    const paddingBottom = padded.y2 - scaled.y2;\n    const innerWidth = padded.width - paddingLeft - paddingRight;\n    const innerHeight = padded.height - paddingTop - paddingBottom;\n    const padding2 = padding * padding;\n    area.fillArea({\n        x: paddingLeft,\n        y: paddingTop,\n        width: innerWidth + 1,\n        height: innerHeight + 1,\n    }, padding2);\n    const straightDistances = [0];\n    const maxPadding = Math.max(paddingTop, paddingLeft, paddingRight, paddingBottom);\n    {\n        const tempX = potentialArea.invertScaleX(scaled.x + scaled.width / 2);\n        for (let i = 1; i < maxPadding; i++) {\n            const tempY = potentialArea.invertScaleY(scaled.y - i);\n            const distanceSq = rect.distSquare(tempX, tempY);\n            if (distanceSq < padding2) {\n                const dr = padding - Math.sqrt(distanceSq);\n                straightDistances.push(dr * dr);\n            }\n            else {\n                break;\n            }\n        }\n    }\n    const cornerDistances = [];\n    const maxHorizontalPadding = Math.max(paddingLeft, paddingRight);\n    const maxVerticalPadding = Math.max(paddingTop, paddingRight);\n    for (let i = 1; i < maxHorizontalPadding; i++) {\n        const tempX = potentialArea.invertScaleX(scaled.x - i);\n        const row = [];\n        for (let j = 1; j < maxVerticalPadding; j++) {\n            const tempY = potentialArea.invertScaleY(scaled.y - j);\n            const distanceSq = rect.distSquare(tempX, tempY);\n            if (distanceSq < padding2) {\n                const dr = padding - Math.sqrt(distanceSq);\n                row.push(dr * dr);\n            }\n            else {\n                row.push(0);\n            }\n        }\n        cornerDistances.push(row);\n    }\n    for (let y = 1; y < Math.min(paddingTop, straightDistances.length); y++) {\n        const value = straightDistances[y];\n        area.fillHorizontalLine(paddingLeft, paddingTop - y, innerWidth + 1, value);\n    }\n    for (let y = 1; y < Math.min(paddingBottom, straightDistances.length); y++) {\n        const value = straightDistances[y];\n        area.fillHorizontalLine(paddingLeft, paddingTop + innerHeight + y, innerWidth + 1, value);\n    }\n    for (let x = 1; x < Math.min(paddingLeft, straightDistances.length); x++) {\n        const value = straightDistances[x];\n        area.fillVerticalLine(paddingLeft - x, paddingTop, innerHeight + 1, value);\n    }\n    for (let x = 1; x < Math.min(paddingBottom, straightDistances.length); x++) {\n        const value = straightDistances[x];\n        area.fillVerticalLine(paddingLeft + innerWidth + x, paddingTop, innerHeight + 1, value);\n    }\n    for (let i = 1; i < paddingLeft; i++) {\n        const row = cornerDistances[i - 1];\n        const ii = paddingLeft - i;\n        for (let j = 1; j < paddingTop; j++) {\n            area.set(ii, paddingTop - j, row[j - 1]);\n        }\n        for (let j = 1; j < paddingBottom; j++) {\n            area.set(ii, paddingTop + innerHeight + j, row[j - 1]);\n        }\n    }\n    for (let i = 1; i < paddingRight; i++) {\n        const row = cornerDistances[i - 1];\n        const ii = paddingLeft + innerWidth + i;\n        for (let j = 1; j < paddingTop; j++) {\n            area.set(ii, paddingTop - j, row[j - 1]);\n        }\n        for (let j = 1; j < paddingBottom; j++) {\n            area.set(ii, paddingTop + innerHeight + j, row[j - 1]);\n        }\n    }\n    return area;\n}\n\nfunction rect(x, y, width, height) {\n    return { x, y, width, height };\n}\nfunction circle(cx, cy, radius) {\n    return { cx, cy, radius };\n}\nfunction line(x1, y1, x2, y2) {\n    return { x1, y1, x2, y2 };\n}\nfunction point(x, y) {\n    return { x, y };\n}\n\nfunction calculateVirtualEdges(items, nonMembers, maxRoutingIterations, morphBuffer) {\n    if (items.length === 0) {\n        return [];\n    }\n    const sorted = sortByDistanceToCentroid(items);\n    return sorted\n        .map((d, i) => {\n        const visited = sorted.slice(0, i);\n        return connectItem(nonMembers, d, visited, maxRoutingIterations, morphBuffer);\n    })\n        .flat();\n}\nfunction connectItem(nonMembers, item, visited, maxRoutingIterations, morphBuffer) {\n    const itemCenter = point(item.cx, item.cy);\n    const closestNeighbor = calculateClosestNeighbor(itemCenter, visited, nonMembers);\n    if (closestNeighbor == null) {\n        return [];\n    }\n    const directLine = new Line(itemCenter.x, itemCenter.y, closestNeighbor.cx, closestNeighbor.cy);\n    const scannedLines = computeRoute(directLine, nonMembers, maxRoutingIterations, morphBuffer);\n    return mergeLines(scannedLines, nonMembers);\n}\nfunction computeRoute(directLine, nonMembers, maxRoutingIterations, morphBuffer) {\n    const scannedLines = [];\n    const linesToCheck = [];\n    linesToCheck.push(directLine);\n    let hasIntersection = true;\n    for (let iterations = 0; iterations < maxRoutingIterations && hasIntersection; iterations++) {\n        hasIntersection = false;\n        while (!hasIntersection && linesToCheck.length > 0) {\n            const line = linesToCheck.pop();\n            const closestItem = getCenterItem(nonMembers, line);\n            const intersections = closestItem ? testIntersection(line, closestItem) : null;\n            if (!closestItem || !intersections || intersections.count !== 2) {\n                if (!hasIntersection) {\n                    scannedLines.push(line);\n                }\n                continue;\n            }\n            let tempMorphBuffer = morphBuffer;\n            let movePoint = rerouteLine(closestItem, tempMorphBuffer, intersections, true);\n            let foundFirst = pointExists(movePoint, linesToCheck) || pointExists(movePoint, scannedLines);\n            let pointInside = isPointInRectangles(movePoint, nonMembers);\n            while (!foundFirst && pointInside && tempMorphBuffer >= 1) {\n                tempMorphBuffer /= 1.5;\n                movePoint = rerouteLine(closestItem, tempMorphBuffer, intersections, true);\n                foundFirst = pointExists(movePoint, linesToCheck) || pointExists(movePoint, scannedLines);\n                pointInside = isPointInRectangles(movePoint, nonMembers);\n            }\n            if (movePoint && !foundFirst && !pointInside) {\n                linesToCheck.push(new Line(line.x1, line.y1, movePoint.x, movePoint.y));\n                linesToCheck.push(new Line(movePoint.x, movePoint.y, line.x2, line.y2));\n                hasIntersection = true;\n            }\n            if (hasIntersection) {\n                continue;\n            }\n            tempMorphBuffer = morphBuffer;\n            movePoint = rerouteLine(closestItem, tempMorphBuffer, intersections, false);\n            let foundSecond = pointExists(movePoint, linesToCheck) || pointExists(movePoint, scannedLines);\n            pointInside = isPointInRectangles(movePoint, nonMembers);\n            while (!foundSecond && pointInside && tempMorphBuffer >= 1) {\n                tempMorphBuffer /= 1.5;\n                movePoint = rerouteLine(closestItem, tempMorphBuffer, intersections, false);\n                foundSecond = pointExists(movePoint, linesToCheck) || pointExists(movePoint, scannedLines);\n                pointInside = isPointInRectangles(movePoint, nonMembers);\n            }\n            if (movePoint && !foundSecond) {\n                linesToCheck.push(new Line(line.x1, line.y1, movePoint.x, movePoint.y));\n                linesToCheck.push(new Line(movePoint.x, movePoint.y, line.x2, line.y2));\n                hasIntersection = true;\n            }\n            if (!hasIntersection) {\n                scannedLines.push(line);\n            }\n        }\n    }\n    while (linesToCheck.length > 0) {\n        scannedLines.push(linesToCheck.pop());\n    }\n    return scannedLines;\n}\nfunction mergeLines(scannedLines, nonMembers) {\n    const finalRoute = [];\n    while (scannedLines.length > 0) {\n        const line1 = scannedLines.pop();\n        if (scannedLines.length === 0) {\n            finalRoute.push(line1);\n            break;\n        }\n        const line2 = scannedLines.pop();\n        const mergeLine = new Line(line1.x1, line1.y1, line2.x2, line2.y2);\n        const closestItem = getCenterItem(nonMembers, mergeLine);\n        if (!closestItem) {\n            scannedLines.push(mergeLine);\n        }\n        else {\n            finalRoute.push(line1);\n            scannedLines.push(line2);\n        }\n    }\n    return finalRoute;\n}\nfunction calculateClosestNeighbor(itemCenter, visited, nonMembers) {\n    let minLengthSq = Number.POSITIVE_INFINITY;\n    return visited.reduce((closestNeighbor, neighborItem) => {\n        const distanceSq = ptsDistanceSq(itemCenter.x, itemCenter.y, neighborItem.cx, neighborItem.cy);\n        if (distanceSq > minLengthSq) {\n            return closestNeighbor;\n        }\n        const directLine = new Line(itemCenter.x, itemCenter.y, neighborItem.cx, neighborItem.cy);\n        const numberInterferenceItems = itemsCuttingLine(nonMembers, directLine);\n        if (distanceSq * (numberInterferenceItems + 1) * (numberInterferenceItems + 1) < minLengthSq) {\n            closestNeighbor = neighborItem;\n            minLengthSq = distanceSq * (numberInterferenceItems + 1) * (numberInterferenceItems + 1);\n        }\n        return closestNeighbor;\n    }, null);\n}\nfunction sortByDistanceToCentroid(items) {\n    if (items.length < 2) {\n        return items;\n    }\n    let totalX = 0;\n    let totalY = 0;\n    items.forEach((item) => {\n        totalX += item.cx;\n        totalY += item.cy;\n    });\n    totalX /= items.length;\n    totalY /= items.length;\n    return items\n        .map((item) => {\n        const diffX = totalX - item.cx;\n        const diffY = totalY - item.cy;\n        const dist = diffX * diffX + diffY * diffY;\n        return [item, dist];\n    })\n        .sort((a, b) => a[1] - b[1])\n        .map((d) => d[0]);\n}\nfunction isPointInRectangles(p, rects) {\n    return rects.some((r) => r.containsPt(p.x, p.y));\n}\nfunction pointExists(pointToCheck, lines) {\n    return lines.some((checkEndPointsLine) => {\n        if (doublePointsEqual(checkEndPointsLine.x1, checkEndPointsLine.y1, pointToCheck.x, pointToCheck.y, 1e-3)) {\n            return true;\n        }\n        if (doublePointsEqual(checkEndPointsLine.x2, checkEndPointsLine.y2, pointToCheck.x, pointToCheck.y, 1e-3)) {\n            return true;\n        }\n        return false;\n    });\n}\nfunction getCenterItem(items, testLine) {\n    let minDistance = Number.POSITIVE_INFINITY;\n    let closestItem = null;\n    for (const item of items) {\n        if (!intersectsLine(item, testLine)) {\n            continue;\n        }\n        const distance = fractionToLineCenter(item, testLine);\n        if (distance >= 0 && distance < minDistance) {\n            closestItem = item;\n            minDistance = distance;\n        }\n    }\n    return closestItem;\n}\nfunction itemsCuttingLine(items, testLine) {\n    return items.reduce((count, item) => {\n        if (intersectsLine(item, testLine) && hasFractionToLineCenter(item, testLine)) {\n            return count + 1;\n        }\n        return count;\n    }, 0);\n}\nfunction rerouteLine(item, rerouteBuffer, intersections, wrapNormal) {\n    const topIntersect = intersections.top;\n    const leftIntersect = intersections.left;\n    const bottomIntersect = intersections.bottom;\n    const rightIntersect = intersections.right;\n    if (wrapNormal) {\n        if (leftIntersect.state === EState.POINT) {\n            if (topIntersect.state === EState.POINT)\n                return point(item.x - rerouteBuffer, item.y - rerouteBuffer);\n            if (bottomIntersect.state === EState.POINT)\n                return point(item.x - rerouteBuffer, item.y2 + rerouteBuffer);\n            const totalArea = item.width * item.height;\n            const topArea = item.width * ((leftIntersect.y - item.y + (rightIntersect.y - item.y)) * 0.5);\n            if (topArea < totalArea * 0.5) {\n                if (leftIntersect.y > rightIntersect.y)\n                    return point(item.x - rerouteBuffer, item.y - rerouteBuffer);\n                return point(item.x2 + rerouteBuffer, item.y - rerouteBuffer);\n            }\n            if (leftIntersect.y < rightIntersect.y)\n                return point(item.x - rerouteBuffer, item.y2 + rerouteBuffer);\n            return point(item.x2 + rerouteBuffer, item.y2 + rerouteBuffer);\n        }\n        if (rightIntersect.state === EState.POINT) {\n            if (topIntersect.state === EState.POINT)\n                return point(item.x2 + rerouteBuffer, item.y - rerouteBuffer);\n            if (bottomIntersect.state === EState.POINT)\n                return point(item.x2 + rerouteBuffer, item.y2 + rerouteBuffer);\n        }\n        const totalArea = item.height * item.width;\n        const leftArea = item.height * ((topIntersect.x - item.x + (rightIntersect.x - item.x)) * 0.5);\n        if (leftArea < totalArea * 0.5) {\n            if (topIntersect.x > bottomIntersect.x)\n                return point(item.x - rerouteBuffer, item.y - rerouteBuffer);\n            return point(item.x - rerouteBuffer, item.y2 + rerouteBuffer);\n        }\n        if (topIntersect.x < bottomIntersect.x)\n            return point(item.x2 + rerouteBuffer, item.y - rerouteBuffer);\n        return point(item.x2 + rerouteBuffer, item.y2 + rerouteBuffer);\n    }\n    if (leftIntersect.state === EState.POINT) {\n        if (topIntersect.state === EState.POINT)\n            return point(item.x2 + rerouteBuffer, item.y2 + rerouteBuffer);\n        if (bottomIntersect.state === EState.POINT)\n            return point(item.x2 + rerouteBuffer, item.y - rerouteBuffer);\n        const totalArea = item.height * item.width;\n        const topArea = item.width * ((leftIntersect.y - item.y + (rightIntersect.y - item.y)) * 0.5);\n        if (topArea < totalArea * 0.5) {\n            if (leftIntersect.y > rightIntersect.y)\n                return point(item.x2 + rerouteBuffer, item.y2 + rerouteBuffer);\n            return point(item.x - rerouteBuffer, item.y2 + rerouteBuffer);\n        }\n        if (leftIntersect.y < rightIntersect.y)\n            return point(item.x2 + rerouteBuffer, item.y - rerouteBuffer);\n        return point(item.x - rerouteBuffer, item.y - rerouteBuffer);\n    }\n    if (rightIntersect.state === EState.POINT) {\n        if (topIntersect.state === EState.POINT)\n            return point(item.x - rerouteBuffer, item.y2 + rerouteBuffer);\n        if (bottomIntersect.state === EState.POINT)\n            return point(item.x - rerouteBuffer, item.y - rerouteBuffer);\n    }\n    const totalArea = item.height * item.width;\n    const leftArea = item.height * ((topIntersect.x - item.x + (rightIntersect.x - item.x)) * 0.5);\n    if (leftArea < totalArea * 0.5) {\n        if (topIntersect.x > bottomIntersect.x)\n            return point(item.x2 + rerouteBuffer, item.y2 + rerouteBuffer);\n        return point(item.x2 + rerouteBuffer, item.y - rerouteBuffer);\n    }\n    if (topIntersect.x < bottomIntersect.x)\n        return point(item.x - rerouteBuffer, item.y2 + rerouteBuffer);\n    return point(item.x - rerouteBuffer, item.y - rerouteBuffer);\n}\n\nfunction canTakeNext(path, start, end, toleranceSquared) {\n    const validEnd = path.closed ? end < path.length : end < path.length - 1;\n    if (!validEnd) {\n        return false;\n    }\n    const s = path.get(start);\n    const e = path.get(end + 1);\n    for (let index = start + 1; index <= end; index++) {\n        const p = path.get(index);\n        const len = linePtSegDistSq(s.x, s.y, e.x, e.y, p.x, p.y);\n        if (len > toleranceSquared) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction shapeSimplifier(tolerance = 0.0) {\n    return (path) => {\n        if (tolerance < 0 || path.length < 3) {\n            return path;\n        }\n        const points = [];\n        let start = 0;\n        const toleranceSquared = tolerance * tolerance;\n        while (start < path.length) {\n            let end = start + 1;\n            while (canTakeNext(path, start, end, toleranceSquared)) {\n                end++;\n            }\n            points.push(path.get(start));\n            start = end;\n        }\n        return new PointPath(points);\n    };\n}\n\nfunction basicFunction(i, t) {\n    switch (i) {\n        case -2:\n            return (((-t + 3.0) * t - 3.0) * t + 1.0) / 6.0;\n        case -1:\n            return ((3.0 * t - 6.0) * t * t + 4.0) / 6.0;\n        case 0:\n            return (((-3.0 * t + 3.0) * t + 3.0) * t + 1.0) / 6.0;\n        case 1:\n            return (t * t * t) / 6.0;\n        default:\n            throw new Error('unknown error');\n    }\n}\nfunction bSplineShapeGenerator(granularity = 6.0) {\n    const ORDER = 3;\n    const START_INDEX = ORDER - 1;\n    const REL_END = 1;\n    const REL_START = REL_END - ORDER;\n    function calcPoint(path, i, t) {\n        let px = 0.0;\n        let py = 0.0;\n        for (let j = REL_START; j <= REL_END; j++) {\n            const p = path.get(i + j);\n            const bf = basicFunction(j, t);\n            px += bf * p.x;\n            py += bf * p.y;\n        }\n        return { x: px, y: py };\n    }\n    return (path) => {\n        if (path.length < 3) {\n            return path;\n        }\n        const res = [];\n        const closed = path.closed;\n        const count = path.length + ORDER - 1 + (closed ? 0 : 2);\n        res.push(calcPoint(path, START_INDEX - (closed ? 0 : 2), 0));\n        for (let ix = START_INDEX - (closed ? 0 : 2); ix < count; ix++) {\n            for (let k = 1; k <= granularity; k++) {\n                res.push(calcPoint(path, ix, k / granularity));\n            }\n        }\n        return new PointPath(res);\n    };\n}\n\nfunction samplePath(skip = 8) {\n    return (path) => {\n        let actSkip = skip;\n        let size = path.length;\n        if (actSkip > 1) {\n            size = Math.floor(path.length / actSkip);\n            while (size < 3 && actSkip > 1) {\n                actSkip -= 1;\n                size = Math.floor(path.length / actSkip);\n            }\n        }\n        const finalHull = [];\n        for (let i = 0, j = 0; j < size; j++, i += actSkip) {\n            finalHull.push(path.get(i));\n        }\n        return new PointPath(finalHull);\n    };\n}\n\nclass PointPath {\n    constructor(points = [], closed = true) {\n        this.points = points;\n        this.closed = closed;\n    }\n    get(index) {\n        const i = index;\n        const l = this.points.length;\n        if (index < 0) {\n            return this.closed ? this.get(index + l) : this.points[0];\n        }\n        else if (index >= l) {\n            return this.closed ? this.get(index - l) : this.points[l - 1];\n        }\n        return this.points[i];\n    }\n    get length() {\n        return this.points.length;\n    }\n    toString(roundToDigits = Infinity) {\n        const points = this.points;\n        if (points.length === 0) {\n            return '';\n        }\n        const rounder = typeof roundToDigits === 'function' ? roundToDigits : round(roundToDigits);\n        let r = 'M';\n        for (const p of points) {\n            r += `${rounder(p.x)},${rounder(p.y)} L`;\n        }\n        r = r.slice(0, -1);\n        if (this.closed) {\n            r += ' Z';\n        }\n        return r;\n    }\n    draw(ctx) {\n        const points = this.points;\n        if (points.length === 0) {\n            return;\n        }\n        ctx.beginPath();\n        ctx.moveTo(points[0].x, points[0].y);\n        for (const p of points) {\n            ctx.lineTo(p.x, p.y);\n        }\n        if (this.closed) {\n            ctx.closePath();\n        }\n    }\n    sample(skip) {\n        return samplePath(skip)(this);\n    }\n    simplify(tolerance) {\n        return shapeSimplifier(tolerance)(this);\n    }\n    bSplines(granularity) {\n        return bSplineShapeGenerator(granularity)(this);\n    }\n    apply(transformer) {\n        return transformer(this);\n    }\n    containsElements(members) {\n        const bb = boundingBox(this.points);\n        if (!bb) {\n            return false;\n        }\n        return members.every((member) => {\n            return bb.containsPt(member.cx, member.cy) && this.withinArea(member.cx, member.cy);\n        });\n    }\n    withinArea(px, py) {\n        if (this.length === 0) {\n            return false;\n        }\n        let crossings = 0;\n        const first = this.points[0];\n        const line = new Line(first.x, first.y, first.x, first.y);\n        for (let i = 1; i < this.points.length; i++) {\n            const cur = this.points[i];\n            line.x1 = line.x2;\n            line.y1 = line.y2;\n            line.x2 = cur.x;\n            line.y2 = cur.y;\n            if (line.cuts(px, py)) {\n                crossings++;\n            }\n        }\n        line.x1 = line.x2;\n        line.y1 = line.y2;\n        line.x2 = first.x;\n        line.y2 = first.y;\n        if (line.cuts(px, py)) {\n            crossings++;\n        }\n        return crossings % 2 === 1;\n    }\n}\n\nclass PointList {\n    constructor(size = 0) {\n        this.count = 0;\n        this.arr = [];\n        this.set = new Set();\n        this.arr.length = size;\n    }\n    add(p) {\n        this.set.add(`${p.x}x${p.y}`);\n        this.arr[this.count++] = p;\n    }\n    contains(p) {\n        return this.set.has(`${p.x}x${p.y}`);\n    }\n    isFirst(p) {\n        if (this.count === 0) {\n            return false;\n        }\n        const o = this.arr[0];\n        return o != null && o.x === p.x && o.y === p.y;\n    }\n    path() {\n        return new PointPath(this.arr.slice(0, this.count));\n    }\n    clear() {\n        this.set.clear();\n        this.count = 0;\n    }\n    get(ix) {\n        return this.arr[ix];\n    }\n    get length() {\n        return this.count;\n    }\n}\n\nconst N = 0;\nconst S = 1;\nconst E = 2;\nconst W = 3;\nfunction marchingSquares(potentialArea, threshold) {\n    const estLength = (Math.floor(potentialArea.width) + Math.floor(potentialArea.height)) * 2;\n    const contour = new PointList(estLength);\n    function updateDir(x, y, dir, res) {\n        const v = potentialArea.get(x, y);\n        if (Number.isNaN(v)) {\n            return Number.NaN;\n        }\n        if (v > threshold) {\n            return dir + res;\n        }\n        return dir;\n    }\n    function getState(x, y) {\n        let dir = N;\n        dir = updateDir(x, y, dir, 1);\n        dir = updateDir(x + 1, y, dir, 2);\n        dir = updateDir(x, y + 1, dir, 4);\n        dir = updateDir(x + 1, y + 1, dir, 8);\n        if (Number.isNaN(dir)) {\n            return -1;\n        }\n        return dir;\n    }\n    let direction = S;\n    function doMarch(xPos, yPos) {\n        let x = xPos;\n        let y = yPos;\n        let xPixel = potentialArea.invertScaleX(x);\n        let yPixel = potentialArea.invertScaleY(y);\n        for (let i = 0; i < potentialArea.width * potentialArea.height; i++) {\n            const p = { x: xPixel, y: yPixel };\n            if (contour.contains(p)) {\n                if (!contour.isFirst(p)) ;\n                else {\n                    return true;\n                }\n            }\n            else {\n                contour.add(p);\n            }\n            const state = getState(x, y);\n            switch (state) {\n                case -1:\n                    return true;\n                case 0:\n                case 3:\n                case 2:\n                case 7:\n                    direction = E;\n                    break;\n                case 12:\n                case 14:\n                case 4:\n                    direction = W;\n                    break;\n                case 6:\n                    direction = direction === N ? W : E;\n                    break;\n                case 1:\n                case 13:\n                case 5:\n                    direction = N;\n                    break;\n                case 9:\n                    direction = direction === E ? N : S;\n                    break;\n                case 10:\n                case 8:\n                case 11:\n                    direction = S;\n                    break;\n                default:\n                    console.warn('Marching squares invalid state: ' + state);\n                    return true;\n            }\n            switch (direction) {\n                case N:\n                    y--;\n                    yPixel -= potentialArea.pixelGroup;\n                    break;\n                case S:\n                    y++;\n                    yPixel += potentialArea.pixelGroup;\n                    break;\n                case W:\n                    x--;\n                    xPixel -= potentialArea.pixelGroup;\n                    break;\n                case E:\n                    x++;\n                    xPixel += potentialArea.pixelGroup;\n                    break;\n                default:\n                    console.warn('Marching squares invalid state: ' + state);\n                    return true;\n            }\n        }\n        return true;\n    }\n    for (let x = 0; x < potentialArea.width; x++) {\n        for (let y = 0; y < potentialArea.height; y++) {\n            if (potentialArea.get(x, y) <= threshold) {\n                continue;\n            }\n            const state = getState(x, y);\n            if (state < 0 || state === 15) {\n                continue;\n            }\n            if (doMarch(x, y)) {\n                return contour.path();\n            }\n        }\n    }\n    return null;\n}\n\nconst defaultOptions = {\n    maxRoutingIterations: 100,\n    maxMarchingIterations: 20,\n    pixelGroup: 4,\n    edgeR0: 10,\n    edgeR1: 20,\n    nodeR0: 15,\n    nodeR1: 50,\n    morphBuffer: 10,\n    threshold: 1,\n    memberInfluenceFactor: 1,\n    edgeInfluenceFactor: 1,\n    nonMemberInfluenceFactor: -0.8,\n    virtualEdges: true,\n};\nfunction isCircle(v) {\n    return v != null && typeof v.radius === 'number';\n}\nfunction isEqual(a, b) {\n    if (isCircle(a) !== isCircle(b)) {\n        return false;\n    }\n    if (isCircle(a)) {\n        const bc = b;\n        return a.cx === bc.cx && a.cy === bc.cy && a.radius === bc.radius;\n    }\n    const br = b;\n    return a.x === br.x && a.y === br.y && a.width === br.width && a.height === br.height;\n}\nvar EDirty;\n(function (EDirty) {\n    EDirty[EDirty[\"MEMBERS\"] = 0] = \"MEMBERS\";\n    EDirty[EDirty[\"NON_MEMBERS\"] = 1] = \"NON_MEMBERS\";\n    EDirty[EDirty[\"EDGES\"] = 2] = \"EDGES\";\n})(EDirty || (EDirty = {}));\nclass BubbleSets {\n    constructor(options = {}) {\n        this.dirty = new Set();\n        this.members = [];\n        this.nonMembers = [];\n        this.virtualEdges = [];\n        this.edges = [];\n        this.activeRegion = new Rectangle(0, 0, 0, 0);\n        this.potentialArea = new Area(1, 0, 0, 0, 0, 0, 0);\n        this.o = Object.assign({}, defaultOptions, options);\n    }\n    pushMember(...members) {\n        if (members.length === 0) {\n            return;\n        }\n        this.dirty.add(EDirty.MEMBERS);\n        for (const v of members) {\n            this.members.push({\n                raw: v,\n                obj: isCircle(v) ? Circle.from(v) : Rectangle.from(v),\n                area: null,\n            });\n        }\n    }\n    removeMember(member) {\n        const index = this.members.findIndex((d) => isEqual(d.raw, member));\n        if (index < 0) {\n            return false;\n        }\n        this.members.splice(index, 1);\n        this.dirty.add(EDirty.MEMBERS);\n        return true;\n    }\n    removeNonMember(nonMember) {\n        const index = this.nonMembers.findIndex((d) => isEqual(d.raw, nonMember));\n        if (index < 0) {\n            return false;\n        }\n        this.nonMembers.splice(index, 1);\n        this.dirty.add(EDirty.NON_MEMBERS);\n        return true;\n    }\n    removeEdge(edge) {\n        const index = this.edges.findIndex((d) => d.obj.equals(edge));\n        if (index < 0) {\n            return false;\n        }\n        this.edges.splice(index, 1);\n        this.dirty.add(EDirty.NON_MEMBERS);\n        return true;\n    }\n    pushNonMember(...nonMembers) {\n        if (nonMembers.length === 0) {\n            return;\n        }\n        this.dirty.add(EDirty.NON_MEMBERS);\n        for (const v of nonMembers) {\n            this.nonMembers.push({\n                raw: v,\n                obj: isCircle(v) ? Circle.from(v) : Rectangle.from(v),\n                area: null,\n            });\n        }\n    }\n    pushEdge(...edges) {\n        if (edges.length === 0) {\n            return;\n        }\n        this.dirty.add(EDirty.EDGES);\n        for (const v of edges) {\n            this.edges.push({\n                raw: v,\n                obj: Line.from(v),\n                area: null,\n            });\n        }\n    }\n    update() {\n        const dirtyMembers = this.dirty.has(EDirty.MEMBERS);\n        const dirtyNonMembers = this.dirty.has(EDirty.NON_MEMBERS);\n        let dirtyEdges = this.dirty.has(EDirty.EDGES);\n        this.dirty.clear();\n        const memberObjs = this.members.map((d) => d.obj);\n        if (this.o.virtualEdges && (dirtyMembers || dirtyNonMembers)) {\n            const nonMembersAsRects = this.nonMembers.map((d) => d.obj);\n            const virtualEdges = calculateVirtualEdges(memberObjs, nonMembersAsRects, this.o.maxRoutingIterations, this.o.morphBuffer);\n            const old = new Map(this.virtualEdges.map((e) => [e.obj.toString(), e.area]));\n            this.virtualEdges = virtualEdges.map((e) => {\n                var _a;\n                return ({\n                    raw: e,\n                    obj: e,\n                    area: (_a = old.get(e.toString())) !== null && _a !== void 0 ? _a : null,\n                });\n            });\n            dirtyEdges = true;\n        }\n        let activeRegionDirty = false;\n        if (dirtyMembers || dirtyEdges) {\n            const edgesObj = this.virtualEdges.concat(this.edges).map((e) => e.obj);\n            const bb = unionBoundingBox(memberObjs, edgesObj);\n            const padding = Math.max(this.o.edgeR1, this.o.nodeR1) + this.o.morphBuffer;\n            const activeRegion = Rectangle.from(addPadding(bb, padding));\n            if (!activeRegion.equals(this.activeRegion)) {\n                activeRegionDirty = true;\n                this.activeRegion = activeRegion;\n            }\n        }\n        if (activeRegionDirty) {\n            const potentialWidth = Math.ceil(this.activeRegion.width / this.o.pixelGroup);\n            const potentialHeight = Math.ceil(this.activeRegion.height / this.o.pixelGroup);\n            if (this.activeRegion.x !== this.potentialArea.pixelX || this.activeRegion.y !== this.potentialArea.pixelY) {\n                this.potentialArea = Area.fromPixelRegion(this.activeRegion, this.o.pixelGroup);\n                this.members.forEach((m) => (m.area = null));\n                this.nonMembers.forEach((m) => (m.area = null));\n                this.edges.forEach((m) => (m.area = null));\n                this.virtualEdges.forEach((m) => (m.area = null));\n            }\n            else if (potentialWidth !== this.potentialArea.width || potentialHeight !== this.potentialArea.height) {\n                this.potentialArea = Area.fromPixelRegion(this.activeRegion, this.o.pixelGroup);\n            }\n        }\n        const existing = new Map();\n        const addCache = (m) => {\n            if (m.area) {\n                const key = `${m.obj.width}x${m.obj.height}x${m.obj instanceof Rectangle ? 'R' : 'C'}`;\n                existing.set(key, m.area);\n            }\n        };\n        const createOrAddCache = (m) => {\n            if (m.area) {\n                return;\n            }\n            const key = `${m.obj.width}x${m.obj.height}x${m.obj instanceof Rectangle ? 'R' : 'C'}`;\n            if (existing.has(key)) {\n                const r = existing.get(key);\n                m.area = this.potentialArea.copy(r, { x: m.obj.x - this.o.nodeR1, y: m.obj.y - this.o.nodeR1 });\n                return;\n            }\n            const r = m.obj instanceof Rectangle\n                ? createRectangleInfluenceArea(m.obj, this.potentialArea, this.o.nodeR1)\n                : createGenericInfluenceArea(m.obj, this.potentialArea, this.o.nodeR1);\n            m.area = r;\n            existing.set(key, r);\n        };\n        this.members.forEach(addCache);\n        this.nonMembers.forEach(addCache);\n        this.members.forEach(createOrAddCache);\n        this.nonMembers.forEach((m) => {\n            if (!this.activeRegion.intersects(m.obj)) {\n                m.area = null;\n            }\n            else {\n                createOrAddCache(m);\n            }\n        });\n        this.edges.forEach((edge) => {\n            if (!edge.area) {\n                edge.area = createLineInfluenceArea(edge.obj, this.potentialArea, this.o.edgeR1);\n            }\n        });\n        this.virtualEdges.forEach((edge) => {\n            if (!edge.area) {\n                edge.area = createLineInfluenceArea(edge.obj, this.potentialArea, this.o.edgeR1);\n            }\n        });\n    }\n    drawMembers(ctx) {\n        for (const member of this.members) {\n            member.obj.draw(ctx);\n        }\n    }\n    drawNonMembers(ctx) {\n        for (const member of this.nonMembers) {\n            member.obj.draw(ctx);\n        }\n    }\n    drawEdges(ctx) {\n        for (const edge of this.edges) {\n            edge.obj.draw(ctx);\n        }\n    }\n    drawPotentialArea(ctx, offset = true) {\n        this.potentialArea.draw(ctx, offset);\n    }\n    compute() {\n        if (this.members.length === 0) {\n            return new PointPath([]);\n        }\n        if (this.dirty.size > 0) {\n            this.update();\n        }\n        const { o, potentialArea } = this;\n        const members = this.members.map((m) => m.area);\n        const edges = this.virtualEdges.concat(this.edges).map((d) => d.area);\n        const nonMembers = this.nonMembers.filter((d) => d.area != null).map((d) => d.area);\n        const memberObjs = this.members.map((m) => m.obj);\n        return calculatePotentialOutline(potentialArea, members, edges, nonMembers, (p) => p.containsElements(memberObjs), o);\n    }\n}\nfunction calculatePotentialOutline(potentialArea, members, edges, nonMembers, validPath, options = {}) {\n    const o = Object.assign({}, defaultOptions, options);\n    let threshold = o.threshold;\n    let memberInfluenceFactor = o.memberInfluenceFactor;\n    let edgeInfluenceFactor = o.edgeInfluenceFactor;\n    let nonMemberInfluenceFactor = o.nonMemberInfluenceFactor;\n    const nodeInfA = (o.nodeR0 - o.nodeR1) * (o.nodeR0 - o.nodeR1);\n    const edgeInfA = (o.edgeR0 - o.edgeR1) * (o.edgeR0 - o.edgeR1);\n    for (let iterations = 0; iterations < o.maxMarchingIterations; iterations++) {\n        potentialArea.clear();\n        if (memberInfluenceFactor !== 0) {\n            const f = memberInfluenceFactor / nodeInfA;\n            for (const item of members) {\n                potentialArea.incArea(item, f);\n            }\n        }\n        if (edgeInfluenceFactor !== 0) {\n            const f = edgeInfluenceFactor / edgeInfA;\n            for (const area of edges) {\n                potentialArea.incArea(area, f);\n            }\n        }\n        if (nonMemberInfluenceFactor !== 0) {\n            const f = nonMemberInfluenceFactor / nodeInfA;\n            for (const area of nonMembers) {\n                potentialArea.incArea(area, f);\n            }\n        }\n        const contour = marchingSquares(potentialArea, threshold);\n        if (contour && validPath(contour)) {\n            return contour;\n        }\n        threshold *= 0.95;\n        if (iterations <= o.maxMarchingIterations * 0.5) {\n            memberInfluenceFactor *= 1.2;\n            edgeInfluenceFactor *= 1.2;\n        }\n        else if (nonMemberInfluenceFactor !== 0 && nonMembers.length > 0) {\n            nonMemberInfluenceFactor *= 0.8;\n        }\n        else {\n            break;\n        }\n    }\n    return new PointPath([]);\n}\nfunction unionBoundingBox(memberItems, edgeItems) {\n    if (memberItems.length === 0) {\n        return new Rectangle(0, 0, 0, 0);\n    }\n    const activeRegion = Rectangle.from(memberItems[0]);\n    for (const m of memberItems) {\n        activeRegion.add(m);\n    }\n    for (const l of edgeItems) {\n        activeRegion.add(lineBoundingBox(l));\n    }\n    return activeRegion;\n}\nfunction createOutline(members, nonMembers = [], edges = [], options = {}) {\n    if (members.length === 0) {\n        return new PointPath([]);\n    }\n    const bb = new BubbleSets(options);\n    bb.pushMember(...members);\n    bb.pushNonMember(...nonMembers);\n    bb.pushEdge(...edges);\n    return bb.compute();\n}\n\nexport { Area, BubbleSets, Circle, Line, PointPath, Rectangle, addPadding, boundingBox, calculatePotentialOutline, calculateVirtualEdges, circle, createGenericInfluenceArea, createLineInfluenceArea, createOutline, createRectangleInfluenceArea, BubbleSets as default, defaultOptions, line, lineBoundingBox, point, rect, unionBoundingBox };\n//# sourceMappingURL=index.js.map\n","import { deepMix, isEqual, isFunction } from '@antv/util';\nimport { BubbleSets as BubbleSetsJS, Line, Rectangle, defaultOptions } from 'bubblesets-js';\nimport { GraphEvent } from '../constants';\nimport { Contour } from '../elements/shapes';\nimport { getBBoxHeight, getBBoxWidth } from '../utils/bbox';\nimport { arrayDiff } from '../utils/diff';\nimport { idOf } from '../utils/id';\nimport { getClosedSpline } from '../utils/path';\nimport { parsePoint } from '../utils/point';\nimport { BasePlugin } from './base-plugin';\n/**\n * <zh/> 气泡集\n *\n * <en/> BubbleSets\n * @remarks\n * <zh/> BubbleSets 最初由 Christopher Collins 在 2009 年的论文 \"Bubble Sets: Revealing Set Relations with Isocontours over Existing Visualizations\" 中提出。\n *\n * <zh/> 实现原理是通过创建一种类似于气泡的形状来表示集合。每个集合都被表示为一个独特的 \"气泡\"，集合中的元素被包含在这个气泡内部。如果两个集合有交集，那么这两个气泡会有重叠的部分，这个重叠的部分就表示这两个集合的交集。\n *\n * <en/> BubbleSets was originally proposed by Christopher Collins in the 2009 paper \"Bubble Sets: Revealing Set Relations with Isocontours over Existing Visualizations\".\n *\n * <en/> The principle is to represent sets by creating a shape similar to a bubble. Each set is represented by a unique \"bubble\", and the elements in the set are contained within this bubble. If two sets have an intersection, then the two bubbles will have an overlapping part, which represents the intersection of the two sets.\n */\nexport class BubbleSets extends BasePlugin {\n    shape;\n    bubbleSets;\n    path;\n    members = new Map();\n    avoidMembers = new Map();\n    bubbleSetOptions = {};\n    static defaultOptions = {\n        members: [],\n        avoidMembers: [],\n        /** shape style */\n        fill: 'lightblue',\n        fillOpacity: 0.2,\n        stroke: 'blue',\n        strokeOpacity: 0.2,\n        /** bubbleSetJS config */\n        ...defaultOptions,\n    };\n    constructor(context, options) {\n        super(context, deepMix({}, BubbleSets.defaultOptions, options));\n        this.bindEvents();\n        this.bubbleSets = new BubbleSetsJS(this.options);\n    }\n    bindEvents() {\n        this.context.graph.on(GraphEvent.AFTER_RENDER, this.drawBubbleSets);\n        this.context.graph.on(GraphEvent.AFTER_ELEMENT_UPDATE, this.updateBubbleSetsPath);\n    }\n    init() {\n        this.bubbleSets = new BubbleSetsJS(this.options);\n        this.members = new Map();\n        this.avoidMembers = new Map();\n    }\n    parseOptions() {\n        const { type, key, members, avoidMembers, ...rest } = this.options;\n        const res = Object.keys(rest).reduce((acc, key) => {\n            if (key in defaultOptions) {\n                acc.bubbleSetOptions[key] = rest[key];\n            }\n            else {\n                acc.style[key] = rest[key];\n            }\n            return acc;\n        }, { style: {}, bubbleSetOptions: {} });\n        return { type, key, members, avoidMembers, ...res };\n    }\n    drawBubbleSets = () => {\n        const { style, bubbleSetOptions } = this.parseOptions();\n        if (!isEqual(this.bubbleSetOptions, bubbleSetOptions))\n            this.init();\n        this.bubbleSetOptions = { ...bubbleSetOptions };\n        const finalStyle = { ...style, d: this.getPath() };\n        if (!this.shape) {\n            this.shape = new Contour({ style: finalStyle });\n            this.context.canvas.appendChild(this.shape);\n        }\n        else {\n            this.shape.update(finalStyle);\n        }\n    };\n    updateBubbleSetsPath = (event) => {\n        if (!this.shape)\n            return;\n        const id = idOf(event.data);\n        if (![...this.options.members, ...this.options.avoidMembers].includes(id))\n            return;\n        this.shape.update({ ...this.parseOptions().style, d: this.getPath(id) });\n    };\n    getPath = (forceUpdateId) => {\n        const { graph } = this.context;\n        const currMembers = this.options.members;\n        const prevMembers = [...this.members.keys()];\n        const currAvoidMembers = this.options.avoidMembers;\n        const prevAvoidMembers = [...this.avoidMembers.keys()];\n        if (!forceUpdateId && isEqual(currMembers, prevMembers) && isEqual(currAvoidMembers, prevAvoidMembers))\n            return this.path;\n        const { enter: membersToEnter = [], exit: membersToExit = [] } = arrayDiff(prevMembers, currMembers, (d) => d);\n        const { enter: avoidMembersToEnter = [], exit: avoidMembersToExit = [] } = arrayDiff(prevAvoidMembers, currAvoidMembers, (d) => d);\n        if (forceUpdateId) {\n            membersToExit.push(forceUpdateId);\n            membersToEnter.push(forceUpdateId);\n        }\n        const updateBubbleSets = (ids, isEntering, isMember) => {\n            ids.forEach((id) => {\n                const members = isMember ? this.members : this.avoidMembers;\n                const pushMember = isMember ? 'pushMember' : 'pushNonMember';\n                const removeMember = isMember ? 'removeMember' : 'removeNonMember';\n                if (isEntering) {\n                    let area;\n                    if (graph.getElementType(id) === 'edge') {\n                        [area] = convertToLine(graph, id);\n                        this.bubbleSets.pushEdge(area);\n                    }\n                    else {\n                        [area] = convertToRectangle(graph, id);\n                        this.bubbleSets[pushMember](area);\n                    }\n                    members.set(id, area);\n                }\n                else {\n                    const area = members.get(id);\n                    if (area) {\n                        if (graph.getElementType(id) === 'edge') {\n                            this.bubbleSets.removeEdge(area);\n                        }\n                        else {\n                            this.bubbleSets[removeMember](area);\n                        }\n                        members.delete(id);\n                    }\n                }\n            });\n        };\n        updateBubbleSets(membersToExit, false, true);\n        updateBubbleSets(membersToEnter, true, true);\n        updateBubbleSets(avoidMembersToExit, false, false);\n        updateBubbleSets(avoidMembersToEnter, true, false);\n        const pointPath = this.bubbleSets.compute();\n        const cleanPath = pointPath.sample(8).simplify(0).bSplines().simplify(0);\n        this.path = getClosedSpline(cleanPath.points.map(parsePoint));\n        return this.path;\n    };\n    /**\n     * <zh/> 添加成员元素\n     *\n     * <en/> Add member elements\n     * @param members - <zh/> 单个或多个 | <en/> single or multiple\n     */\n    addMember(members) {\n        const membersToAdd = Array.isArray(members) ? members : [members];\n        if (membersToAdd.some((member) => this.options.avoidMembers.includes(member))) {\n            this.options.avoidMembers = this.options.avoidMembers.filter((id) => !membersToAdd.includes(id));\n        }\n        this.options.members = [...new Set([...this.options.members, ...membersToAdd])];\n        this.drawBubbleSets();\n    }\n    /**\n     * <zh/> 移除成员元素\n     *\n     * <en/> Remove member elements\n     * @param members - <zh/> 单个或多个 | <en/> single or multiple\n     */\n    removeMember(members) {\n        const membersToRemove = Array.isArray(members) ? members : [members];\n        this.options.members = this.options.members.filter((id) => !membersToRemove.includes(id));\n        this.drawBubbleSets();\n    }\n    /**\n     * <zh/> 更新成员元素\n     *\n     * <en/> Update member elements\n     * @param members - <zh/> 值或者回调函数 | <en/> value or callback function\n     */\n    updateMember(members) {\n        this.options.members = isFunction(members) ? members(this.options.members) : members;\n        this.drawBubbleSets();\n    }\n    /**\n     * <zh/> 获取成员元素\n     *\n     * <en/> Get member elements\n     * @returns <zh/> 成员元素数组 | <en/> member elements array\n     */\n    getMember() {\n        return this.options.members;\n    }\n    /**\n     * <zh/> 添加需要避开的元素\n     *\n     * <en/> Add elements to avoid\n     * @param avoidMembers - <zh/> 单个或多个 | <en/> single or multiple\n     */\n    addAvoidMember(avoidMembers) {\n        const avoidMembersToAdd = Array.isArray(avoidMembers) ? avoidMembers : [avoidMembers];\n        if (avoidMembersToAdd.some((AvoidMember) => this.options.members.includes(AvoidMember))) {\n            this.options.members = this.options.members.filter((id) => !avoidMembersToAdd.includes(id));\n        }\n        this.options.avoidMembers = [...new Set([...this.options.avoidMembers, ...avoidMembersToAdd])];\n        this.drawBubbleSets();\n    }\n    /**\n     * <zh/> 移除需要避开的元素\n     *\n     * <en/> Remove elements to avoid\n     * @param avoidMembers - <zh/> 单个或多个 | <en/> single or multiple\n     */\n    removeAvoidMember(avoidMembers) {\n        const avoidMembersToRemove = Array.isArray(avoidMembers) ? avoidMembers : [avoidMembers];\n        if (this.options.avoidMembers.some((member) => avoidMembersToRemove.includes(member))) {\n            this.options.avoidMembers = this.options.avoidMembers.filter((id) => !avoidMembersToRemove.includes(id));\n            this.drawBubbleSets();\n        }\n    }\n    /**\n     * <zh/> 更新需要避开的元素\n     *\n     * <en/> Update elements to avoid\n     * @param avoidMembers - <zh/> 单个或多个 | <en/> single or multiple\n     */\n    updateAvoidMember(avoidMembers) {\n        this.options.avoidMembers = Array.isArray(avoidMembers) ? avoidMembers : [avoidMembers];\n        this.drawBubbleSets();\n    }\n    /**\n     * <zh/> 获取需要避开的元素\n     *\n     * <en/> Get elements to avoid\n     * @returns avoidMembers <zh/> 成员元素数组 | <en/> member elements array\n     */\n    getAvoidMember() {\n        return this.options.avoidMembers;\n    }\n    /**\n     * <zh/> 销毁\n     *\n     * <en/> Destroy\n     */\n    destroy() {\n        this.context.graph.off(GraphEvent.AFTER_RENDER, this.drawBubbleSets);\n        this.context.graph.off(GraphEvent.AFTER_ELEMENT_UPDATE, this.updateBubbleSetsPath);\n        this.shape.destroy();\n        super.destroy();\n    }\n}\n/**\n * <zh/> 将节点转换为 BubbleSetJS 支持的矩形\n *\n * <en/> Convert nodes to rectangles supported by BubbleSetJS\n * @param graph - <zh/> 图实例 | <en/> graph instance\n * @param ids - <zh/> 元素 ID 数组 | <en/> element ID array\n * @returns <zh/> 矩形数组 | <en/> rectangle array\n */\nconst convertToRectangle = (graph, ids) => {\n    const idArr = Array.isArray(ids) ? ids : [ids];\n    return idArr.map((id) => {\n        const bbox = graph.getElementRenderBounds(id);\n        return new Rectangle(bbox.min[0], bbox.min[1], getBBoxWidth(bbox), getBBoxHeight(bbox));\n    });\n};\n/**\n * <zh/> 将边转换为 BubbleSetJS 支持的线\n *\n * <en/> Convert edges to lines supported by BubbleSetJS\n * @param graph - <zh/> 图实例 | <en/> graph instance\n * @param ids - <zh/> 元素 ID 数组 | <en/> element ID array\n * @returns <zh/> 线数组 | <en/> line array\n */\nconst convertToLine = (graph, ids) => {\n    const idArr = Array.isArray(ids) ? ids : [ids];\n    return idArr.map((id) => {\n        const data = graph.getEdgeData(id);\n        const source = graph.getElementPosition(data.source);\n        const target = graph.getElementPosition(data.target);\n        return Line.from({ x1: source[0], y1: source[1], x2: target[0], y2: target[1] });\n    });\n};\n//# sourceMappingURL=bubble-sets.js.map","import { createPluginContainer, insertDOM } from '../../utils/dom';\nimport { BasePlugin } from '../base-plugin';\nimport { CONTEXTMENU_CSS, getContentFromItems } from './util';\n/**\n * <zh/> 上下文菜单\n *\n * <en/> Contextmenu\n * @remarks\n * <zh/> 上下文菜单，也被称为右键菜单，是当用户在某个特定区域上点击后出现的一个菜单。支持在点击前后，触发自定义事件。\n *\n * <en/> Contextmenu, also known as the right-click menu , is a menu that appears when a user clicks on a specific area. Supports triggering custom events before and after clicking.\n */\nexport class Contextmenu extends BasePlugin {\n    static defaultOptions = {\n        trigger: 'contextmenu',\n        offset: [4, 4],\n        loadingContent: '<div class=\"g6-contextmenu-loading\">Loading...</div>',\n        getContent: () => 'It is a empty context menu.',\n        enable: () => true,\n    };\n    $element;\n    constructor(context, options) {\n        super(context, Object.assign({}, Contextmenu.defaultOptions, options));\n        this.initElement();\n        this.update(options);\n    }\n    initElement() {\n        this.$element = createPluginContainer('contextmenu', false);\n        const { className } = this.options;\n        if (className)\n            this.$element.classList.add(className);\n        const $container = this.context.canvas.getContainer();\n        $container.appendChild(this.$element);\n        insertDOM('g6-contextmenu-css', 'style', {}, CONTEXTMENU_CSS, document.head);\n    }\n    /**\n     * <zh/> 显示上下文菜单\n     *\n     * <en/> Show the contextmenu\n     * @param event - <zh/> 元素指针事件 | <en/> Element pointer event\n     * @internal\n     */\n    async show(event) {\n        const { enable, offset } = this.options;\n        if ((typeof enable === 'function' && !enable(event)) || !enable) {\n            this.hide();\n            return;\n        }\n        const content = await this.getDOMContent(event);\n        if (content instanceof HTMLElement) {\n            this.$element.innerHTML = '';\n            this.$element.appendChild(content);\n        }\n        else {\n            this.$element.innerHTML = content;\n        }\n        // NOTICE: 为什么事件中的 client 是相对浏览器，而不是画布容器？\n        const clientRect = this.context.graph.getCanvas().getContainer().getBoundingClientRect();\n        this.$element.style.left = `${event.client.x - clientRect.left + offset[0]}px`;\n        this.$element.style.top = `${event.client.y - clientRect.top + offset[1]}px`;\n        this.$element.style.display = 'block';\n    }\n    /**\n     * <zh/> 隐藏上下文菜单\n     *\n     * <en/> Hide the contextmenu\n     */\n    hide() {\n        this.$element.style.display = 'none';\n    }\n    /**\n     * <zh/> 更新上下文菜单的配置项\n     *\n     * <en/> Update the contextmenu options\n     * @param options - <zh/> 配置项 | <en/> Options\n     * @internal\n     */\n    update(options) {\n        this.unbindEvents();\n        super.update(options);\n        this.bindEvents();\n    }\n    /**\n     * <zh/> 销毁上下文菜单\n     *\n     * <en/> Destroy the contextmenu\n     */\n    destroy() {\n        this.unbindEvents();\n        super.destroy();\n        this.$element.remove();\n    }\n    async getDOMContent(event) {\n        const { getContent, getItems } = this.options;\n        if (getItems) {\n            return getContentFromItems(await getItems(event));\n        }\n        return await getContent(event);\n    }\n    bindEvents() {\n        const { graph } = this.context;\n        const { trigger } = this.options;\n        graph.on(`canvas:${trigger}`, this.onTriggerEvent);\n        graph.on(`node:${trigger}`, this.onTriggerEvent);\n        graph.on(`edge:${trigger}`, this.onTriggerEvent);\n        graph.on(`combo:${trigger}`, this.onTriggerEvent);\n        document.addEventListener('click', this.onMenuItemClick);\n    }\n    unbindEvents() {\n        const { graph } = this.context;\n        const { trigger } = this.options;\n        graph.off(`canvas:${trigger}`, this.onTriggerEvent);\n        graph.off(`node:${trigger}`, this.onTriggerEvent);\n        graph.off(`edge:${trigger}`, this.onTriggerEvent);\n        graph.off(`combo:${trigger}`, this.onTriggerEvent);\n        document.removeEventListener('click', this.onMenuItemClick);\n    }\n    onTriggerEvent = (event) => {\n        // `contextmenu` 事件默认会触发浏览器的右键菜单，需要阻止默认事件\n        // `click` 事件不需要阻止默认事件\n        event.preventDefault?.();\n        this.show(event);\n    };\n    onMenuItemClick = (event) => {\n        const { onClick, trigger } = this.options;\n        if (event.target instanceof HTMLElement) {\n            if (event.target.className.includes('g6-contextmenu-li')) {\n                const value = event.target.getAttribute('value');\n                onClick?.(value, event.target);\n                this.hide();\n            }\n        }\n        if (trigger !== 'click')\n            this.hide();\n    };\n}\n//# sourceMappingURL=index.js.map","/**\n * Get the content of the right-click menu.\n * @param items - context menu items\n * @returns HTML string\n */\nexport function getContentFromItems(items) {\n    return `\n    <ul class=\"g6-contextmenu-ul\">\n      ${items.map((item) => `<li  class=\"g6-contextmenu-li\" value=\"${item.value}\">${item.name}</li>`).join('')}\n    </ul>\n  `;\n}\n/**\n * Style of the right-click menu, same with `tooltip`.\n */\nexport const CONTEXTMENU_CSS = `\n  .g6-contextmenu {\n    font-size: 12px;\n    background-color: rgba(255, 255, 255, 0.96);\n    border-radius: 4px;\n    overflow: hidden;\n    box-shadow: rgba(0, 0, 0, 0.12) 0px 6px 12px 0px;\n    transition: visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1) 0s, left 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s, top 0.4s cubic-bezier(0.23, 1, 0.32, 1) 0s;\n  }\n\n  .g6-contextmenu-ul {\n    max-width: 256px;\n    min-width: 96px;\n    list-style: none;\n    padding: 0;\n    margin: 0;\n  }\n\n  .g6-contextmenu-li {\n    padding: 8px 12px;\n    cursor: pointer;\n    user-select: none;\n  }\n\n  .g6-contextmenu-li:hover {\n    background-color: #f5f5f5;\n    cursor: pointer;\n  }\n`;\n//# sourceMappingURL=util.js.map","import { print } from '../../utils/print';\nimport { Shortcut } from '../../utils/shortcut';\nimport { BasePlugin } from '../base-plugin';\n/**\n * <zh/> 全屏\n *\n * <en/> Full screen\n */\nexport class Fullscreen extends BasePlugin {\n    static defaultOptions = {\n        trigger: {},\n        autoFit: true,\n    };\n    shortcut;\n    style;\n    $el = this.context.canvas.getContainer();\n    graphSize = [0, 0];\n    constructor(context, options) {\n        super(context, Object.assign({}, Fullscreen.defaultOptions, options));\n        this.shortcut = new Shortcut(context.graph);\n        this.bindEvents();\n        this.style = document.createElement('style');\n        document.head.appendChild(this.style);\n        this.style.innerHTML = `\n      :not(:root):fullscreen::backdrop {\n        background: transparent;\n      }\n    `;\n    }\n    bindEvents() {\n        this.unbindEvents();\n        this.shortcut.unbindAll();\n        const { request = [], exit = [] } = this.options.trigger;\n        this.shortcut.bind(request, this.request);\n        this.shortcut.bind(exit, this.exit);\n        const events = ['webkitfullscreenchange', 'mozfullscreenchange', 'fullscreenchange', 'MSFullscreenChange'];\n        events.forEach((eventName) => {\n            document.addEventListener(eventName, this.onFullscreenChange, false);\n        });\n    }\n    unbindEvents() {\n        this.shortcut.unbindAll();\n        const events = ['webkitfullscreenchange', 'mozfullscreenchange', 'fullscreenchange', 'MSFullscreenChange'];\n        events.forEach((eventName) => {\n            document.removeEventListener(eventName, this.onFullscreenChange, false);\n        });\n    }\n    setGraphSize(fullScreen = true) {\n        let width, height;\n        if (fullScreen) {\n            width = window.screen.width;\n            height = window.screen.height;\n            this.graphSize = this.context.graph.getSize();\n        }\n        else {\n            [width, height] = this.graphSize;\n        }\n        this.context.graph.setSize(width, height);\n        this.context.graph.render();\n    }\n    onFullscreenChange = () => {\n        const isFull = !!document.fullscreenElement;\n        if (this.options.autoFit)\n            this.setGraphSize(isFull);\n        if (isFull) {\n            this.options.onEnter?.();\n        }\n        else {\n            this.options.onExit?.();\n        }\n    };\n    /**\n     * <zh/> 请求全屏\n     *\n     * <en/> Request full screen\n     */\n    request() {\n        if (document.fullscreenElement || !isFullscreenEnabled())\n            return;\n        this.$el.requestFullscreen().catch((err) => {\n            print.warn(`Error attempting to enable full-screen: ${err.message} (${err.name})`);\n        });\n    }\n    /**\n     * <zh/> 退出全屏\n     *\n     * <en/> Exit full screen\n     */\n    exit() {\n        if (!document.fullscreenElement)\n            return;\n        document.exitFullscreen();\n    }\n    /**\n     * <zh/> 更新配置\n     *\n     * <en/> Update options\n     * @param options - <zh/> 配置项 | <en/> Options\n     * @internal\n     */\n    update(options) {\n        this.unbindEvents();\n        super.update(options);\n        this.bindEvents();\n    }\n    destroy() {\n        this.exit();\n        this.style.remove();\n        super.destroy();\n    }\n}\n/**\n * <zh/> 判断是否支持全屏\n *\n * <en/> Determine whether full screen is enabled\n * @returns <zh/> 是否支持全屏 | <en/> Whether full screen is enabled\n */\nfunction isFullscreenEnabled() {\n    return (document.fullscreenEnabled ||\n        // <zh/> 使用 Reflect 语法规避 ts 检查 | <en/> use Reflect to avoid ts checking\n        Reflect.get(document, 'webkitFullscreenEnabled') ||\n        Reflect.get(document, 'mozFullscreenEnabled') ||\n        Reflect.get(document, 'msFullscreenEnabled'));\n}\n//# sourceMappingURL=index.js.map","import { GraphEvent } from '../constants';\nimport { createPluginContainer, insertBefore } from '../utils/dom';\nimport { add, mod } from '../utils/vector';\nimport { BasePlugin } from './base-plugin';\n/**\n * <zh/> 网格线\n *\n * <en/> Grid line\n * @remarks\n * <zh/> 网格线插件，多用于辅助绘图\n *\n * <en/> Grid line plugin, often used to auxiliary drawing\n */\nexport class GridLine extends BasePlugin {\n    static defaultOptions = {\n        border: true,\n        borderLineWidth: 1,\n        borderStroke: '#eee',\n        borderStyle: 'solid',\n        lineWidth: 1,\n        size: 20,\n        stroke: '#eee',\n    };\n    $element = createPluginContainer('grid-line');\n    offset = [0, 0];\n    constructor(context, options) {\n        super(context, Object.assign({}, GridLine.defaultOptions, options));\n        const $container = this.context.canvas.getContainer();\n        insertBefore($container, this.$element);\n        this.updateStyle();\n        this.bindEvents();\n    }\n    /**\n     * <zh/> 更新网格线配置\n     *\n     * <en/> Update the configuration of the grid line\n     * @param options - <zh/> 配置项 | <en/> options\n     * @internal\n     */\n    update(options) {\n        super.update(options);\n        this.updateStyle();\n    }\n    bindEvents() {\n        const { graph } = this.context;\n        graph.on(GraphEvent.AFTER_TRANSFORM, this.onTransform);\n    }\n    updateStyle() {\n        const { size, stroke, lineWidth, border, borderLineWidth, borderStroke, borderStyle } = this.options;\n        Object.assign(this.$element.style, {\n            border: border ? `${borderLineWidth}px ${borderStyle} ${borderStroke}` : 'none',\n            backgroundImage: `linear-gradient(${stroke} ${lineWidth}px, transparent ${lineWidth}px), linear-gradient(90deg, ${stroke} ${lineWidth}px, transparent ${lineWidth}px)`,\n            backgroundSize: `${size}px ${size}px`,\n        });\n    }\n    updateOffset(delta) {\n        this.offset = mod(add(this.offset, delta), this.options.size);\n        this.$element.style.backgroundPosition = `${this.offset[0]}px ${this.offset[1]}px`;\n    }\n    onTransform = (event) => {\n        if (!this.options.follow)\n            return;\n        const { data: { translate }, } = event;\n        if (translate)\n            this.updateOffset(translate);\n    };\n    /**\n     * <zh/> 销毁网格线\n     *\n     * <en/> Destroy the grid line\n     */\n    destroy() {\n        this.context.graph.off(GraphEvent.AFTER_TRANSFORM, this.onTransform);\n        this.$element.remove();\n        super.destroy();\n    }\n}\n//# sourceMappingURL=grid-line.js.map","import { groupBy } from '@antv/util';\nimport { idOf } from './id';\n/**\n * <zh/> 对数据操作进行约简\n *\n * <en/> Reduce data changes\n * @param changes - <zh/> 数据操作 | <en/> data changes\n * @returns <zh/> 约简后的数据操作 | <en/> reduced data changes\n */\nexport function reduceDataChanges(changes) {\n    const results = {\n        Added: new Map(),\n        Updated: new Map(),\n        Removed: new Map(),\n    };\n    changes.forEach((change) => {\n        const { type, value } = change;\n        const id = idOf(value);\n        if (type === 'NodeAdded' || type === 'EdgeAdded' || type === 'ComboAdded') {\n            results.Added.set(id, change);\n        }\n        else if (type === 'NodeUpdated' || type === 'EdgeUpdated' || type === 'ComboUpdated') {\n            // 如果存在 Added，将当前操作置为 Added 操作\n            // If there is an Added operation, set the current operation to Added\n            if (results.Added.has(id)) {\n                results.Added.set(id, { type: type.replace('Updated', 'Added'), value });\n            }\n            // 如果存在 Updated，将当前操作置为 Updated 操作，但使用更早版本的 original\n            // If there is an Updated operation, set the current operation to Updated, but use an earlier version of original\n            else if (results.Updated.has(id)) {\n                const { original } = results.Updated.get(id);\n                results.Updated.set(id, { type, value, original });\n            }\n            else if (results.Removed.has(id)) {\n                // 如果存在 Removed，不做任何操作\n                // If there is a Removed operation, do nothing\n            }\n            else\n                results.Updated.set(id, change);\n        }\n        else if (type === 'NodeRemoved' || type === 'EdgeRemoved' || type === 'ComboRemoved') {\n            // 如果存在 Added 或者 Updated 的操作，删除 Removed 操作\n            // If there is an Added or Updated operation, delete the Removed operation\n            if (results.Added.has(id)) {\n                results.Added.delete(id);\n            }\n            else if (results.Updated.has(id)) {\n                results.Updated.delete(id);\n                results.Removed.set(id, change);\n            }\n            else {\n                results.Removed.set(id, change);\n            }\n        }\n    });\n    // 顺序并不重要\n    // The order is not important\n    return [\n        ...Array.from(results.Added.values()),\n        ...Array.from(results.Updated.values()),\n        ...Array.from(results.Removed.values()),\n    ];\n}\n/**\n * <zh/> 对数据操作进行分类\n *\n * <en/> Classify data changes\n * @param changes - <zh/> 数据操作 | <en/> data changes\n * @returns <zh/> 分类后的数据操作 | <en/> classified data changes\n */\nexport function groupByChangeType(changes) {\n    const { NodeAdded = [], NodeUpdated = [], NodeRemoved = [], EdgeAdded = [], EdgeUpdated = [], EdgeRemoved = [], ComboAdded = [], ComboUpdated = [], ComboRemoved = [], } = groupBy(changes, (change) => change.type);\n    return {\n        add: {\n            nodes: NodeAdded,\n            edges: EdgeAdded,\n            combos: ComboAdded,\n        },\n        update: {\n            nodes: NodeUpdated,\n            edges: EdgeUpdated,\n            combos: ComboUpdated,\n        },\n        remove: {\n            nodes: NodeRemoved,\n            edges: EdgeRemoved,\n            combos: ComboRemoved,\n        },\n    };\n}\n//# sourceMappingURL=change.js.map","import { isObject } from '@antv/util';\nimport { inferDefaultValue } from '../../utils/animation';\nimport { groupByChangeType, reduceDataChanges } from '../../utils/change';\nimport { idOf } from '../../utils/id';\n/**\n * <zh/> 对齐两个对象的字段。若目标对象缺少字段，则会添加默认值。\n *\n * <en/> Align the fields of two objects. If the target object lacks fields, default values will be added.\n * @param refObject - <zh/> 参考对象 ｜ <en/> Reference object\n * @param targetObject - <zh/> 目标对象 ｜ <en/> Target object\n */\nexport function alignFields(refObject, targetObject) {\n    for (const key in refObject) {\n        if (isObject(refObject[key]) && !Array.isArray(refObject[key]) && refObject[key] !== null) {\n            if (!targetObject[key])\n                targetObject[key] = {};\n            alignFields(refObject[key], targetObject[key]);\n        }\n        else if (!targetObject[key]) {\n            targetObject[key] = inferDefaultValue(key);\n        }\n    }\n}\n/**\n * <zh/> 解析数据变更为历史记录命令\n *\n * <en/> Parse data changes into history commands\n * @param changes - <zh/> 数据变更 ｜ <en/> Data changes\n * @param animation - <zh/> 是否开启动画 ｜ <en/> Whether to enable animation\n * @param context - <zh/> 运行时上下文 ｜ <en/> Runtime context\n * @returns <zh/> 历史记录命令 ｜ <en/> History command\n */\nexport function parseCommand(changes, animation = false, context) {\n    const cmd = {\n        animation,\n        current: { add: {}, update: {}, remove: {} },\n        original: { add: {}, update: {}, remove: {} },\n    };\n    const { add, update, remove } = groupByChangeType(reduceDataChanges(changes));\n    ['nodes', 'edges', 'combos'].forEach((category) => {\n        if (update[category]) {\n            update[category].forEach((item) => {\n                const newValue = { ...item.value };\n                let newOriginal = { ...item.original };\n                if (context) {\n                    // 特殊处理：获取元素原始 color\n                    const itemType = context.graph.getElementType(idOf(item.original));\n                    const colorKey = itemType === 'edge' ? 'stroke' : 'fill';\n                    const style = context.element.getElementComputedStyle(itemType, item.original);\n                    newOriginal = {\n                        ...item.original,\n                        style: { [colorKey]: style[colorKey], ...item.original.style },\n                    };\n                }\n                alignFields(newValue, newOriginal);\n                cmd.current.update[category] ||= [];\n                cmd.current.update[category].push(newValue);\n                cmd.original.update[category] ||= [];\n                cmd.original.update[category].push(newOriginal);\n            });\n        }\n        if (add[category]) {\n            add[category].forEach((item) => {\n                const newValue = { ...item.value };\n                cmd.current.add[category] ||= [];\n                cmd.current.add[category].push(newValue);\n                cmd.original.remove[category] ||= [];\n                cmd.original.remove[category].push(newValue);\n            });\n        }\n        if (remove[category]) {\n            remove[category].forEach((item) => {\n                const newValue = { ...item.value };\n                cmd.current.remove[category] ||= [];\n                cmd.current.remove[category].push(newValue);\n                cmd.original.add[category] ||= [];\n                cmd.original.add[category].push(newValue);\n            });\n        }\n    });\n    return cmd;\n}\n//# sourceMappingURL=util.js.map","import EventEmitter from '@antv/event-emitter';\nimport { GraphEvent } from '../../constants';\nimport { HistoryEvent } from '../../constants/events/history';\nimport { idsOf } from '../../utils/id';\nimport { BasePlugin } from '../base-plugin';\nimport { parseCommand } from './util';\n/**\n * <zh/> 历史记录\n *\n * <en/> History\n * @remarks\n * <zh/> 历史记录用于记录图的数据变化，支持撤销和重做等操作。\n *\n * <en/> History is used to record data changes in the graph and supports operations such as undo and redo.\n */\nexport class History extends BasePlugin {\n    static defaultOptions = {\n        stackSize: 0,\n    };\n    emitter;\n    batchChanges = null;\n    batchAnimation = false;\n    undoStack = [];\n    redoStack = [];\n    freezed = false;\n    constructor(context, options) {\n        super(context, Object.assign({}, History.defaultOptions, options));\n        this.emitter = new EventEmitter();\n        const { graph } = this.context;\n        graph.on(GraphEvent.AFTER_DRAW, this.addCommand);\n        graph.on(GraphEvent.BATCH_START, this.initBatchCommand);\n        graph.on(GraphEvent.BATCH_END, this.addCommand);\n    }\n    /**\n     * <zh/> 是否可以执行撤销操作\n     *\n     * <en/> Whether undo can be done\n     * @returns <zh/> 是否可以执行撤销操作 | <en/> Whether undo can be done\n     */\n    canUndo() {\n        return this.undoStack.length > 0;\n    }\n    /**\n     * <zh/> 是否可以执行重做操作\n     *\n     * <en/> Whether redo can be done\n     * @returns <zh/> 是否可以执行重做操作 | <en/> Whether redo can be done\n     */\n    canRedo() {\n        return this.redoStack.length > 0;\n    }\n    /**\n     * <zh/> 执行撤销\n     *\n     * <en/> Execute undo\n     * @returns <zh/> 返回当前实例 | <en/> Return the current instance\n     */\n    undo() {\n        const cmd = this.undoStack.pop();\n        if (cmd) {\n            this.executeCommand(cmd);\n            const before = this.options.beforeAddCommand?.(cmd, false);\n            if (before === false)\n                return;\n            this.redoStack.push(cmd);\n            this.options.afterAddCommand?.(cmd, false);\n            this.notify(HistoryEvent.UNDO, cmd);\n        }\n        return this;\n    }\n    /**\n     * <zh/> 执行重做\n     *\n     * <en/> Execute redo\n     * @returns <zh/> 返回当前实例 | <en/> Return the current instance\n     */\n    redo() {\n        const cmd = this.redoStack.pop();\n        if (cmd) {\n            this.executeCommand(cmd, false);\n            this.undoStackPush(cmd);\n            this.notify(HistoryEvent.REDO, cmd);\n        }\n        return this;\n    }\n    /**\n     * <zh/> 执行撤销且不计入历史记录\n     *\n     * <en/> Execute undo and do not record in history\n     * @returns <zh/> 返回当前实例 | <en/> Return the current instance\n     */\n    undoAndCancel() {\n        const cmd = this.undoStack.pop();\n        if (cmd) {\n            this.executeCommand(cmd, false);\n            this.redoStack = [];\n            this.notify(HistoryEvent.CANCEL, cmd);\n        }\n        return this;\n    }\n    executeCommand = (cmd, revert = true) => {\n        this.freezed = true;\n        this.options.executeCommand?.(cmd);\n        const values = revert ? cmd.original : cmd.current;\n        this.context.graph.addData(values.add);\n        this.context.graph.updateData(values.update);\n        this.context.graph.removeData(idsOf(values.remove, false));\n        this.context.element?.draw({ silence: true, animation: cmd.animation });\n        this.freezed = false;\n    };\n    addCommand = (event) => {\n        if (this.freezed)\n            return;\n        if (event.type === GraphEvent.AFTER_DRAW) {\n            const { dataChanges = [], animation = true } = event.data;\n            if (this.context.batch?.isBatching) {\n                if (!this.batchChanges)\n                    return;\n                this.batchChanges.push(dataChanges);\n                this.batchAnimation &&= animation;\n                return;\n            }\n            this.batchChanges = [dataChanges];\n            this.batchAnimation = animation;\n        }\n        this.undoStackPush(parseCommand(this.batchChanges.flat(), this.batchAnimation, this.context));\n        this.notify(HistoryEvent.ADD, this.undoStack[this.undoStack.length - 1]);\n    };\n    initBatchCommand = (event) => {\n        const { initiate } = event.data;\n        this.batchAnimation = false;\n        if (initiate) {\n            this.batchChanges = [];\n        }\n        else {\n            const cmd = this.undoStack.pop();\n            if (!cmd)\n                this.batchChanges = null;\n        }\n    };\n    undoStackPush(cmd) {\n        const { stackSize } = this.options;\n        if (stackSize !== 0 && this.undoStack.length >= stackSize) {\n            this.undoStack.shift();\n        }\n        const before = this.options.beforeAddCommand?.(cmd, true);\n        if (before === false)\n            return;\n        this.undoStack.push(cmd);\n        this.options.afterAddCommand?.(cmd, true);\n    }\n    /**\n     * <zh/> 清空历史记录\n     *\n     * <en/> Clear history\n     */\n    clear() {\n        this.undoStack = [];\n        this.redoStack = [];\n        this.batchChanges = null;\n        this.batchAnimation = false;\n        this.notify(HistoryEvent.CLEAR, null);\n    }\n    notify(event, cmd) {\n        this.emitter.emit(event, { cmd });\n        this.emitter.emit(HistoryEvent.CHANGE, { cmd });\n    }\n    /**\n     * <zh/> 监听历史记录事件\n     *\n     * <en/> Listen to history events\n     * @param event  - <zh/> 事件名称 | <en/> Event name\n     * @param handler - <zh/> 事件处理函数 | <en/> Event handler\n     */\n    on(event, handler) {\n        this.emitter.on(event, handler);\n    }\n    /**\n     * <zh/> 销毁\n     *\n     * <en/> Destroy\n     */\n    destroy() {\n        const { graph } = this.context;\n        graph.off(GraphEvent.AFTER_DRAW, this.addCommand);\n        graph.off(GraphEvent.BATCH_START, this.initBatchCommand);\n        graph.off(GraphEvent.BATCH_END, this.addCommand);\n        this.emitter.off();\n        super.destroy();\n        this.undoStack = [];\n        this.redoStack = [];\n    }\n}\n//# sourceMappingURL=index.js.map","import { getLinesIntersection } from '../../utils/line';\nimport { getClosedSpline } from '../../utils/path';\nimport { sortByClockwise } from '../../utils/point';\nimport { add, angle, normalize, perpendicular, scale, subtract, toVector2, toVector3 } from '../../utils/vector';\n/**\n * <zh/> 计算 Hull 路径\n *\n * <en/> Compute Hull Path\n * @param points - <zh/> 顶点列表 | <en/> Vertices of Hull\n * @param padding - <zh/> 内边距 | <en/> padding\n * @param corner - <zh/> 拐角类型，目前支持 'sharp'、'rounded' 和 'smooth' | <en/> Corner type, currently supports 'sharp', 'rounded' and 'smooth'\n * @returns <zh/> Hull 路径 | <en/> Hull Path\n */\nexport function computeHullPath(points, padding, corner) {\n    if (points.length === 1)\n        return genSinglePointHullPath(points[0], padding, corner);\n    if (points.length === 2)\n        return genTwoPointsHullPath(points, padding, corner);\n    switch (corner) {\n        case 'smooth':\n            return genMultiPointsSmoothHull(points, padding);\n        case 'sharp':\n            return genMultiPointsSharpHull(points, padding);\n        case 'rounded':\n        default:\n            return genMultiPointsRoundedHull(points, padding);\n    }\n}\n/**\n * <zh/> 生成单点 Hull 路径\n *\n * <en/> Generate Hull Path for a single point\n * @param point - <zh/> 单点 | <en/> Single point\n * @param padding - <zh/> 内边距 | <en/> Padding\n * @param corner - <zh/> 拐角类型 | <en/> Corner type\n * @returns <zh/> 单点 Hull 路径 | <en/> Single point Hull Path\n */\nconst genSinglePointHullPath = (point, padding, corner) => {\n    if (corner === 'sharp')\n        return [\n            ['M', point[0] - padding, point[1] - padding],\n            ['L', point[0] + padding, point[1] - padding],\n            ['L', point[0] + padding, point[1] + padding],\n            ['L', point[0] - padding, point[1] + padding],\n            ['Z'],\n        ];\n    const arcData = [padding, padding, 0, 0, 0];\n    return [\n        ['M', point[0], point[1] - padding],\n        ['A', ...arcData, point[0], point[1] + padding],\n        ['A', ...arcData, point[0], point[1] - padding],\n    ];\n};\n/**\n * <zh/> 生成两点 Hull 路径\n *\n * <en/> Generate Hull Path for two points\n * @param points - <zh/> 两点 | <en/> Two points\n * @param padding - <zh/> 内边距 | <en/> Padding\n * @param corner - <zh/> 拐角类型 | <en/> Corner type\n * @returns <zh/> 两点 Hull 路径 | <en/> Two points Hull Path\n */\nconst genTwoPointsHullPath = (points, padding, corner) => {\n    const arcData = [padding, padding, 0, 0, 0];\n    const point1 = corner === 'sharp' ? add(points[0], scale(normalize(subtract(points[0], points[1])), padding)) : points[0];\n    const point2 = corner === 'sharp' ? add(points[1], scale(normalize(subtract(points[1], points[0])), padding)) : points[1];\n    const offsetVector = scale(normalize(perpendicular(subtract(point1, point2), false)), padding);\n    const invOffsetVector = scale(offsetVector, -1);\n    const prev = add(point1, offsetVector);\n    const current = add(point2, offsetVector);\n    const p2 = add(point2, invOffsetVector);\n    const p3 = add(point1, invOffsetVector);\n    if (corner === 'sharp') {\n        return [['M', prev[0], prev[1]], ['L', current[0], current[1]], ['L', p2[0], p2[1]], ['L', p3[0], p3[1]], ['Z']];\n    }\n    return [\n        ['M', prev[0], prev[1]],\n        ['L', current[0], current[1]],\n        ['A', ...arcData, p2[0], p2[1]],\n        ['L', p3[0], p3[1]],\n        ['A', ...arcData, prev[0], prev[1]],\n    ];\n};\n/**\n * <zh/> 生成多点 Hull 路径且拐角为圆角\n *\n * <en/> Generate Hull Path for multiple points with rounded corners\n * @param points - <zh/> 形成 Hull 的点集 | <en/> Points that form the Hull\n * @param padding - <zh/> 内边距 | <en/> Padding\n * @returns <zh/> 圆角外壳路径 | <en/> Rounded hull path\n */\nconst genMultiPointsRoundedHull = (points, padding) => {\n    const segments = sortByClockwise(points).map((current, i) => {\n        const prev2Index = (i - 2 + points.length) % points.length;\n        const prevIndex = (i - 1 + points.length) % points.length;\n        const nextIndex = (i + 1) % points.length;\n        const prev2 = points[prev2Index];\n        const prev = points[prevIndex];\n        const next = points[nextIndex];\n        const v0 = subtract(prev2, prev);\n        const v1 = subtract(prev, current);\n        const v2 = subtract(current, next);\n        // 判断是否为凹角 ｜ Determine if it is a concave angle\n        const isConcave = (v1, v2) => {\n            return angle(v1, v2, true) < Math.PI;\n        };\n        const concavePrev = isConcave(v0, v1);\n        const concaveNext = isConcave(v1, v2);\n        const offsetVector = (v) => scale(normalize(perpendicular(v, false)), padding);\n        const offset = offsetVector(v1);\n        return [\n            {\n                p: toVector2(concavePrev ? add(prev, offsetVector(v0)) : add(prev, offset)),\n                concave: concavePrev && prev,\n            },\n            {\n                p: toVector2(concaveNext ? add(current, offsetVector(v2)) : add(current, offset)),\n                concave: concaveNext && current,\n            },\n        ];\n    });\n    const arcData = [padding, padding, 0, 0, 0];\n    const startIndex = segments.findIndex((segment, i) => !segments[(i - 1 + segments.length) % segments.length][0].concave &&\n        !segments[(i - 1 + segments.length) % segments.length][1].concave &&\n        !segment[0].concave &&\n        !segment[0].concave &&\n        !segment[1].concave);\n    const sortedSegments = segments.slice(startIndex).concat(segments.slice(0, startIndex));\n    let concavePoints = [];\n    return sortedSegments.flatMap((segment, i) => {\n        const pathFragment = [];\n        const lastSegment = sortedSegments[segments.length - 1];\n        if (i === 0)\n            pathFragment.push(['M', ...lastSegment[1].p]);\n        if (!segment[0].concave) {\n            pathFragment.push(['A', ...arcData, ...segment[0].p]);\n        }\n        else {\n            concavePoints.push(segment[0].p, segment[1].p);\n        }\n        if (!segment[1].concave) {\n            pathFragment.push(['L', ...segment[1].p]);\n        }\n        else {\n            concavePoints.unshift(segment[1].p);\n        }\n        if (concavePoints.length === 3) {\n            pathFragment.pop();\n            pathFragment.push(['C', ...concavePoints.flat()]);\n            concavePoints = [];\n        }\n        return pathFragment;\n    });\n};\n/**\n * <zh/> 生成多点 Hull 路径且拐角为平滑\n *\n * <en/> Generate Hull Path for multiple points with smooth corners\n * @param points - <zh/> 形成 Hull 的点集 | <en/> Points that form the Hull\n * @param padding - <zh/> 内边距 | <en/> Padding\n * @returns <zh/> 平滑外壳路径 | <en/> Smooth hull path\n */\nconst genMultiPointsSmoothHull = (points, padding) => {\n    const hullPoints = sortByClockwise(points).map((p, i) => {\n        const pNext = points[(i + 1) % points.length];\n        return { p, v: normalize(subtract(pNext, p)) };\n    });\n    // Compute the expanded hull points, and the nearest prior control point for each.\n    hullPoints.forEach((hp, i) => {\n        const priorIndex = i > 0 ? i - 1 : points.length - 1;\n        const prevV = hullPoints[priorIndex].v;\n        const extensionVec = normalize(add(prevV, scale(hp.v, angle(prevV, hp.v, true) < Math.PI ? 1 : -1)));\n        hp.p = add(hp.p, scale(extensionVec, padding));\n    });\n    return getClosedSpline(hullPoints.map((obj) => obj.p));\n};\n/**\n * <zh/> 生成多点 Hull 路径且拐角为尖锐\n *\n * <en/> Generate Hull Path for multiple points with sharp corners\n * @param points - <zh/> 形成 Hull 的点集 | <en/> Points that form the Hull\n * @param padding - <zh/> 内边距 | <en/> Padding\n * @returns <zh/> 锐角外壳路径 | <en/> Sharp hull path\n */\nconst genMultiPointsSharpHull = (points, padding) => {\n    const segments = points.map((current, i) => {\n        const prev = points[i === 0 ? points.length - 1 : i - 1];\n        const offset = toVector3(scale(normalize(perpendicular(subtract(prev, current), false)), padding));\n        return [add(prev, offset), add(current, offset)];\n    });\n    const arr = segments.flat();\n    const vertices = arr\n        .map((_, i) => {\n        if (i % 2 === 0)\n            return null;\n        const l1 = [arr[(i - 1) % arr.length], arr[i % arr.length]];\n        const l2 = [arr[(i + 1) % arr.length], arr[(i + 2) % arr.length]];\n        return getLinesIntersection(l1, l2, true);\n    })\n        .filter(Boolean);\n    return vertices.map((point, i) => [i === 0 ? 'M' : 'L', point[0], point[1]]).concat([['Z']]);\n};\n//# sourceMappingURL=util.js.map","import { isEqual, isFunction } from '@antv/util';\nimport hull from 'hull.js';\nimport { GraphEvent } from '../../constants';\nimport { Contour } from '../../elements/shapes';\nimport { idOf } from '../../utils/id';\nimport { positionOf } from '../../utils/position';\nimport { BasePlugin } from '../base-plugin';\nimport { computeHullPath } from './util';\n/**\n * <zh/> 轮廓\n *\n * <en/> Hull\n * @remarks\n * <zh/> 轮廓包围（Hull）用于处理和表示一组点的凸多边形包围盒。轮廓包围分为两种形态：凸包和凹包。\n *\n * <zh/> 凸包（Convex Hull）：这是一个凸多边形，它包含所有的点，并且没有任何凹陷。你可以将其想象为一组点的最小包围盒，没有任何点在这个多边形的外部。\n *\n * <zh/> 凹包（Concave Hull）：这是一个凹多边形，它同样包含所有的点，但是可能会有凹陷。凹包的凹陷程度由 concavity 参数控制。concavity 越大，凹陷越小。当 concavity 为 Infinity 时，凹包就变成了凸包。\n *\n * <en/> Hull is used to process and represent the convex polygon bounding box of a set of points. Hull has two forms: convex hull and concave hull.\n *\n * <en/>  Convex Hull: This is a convex polygon that contains all points and has no concave. You can think of it as the smallest bounding box of a set of points, with no points outside the polygon.\n *\n *  <en/>  Concave Hull: This is a concave polygon that also contains all points, but may have concave. The concavity of the concave hull is controlled by the concavity parameter. The larger the concavity, the smaller the concave. When concavity is Infinity, the concave hull becomes a convex hull.\n */\nexport class Hull extends BasePlugin {\n    shape;\n    /**\n     * <zh/> 在 Hull 上的元素\n     *\n     * <en/> Element Ids on Hull\n     */\n    hullMemberIds = [];\n    /**\n     * <zh/> Hull 绘制路径\n     *\n     * <en/> Hull path\n     */\n    path;\n    optionsCache;\n    static defaultOptions = {\n        members: [],\n        padding: 10,\n        corner: 'rounded',\n        concavity: Infinity,\n        /** hull style */\n        fill: 'lightblue',\n        fillOpacity: 0.2,\n        labelOpacity: 1,\n        stroke: 'blue',\n        strokeOpacity: 0.2,\n    };\n    constructor(context, options) {\n        super(context, Object.assign({}, Hull.defaultOptions, options));\n        this.bindEvents();\n    }\n    bindEvents() {\n        this.context.graph.on(GraphEvent.AFTER_RENDER, this.drawHull);\n        this.context.graph.on(GraphEvent.AFTER_ELEMENT_UPDATE, this.updateHullPath);\n    }\n    getHullStyle(forceUpdate) {\n        const { members, padding, corner, ...style } = this.options;\n        return { ...style, d: this.getHullPath(forceUpdate) };\n    }\n    drawHull = () => {\n        if (!this.shape) {\n            this.shape = new Contour({ style: this.getHullStyle() });\n            this.context.canvas.appendChild(this.shape);\n        }\n        else {\n            const forceUpdate = !isEqual(this.optionsCache, this.options);\n            this.shape.update(this.getHullStyle(forceUpdate));\n        }\n        this.optionsCache = { ...this.options };\n    };\n    updateHullPath = (event) => {\n        if (!this.shape)\n            return;\n        if (!this.options.members.includes(idOf(event.data)))\n            return;\n        this.shape.update({ d: this.getHullPath(true) });\n    };\n    getHullPath = (forceUpdate = false) => {\n        const { graph } = this.context;\n        const members = this.getMember();\n        if (members.length === 0)\n            return '';\n        const data = members.map((id) => graph.getNodeData(id));\n        const vertices = hull(data.map(positionOf), this.options.concavity).slice(1).reverse();\n        const hullMemberIds = vertices.flatMap((point) => data.filter((m) => isEqual(positionOf(m), point)).map(idOf));\n        if (isEqual(hullMemberIds, this.hullMemberIds) && !forceUpdate)\n            return this.path;\n        this.hullMemberIds = hullMemberIds;\n        this.path = computeHullPath(vertices, this.getPadding(), this.options.corner);\n        return this.path;\n    };\n    getPadding() {\n        const { graph } = this.context;\n        const memberPadding = this.hullMemberIds.reduce((acc, id) => {\n            const { halfExtents } = graph.getElementRenderBounds(id);\n            const size = Math.max(halfExtents[0], halfExtents[1]);\n            return Math.max(acc, size);\n        }, 0);\n        return memberPadding + this.options.padding;\n    }\n    /**\n     * <zh/> 添加 Hull 成员\n     *\n     * <en/> Add Hull member\n     * @param members - <zh/> 元素 Ids | <en/> Element Ids\n     */\n    addMember(members) {\n        const membersToAdd = Array.isArray(members) ? members : [members];\n        this.options.members = [...new Set([...this.options.members, ...membersToAdd])];\n        this.shape.update({ d: this.getHullPath() });\n    }\n    /**\n     * <zh/> 移除 Hull 成员\n     *\n     * <en/> Remove Hull member\n     * @param members - <zh/> 元素 Ids | <en/> Element Ids\n     */\n    removeMember(members) {\n        const membersToRemove = Array.isArray(members) ? members : [members];\n        this.options.members = this.options.members.filter((id) => !membersToRemove.includes(id));\n        if (membersToRemove.some((id) => this.hullMemberIds.includes(id))) {\n            this.shape.update({ d: this.getHullPath() });\n        }\n    }\n    /**\n     * <zh/> 更新 Hull 成员\n     *\n     * <en/> Update Hull member\n     * @param members - <zh/> 元素 Ids | <en/> Element Ids\n     */\n    updateMember(members) {\n        this.options.members = isFunction(members) ? members(this.options.members) : members;\n        this.shape.update(this.getHullStyle(true));\n    }\n    /**\n     * <zh/> 获取 Hull 成员\n     *\n     * <en/> Get Hull member\n     * @returns <zh/> 元素 Ids | <en/> Element Ids\n     */\n    getMember() {\n        return this.options.members;\n    }\n    /**\n     * <zh/> 销毁 Hull\n     *\n     * <en/> Destroy Hull\n     */\n    destroy() {\n        this.context.graph.off(GraphEvent.AFTER_DRAW, this.drawHull);\n        this.shape.destroy();\n        this.hullMemberIds = [];\n        super.destroy();\n    }\n}\n//# sourceMappingURL=index.js.map","import { Category, Layout } from '@antv/component';\nimport { get, isFunction } from '@antv/util';\nimport { GraphEvent } from '../constants';\nimport { BasePlugin } from './base-plugin';\n/**\n * <zh/> 图例\n *\n * <en/> Legend\n * @remarks\n * <zh/> 图例插件用于展示图中元素的分类信息，支持节点、边、组合的分类信息展示。\n *\n * <en/> The legend plugin is used to display the classification information of elements in the graph, and supports the display of classification information of nodes, edges, and combos.\n */\nexport class Legend extends BasePlugin {\n    static defaultOptions = {\n        position: 'bottom',\n        trigger: 'hover',\n        orientation: 'horizontal',\n        layout: 'flex',\n        itemSpacing: 4,\n        rowPadding: 10,\n        colPadding: 10,\n        itemMarkerSize: 16,\n        itemLabelFontSize: 16,\n    };\n    typePrefix = '__data__';\n    element = null;\n    draw = false;\n    fieldMap = {\n        node: new Map(),\n        edge: new Map(),\n        combo: new Map(),\n    };\n    selectedItems = [];\n    constructor(context, options) {\n        super(context, Object.assign({}, Legend.defaultOptions, options));\n        this.bindEvents();\n    }\n    /**\n     * <zh/> 更新图例配置\n     *\n     * <en/> Update the legend configuration\n     * @param options - <zh/> 图例配置项 | <en/> Legend options\n     * @internal\n     */\n    update(options) {\n        super.update(options);\n        this.clear();\n        this.createElement();\n    }\n    clear() {\n        this.element?.destroy();\n        this.element = null;\n        this.draw = false;\n    }\n    bindEvents = () => {\n        const { graph } = this.context;\n        graph.on(GraphEvent.AFTER_DRAW, this.createElement);\n    };\n    changeState = (el, state) => {\n        const { graph } = this.context;\n        const { typePrefix } = this;\n        const composeId = get(el, [typePrefix, 'id']);\n        const category = get(el, [typePrefix, 'style', 'labelText']);\n        const [type] = composeId.split('__');\n        const ids = this.fieldMap[type].get(category) || [];\n        graph.setElementState(Object.fromEntries(ids?.map((id) => [id, state])));\n    };\n    /**\n     * <zh/> 图例元素点击事件\n     *\n     * <en/> Legend element click event\n     * @param event - <zh/> 点击的元素 | <en/> The element that is clicked\n     */\n    click = (event) => {\n        if (this.options.trigger === 'hover')\n            return;\n        const composeId = get(event, [this.typePrefix, 'id']);\n        if (!this.selectedItems.includes(composeId)) {\n            this.selectedItems.push(composeId);\n            this.changeState(event, 'selected');\n        }\n        else {\n            this.selectedItems = this.selectedItems.filter((item) => item !== composeId);\n            this.changeState(event, []);\n        }\n    };\n    /**\n     * <zh/> 图例元素移出事件\n     *\n     * <en/> Legend element mouseleave event\n     * @param event - <zh/> 移出的元素 | <en/> The element that is moved out\n     */\n    mouseleave = (event) => {\n        if (this.options.trigger === 'click')\n            return;\n        this.selectedItems = [];\n        this.changeState(event, []);\n    };\n    /**\n     * <zh/> 图例元素移入事件\n     *\n     * <en/> Legend element mouseenter event\n     * @param event - <zh/> 移入的元素 | <en/> The element that is moved in\n     */\n    mouseenter = (event) => {\n        if (this.options.trigger === 'click')\n            return;\n        const composeId = get(event, [this.typePrefix, 'id']);\n        if (!this.selectedItems.includes(composeId)) {\n            this.selectedItems.push(composeId);\n            this.changeState(event, 'active');\n        }\n        else {\n            this.selectedItems = this.selectedItems.filter((item) => item !== composeId);\n        }\n    };\n    /**\n     * <zh/> 刷新图例元素状态\n     *\n     * <en/> Refresh the status of the legend element\n     */\n    updateElement() {\n        if (!this.element)\n            return;\n        const category = this.element.getChildByIndex(0);\n        category.update({\n            itemMarkerOpacity: ({ id }) => {\n                if (!this.selectedItems.length || this.selectedItems.includes(id))\n                    return 1;\n                return 0.5;\n            },\n            itemLabelOpacity: ({ id }) => {\n                if (!this.selectedItems.length || this.selectedItems.includes(id))\n                    return 1;\n                return 0.5;\n            },\n        });\n    }\n    setFieldMap = (field, id, type) => {\n        if (!field)\n            return;\n        const map = this.fieldMap[type];\n        if (!map)\n            return;\n        if (!map.has(field)) {\n            map.set(field, [id]);\n        }\n        else {\n            const ids = map.get(field);\n            if (ids) {\n                ids.push(id);\n                map.set(field, ids);\n            }\n        }\n    };\n    getEvents = () => {\n        return {\n            mouseenter: this.mouseenter,\n            mouseleave: this.mouseleave,\n            click: this.click,\n        };\n    };\n    getMarkerData = (field, elementType) => {\n        if (!field)\n            return [];\n        const { model, element, graph } = this.context;\n        const { nodes, edges, combos } = model.getData();\n        const items = {};\n        const getField = (item) => {\n            if (isFunction(field))\n                return field(item);\n            return field;\n        };\n        const defaultType = {\n            node: 'circle',\n            edge: 'line',\n            combo: 'rect',\n        };\n        /** 用于将 G6 element 转换为 componets 支持的类型 */\n        const markerMapping = {\n            circle: 'circle',\n            ellipse: 'circle', // 待 components 支持 ellipse\n            image: 'bowtie',\n            rect: 'square',\n            star: 'cross',\n            triangle: 'triangle',\n            diamond: 'diamond',\n            cubic: 'dot',\n            line: 'hyphen',\n            polyline: 'hyphen',\n            quadratic: 'hv',\n            'cubic-horizontal': 'hyphen',\n            'cubic-vertical': 'line',\n        };\n        const getElementStyle = (type, datum) => {\n            const style = element?.getElementComputedStyle(type, datum);\n            return style;\n        };\n        const getElementModel = (data, type) => {\n            data.forEach((item) => {\n                const { id } = item;\n                const value = get(item, ['data', getField(item)]);\n                const marker = element?.getElementType(type, item) || 'circle';\n                const style = getElementStyle(type, item);\n                const color = (type === 'edge' ? style?.stroke : style?.fill) || '#1783ff';\n                if (id && value && value.replace(/\\s+/g, '')) {\n                    this.setFieldMap(value, id, type);\n                    if (!items[value]) {\n                        items[value] = {\n                            id: `${type}__${id}`,\n                            label: value,\n                            marker: markerMapping[marker] || defaultType[type],\n                            elementType: type,\n                            lineWidth: 1,\n                            stroke: color,\n                            fill: color,\n                        };\n                    }\n                }\n            });\n        };\n        switch (elementType) {\n            case 'node':\n                getElementModel(nodes, 'node');\n                break;\n            case 'edge':\n                getElementModel(edges, 'edge');\n                break;\n            case 'combo':\n                getElementModel(combos, 'combo');\n                break;\n            default:\n                return [];\n        }\n        return Object.values(items);\n    };\n    /**\n     * <zh/> 图例布局\n     *\n     * <en/> Legend layout\n     * @param position -  <zh/> 图例位置| <en/> Legend position\n     * @returns <zh/> 图例布局样式| <en/> Legend layout style\n     */\n    layout = (position) => {\n        const preset = {\n            flexDirection: 'row',\n            alignItems: 'flex-end',\n            justifyContent: 'center',\n        };\n        let { flexDirection, alignItems, justifyContent } = preset;\n        const layout = {\n            top: ['row', 'flex-start', 'center'],\n            bottom: ['row', 'flex-end', 'center'],\n            left: ['column', 'flex-start', 'center'],\n            right: ['column', 'flex-end', 'center'],\n        };\n        if (position in layout) {\n            [flexDirection, alignItems, justifyContent] = layout[position];\n        }\n        return {\n            display: 'flex',\n            flexDirection,\n            justifyContent,\n            alignItems,\n        };\n    };\n    createElement = () => {\n        if (this.draw) {\n            this.updateElement();\n            return;\n        }\n        const { canvas } = this.context;\n        const [canvasWidth, canvasHeight] = canvas.getSize();\n        const { width = canvasWidth, height = canvasHeight, nodeField, edgeField, comboField, trigger, position, ...rest } = this.options;\n        const nodeItems = this.getMarkerData(nodeField, 'node');\n        const edgeItems = this.getMarkerData(edgeField, 'edge');\n        const comboItems = this.getMarkerData(comboField, 'combo');\n        const items = [...nodeItems, ...comboItems, ...edgeItems];\n        const layout = this.layout(position);\n        const layoutWrapper = new Layout({\n            style: {\n                width,\n                height,\n                ...layout,\n            },\n        });\n        const categoryStyle = Object.assign({\n            width,\n            height,\n            data: items,\n            itemMarkerLineWidth: ({ lineWidth }) => lineWidth,\n            itemMarker: ({ marker }) => marker,\n            itemMarkerStroke: ({ stroke }) => stroke,\n            itemMarkerFill: ({ fill }) => fill,\n            gridCol: nodeItems.length,\n        }, rest, this.getEvents());\n        const category = new Category({\n            className: 'legend',\n            style: categoryStyle,\n        });\n        layoutWrapper.appendChild(category);\n        canvas.appendChild(layoutWrapper);\n        this.element = layoutWrapper;\n        this.draw = true;\n    };\n    /**\n     * <zh/>销毁图例\n     *\n     * <en/> Destroy the legend\n     */\n    destroy() {\n        this.clear();\n        this.context.graph.off(GraphEvent.AFTER_DRAW, this.createElement);\n        super.destroy();\n    }\n}\n//# sourceMappingURL=legend.js.map","import { __read } from \"tslib\";\nvar scale = ['year', 'month', 'day', 'hour', 'minute', 'second'];\nvar masks = ['YYYY', 'MM', 'DD', 'hh', 'mm', 'ss'];\nexport function parseDate(date) {\n    return date instanceof Date ? date : new Date(date);\n}\n/**\n * 生成时间格式化\n * @param maxUnit 最大时间单位\n * @param minUnit 最小时间单位\n */\nexport function getMask(_a) {\n    var _b = __read(_a, 2), maxUnit = _b[0], minUnit = _b[1];\n    var startIndex = scale.indexOf(maxUnit);\n    var endIndex = scale.indexOf(minUnit);\n    var format = '';\n    for (var i = startIndex; i <= endIndex; i += 1) {\n        format += masks[i];\n        if (i < endIndex) {\n            var connect = '-';\n            if (i === 2)\n                connect = ' ';\n            else if (i > 2)\n                connect = ':';\n            format += connect;\n        }\n    }\n    return format;\n}\n/**\n * 格式化时间\n */\nexport function formatTime(date, mask) {\n    var timeMap = {\n        YYYY: date.getFullYear(),\n        MM: date.getMonth() + 1,\n        DD: date.getDate(),\n        HH: date.getHours(),\n        mm: date.getMinutes(),\n        ss: date.getSeconds(),\n    };\n    var strftime = mask;\n    Object.keys(timeMap).forEach(function (key) {\n        var val = timeMap[key];\n        strftime = strftime.replace(key, key === 'YYYY' ? \"\".concat(val) : \"\".concat(val).padStart(2, '0'));\n    });\n    return strftime;\n}\n/**\n * 获取两个时间的差值，单位毫秒\n */\nexport function getTimeDiff(a, b) {\n    return parseDate(a).getTime() - parseDate(b).getTime();\n}\n/**\n * 获取时间跨度\n */\nexport function getTimeScale(a, b) {\n    var _a = __read([parseDate(a), parseDate(b)], 2), ma = _a[0], mb = _a[1];\n    if (ma.getFullYear() !== mb.getFullYear())\n        return 'year';\n    if (ma.getMonth() !== mb.getMonth())\n        return 'month';\n    if (ma.getDay() !== mb.getDay())\n        return 'day';\n    if (ma.getHours() !== mb.getHours())\n        return 'hour';\n    if (ma.getMinutes() !== mb.getMinutes())\n        return 'minute';\n    return 'second';\n}\n/**\n * 获取给定时间的开始时间\n */\nexport function getTimeStart(date, scale) {\n    var result = new Date(date);\n    var timeMap = {\n        year: function (d) {\n            d.setMonth(0);\n            d.setHours(0, 0, 0, 0);\n        },\n        month: function (d) {\n            d.setDate(1);\n            d.setHours(0, 0, 0, 0);\n        },\n        day: function (d) { return d.setHours(0, 0, 0, 0); },\n        hour: function (d) { return d.setMinutes(0, 0, 0); },\n        minute: function (d) { return d.setSeconds(0, 0); },\n        second: function (d) { return d.setMilliseconds(0); },\n    };\n    timeMap[scale](result);\n    return formatTime(result, getMask(['year', scale]));\n}\n//# sourceMappingURL=time.js.map","import isArray from './is-array';\nimport isObject from './is-object';\nfunction each(elements, func) {\n    if (!elements) {\n        return;\n    }\n    var rst;\n    if (isArray(elements)) {\n        for (var i = 0, len = elements.length; i < len; i++) {\n            rst = func(elements[i], i);\n            if (rst === false) {\n                break;\n            }\n        }\n    }\n    else if (isObject(elements)) {\n        for (var k in elements) {\n            if (elements.hasOwnProperty(k)) {\n                rst = func(elements[k], k);\n                if (rst === false) {\n                    break;\n                }\n            }\n        }\n    }\n}\nexport default each;\n//# sourceMappingURL=each.js.map","import each from './each';\nimport isArray from './is-array';\nimport isPlainObject from './is-plain-object';\nvar reduce = function (arr, fn, init) {\n    if (!isArray(arr) && !isPlainObject(arr)) {\n        return arr;\n    }\n    var result = init;\n    each(arr, function (data, i) {\n        result = fn(result, data, i);\n    });\n    return result;\n};\nexport default reduce;\n//# sourceMappingURL=reduce.js.map","import { __assign, __extends, __read } from \"tslib\";\nimport { Component } from '../../core';\nimport { Group, Rect } from '../../shapes';\nimport { parseSeriesAttr, renderExtDo, select, subStyleProps } from '../../util';\nimport { deepAssign } from '../../util/deep-assign';\nvar Option = /** @class */ (function (_super) {\n    __extends(Option, _super);\n    function Option(options) {\n        var _this = _super.call(this, deepAssign({}, Option.defaultOptions, options)) || this;\n        _this.hoverColor = '#f5f5f5';\n        _this.selectedColor = '#e6f7ff';\n        _this.background = _this.appendChild(new Rect({}));\n        _this.label = _this.background.appendChild(new Group({}));\n        return _this;\n    }\n    Object.defineProperty(Option.prototype, \"padding\", {\n        get: function () {\n            return parseSeriesAttr(this.style.padding);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Option.prototype.renderLabel = function () {\n        var _a = this.style, label = _a.label, value = _a.value;\n        var labelStyle = subStyleProps(this.attributes, 'label');\n        select(this.label)\n            .maybeAppend('.label', function () { return renderExtDo(label); })\n            .attr('className', 'label')\n            .styles(labelStyle);\n        // bind data to label\n        this.label.attr('__data__', value);\n    };\n    Option.prototype.renderBackground = function () {\n        var labelBBox = this.label.getBBox();\n        var _a = __read(this.padding, 4), top = _a[0], right = _a[1], bottom = _a[2], left = _a[3];\n        var labelWidth = labelBBox.width, labelHeight = labelBBox.height;\n        var backgroundWidth = labelWidth + left + right;\n        var backgroundHeight = labelHeight + top + bottom;\n        var backgroundStyle = subStyleProps(this.attributes, 'background');\n        var _b = this.style, _c = _b.width, styleWidth = _c === void 0 ? 0 : _c, _d = _b.height, styleHeight = _d === void 0 ? 0 : _d, selected = _b.selected;\n        this.background.attr(__assign(__assign({}, backgroundStyle), { width: Math.max(backgroundWidth, styleWidth), height: Math.max(backgroundHeight, styleHeight), fill: selected ? this.selectedColor : '#fff' }));\n        // place label\n        this.label.attr({ transform: \"translate(\".concat(left, \", \").concat((backgroundHeight - labelHeight) / 2, \")\") });\n    };\n    Option.prototype.render = function () {\n        this.renderLabel();\n        this.renderBackground();\n    };\n    Option.prototype.bindEvents = function () {\n        var _this = this;\n        this.addEventListener('pointerenter', function () {\n            if (_this.style.selected)\n                return;\n            _this.background.attr('fill', _this.hoverColor);\n        });\n        this.addEventListener('pointerleave', function () {\n            if (_this.style.selected)\n                return;\n            _this.background.attr('fill', _this.style.backgroundFill);\n        });\n        var item = this;\n        this.addEventListener('click', function () {\n            var _a = _this.style, label = _a.label, value = _a.value, onClick = _a.onClick;\n            onClick === null || onClick === void 0 ? void 0 : onClick(value, { label: label, value: value }, item);\n        });\n    };\n    Option.defaultOptions = {\n        style: {\n            value: '',\n            label: '',\n            cursor: 'pointer',\n        },\n    };\n    return Option;\n}(Component));\nexport { Option };\n//# sourceMappingURL=option.js.map","import { __assign, __extends } from \"tslib\";\nimport { CustomEvent } from '@antv/g';\nimport { Component } from '../../core';\nimport { Rect } from '../../shapes';\nimport { hide, parseSeriesAttr, renderExtDo, select, show, subStyleProps } from '../../util';\nimport { deepAssign } from '../../util/deep-assign';\nimport { Option } from './option';\nvar Select = /** @class */ (function (_super) {\n    __extends(Select, _super);\n    function Select(options) {\n        var _a, _b;\n        var _this = _super.call(this, deepAssign({}, Select.defaultOptions, options)) || this;\n        /** 当前 value */\n        _this.currentValue = (_a = Select.defaultOptions.style) === null || _a === void 0 ? void 0 : _a.defaultValue;\n        _this.isPointerInSelect = false;\n        _this.select = _this.appendChild(new Rect({\n            className: 'select',\n            style: {\n                cursor: 'pointer',\n                width: 0,\n                height: 0,\n            },\n        }));\n        _this.dropdown = _this.appendChild(new Rect({\n            className: 'dropdown',\n        }));\n        var defaultValue = _this.style.defaultValue;\n        if (defaultValue && ((_b = _this.style.options) === null || _b === void 0 ? void 0 : _b.some(function (option) { return option.value === defaultValue; }))) {\n            _this.currentValue = defaultValue;\n        }\n        return _this;\n    }\n    Select.prototype.setValue = function (value) {\n        this.currentValue = value;\n        this.render();\n    };\n    Select.prototype.getValue = function () {\n        return this.currentValue;\n    };\n    Object.defineProperty(Select.prototype, \"dropdownPadding\", {\n        get: function () {\n            return parseSeriesAttr(this.style.dropdownPadding);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Select.prototype.renderSelect = function () {\n        var _this = this;\n        var _a;\n        var _b = this.style, x = _b.x, y = _b.y, width = _b.width, height = _b.height, bordered = _b.bordered, showDropdownIcon = _b.showDropdownIcon;\n        var selectStyle = subStyleProps(this.attributes, 'select');\n        var placeholderStyle = subStyleProps(this.attributes, 'placeholder');\n        this.select.attr(__assign(__assign({ x: x, y: y, width: width, height: height }, selectStyle), { fill: '#fff', strokeWidth: bordered ? 1 : 0 }));\n        var padding = this.dropdownPadding;\n        // dropdown icon\n        var iconSize = 10;\n        if (showDropdownIcon) {\n            select(this.select)\n                .maybeAppend('.dropdown-icon', 'path')\n                .style('d', 'M-5,-3.5 L0,3.5 L5,-3.5')\n                .style('transform', \"translate(\".concat(x + width - iconSize - padding[1] - padding[3], \", \").concat(y + height / 2, \")\"))\n                .style('lineWidth', 1)\n                .style('stroke', this.select.style.stroke);\n        }\n        var currentOption = (_a = this.style.options) === null || _a === void 0 ? void 0 : _a.find(function (option) { return option.value === _this.currentValue; });\n        // placeholder\n        var finalPlaceholderStyle = __assign({ x: x + padding[3] }, placeholderStyle);\n        select(this.select)\n            .selectAll('.placeholder')\n            .data(!currentOption ? [1] : [])\n            .join(function (enter) {\n            return enter\n                .append('text')\n                .attr('className', 'placeholder')\n                .styles(finalPlaceholderStyle)\n                .style('y', function () {\n                var bbox = this.getBBox();\n                return y + (height - bbox.height) / 2;\n            });\n        }, function (update) { return update.styles(finalPlaceholderStyle); }, function (exit) { return exit.remove(); });\n        // value\n        var labelStyle = subStyleProps(this.attributes, 'optionLabel');\n        var finalValueStyle = __assign({ x: x + padding[3] }, labelStyle);\n        select(this.select)\n            .selectAll('.value')\n            .data(currentOption ? [currentOption] : [])\n            .join(function (enter) {\n            return enter\n                .append(function (datum) { return renderExtDo(datum.label); })\n                .attr('className', 'value')\n                .styles(finalValueStyle)\n                .style('y', function () {\n                var bbox = this.getBBox();\n                return y + (height - bbox.height) / 2;\n            });\n        }, function (update) { return update.styles(finalValueStyle); }, function (exit) { return exit.remove(); });\n    };\n    Select.prototype.renderDropdown = function () {\n        var _this = this;\n        var _a, _b;\n        var _c = this.style, x = _c.x, y = _c.y, width = _c.width, height = _c.height, options = _c.options, onSelect = _c.onSelect, open = _c.open;\n        var dropdownStyle = subStyleProps(this.attributes, 'dropdown');\n        var optionStyle = subStyleProps(this.attributes, 'option');\n        var padding = this.dropdownPadding;\n        select(this.dropdown)\n            .maybeAppend('.dropdown-container', 'g')\n            .attr('className', 'dropdown-container')\n            .selectAll('.dropdown-item')\n            .data(options, function (datum) { return datum.value; })\n            .join(function (enter) {\n            return enter\n                .append(function (datum) {\n                return new Option({\n                    className: 'dropdown-item',\n                    style: __assign(__assign(__assign({}, datum), optionStyle), { width: width - padding[1] - padding[3], selected: datum.value === _this.currentValue, onClick: function (value, option, item) {\n                            _this.setValue(value);\n                            onSelect === null || onSelect === void 0 ? void 0 : onSelect(value, option, item);\n                            _this.dispatchEvent(new CustomEvent('change', { detail: { value: value, option: option, item: item } }));\n                            hide(_this.dropdown);\n                        } }),\n                });\n            })\n                .each(function (datum, i) {\n                var _a;\n                var nodes = (_a = this.parentNode) === null || _a === void 0 ? void 0 : _a.children;\n                var accHeight = nodes.reduce(function (acc, curr, index) {\n                    if (index < i) {\n                        acc += curr.getBBox().height;\n                    }\n                    return acc;\n                }, 0);\n                // 设置偏移\n                this.attr('transform', \"translate(\".concat(padding[3], \", \").concat(padding[0] + accHeight, \")\"));\n            });\n        }, function (update) {\n            return update.update(function (datum) {\n                return { selected: datum.value === _this.currentValue };\n            });\n        }, function (exit) { return exit.remove(); });\n        var bbox = (_b = (_a = this.dropdown.getElementsByClassName('dropdown-container')) === null || _a === void 0 ? void 0 : _a[0]) === null || _b === void 0 ? void 0 : _b.getBBox();\n        var spacing = dropdownStyle.spacing;\n        this.dropdown.attr(__assign({ transform: \"translate(\".concat(x, \", \").concat(y + height + spacing, \")\"), width: bbox.width + padding[1] + padding[3], height: bbox.height + padding[0] + padding[2] }, dropdownStyle));\n        // 默认隐藏\n        !open && hide(this.dropdown);\n    };\n    Select.prototype.render = function () {\n        this.renderSelect();\n        this.renderDropdown();\n    };\n    Select.prototype.bindEvents = function () {\n        var _this = this;\n        this.addEventListener('click', function (e) {\n            e.stopPropagation();\n        });\n        this.select.addEventListener('click', function () {\n            if (_this.dropdown.style.visibility === 'visible')\n                hide(_this.dropdown);\n            else {\n                show(_this.dropdown);\n            }\n        });\n        // mock blur\n        this.addEventListener('pointerenter', function () {\n            _this.isPointerInSelect = true;\n        });\n        this.addEventListener('pointerleave', function () {\n            _this.isPointerInSelect = false;\n        });\n        document === null || document === void 0 ? void 0 : document.addEventListener('click', function () {\n            if (!_this.isPointerInSelect) {\n                hide(_this.dropdown);\n            }\n        });\n    };\n    Select.defaultOptions = {\n        style: {\n            x: 0,\n            y: 0,\n            width: 140,\n            height: 32,\n            options: [],\n            bordered: true,\n            defaultValue: '',\n            selectRadius: 8,\n            selectStroke: '#d9d9d9',\n            showDropdownIcon: true,\n            placeholderText: '请选择',\n            placeholderFontSize: 12,\n            placeholderTextBaseline: 'top',\n            placeholderFill: '#c2c2c2',\n            dropdownFill: '#fff',\n            dropdownStroke: '#d9d9d9',\n            dropdownRadius: 8,\n            dropdownShadowBlur: 4,\n            dropdownShadowColor: 'rgba(0, 0, 0, 0.08)',\n            dropdownPadding: 8,\n            dropdownSpacing: 10,\n            optionPadding: [8, 12],\n            optionFontSize: 12,\n            optionTextBaseline: 'top',\n            optionBackgroundFill: '#fff',\n            optionBackgroundRadius: 4,\n            optionLabelFontSize: 12,\n            optionLabelTextBaseline: 'top',\n        },\n    };\n    return Select;\n}(Component));\nexport { Select };\n//# sourceMappingURL=select.js.map","import { __assign, __extends, __read, __rest, __spreadArray } from \"tslib\";\nimport { clamp, omit } from '@antv/util';\nimport { Component } from '../../core';\nimport { Group, Path, Rect } from '../../shapes';\nimport { deepAssign, parseSeriesAttr, select, subStyleProps } from '../../util';\nimport { Indicator } from '../indicator';\nimport { Select } from '../select';\nvar IconBase = /** @class */ (function (_super) {\n    __extends(IconBase, _super);\n    function IconBase(options) {\n        var _this = _super.call(this, deepAssign({}, { style: { backgroundOpacity: IconBase.backgroundOpacities.default } }, IconBase.defaultOptions, options)) || this;\n        /** hover 时是否显示背景 */\n        _this.showBackground = true;\n        _this.background = _this.appendChild(new Rect({}));\n        _this.icon = _this.appendChild(new Group({}));\n        return _this;\n    }\n    Object.defineProperty(IconBase.prototype, \"label\", {\n        get: function () {\n            return 'BaseIcon';\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(IconBase.prototype, \"lineWidth\", {\n        get: function () {\n            return Math.log10(this.attributes.size);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(IconBase.prototype, \"padding\", {\n        get: function () {\n            return parseSeriesAttr(this.attributes.size / 5);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(IconBase.prototype, \"iconSize\", {\n        get: function () {\n            var size = this.attributes.size;\n            var _a = __read(this.padding, 4), top = _a[0], right = _a[1], bottom = _a[2], left = _a[3];\n            return Math.max(size - Math.max(left + right, top + bottom), this.lineWidth * 2 + 1);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    IconBase.prototype.renderBackground = function () {\n        var _a = this.attributes, x = _a.x, y = _a.y, size = _a.size;\n        var halfSize = size / 2;\n        var backgroundStyle = subStyleProps(this.attributes, 'background');\n        this.background.attr(__assign({ x: x - halfSize, y: y - halfSize, width: size, height: size }, backgroundStyle));\n    };\n    IconBase.prototype.showIndicator = function () {\n        if (!this.label)\n            return;\n        var size = this.attributes.size;\n        var _a = this.background.getBBox(), x = _a.x, y = _a.y;\n        this.indicator.update({ x: x + size / 2, y: y - 5, labelText: this.label, visibility: 'visible' });\n    };\n    IconBase.prototype.hideIndicator = function () {\n        this.indicator.update({ visibility: 'hidden' });\n    };\n    IconBase.prototype.connectedCallback = function () {\n        var _a;\n        _super.prototype.connectedCallback.call(this);\n        // indicator 脱离文档流，需要手动添加到 canvas\n        var size = this.attributes.size;\n        var _b = this.background.getBBox(), x = _b.x, y = _b.y;\n        var canvas = (_a = this.ownerDocument) === null || _a === void 0 ? void 0 : _a.defaultView;\n        if (canvas) {\n            this.indicator = canvas.appendChild(new Indicator({\n                style: {\n                    x: x + size / 2,\n                    y: y - size / 2,\n                    visibility: 'hidden',\n                    position: 'top',\n                    radius: 3,\n                    zIndex: 100,\n                },\n            }));\n        }\n    };\n    IconBase.prototype.disconnectedCallback = function () {\n        this.indicator.destroy();\n    };\n    IconBase.prototype.render = function () {\n        this.renderIcon();\n        if (this.showBackground)\n            this.renderBackground();\n    };\n    IconBase.prototype.bindEvents = function () {\n        var _this = this;\n        var onClick = this.attributes.onClick;\n        this.addEventListener('click', function () {\n            onClick === null || onClick === void 0 ? void 0 : onClick(_this);\n        });\n        if (this.showBackground) {\n            var resetBackground_1 = function () { return _this.background.attr({ opacity: IconBase.backgroundOpacities.default }); };\n            var hoverBackground_1 = function () { return _this.background.attr({ opacity: IconBase.backgroundOpacities.hover }); };\n            var activeBackground_1 = function () { return _this.background.attr({ opacity: IconBase.backgroundOpacities.active }); };\n            this.addEventListener('pointerenter', function () {\n                hoverBackground_1();\n                _this.showIndicator();\n            });\n            this.addEventListener('pointerleave', function () {\n                resetBackground_1();\n                _this.hideIndicator();\n            });\n            this.addEventListener('pointerdown', function () {\n                activeBackground_1();\n            });\n            this.addEventListener('pointerup', function () {\n                resetBackground_1();\n            });\n        }\n    };\n    IconBase.tag = 'IconBase';\n    IconBase.defaultOptions = {\n        style: {\n            x: 0,\n            y: 0,\n            size: 10,\n            color: '#565758',\n            backgroundRadius: 4,\n            backgroundFill: '#e2e2e2',\n        },\n    };\n    IconBase.backgroundOpacities = {\n        default: 0,\n        hover: 0.8,\n        active: 1,\n    };\n    return IconBase;\n}(Component));\nexport { IconBase };\nvar arrow = function (size, color) {\n    if (color === void 0) { color = '#565758'; }\n    return new Path({\n        style: {\n            fill: color,\n            d: \"M \".concat(size, \",\").concat(size, \" L -\").concat(size, \",0 L \").concat(size, \",-\").concat(size, \" Z\"),\n            transformOrigin: 'center',\n        },\n    });\n};\n/** 重置 */\nvar Reset = /** @class */ (function (_super) {\n    __extends(Reset, _super);\n    function Reset() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Reset.prototype.arcPath = function (cx, cy, radius) {\n        var _a = __read([radius, radius], 2), rx = _a[0], ry = _a[1];\n        var getPosByAngle = function (angle) { return [cx + radius * Math.cos(angle), cy + radius * Math.sin(angle)]; };\n        var _b = __read(getPosByAngle((-5 / 4) * Math.PI), 2), x1 = _b[0], y1 = _b[1];\n        var _c = __read(getPosByAngle((1 / 4) * Math.PI), 2), x2 = _c[0], y2 = _c[1];\n        return \"M\".concat(x1, \",\").concat(y1, \",A\").concat(rx, \",\").concat(ry, \",0,1,1,\").concat(x2, \",\").concat(y2);\n    };\n    Object.defineProperty(Reset.prototype, \"label\", {\n        get: function () {\n            return '重置';\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Reset.prototype.renderIcon = function () {\n        var _a = this.attributes, x = _a.x, y = _a.y, color = _a.color;\n        var size = this.iconSize;\n        var lineWidth = this.lineWidth;\n        var arrowSize = lineWidth + 0.5;\n        select(this.icon)\n            .maybeAppend('.reset', 'path')\n            .styles({\n            stroke: color,\n            lineWidth: lineWidth,\n            d: this.arcPath(x, y, size / 2 - lineWidth),\n            markerStart: arrow(arrowSize, color),\n        });\n    };\n    return Reset;\n}(IconBase));\nexport { Reset };\n/** 快退 */\nvar Backward = /** @class */ (function (_super) {\n    __extends(Backward, _super);\n    function Backward() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(Backward.prototype, \"label\", {\n        get: function () {\n            return '快退';\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Backward.prototype.renderIcon = function () {\n        var _a = this.attributes, x = _a.x, y = _a.y, color = _a.color;\n        var size = this.iconSize;\n        var deltaX = size / 2;\n        var deltaY = size / 2 / Math.pow(3, 0.5);\n        var points = [\n            [x, y],\n            [x, y - deltaY],\n            [x - deltaX, y],\n            [x, y + deltaY],\n            [x, y],\n            [x + deltaX, y - deltaY],\n            [x + deltaX, y + deltaY],\n            [x, y],\n        ];\n        select(this.icon).maybeAppend('.backward', 'polygon').styles({\n            points: points,\n            fill: color,\n        });\n    };\n    return Backward;\n}(IconBase));\nexport { Backward };\n/** 快进 */\nvar Forward = /** @class */ (function (_super) {\n    __extends(Forward, _super);\n    function Forward() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(Forward.prototype, \"label\", {\n        get: function () {\n            return '快进';\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Forward.prototype.renderIcon = function () {\n        var _a = this.attributes, x = _a.x, y = _a.y, color = _a.color;\n        var size = this.iconSize;\n        var deltaX = size / 2;\n        var deltaY = size / 2 / Math.pow(3, 0.5);\n        var points = [\n            [x, y],\n            [x, y - deltaY],\n            [x + deltaX, y],\n            [x, y + deltaY],\n            [x, y],\n            [x - deltaX, y - deltaY],\n            [x - deltaX, y + deltaY],\n            [x, y],\n        ];\n        select(this.icon).maybeAppend('.forward', 'polygon').styles({\n            points: points,\n            fill: color,\n        });\n    };\n    return Forward;\n}(IconBase));\nexport { Forward };\nvar Play = /** @class */ (function (_super) {\n    __extends(Play, _super);\n    function Play() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(Play.prototype, \"label\", {\n        get: function () {\n            return '播放';\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Play.prototype.renderIcon = function () {\n        var _a = this.attributes, x = _a.x, y = _a.y, color = _a.color;\n        var size = this.iconSize;\n        var deltaX = (size / 3) * Math.pow(3, 0.5) * 0.8;\n        var points = [\n            [x + deltaX, y],\n            [x - deltaX / 2, y - (size / 2) * 0.8],\n            [x - deltaX / 2, y + (size / 2) * 0.8],\n            [x + deltaX, y],\n        ];\n        select(this.icon).maybeAppend('.play', 'polygon').styles({\n            points: points,\n            fill: color,\n        });\n    };\n    return Play;\n}(IconBase));\nexport { Play };\nvar Pause = /** @class */ (function (_super) {\n    __extends(Pause, _super);\n    function Pause() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(Pause.prototype, \"label\", {\n        get: function () {\n            return '暂停';\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Pause.prototype.renderIcon = function () {\n        var _a = this.attributes, x = _a.x, y = _a.y, color = _a.color;\n        var size = this.iconSize;\n        var deltaX = size / 3;\n        var points = [\n            [x - deltaX, y - size / 2],\n            [x - deltaX, y + size / 2],\n            [x - deltaX / 2, y + size / 2],\n            [x - deltaX / 2, y - size / 2],\n            [x - deltaX, y - size / 2],\n            [x + deltaX / 2, y - size / 2],\n            [x + deltaX / 2, y + size / 2],\n            [x + deltaX, y + size / 2],\n            [x + deltaX, y - size / 2],\n        ];\n        select(this.icon).maybeAppend('.pause', 'polygon').styles({\n            points: points,\n            fill: color,\n        });\n    };\n    return Pause;\n}(IconBase));\nexport { Pause };\n/** 时间范围 */\nvar Range = /** @class */ (function (_super) {\n    __extends(Range, _super);\n    function Range() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(Range.prototype, \"label\", {\n        get: function () {\n            return '范围时间';\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Range.prototype.renderIcon = function () {\n        var _a = this.attributes, x = _a.x, y = _a.y, color = _a.color;\n        var _b = this, size = _b.iconSize, lineWidth = _b.lineWidth;\n        var gap = lineWidth;\n        select(this.icon)\n            .maybeAppend('.left-line', 'line')\n            .styles({\n            x1: x - size / 2,\n            y1: y - size / 2,\n            x2: x - size / 2,\n            y2: y + size / 2,\n            stroke: color,\n            lineWidth: lineWidth,\n        });\n        select(this.icon)\n            .maybeAppend('.right-line', 'line')\n            .styles({\n            x1: x + size / 2,\n            y1: y - size / 2,\n            x2: x + size / 2,\n            y2: y + size / 2,\n            stroke: color,\n            lineWidth: lineWidth,\n        });\n        select(this.icon)\n            .maybeAppend('.left-arrow', 'line')\n            .styles({\n            x1: x,\n            y1: y,\n            x2: x - size / 2 + gap * 2,\n            y2: y,\n            stroke: color,\n            lineWidth: lineWidth,\n            markerEnd: arrow(lineWidth * 2, color),\n        });\n        select(this.icon)\n            .maybeAppend('.right-arrow', 'line')\n            .styles({\n            x1: x,\n            y1: y,\n            x2: x + size / 2 - gap * 2,\n            y2: y,\n            stroke: color,\n            lineWidth: lineWidth,\n            markerEnd: arrow(lineWidth * 2, color),\n        });\n    };\n    return Range;\n}(IconBase));\nexport { Range };\n/** 值范围 */\nvar Value = /** @class */ (function (_super) {\n    __extends(Value, _super);\n    function Value() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(Value.prototype, \"label\", {\n        get: function () {\n            return '单一时间';\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Value.prototype.renderIcon = function () {\n        var _a = this.attributes, x = _a.x, y = _a.y, color = _a.color;\n        var _b = this, size = _b.iconSize, lineWidth = _b.lineWidth;\n        select(this.icon)\n            .maybeAppend('.line', 'line')\n            .styles({\n            x1: x,\n            y1: y - size / 2,\n            x2: x,\n            y2: y + size / 2,\n            stroke: color,\n            lineWidth: lineWidth,\n        });\n        var gap = lineWidth;\n        select(this.icon)\n            .maybeAppend('.left-arrow', 'line')\n            .styles({\n            x1: x - size / 2 - gap * 2,\n            y1: y,\n            x2: x - gap * 2,\n            y2: y,\n            stroke: color,\n            lineWidth: lineWidth,\n            markerEnd: arrow(lineWidth * 2, color),\n        });\n        select(this.icon)\n            .maybeAppend('.right-arrow', 'line')\n            .styles({\n            x1: x + size / 2 + gap * 2,\n            y1: y,\n            x2: x + gap * 2,\n            y2: y,\n            stroke: color,\n            lineWidth: lineWidth,\n            markerEnd: arrow(lineWidth * 2, color),\n        });\n    };\n    return Value;\n}(IconBase));\nexport { Value };\nvar getCoordinatePoints = function (size) {\n    return [\n        [-size / 2, -size / 2],\n        [-size / 2, size / 2],\n        [size / 2, size / 2],\n    ];\n};\nvar LineChart = /** @class */ (function (_super) {\n    __extends(LineChart, _super);\n    function LineChart() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(LineChart.prototype, \"label\", {\n        get: function () {\n            return '折线图';\n        },\n        enumerable: false,\n        configurable: true\n    });\n    LineChart.prototype.renderIcon = function () {\n        var _a = this.attributes, x = _a.x, y = _a.y, color = _a.color;\n        var _b = this, size = _b.iconSize, lineWidth = _b.lineWidth;\n        var gap = lineWidth;\n        var deltaX = (size - gap * 2 - lineWidth) / 4;\n        var deltaY = (size - gap * 2 - lineWidth) / 2;\n        var _c = __read([x - size / 2 + gap, y + size / 2 - gap * 2], 2), ox = _c[0], oy = _c[1];\n        select(this.icon)\n            .maybeAppend('.coordinate', 'polyline')\n            .styles({\n            points: getCoordinatePoints(size).map(function (_a) {\n                var _b = __read(_a, 2), px = _b[0], py = _b[1];\n                return [px + x, py + y];\n            }),\n            stroke: color,\n            lineWidth: lineWidth,\n        });\n        select(this.icon)\n            .maybeAppend('.line', 'polyline')\n            .styles({\n            points: [\n                [ox, oy],\n                [ox + deltaX, oy - deltaY],\n                [ox + deltaX * 2, oy],\n                [ox + deltaX * 4, oy - deltaY * 2],\n            ],\n            stroke: color,\n            lineWidth: lineWidth,\n        });\n    };\n    return LineChart;\n}(IconBase));\nexport { LineChart };\nvar BarChart = /** @class */ (function (_super) {\n    __extends(BarChart, _super);\n    function BarChart() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Object.defineProperty(BarChart.prototype, \"label\", {\n        get: function () {\n            return '条形图';\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BarChart.prototype, \"data\", {\n        get: function () {\n            return [1, 4, 2, 4, 3];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    BarChart.prototype.renderIcon = function () {\n        var data = this.data;\n        var _a = this.attributes, x = _a.x, y = _a.y, color = _a.color;\n        var _b = this, size = _b.iconSize, lineWidth = _b.lineWidth;\n        var gap = lineWidth;\n        var deltaX = (size - gap) / data.length;\n        var deltaY = (size - gap * 2) / 4;\n        var _c = __read([x - size / 2 + gap * 2, y + size / 2 - gap], 2), ox = _c[0], oy = _c[1];\n        select(this.icon)\n            .maybeAppend('.coordinate', 'polyline')\n            .styles({\n            points: getCoordinatePoints(size).map(function (_a) {\n                var _b = __read(_a, 2), px = _b[0], py = _b[1];\n                return [px + x, py + y];\n            }),\n            stroke: color,\n            lineWidth: lineWidth,\n        });\n        select(this.icon)\n            .maybeAppend('.bars', 'g')\n            .selectAll('.column')\n            .data(this.data.map(function (value, index) { return ({ value: value, index: index }); }))\n            .join(function (enter) {\n            return enter\n                .append('line')\n                .attr('className', 'column')\n                .style('x1', function (_a) {\n                var index = _a.index;\n                return ox + deltaX * index;\n            })\n                .style('y1', oy)\n                .style('x2', function (_a) {\n                var index = _a.index;\n                return ox + deltaX * index;\n            })\n                .style('y2', function (_a) {\n                var value = _a.value;\n                return oy - deltaY * value;\n            })\n                .styles({\n                y1: oy,\n                stroke: color,\n                lineWidth: lineWidth,\n            });\n        });\n    };\n    return BarChart;\n}(IconBase));\nexport { BarChart };\n/** 分割线 */\nvar Split = /** @class */ (function (_super) {\n    __extends(Split, _super);\n    function Split(options) {\n        var _this = _super.call(this, deepAssign({}, { style: { color: '#d8d9d9' } }, options)) || this;\n        _this.showBackground = false;\n        return _this;\n    }\n    Split.prototype.renderIcon = function () {\n        var _a = this.attributes, x = _a.x, y = _a.y, color = _a.color;\n        var _b = this, size = _b.iconSize, lineWidth = _b.lineWidth;\n        select(this.icon)\n            .maybeAppend('.split', 'line')\n            .styles({\n            x1: x,\n            y1: y - size / 2,\n            x2: x,\n            y2: y + size / 2,\n            stroke: color,\n            lineWidth: lineWidth,\n        });\n    };\n    return Split;\n}(IconBase));\nexport { Split };\nvar SpeedSelect = /** @class */ (function (_super) {\n    __extends(SpeedSelect, _super);\n    function SpeedSelect() {\n        var _this = _super.apply(this, __spreadArray([], __read(arguments), false)) || this;\n        _this.showBackground = false;\n        return _this;\n    }\n    Object.defineProperty(SpeedSelect.prototype, \"padding\", {\n        get: function () {\n            return parseSeriesAttr(0);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    SpeedSelect.prototype.renderIcon = function () {\n        var iconSize = this.iconSize;\n        var _a = this.attributes, x = _a.x, y = _a.y, _b = _a.speed, speed = _b === void 0 ? 1 : _b;\n        var inheritStyle = omit(this.attributes, [\n            'x',\n            'y',\n            'transform',\n            'transformOrigin',\n            'width',\n            'height',\n            'size',\n            'color',\n            'speed',\n        ]);\n        var width = clamp(iconSize, 20, Infinity);\n        var height = 20;\n        var style = __assign(__assign({}, inheritStyle), { x: x - width / 2, y: y - height / 2, width: width, height: height, defaultValue: speed, bordered: false, showDropdownIcon: false, selectRadius: 2, dropdownPadding: this.padding, dropdownRadius: 2, dropdownSpacing: iconSize / 5, placeholderFontSize: iconSize / 2, optionPadding: 0, optionLabelFontSize: iconSize / 2, optionBackgroundRadius: 1, options: [\n                { label: '1x', value: 1 },\n                { label: '1.5x', value: 1.5 },\n                { label: '2x', value: 2 },\n            ] });\n        select(this.icon)\n            .maybeAppend('.speed', function () { return new Select({ style: style }); })\n            .attr('className', 'speed')\n            .each(function () {\n            this.update(style);\n        });\n    };\n    SpeedSelect.tag = 'SpeedSelect';\n    return SpeedSelect;\n}(IconBase));\nexport { SpeedSelect };\nvar ToggleIcon = /** @class */ (function (_super) {\n    __extends(ToggleIcon, _super);\n    function ToggleIcon(options) {\n        var _this = _super.call(this, options) || this;\n        _this.icon = _this.appendChild(new Group({}));\n        _this.currentType = _this.attributes.type;\n        return _this;\n    }\n    ToggleIcon.prototype.getType = function () {\n        return this.currentType;\n    };\n    ToggleIcon.prototype.render = function () {\n        var _this = this;\n        var _a = this.attributes, onChange = _a.onChange, restStyles = __rest(_a, [\"onChange\"]);\n        select(this.icon)\n            .selectAll('.icon')\n            .data([this.currentType])\n            .join(function (enter) {\n            return enter\n                .append(function (type) {\n                var _a;\n                var Ctor = (_a = _this.toggles.find(function (_a) {\n                    var _b = __read(_a, 1), key = _b[0];\n                    return key === type;\n                })) === null || _a === void 0 ? void 0 : _a[1];\n                if (!Ctor)\n                    throw new Error(\"Invalid type: \".concat(type));\n                return new Ctor({});\n            })\n                .attr('className', 'icon')\n                .styles(restStyles, false)\n                .update({});\n        }, function (update) { return update.styles({ restStyles: restStyles }).update({}); }, function (exit) { return exit.remove(); });\n    };\n    ToggleIcon.prototype.bindEvents = function () {\n        var _this = this;\n        var onChange = this.attributes.onChange;\n        this.addEventListener('click', function (e) {\n            e.preventDefault();\n            e.stopPropagation();\n            var nextIndex = (_this.toggles.findIndex(function (_a) {\n                var _b = __read(_a, 1), key = _b[0];\n                return key === _this.currentType;\n            }) + 1) % _this.toggles.length;\n            var nextType = _this.toggles[nextIndex][0];\n            onChange === null || onChange === void 0 ? void 0 : onChange(_this.currentType);\n            _this.currentType = nextType;\n            _this.render();\n        });\n    };\n    ToggleIcon.tag = 'ToggleIcon';\n    return ToggleIcon;\n}(Component));\nexport { ToggleIcon };\nvar PlayPause = /** @class */ (function (_super) {\n    __extends(PlayPause, _super);\n    function PlayPause(options) {\n        var _this = _super.call(this, deepAssign({}, { style: { type: 'play' } }, options)) || this;\n        _this.toggles = [\n            ['play', Play],\n            ['pause', Pause],\n        ];\n        return _this;\n    }\n    return PlayPause;\n}(ToggleIcon));\nexport { PlayPause };\nvar SelectionType = /** @class */ (function (_super) {\n    __extends(SelectionType, _super);\n    function SelectionType(options) {\n        var _this = _super.call(this, deepAssign({}, { style: { type: 'range' } }, options)) || this;\n        _this.toggles = [\n            ['range', Range],\n            ['value', Value],\n        ];\n        return _this;\n    }\n    return SelectionType;\n}(ToggleIcon));\nexport { SelectionType };\nvar ChartType = /** @class */ (function (_super) {\n    __extends(ChartType, _super);\n    function ChartType(options) {\n        var _this = _super.call(this, deepAssign({}, { style: { type: 'column' } }, options)) || this;\n        _this.toggles = [\n            ['line', LineChart],\n            ['column', BarChart],\n        ];\n        return _this;\n    }\n    return ChartType;\n}(ToggleIcon));\nexport { ChartType };\n//# sourceMappingURL=icons.js.map","import reduce from './reduce';\nexport default (function (obj, keys) {\n    return reduce(obj, function (r, curr, key) {\n        if (!keys.includes(key)) {\n            r[key] = curr;\n        }\n        return r;\n    }, {});\n});\n//# sourceMappingURL=omit.js.map","import { __assign, __extends, __read, __spreadArray } from \"tslib\";\nimport { Component } from '../../core';\nimport { Group, Rect } from '../../shapes';\nimport { deepAssign, parseSeriesAttr, subStyleProps } from '../../util';\nimport { Backward, ChartType, Forward, PlayPause, Reset, SelectionType, SpeedSelect, Split } from './icons';\nvar componentsMap = {\n    reset: Reset,\n    speed: SpeedSelect,\n    backward: Backward,\n    playPause: PlayPause,\n    forward: Forward,\n    selectionType: SelectionType,\n    chartType: ChartType,\n    split: Split,\n};\nvar Controller = /** @class */ (function (_super) {\n    __extends(Controller, _super);\n    function Controller(options) {\n        var _this = _super.call(this, deepAssign({}, Controller.defaultOptions, options)) || this;\n        _this.background = _this.appendChild(new Rect({}));\n        _this.functions = _this.appendChild(new Group({}));\n        return _this;\n    }\n    Object.defineProperty(Controller.prototype, \"padding\", {\n        get: function () {\n            return parseSeriesAttr(this.attributes.padding);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Controller.prototype.renderBackground = function () {\n        var _a = this.style, x = _a.x, y = _a.y, width = _a.width, height = _a.height;\n        var backgroundStyle = subStyleProps(this.attributes, 'background');\n        this.background.attr(__assign({ x: x, y: y, width: width, height: height }, backgroundStyle));\n    };\n    Controller.prototype.renderFunctions = function () {\n        var _this = this;\n        var _a;\n        var _b = this.attributes, functions = _b.functions, iconSize = _b.iconSize, iconSpacing = _b.iconSpacing, x = _b.x, y = _b.y, width = _b.width, height = _b.height, align = _b.align;\n        var _c = __read(this.padding, 4), right = _c[1], left = _c[3];\n        var components = functions.reduce(function (prev, curr) {\n            if (prev.length && curr.length) {\n                return prev.concat.apply(prev, __spreadArray(['split'], __read(curr), false));\n            }\n            return prev.concat.apply(prev, __spreadArray([], __read(curr), false));\n        }, []);\n        var componentsWidth = components.length * (iconSize + iconSpacing) - iconSpacing;\n        var xOffset = {\n            left: left + iconSize / 2,\n            center: (width - componentsWidth) / 2 + iconSize / 2,\n            right: width - componentsWidth - left - right + iconSize / 2,\n        }[align] || 0;\n        (_a = this.speedSelect) === null || _a === void 0 ? void 0 : _a.destroy();\n        this.functions.removeChildren();\n        components.forEach(function (name, index) {\n            var _a;\n            var Ctor = componentsMap[name];\n            var style = {\n                x: x + index * (iconSize + iconSpacing) + xOffset,\n                y: y + height / 2,\n                size: iconSize,\n            };\n            if (Ctor === SpeedSelect) {\n                style.speed = _this.attributes.speed;\n                style.onSelect = function (value) { return _this.handleFunctionChange(name, { value: value }); };\n            }\n            else if ([PlayPause, SelectionType, ChartType].includes(Ctor)) {\n                style.onChange = function (value) { return _this.handleFunctionChange(name, { value: value }); };\n                if (Ctor === PlayPause)\n                    style.type = _this.attributes.state === 'play' ? 'pause' : 'play';\n                if (Ctor === SelectionType)\n                    style.type = _this.attributes.selectionType === 'range' ? 'value' : 'range';\n                if (Ctor === ChartType)\n                    style.type = _this.attributes.chartType === 'line' ? 'column' : 'line';\n            }\n            else {\n                // IconBase\n                style.onClick = function () { return _this.handleFunctionChange(name, { value: name }); };\n            }\n            if (Ctor === SpeedSelect) {\n                // SpeedSelect 直接插入到 canvas\n                var canvas = (_a = _this.ownerDocument) === null || _a === void 0 ? void 0 : _a.defaultView;\n                if (canvas) {\n                    _this.speedSelect = new Ctor({ style: __assign(__assign({}, style), { zIndex: 100 }) });\n                    canvas.appendChild(_this.speedSelect);\n                }\n            }\n            else {\n                _this.functions.appendChild(new Ctor({ style: style }));\n            }\n        });\n    };\n    Controller.prototype.disconnectedCallback = function () {\n        var _a;\n        _super.prototype.disconnectedCallback.call(this);\n        (_a = this.speedSelect) === null || _a === void 0 ? void 0 : _a.destroy();\n    };\n    Controller.prototype.render = function () {\n        this.renderBackground();\n        this.renderFunctions();\n    };\n    Controller.prototype.handleFunctionChange = function (name, value) {\n        var onChange = this.attributes.onChange;\n        onChange === null || onChange === void 0 ? void 0 : onChange(name, value);\n    };\n    Controller.defaultOptions = {\n        style: {\n            x: 0,\n            y: 0,\n            width: 300,\n            height: 40,\n            padding: 0,\n            align: 'center',\n            iconSize: 25,\n            iconSpacing: 0,\n            speed: 1,\n            state: 'pause',\n            chartType: 'line',\n            selectionType: 'range',\n            backgroundFill: '#fbfdff',\n            backgroundStroke: '#ebedf0',\n            functions: [\n                ['reset', 'speed'],\n                ['backward', 'playPause', 'forward'],\n                ['selectionType', 'chartType'],\n            ],\n        },\n    };\n    return Controller;\n}(Component));\nexport { Controller };\n//# sourceMappingURL=controller.js.map","import { __assign, __extends } from \"tslib\";\nimport { Component } from '../../core';\nimport { Circle } from '../../shapes';\nimport { select, subStyleProps } from '../../util';\nimport { deepAssign } from '../../util/deep-assign';\nvar TimeModeHandle = /** @class */ (function (_super) {\n    __extends(TimeModeHandle, _super);\n    function TimeModeHandle(options) {\n        var _this = _super.call(this, deepAssign({}, TimeModeHandle.defaultOptions, options)) || this;\n        _this.bindEvents();\n        return _this;\n    }\n    TimeModeHandle.prototype.bindEvents = function () {\n        var _this = this;\n        this.addEventListener('mouseenter', function () {\n            _this.attr('lineWidth', Math.ceil(+(_this.style.r || 0) / 2));\n        });\n        this.addEventListener('mouseleave', function () {\n            _this.attr('lineWidth', 0);\n        });\n    };\n    TimeModeHandle.defaultOptions = {\n        style: {\n            r: 5,\n            fill: '#3f7cf7',\n            lineWidth: 0,\n            stroke: '#3f7cf7',\n            strokeOpacity: 0.5,\n            cursor: 'pointer',\n        },\n    };\n    return TimeModeHandle;\n}(Circle));\nexport { TimeModeHandle };\nvar ChartModeHandle = /** @class */ (function (_super) {\n    __extends(ChartModeHandle, _super);\n    function ChartModeHandle(options) {\n        return _super.call(this, deepAssign({}, ChartModeHandle.defaultOptions, options)) || this;\n    }\n    ChartModeHandle.prototype.renderBackground = function () {\n        var _a = this.attributes, x = _a.x, y = _a.y, width = _a.width, height = _a.height;\n        var style = subStyleProps(this.attributes, 'background');\n        select(this)\n            .maybeAppend('background', 'rect')\n            .attr('className', 'background')\n            .styles(__assign({ x: x - width / 2, y: y - height / 2, width: width, height: height }, style));\n    };\n    ChartModeHandle.prototype.renderIcon = function () {\n        var _a = this.attributes, x = _a.x, y = _a.y, iconSize = _a.iconSize;\n        var style = subStyleProps(this.attributes, 'icon');\n        var diffX = 1;\n        var diffY = iconSize / 2;\n        select(this)\n            .maybeAppend('icon-left-line', 'line')\n            .attr('className', 'icon-left-line')\n            .styles(__assign({ x1: x - diffX, y1: y - diffY, x2: x - diffX, y2: y + diffY }, style));\n        select(this)\n            .maybeAppend('icon-right-line', 'line')\n            .attr('className', 'icon-right-line')\n            .styles(__assign({ x1: x + diffX, y1: y - diffY, x2: x + diffX, y2: y + diffY }, style));\n    };\n    ChartModeHandle.prototype.renderBorder = function () {\n        var _a = this.attributes, xx = _a.x, y = _a.y, width = _a.width, height = _a.height, type = _a.type;\n        var style = subStyleProps(this.attributes, 'border');\n        var x = type === 'start' ? +width / 2 : -width / 2;\n        select(this)\n            .maybeAppend('border', 'line')\n            .attr('className', 'border')\n            .styles(__assign({ x1: x + xx, y1: y - height / 2, x2: x + xx, y2: y + height / 2 }, style));\n    };\n    ChartModeHandle.prototype.render = function () {\n        this.renderBackground();\n        this.renderIcon();\n        this.renderBorder();\n    };\n    ChartModeHandle.defaultOptions = {\n        style: {\n            x: 0,\n            y: 0,\n            width: 10,\n            height: 50,\n            iconSize: 10,\n            type: 'start',\n            backgroundFill: '#fff',\n            backgroundFillOpacity: 0.5,\n            iconStroke: '#9a9a9a',\n            iconLineWidth: 1,\n            borderStroke: '#e8e8e8',\n            borderLineWidth: 1,\n        },\n    };\n    return ChartModeHandle;\n}(Component));\nexport { ChartModeHandle };\n//# sourceMappingURL=handle.js.map","import { formatTime } from '../../util/time';\nexport function labelFormatter(time, interval) {\n    if (typeof time === 'number') {\n        return parseBySeries(time);\n    }\n    return parseByTime(time, interval);\n}\nexport function parseByTime(time, interval) {\n    var date = new Date(time);\n    switch (interval) {\n        case 'half-hour':\n        case 'hour':\n        case 'four-hour':\n            if ([0, 6, 12, 18].includes(date.getHours()) && date.getMinutes() === 0) {\n                // HH:mm\\nYYYY-MM-DD\n                return formatTime(date, 'HH:mm\\nYYYY-MM-DD');\n            }\n            // HH:mm\n            return formatTime(date, 'HH:mm');\n        case 'half-day':\n            // A\\nYYYY-MM-DD\n            if (date.getHours() < 12) {\n                return \"AM\\n\".concat(formatTime(date, 'YYYY-MM-DD'));\n            }\n            // A\n            return 'PM';\n        case 'day':\n            if ([1, 10, 20].includes(date.getDate())) {\n                // DD\\nYYYY-MM\n                return formatTime(date, 'DD\\nYYYY-MM');\n            }\n            // DD\n            return formatTime(date, 'DD');\n        case 'week':\n            if (date.getDate() <= 7) {\n                // DD\\nYYYY-MM\n                return formatTime(date, 'DD\\nYYYY-MM');\n            }\n            // DD\n            return formatTime(date, 'DD');\n        case 'month':\n            if ([0, 6].includes(date.getMonth())) {\n                // MM月\\nYYYY\n                return formatTime(date, 'MM月\\nYYYY');\n            }\n            // MM月\n            return formatTime(date, 'MM月');\n        case 'season':\n            if ([0].includes(date.getMonth())) {\n                // MM月\\nYYYY\n                return formatTime(date, 'MM月\\nYYYY');\n            }\n            // MM月\n            return formatTime(date, 'MM月');\n        case 'year':\n            // YYYY\n            return formatTime(date, 'YYYY');\n        default:\n            // YYYY-MM-DD HH:mm\n            return formatTime(date, 'YYYY-MM-DD HH:mm');\n    }\n}\n/**\n * 按照序列数据解析，如第 1, 2, 3 秒\n * @param time\n * @param interval\n */\nexport function parseBySeries(time) {\n    var hours = String(Math.floor(time / 3600)).padStart(2, '0');\n    var minutes = String(Math.floor((time % 3600) / 60)).padStart(2, '0');\n    var seconds = String(Math.floor(time % 60)).padStart(2, '0');\n    if (time < 3600) {\n        // mm:ss\n        return \"\".concat(minutes, \":\").concat(seconds);\n    }\n    return \"\".concat(hours, \":\").concat(minutes, \":\").concat(seconds);\n}\n//# sourceMappingURL=utils.js.map","import { __assign, __extends, __read, __rest, __spreadArray } from \"tslib\";\nimport { clamp } from '@antv/util';\nimport { Component } from '../../core';\nimport { Line } from '../../shapes';\nimport { BBox, deepAssign, subStyleProps, formatTime } from '../../util';\nimport { Axis } from '../axis';\nimport { Slider } from '../slider';\nimport { Controller } from './controller';\nimport { ChartModeHandle, TimeModeHandle } from './handle';\nimport { labelFormatter, parseBySeries } from './utils';\nvar Timebar = /** @class */ (function (_super) {\n    __extends(Timebar, _super);\n    function Timebar(options) {\n        var _this = _super.call(this, deepAssign({}, Timebar.defaultOptions, options)) || this;\n        _this.axis = _this.appendChild(new Axis({\n            style: { type: 'linear', startPos: [0, 0], endPos: [0, 0], data: [], showArrow: false, animate: false },\n        }));\n        /** 时间线 group，用于放置 timeline 或者 chart */\n        _this.timeline = _this.appendChild(new Slider({\n            style: {\n                onChange: function (values) {\n                    _this.handleSliderChange(values);\n                },\n            },\n        }));\n        _this.controller = _this.appendChild(new Controller({}));\n        _this.states = {};\n        _this.handleSliderChange = function (values) {\n            var prevValues = (function () {\n                var val = _this.states.values;\n                if (Array.isArray(val))\n                    return __spreadArray([], __read(val), false);\n                return val;\n            })();\n            _this.setBySliderValues(values);\n            _this.dispatchOnChange(prevValues);\n        };\n        var _a = _this.attributes, selectionType = _a.selectionType, chartType = _a.chartType, speed = _a.speed, state = _a.state, playMode = _a.playMode, values = _a.values;\n        _this.states = { chartType: chartType, playMode: playMode, selectionType: selectionType, speed: speed, state: state };\n        _this.setByTimebarValues(values);\n        return _this;\n    }\n    Object.defineProperty(Timebar.prototype, \"data\", {\n        get: function () {\n            var data = this.attributes.data;\n            var compareFn = function (a, b) {\n                if (a.time < b.time)\n                    return -1;\n                if (a.time > b.time)\n                    return 1;\n                return 0;\n            };\n            return data.sort(compareFn);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Timebar.prototype, \"space\", {\n        /** 计算空间分配 */\n        get: function () {\n            var _a = this.attributes, x = _a.x, y = _a.y, width = _a.width, height = _a.height, type = _a.type, controllerHeight = _a.controllerHeight;\n            var availableTimelineHeight = clamp(+height - controllerHeight, 0, +height);\n            var controllerBBox = new BBox(x, y + +height - controllerHeight, +width, controllerHeight);\n            // chart 模式下可用\n            var axisBBox;\n            var axisHeight = 0;\n            if (type === 'chart') {\n                // axis 默认分配高度为 35\n                axisHeight = 35;\n                axisBBox = new BBox(x, y + availableTimelineHeight - axisHeight, +width, axisHeight);\n            }\n            else\n                axisBBox = new BBox();\n            var timelineHeight = type === 'time' ? 10 : availableTimelineHeight;\n            var timelineBBox = new BBox(x, y + (type === 'time' ? availableTimelineHeight : availableTimelineHeight - timelineHeight), +width, timelineHeight - axisHeight);\n            return { axisBBox: axisBBox, controllerBBox: controllerBBox, timelineBBox: timelineBBox };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Timebar.prototype.setBySliderValues = function (val) {\n        var _a, _b;\n        var data = this.data;\n        var _c = __read(Array.isArray(val) ? val : [0, val], 2), startRatio = _c[0], endRatio = _c[1];\n        var length = data.length;\n        var startDatum = data[Math.floor(startRatio * length)];\n        var endDatum = data[Math.ceil(endRatio * length) - (Array.isArray(val) ? 0 : 1)];\n        // 如果 endDatum 不存在，则其已经比最大的时间范围更大\n        this.states.values = [(_a = startDatum === null || startDatum === void 0 ? void 0 : startDatum.time) !== null && _a !== void 0 ? _a : data[0].time, (_b = endDatum === null || endDatum === void 0 ? void 0 : endDatum.time) !== null && _b !== void 0 ? _b : Infinity];\n    };\n    Timebar.prototype.setByTimebarValues = function (val) {\n        var _a, _b, _c;\n        var data = this.data;\n        var _d = __read(Array.isArray(val) ? val : [undefined, val], 2), start = _d[0], end = _d[1];\n        var startDatum = data.find(function (_a) {\n            var time = _a.time;\n            return time === start;\n        });\n        var endDatum = data.find(function (_a) {\n            var time = _a.time;\n            return time === end;\n        });\n        this.states.values = [(_a = startDatum === null || startDatum === void 0 ? void 0 : startDatum.time) !== null && _a !== void 0 ? _a : (_b = data[0]) === null || _b === void 0 ? void 0 : _b.time, (_c = endDatum === null || endDatum === void 0 ? void 0 : endDatum.time) !== null && _c !== void 0 ? _c : Infinity];\n    };\n    Timebar.prototype.setByIndex = function (index) {\n        var _a, _b, _c, _d;\n        var data = this.data;\n        var _e = __read(index, 2), startIndex = _e[0], endIndex = _e[1];\n        this.states.values = [(_b = (_a = data[startIndex]) === null || _a === void 0 ? void 0 : _a.time) !== null && _b !== void 0 ? _b : data[0].time, (_d = (_c = this.data[endIndex]) === null || _c === void 0 ? void 0 : _c.time) !== null && _d !== void 0 ? _d : Infinity];\n    };\n    Object.defineProperty(Timebar.prototype, \"sliderValues\", {\n        /**\n         * 获取 timebar 的 values\n         */\n        get: function () {\n            var _a = this.states, values = _a.values, selectionType = _a.selectionType;\n            var _b = __read(Array.isArray(values) ? values : [undefined, values], 2), start = _b[0], end = _b[1];\n            var data = this.data;\n            var length = data.length;\n            var isValue = selectionType === 'value';\n            var getStartValue = function () {\n                var startDatumIndex = data.findIndex(function (_a) {\n                    var time = _a.time;\n                    return time === start;\n                });\n                if (isValue)\n                    return 0;\n                if (startDatumIndex > -1)\n                    return startDatumIndex / length;\n                // value 模式下默认取 0\n                return 0;\n            };\n            var getEndValue = function () {\n                if (end === Infinity)\n                    return 1;\n                var endDatumIndex = data.findIndex(function (_a) {\n                    var time = _a.time;\n                    return time === end;\n                });\n                if (endDatumIndex > -1)\n                    return endDatumIndex / length;\n                // range 模式下默认取 1，value 模式下默认取 0.5\n                if (isValue)\n                    return 0.5;\n                return 1;\n            };\n            return [getStartValue(), getEndValue()];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Timebar.prototype, \"values\", {\n        get: function () {\n            var _a = this.states, values = _a.values, selectionType = _a.selectionType;\n            var _b = __read(Array.isArray(values) ? values : [this.data[0].time, values], 2), start = _b[0], end = _b[1];\n            if (selectionType === 'value')\n                return end;\n            return [start, end];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Timebar.prototype.getDatumByRatio = function (ratio) {\n        var data = this.data;\n        var length = data.length;\n        var index = Math.floor(ratio * (length - 1));\n        return data[index];\n    };\n    Object.defineProperty(Timebar.prototype, \"chartHandleIconShape\", {\n        get: function () {\n            var selectionType = this.states.selectionType;\n            var height = this.space.timelineBBox.height;\n            if (selectionType === 'range')\n                return function (type) { return new ChartModeHandle({ style: { type: type, height: height, iconSize: height / 6 } }); };\n            return function () {\n                return new Line({ style: { x1: 0, y1: -height / 2, x2: 0, y2: height / 2, lineWidth: 2, stroke: '#c8c8c8' } });\n            };\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Timebar.prototype.getChartStyle = function (bbox) {\n        var _this = this;\n        var x = bbox.x, y = bbox.y, width = bbox.width, height = bbox.height;\n        var _a = this.states, selectionType = _a.selectionType, chartType = _a.chartType;\n        var data = this.data;\n        var _b = this.attributes, type = _b.type, userDefinedLabelFormatter = _b.labelFormatter;\n        var _c = subStyleProps(this.attributes, 'chart'), ignoreType = _c.type, userDefinedChartStyle = __rest(_c, [\"type\"]);\n        var isRange = selectionType === 'range';\n        if (type === 'time') {\n            return __assign({ handleIconShape: function () { return new TimeModeHandle({}); }, selectionFill: '#2e7ff8', selectionFillOpacity: 1, showLabelOnInteraction: true, handleLabelDy: isRange ? -15 : 0, autoFitLabel: isRange, handleSpacing: isRange ? -15 : 0, trackFill: '#edeeef', trackLength: width, trackOpacity: 0.5, trackRadius: height / 2, trackSize: height / 2, type: selectionType, values: this.sliderValues, formatter: function (value) {\n                    if (userDefinedLabelFormatter)\n                        return userDefinedLabelFormatter(value);\n                    var time = _this.getDatumByRatio(value).time;\n                    if (typeof time === 'number')\n                        return parseBySeries(time);\n                    return formatTime(time, 'YYYY-MM-DD HH:mm:ss');\n                }, transform: \"translate(\".concat(x, \", \").concat(y, \")\"), \n                // x,\n                // y,\n                zIndex: 1 }, userDefinedChartStyle);\n        }\n        // type === 'chart'\n        var handleIconOffset = selectionType === 'range' ? 5 : 0;\n        var sparklineData = data.map(function (_a) {\n            var value = _a.value;\n            return value;\n        });\n        return __assign({ handleIconOffset: handleIconOffset, handleIconShape: this.chartHandleIconShape, selectionFill: '#fff', selectionFillOpacity: 0.5, selectionType: 'invert', sparklineSpacing: 0.1, sparklineColumnLineWidth: 0, sparklineColor: '#d4e5fd', sparklineAreaOpacity: 1, sparklineAreaLineWidth: 0, sparklineData: sparklineData, sparklineType: chartType, sparklineScale: 0.8, trackLength: width, trackSize: height, type: selectionType, values: this.sliderValues, \n            // x,\n            // y,\n            transform: \"translate(\".concat(x, \", \").concat(y, \")\"), zIndex: 1 }, userDefinedChartStyle);\n    };\n    Timebar.prototype.renderChart = function (bbox) {\n        if (bbox === void 0) { bbox = this.space.timelineBBox; }\n        this.timeline.update(this.getChartStyle(bbox));\n    };\n    Timebar.prototype.updateSelection = function () {\n        this.timeline.setValues(this.sliderValues, true);\n        this.handleSliderChange(this.sliderValues);\n    };\n    Timebar.prototype.getAxisStyle = function (bbox) {\n        var data = this.data;\n        var _a = this.attributes, interval = _a.interval, userDefinedLabelFormatter = _a.labelFormatter;\n        var userDefinedAxisStyle = subStyleProps(this.attributes, 'axis');\n        var x = bbox.x, y = bbox.y, width = bbox.width;\n        // 需要补一个刻度\n        var axisData = __spreadArray(__spreadArray([], __read(data), false), [{ time: 0 }], false).map(function (_a, index, arr) {\n            var time = _a.time;\n            return ({\n                label: \"\".concat(time),\n                value: index / (arr.length - 1),\n                time: time,\n            });\n        });\n        var style = __assign({ startPos: [x, y], endPos: [x + width, y], data: axisData, \n            // hide last label\n            labelFilter: function (_datum, index) { return index < axisData.length - 1; }, labelFormatter: function (_a) {\n                var time = _a.time;\n                return userDefinedLabelFormatter ? userDefinedLabelFormatter(time) : labelFormatter(time, interval);\n            } }, userDefinedAxisStyle);\n        return style;\n    };\n    Timebar.prototype.renderAxis = function (bbox) {\n        if (bbox === void 0) { bbox = this.space.axisBBox; }\n        var type = this.attributes.type;\n        if (type !== 'chart')\n            return;\n        this.axis.update(this.getAxisStyle(bbox));\n    };\n    Timebar.prototype.renderController = function (bbox) {\n        if (bbox === void 0) { bbox = this.space.controllerBBox; }\n        var type = this.attributes.type;\n        var _a = this.states, state = _a.state, speed = _a.speed, selectionType = _a.selectionType, chartType = _a.chartType;\n        var userDefinedControllerStyle = subStyleProps(this.attributes, 'controller');\n        var that = this;\n        var style = __assign(__assign(__assign({}, bbox), { iconSize: 20, speed: speed, state: state, selectionType: selectionType, chartType: chartType, onChange: function (type, _a) {\n                var value = _a.value;\n                switch (type) {\n                    case 'reset':\n                        that.internalReset();\n                        break;\n                    case 'speed':\n                        that.handleSpeedChange(value);\n                        break;\n                    case 'backward':\n                        that.internalBackward();\n                        break;\n                    case 'playPause':\n                        if (value === 'play')\n                            that.internalPlay();\n                        else\n                            that.internalPause();\n                        break;\n                    case 'forward':\n                        that.internalForward();\n                        break;\n                    case 'selectionType':\n                        that.handleSelectionTypeChange(value);\n                        break;\n                    case 'chartType':\n                        that.handleChartTypeChange(value);\n                        break;\n                    default:\n                        break;\n                }\n            } }), userDefinedControllerStyle);\n        if (type === 'time') {\n            style.functions = [['reset', 'speed'], ['backward', 'playPause', 'forward'], ['selectionType']];\n        }\n        this.controller.update(style);\n    };\n    Timebar.prototype.dispatchOnChange = function (prevValues) {\n        var data = this.data;\n        var onChange = this.attributes.onChange;\n        var _a = this.states, values = _a.values, selectionType = _a.selectionType;\n        var _b = __read(values, 2), start = _b[0], end = _b[1];\n        var endTime = end === Infinity ? data.at(-1).time : end;\n        var newValues = selectionType === 'range' ? [start, endTime] : endTime;\n        var isEqual = function (val1, val2) {\n            if (Array.isArray(val1)) {\n                if (!Array.isArray(val2))\n                    return false;\n                if (val1[0] === val2[0]) {\n                    if (val1[1] === val2[1])\n                        return true;\n                    if (val1[1] === Infinity || val2[1] === Infinity)\n                        return true;\n                }\n                return false;\n            }\n            if (Array.isArray(val2))\n                return false;\n            return val1 === val2;\n        };\n        // 如果和当前值不同，才响应\n        if (!prevValues || !isEqual(prevValues, newValues)) {\n            onChange === null || onChange === void 0 ? void 0 : onChange(selectionType === 'range' ? [start, endTime] : endTime);\n        }\n    };\n    Timebar.prototype.internalReset = function (preventEvent) {\n        var _a, _b;\n        var selectionType = this.states.selectionType;\n        this.internalPause();\n        this.setBySliderValues(selectionType === 'range' ? [0, 1] : [0, 0]);\n        this.renderController();\n        this.updateSelection();\n        if (!preventEvent) {\n            (_b = (_a = this.attributes) === null || _a === void 0 ? void 0 : _a.onReset) === null || _b === void 0 ? void 0 : _b.call(_a);\n            this.dispatchOnChange();\n        }\n    };\n    Timebar.prototype.reset = function () {\n        this.internalReset();\n    };\n    Timebar.prototype.moveSelection = function (direction, preventEvent) {\n        var data = this.data;\n        var length = data.length;\n        var _a = this.states, values = _a.values, selectionType = _a.selectionType, playMode = _a.playMode;\n        var _b = __read(values, 2), startTime = _b[0], endTime = _b[1];\n        var startIndex = data.findIndex(function (_a) {\n            var time = _a.time;\n            return time === startTime;\n        });\n        var endIndex = data.findIndex(function (_a) {\n            var time = _a.time;\n            return time === endTime;\n        });\n        if (endIndex === -1)\n            endIndex = length;\n        var diff = direction === 'backward' ? -1 : 1;\n        var currentIndexes;\n        if (selectionType === 'range') {\n            // end 后移一个时间间隔\n            if (playMode === 'acc') {\n                currentIndexes = [startIndex, endIndex + diff];\n                // 如果回退过程中，start 和 end 相遇，则 end 重置到 length\n                if (diff === -1 && startIndex === endIndex) {\n                    currentIndexes = [startIndex, length];\n                }\n            }\n            // start, end 后移一个时间间隔\n            else\n                currentIndexes = [startIndex + diff, endIndex + diff];\n        }\n        // end 后移一个时间间隔\n        else\n            currentIndexes = [startIndex, endIndex + diff];\n        var normalizeIndexes = function (indexes) {\n            // 先进行排序\n            var _a = __read(indexes.sort(function (a, b) { return a - b; }), 2), start = _a[0], end = _a[1];\n            // 保证 index 在 [0, length]\n            var clampIndex = function (index) { return clamp(index, 0, length); };\n            // 如果 end 超出最大值\n            if (end > length) {\n                // value 模式下，重置到 0\n                if (selectionType === 'value')\n                    return [0, 0];\n                // 移动到 start\n                if (playMode === 'acc')\n                    return [clampIndex(start), clampIndex(start)];\n                // 整体移动到起始位置\n                return [0, clampIndex(end - start)];\n            }\n            // 如果是倒放，到头时，整体移动到末尾\n            if (start < 0) {\n                if (playMode === 'acc')\n                    return [0, clampIndex(end)];\n                return [clampIndex(start + length - end), length];\n            }\n            return [clampIndex(start), clampIndex(end)];\n        };\n        var normalizedIndexes = normalizeIndexes(currentIndexes);\n        this.setByIndex(normalizedIndexes);\n        this.updateSelection();\n        return normalizedIndexes;\n    };\n    Timebar.prototype.internalBackward = function (preventEvent) {\n        var _a, _b;\n        var indexes = this.moveSelection('backward', preventEvent);\n        if (!preventEvent) {\n            (_b = (_a = this.attributes) === null || _a === void 0 ? void 0 : _a.onBackward) === null || _b === void 0 ? void 0 : _b.call(_a);\n            this.dispatchOnChange();\n        }\n        return indexes;\n    };\n    Timebar.prototype.backward = function () {\n        this.internalBackward();\n    };\n    Timebar.prototype.internalPlay = function (preventEvent) {\n        var _this = this;\n        var _a, _b;\n        var data = this.data;\n        var loop = this.attributes.loop;\n        var _c = this.states.speed, speed = _c === void 0 ? 1 : _c;\n        this.playInterval = window.setInterval(function () {\n            var indexes = _this.internalForward();\n            // 如果不是循环播放，则播放到最后一个值时暂停\n            if (indexes[1] === data.length && !loop) {\n                // 这里需要抛出暂停事件\n                _this.internalPause();\n                _this.renderController();\n            }\n        }, 1000 / speed);\n        this.states.state = 'play';\n        !preventEvent && ((_b = (_a = this.attributes) === null || _a === void 0 ? void 0 : _a.onPlay) === null || _b === void 0 ? void 0 : _b.call(_a));\n    };\n    Timebar.prototype.play = function () {\n        this.internalPlay();\n    };\n    Timebar.prototype.internalPause = function (preventEvent) {\n        var _a, _b;\n        clearInterval(this.playInterval);\n        this.states.state = 'pause';\n        !preventEvent && ((_b = (_a = this.attributes) === null || _a === void 0 ? void 0 : _a.onPause) === null || _b === void 0 ? void 0 : _b.call(_a));\n    };\n    Timebar.prototype.pause = function () {\n        this.internalPause();\n    };\n    Timebar.prototype.internalForward = function (preventEvent) {\n        var _a, _b;\n        var indexes = this.moveSelection('forward', preventEvent);\n        if (!preventEvent) {\n            (_b = (_a = this.attributes) === null || _a === void 0 ? void 0 : _a.onForward) === null || _b === void 0 ? void 0 : _b.call(_a);\n            this.dispatchOnChange();\n        }\n        return indexes;\n    };\n    Timebar.prototype.forward = function () {\n        this.internalForward();\n    };\n    Timebar.prototype.handleSpeedChange = function (value) {\n        var _a, _b;\n        this.states.speed = value;\n        var state = this.states.state;\n        if (state === 'play') {\n            // 重新设定 interval\n            this.internalPause(true);\n            this.internalPlay(true);\n        }\n        (_b = (_a = this.attributes) === null || _a === void 0 ? void 0 : _a.onSpeedChange) === null || _b === void 0 ? void 0 : _b.call(_a, value);\n    };\n    Timebar.prototype.handleSelectionTypeChange = function (type) {\n        var _a, _b;\n        this.states.selectionType = type;\n        this.renderChart();\n        (_b = (_a = this.attributes) === null || _a === void 0 ? void 0 : _a.onSelectionTypeChange) === null || _b === void 0 ? void 0 : _b.call(_a, type);\n    };\n    Timebar.prototype.handleChartTypeChange = function (type) {\n        var _a, _b;\n        this.states.chartType = type;\n        this.renderChart();\n        (_b = (_a = this.attributes) === null || _a === void 0 ? void 0 : _a.onChartTypeChange) === null || _b === void 0 ? void 0 : _b.call(_a, type);\n    };\n    Timebar.prototype.render = function () {\n        var _a = this.space, axisBBox = _a.axisBBox, controllerBBox = _a.controllerBBox, timelineBBox = _a.timelineBBox;\n        this.renderController(controllerBBox);\n        this.renderAxis(axisBBox);\n        this.renderChart(timelineBBox);\n        if (this.states.state === 'play')\n            this.internalPlay();\n    };\n    Timebar.prototype.destroy = function () {\n        _super.prototype.destroy.call(this);\n        this.internalPause(true);\n    };\n    Timebar.defaultOptions = {\n        style: {\n            x: 0,\n            y: 0,\n            axisLabelFill: '#6e6e6e',\n            axisLabelTextAlign: 'left',\n            axisLabelTextBaseline: 'top',\n            axisLabelTransform: 'translate(5, -12)',\n            axisLineLineWidth: 1,\n            axisLineStroke: '#cacdd1',\n            axisTickLength: 15,\n            axisTickLineWidth: 1,\n            axisTickStroke: '#cacdd1',\n            chartShowLabel: false,\n            chartType: 'line',\n            controllerAlign: 'center',\n            controllerHeight: 40,\n            data: [],\n            interval: 'day',\n            loop: false,\n            playMode: 'acc',\n            selectionType: 'range',\n            type: 'time',\n        },\n    };\n    return Timebar;\n}(Component));\nexport { Timebar };\n//# sourceMappingURL=timebar.js.map","import isType from './is-type';\nvar isDate = function (value) {\n    return isType(value, 'Date');\n};\nexport default isDate;\n//# sourceMappingURL=is-date.js.map","import { Timebar as TimebarComponent } from '@antv/component';\nimport { Canvas } from '@antv/g';\nimport { Renderer as CanvasRenderer } from '@antv/g-canvas';\nimport { isArray, isDate, isNumber } from '@antv/util';\nimport { idOf } from '../utils/id';\nimport { parsePadding } from '../utils/padding';\nimport { BasePlugin } from './base-plugin';\nconst prospectiveTimeKeys = ['timestamp', 'time', 'date', 'datetime'];\n/**\n * <zh/> 时间组件\n *\n * <en/> Timebar\n */\nexport class Timebar extends BasePlugin {\n    static defaultOptions = {\n        position: 'bottom',\n        enable: true,\n        timebarType: 'time',\n        className: 'g6-timebar',\n        width: 450,\n        height: 60,\n        zIndex: 3,\n        elementTypes: ['node'],\n        padding: 10,\n        mode: 'modify',\n        getTime: (datum) => inferTime(datum, prospectiveTimeKeys, undefined),\n        loop: false,\n    };\n    timebar;\n    canvas;\n    wrapper;\n    originalData;\n    get padding() {\n        return parsePadding(this.options.padding);\n    }\n    constructor(context, options) {\n        super(context, Object.assign({}, Timebar.defaultOptions, options));\n        this.backup();\n        this.upsertTimebar();\n    }\n    /**\n     * <zh/> 播放\n     *\n     * <en/> Play\n     */\n    play() {\n        this.timebar?.play();\n    }\n    /**\n     * <zh/> 暂停\n     *\n     * <en/> Pause\n     */\n    pause() {\n        this.timebar?.pause();\n    }\n    /**\n     * <zh/> 前进\n     *\n     * <en/> Forward\n     */\n    forward() {\n        this.timebar?.forward();\n    }\n    /**\n     * <zh/> 后退\n     *\n     * <en/> Backward\n     */\n    backward() {\n        this.timebar?.backward();\n    }\n    /**\n     * <zh/> 重置\n     *\n     * <en/> Reset\n     */\n    reset() {\n        this.timebar?.reset();\n    }\n    /**\n     * <zh/> 更新时间条配置项\n     *\n     * <en/> Update timebar configuration options\n     * @param options - <zh/> 配置项 | <en/> Options\n     * @internal\n     */\n    update(options) {\n        super.update(options);\n        this.backup();\n        Object.keys(options).forEach((key) => {\n            switch (key) {\n                case 'position':\n                    this.upsertWrapper();\n                    break;\n                default:\n                    this.upsertTimebar();\n                    break;\n            }\n        });\n    }\n    /**\n     * <zh/> 备份数据\n     *\n     * <en/> Backup data\n     */\n    backup() {\n        this.originalData = shallowCopy(this.context.graph.getData());\n    }\n    upsertTimebar() {\n        const { canvas } = this.context;\n        const { onChange, timebarType, data, x, y, width, height, mode, ...restOptions } = this.options;\n        const canvasSize = canvas.getSize();\n        const [top] = this.padding;\n        this.upsertCanvas().ready.then(() => {\n            const style = {\n                x: canvasSize[0] / 2 - width / 2,\n                y: top,\n                onChange: (value) => {\n                    const range = (isArray(value) ? value : [value, value]).map((time) => isDate(time) ? time.getTime() : time);\n                    if (this.options.mode === 'modify')\n                        this.filterElements(range);\n                    else\n                        this.hiddenElements(range);\n                    onChange?.(range);\n                },\n                ...restOptions,\n                data: data.map((datum) => (isNumber(datum) ? { time: datum, value: 0 } : datum)),\n                width,\n                height,\n                type: timebarType,\n            };\n            if (!this.timebar) {\n                this.timebar = new TimebarComponent({ style });\n                this.canvas?.appendChild(this.timebar);\n            }\n            else {\n                this.timebar.update(style);\n            }\n        });\n    }\n    upsertWrapper() {\n        if (!this.wrapper) {\n            const wrapper = document.createElement('div');\n            wrapper.style.position = 'absolute';\n            this.wrapper = wrapper;\n        }\n        const { x, y, className, position } = this.options;\n        if (className)\n            this.wrapper.className = className;\n        if (isNumber(x) || isNumber(y)) {\n            Object.assign(this.wrapper.style, {\n                left: `${x ?? 0}px`,\n                top: `${y ?? 0}px`,\n            });\n        }\n        else {\n            Object.assign(this.wrapper.style, {\n                [position === 'top' ? 'bottom' : 'top']: 'unset',\n                [position === 'top' ? 'top' : 'bottom']: '0px',\n            });\n        }\n        this.context.canvas.getContainer()?.appendChild(this.wrapper);\n        return this.wrapper;\n    }\n    upsertCanvas() {\n        const wrapper = this.upsertWrapper();\n        if (this.canvas)\n            return this.canvas;\n        const { height } = this.options;\n        const [width] = this.context.canvas.getSize();\n        const [top, , bottom] = this.padding;\n        this.canvas = new Canvas({\n            container: wrapper,\n            width,\n            height: height + top + bottom,\n            renderer: this.context.options.renderer?.('main') || new CanvasRenderer(),\n            supportsMutipleCanvasesInOneContainer: true,\n        });\n        return this.canvas;\n    }\n    async filterElements(range) {\n        if (!this.originalData)\n            return;\n        const { elementTypes, getTime } = this.options;\n        const { graph, element } = this.context;\n        const newData = shallowCopy(this.originalData);\n        elementTypes.forEach((type) => {\n            const key = `${type}s`;\n            newData[key] = (this.originalData[key] || []).filter((datum) => {\n                const time = getTime(datum);\n                if (match(time, range))\n                    return true;\n                return false;\n            });\n        });\n        const nodeLikeIds = [...newData.nodes, ...newData.combos].map((datum) => idOf(datum));\n        newData.edges = newData.edges.filter((edge) => {\n            const source = edge.source;\n            const target = edge.target;\n            return nodeLikeIds.includes(source) && nodeLikeIds.includes(target);\n        });\n        graph.setData(newData);\n        await element.draw({ animation: false, silence: true })?.finished;\n    }\n    hiddenElements(range) {\n        const { graph } = this.context;\n        const { elementTypes, getTime } = this.options;\n        const hideElementId = [];\n        const showElementId = [];\n        elementTypes.forEach((elementType) => {\n            const key = `${elementType}s`;\n            const elementData = this.originalData?.[key] || [];\n            elementData.forEach((elementDatum) => {\n                const id = idOf(elementDatum);\n                const time = getTime(elementDatum);\n                if (match(time, range))\n                    showElementId.push(id);\n                else\n                    hideElementId.push(id);\n            });\n        });\n        graph.hideElement(hideElementId, false);\n        graph.showElement(showElementId, false);\n    }\n    /**\n     * <zh/> 销毁时间条\n     *\n     * <en/> Destroy the timebar\n     */\n    destroy() {\n        const { graph } = this.context;\n        this.originalData && graph.setData({ ...this.originalData });\n        this.timebar?.destroy();\n        this.canvas?.destroy();\n        this.wrapper?.remove();\n        this.originalData = undefined;\n        this.wrapper = undefined;\n        this.timebar = undefined;\n        this.canvas = undefined;\n        super.destroy();\n    }\n}\nconst shallowCopy = (data) => {\n    const { nodes = [], edges = [], combos = [] } = data;\n    return {\n        nodes: [...nodes],\n        edges: [...edges],\n        combos: [...combos],\n    };\n};\nconst match = (time, range) => {\n    if (isNumber(range))\n        return time === range;\n    const [start, end] = range;\n    return time >= start && time <= end;\n};\nconst inferTime = (datum, optionsKeys, defaultValue) => {\n    for (let i = 0; i < optionsKeys.length; i++) {\n        const key = optionsKeys[i];\n        const val = datum.data?.[key];\n        if (val)\n            return val;\n    }\n    return defaultValue;\n};\n//# sourceMappingURL=timebar.js.map","import { createPluginContainer, insertDOM } from '../../utils/dom';\nimport { BasePlugin } from '../base-plugin';\nimport { BUILD_IN_SVG_ICON, TOOLBAR_CSS, parsePositionToStyle } from './util';\n/**\n * <zh/> 工具栏，支持配置工具栏项目，以及点击之后的回调方法\n *\n * <en/> Toolbar, support configuration of toolbar items, and callback methods after clicking\n */\nexport class Toolbar extends BasePlugin {\n    static defaultOptions = {\n        position: 'top-left',\n    };\n    $element = createPluginContainer('toolbar', false);\n    constructor(context, options) {\n        super(context, Object.assign({}, Toolbar.defaultOptions, options));\n        const $container = this.context.canvas.getContainer();\n        this.$element.style.display = 'flex';\n        $container.appendChild(this.$element);\n        // 设置样式\n        insertDOM('g6-toolbar-css', 'style', {}, TOOLBAR_CSS, document.head);\n        insertDOM('g6-toolbar-svgicon', 'div', { display: 'none' }, BUILD_IN_SVG_ICON);\n        this.$element.addEventListener('click', this.onToolbarItemClick);\n        this.update(options);\n    }\n    /**\n     * <zh/> 更新工具栏的配置项\n     *\n     * <en/> Update the configuration of the toolbar\n     * @param options - <zh/> 工具栏的配置项 | <en/> The options of the toolbar\n     * @internal\n     */\n    async update(options) {\n        super.update(options);\n        const { className, position, style } = this.options;\n        this.$element.className = `g6-toolbar ${className || ''}`;\n        // 设置容器的样式，主要是位置，背景之类的\n        Object.assign(this.$element.style, style, parsePositionToStyle(position));\n        this.$element.innerHTML = await this.getDOMContent();\n    }\n    /**\n     * <zh/> 销毁工具栏\n     *\n     * <en/> Destroy the toolbar\n     */\n    destroy() {\n        this.$element.removeEventListener('click', this.onToolbarItemClick);\n        this.$element.remove();\n        super.destroy();\n    }\n    async getDOMContent() {\n        const items = await this.options.getItems();\n        return items\n            .map((item) => `\n          <div class=\"g6-toolbar-item\" value=\"${item.value}\">\n            <svg aria-hidden=\"true\" focusable=\"false\">\n              <use xlink:href=\"#${item.id}\"></use>\n            </svg>\n          </div>`)\n            .join('');\n    }\n    onToolbarItemClick = (e) => {\n        const { onClick } = this.options;\n        if (e.target instanceof Element) {\n            if (e.target.className.includes('g6-toolbar-item')) {\n                const v = e.target.getAttribute('value');\n                onClick?.(v, e.target);\n            }\n        }\n    };\n}\n//# sourceMappingURL=index.js.map","/**\n * <zh/> 解析 toolbar 的 position 为位置样式。\n *\n * <en/> Parse the position of the toolbar into position style.\n * @param position - position\n * @returns style\n */\nexport function parsePositionToStyle(position) {\n    const style = {\n        top: 'unset',\n        right: 'unset',\n        bottom: 'unset',\n        left: 'unset',\n    };\n    const directions = position.split('-');\n    directions.forEach((d) => {\n        style[d] = '8px';\n    });\n    style.flexDirection = position.startsWith('top') || position.startsWith('bottom') ? 'row' : 'column';\n    return style;\n}\n/**\n * 内置默认的 toolbar 的 CSS 样式。\n */\nexport const TOOLBAR_CSS = `\n  .g6-toolbar {\n    position: absolute;\n    z-index: 100;\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: center;\n    border-radius: 4px;\n    box-shadow: 0px 0px 8px rgba(0, 0, 0, 0.1);\n    opacity: 0.65;\n  }\n  .g6-toolbar .g6-toolbar-item {\n    display: inline-block;\n    width: 16px;\n    height: 16px;\n    padding: 4px;\n    cursor: pointer;\n    box-sizing: content-box;\n  }\n\n  .g6-toolbar .g6-toolbar-item:hover {\n    background-color: #f0f0f0;\n  }\n\n  .g6-toolbar .g6-toolbar-item svg {\n    display: inline-block;\n    width: 100%;\n    height: 100%;\n    pointer-events: none;\n  }\n`;\nexport const BUILD_IN_SVG_ICON = `\n  <svg>\n    <symbol id=\"zoom-in\" viewBox=\"64 64 896 896\">\n      <path d=\"M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z\"></path>\n    </symbol>\n    <symbol id=\"zoom-out\" viewBox=\"64 64 896 896\">\n      <path d=\"M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z\"></path>\n    </symbol>\n    <symbol id=\"edit\" viewBox=\"64 64 896 896\">\n      <path d=\"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z\"></path>\n    </symbol>\n    <symbol id=\"delete\" viewBox=\"64 64 896 896\">\n      <path d=\"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z\"></path>\n    </symbol>\n    <symbol id=\"redo\" viewBox=\"64 64 896 896\">\n      <path d=\"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z\"></path>\n    </symbol>\n    <symbol id=\"undo\" viewBox=\"64 64 896 896\">\n      <path d=\"M511.4 124C290.5 124.3 112 303 112 523.9c0 128 60.2 242 153.8 315.2l-37.5 48c-4.1 5.3-.3 13 6.3 12.9l167-.8c5.2 0 9-4.9 7.7-9.9L369.8 727a8 8 0 00-14.1-3L315 776.1c-10.2-8-20-16.7-29.3-26a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-7.5 7.5-15.3 14.5-23.4 21.2a7.93 7.93 0 00-1.2 11.1l39.4 50.5c2.8 3.5 7.9 4.1 11.4 1.3C854.5 760.8 912 649.1 912 523.9c0-221.1-179.4-400.2-400.6-399.9z\"></path>\n    </symbol>\n    <symbol id=\"export\" viewBox=\"64 64 896 896\">\n      <path d=\"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z\"></path>\n    </symbol>\n    <symbol id=\"auto-fit\" viewBox=\"64 64 896 896\">\n      <path d=\"M952 474H829.8C812.5 327.6 696.4 211.5 550 194.2V72c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v122.2C327.6 211.5 211.5 327.6 194.2 474H72c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h122.2C211.5 696.4 327.6 812.5 474 829.8V952c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V829.8C696.4 812.5 812.5 696.4 829.8 550H952c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zM512 756c-134.8 0-244-109.2-244-244s109.2-244 244-244 244 109.2 244 244-109.2 244-244 244z\"></path>\n      <path d=\"M512 392c-32.1 0-62.1 12.4-84.8 35.2-22.7 22.7-35.2 52.7-35.2 84.8s12.5 62.1 35.2 84.8C449.9 619.4 480 632 512 632s62.1-12.5 84.8-35.2C619.4 574.1 632 544 632 512s-12.5-62.1-35.2-84.8A118.57 118.57 0 00512 392z\"></path>\n    </symbol>\n    <symbol id=\"reset\" viewBox=\"64 64 896 896\">\n      <path d=\"M909.1 209.3l-56.4 44.1C775.8 155.1 656.2 92 521.9 92 290 92 102.3 279.5 102 511.5 101.7 743.7 289.8 932 521.9 932c181.3 0 335.8-115 394.6-276.1 1.5-4.2-.7-8.9-4.9-10.3l-56.7-19.5a8 8 0 00-10.1 4.8c-1.8 5-3.8 10-5.9 14.9-17.3 41-42.1 77.8-73.7 109.4A344.77 344.77 0 01655.9 829c-42.3 17.9-87.4 27-133.8 27-46.5 0-91.5-9.1-133.8-27A341.5 341.5 0 01279 755.2a342.16 342.16 0 01-73.7-109.4c-17.9-42.4-27-87.4-27-133.9s9.1-91.5 27-133.9c17.3-41 42.1-77.8 73.7-109.4 31.6-31.6 68.4-56.4 109.3-73.8 42.3-17.9 87.4-27 133.8-27 46.5 0 91.5 9.1 133.8 27a341.5 341.5 0 01109.3 73.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.6 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c-.1-6.6-7.8-10.3-13-6.2z\"></path>\n    </symbol>\n    <symbol id=\"exit-fullscreen\" viewBox=\"0 0 1024 1024\">\n      <path d=\"M418.13333333 361.43786666c0 0.2048-0.13653333 0.4096-0.13653334 0.68266667C417.99679999 362.32533333 418.13333333 362.53013333 418.13333333 362.73493333 418.13333333 371.54133333 414.44693333 379.392 408.78079999 385.39946666 408.43946666 385.7408 408.30293333 386.21866666 408.02986666 386.49173333c-1.09226667 1.09226667-2.59413333 1.77493333-3.82293333 2.73066667C398.40426666 393.65973333 391.64586666 396.8 383.93173333 396.8 383.72693333 396.8 383.59039999 396.73173333 383.38559999 396.73173333S382.97599999 396.8 382.77119999 396.8L112.29866666 396.8C92.50133333 396.8 76.79999999 381.50826666 76.79999999 362.66666666 76.66346666 343.89333333 92.63786666 328.53333333 112.16213333 328.53333333l189.44 0L87.44959999 114.51733333C73.59146666 100.59093333 73.25013333 78.5408 86.63039999 65.29706666c13.17546667-13.44853333 35.36213333-12.97066667 49.152 0.88746667l214.08426667 214.08426667L349.86666666 90.89706666C349.79839999 71.23626666 365.22666666 55.46666666 383.99999999 55.46666666 402.77333333 55.33013333 418.13333333 71.30453333 418.13333333 90.8288L418.13333333 361.43786666zM928.90453333 328.53333333l-189.44 0 214.15253333-214.08426667c13.85813333-13.9264 14.19946667-35.90826667 0.88746667-49.22026666-13.17546667-13.44853333-35.36213333-12.97066667-49.152 0.88746666l-214.08426667 214.08426667L691.26826666 90.89706666C691.26826666 71.23626666 675.83999999 55.46666666 657.06666666 55.46666666 638.29333333 55.33013333 622.93333333 71.30453333 622.93333333 90.8288l0 270.60906666c0 0.2048 0.13653333 0.4096 0.13653333 0.68266667C623.06986666 362.32533333 622.93333333 362.53013333 622.93333333 362.73493333 622.93333333 371.54133333 626.61973333 379.392 632.28586666 385.39946666c0.34133333 0.34133333 0.47786667 0.8192 0.8192 1.09226667 1.09226667 1.09226667 2.59413333 1.77493333 3.8912 2.73066667C642.66239999 393.65973333 649.42079999 396.8 657.13493333 396.8c0.2048 0 0.34133333-0.06826667 0.54613333-0.06826667S658.09066666 396.8 658.29546666 396.8l270.5408 0C948.56533333 396.8 964.26666666 381.50826666 964.26666666 362.66666666 964.40319999 343.89333333 948.42879999 328.53333333 928.90453333 328.53333333zM418.13333333 635.73333333c0-8.8064-3.6864-16.5888-9.35253334-22.66453333C408.43946666 612.72746666 408.30293333 612.2496 408.02986666 611.90826666 406.86933333 610.88426666 405.43573333 610.2016 404.20693333 609.24586666 398.47253333 604.80853333 391.64586666 601.6 383.93173333 601.6 383.72693333 601.6 383.59039999 601.73653333 383.38559999 601.73653333S382.97599999 601.6 382.77119999 601.6L112.29866666 601.6C92.50133333 601.6 76.79999999 616.96 76.79999999 635.73333333 76.66346666 654.50666666 92.63786666 669.86666666 112.16213333 669.86666666l189.44 0-214.15253334 214.15253334c-13.85813333 13.85813333-14.19946667 35.84-0.88746666 49.22026666 13.17546667 13.44853333 35.36213333 12.9024 49.152-0.95573333l214.08426666-214.08426667 0 189.37173334c0 19.59253333 15.42826667 35.49866667 34.2016 35.36213333C402.77333333 943.2064 418.13333333 927.232 418.13333333 907.5712L418.13333333 637.09866666c0-0.27306667-0.13653333-0.47786667-0.13653334-0.68266666C417.99679999 636.14293333 418.13333333 635.93813333 418.13333333 635.73333333zM739.46453333 669.86666666l189.44 0c19.456 0 35.49866667-15.36 35.36213333-34.13333333C964.26666666 616.96 948.56533333 601.6 928.76799999 601.6L658.29546666 601.6C658.09066666 601.6 657.88586666 601.73653333 657.68106666 601.73653333S657.33973333 601.6 657.13493333 601.6C649.42079999 601.6 642.59413333 604.80853333 636.85973333 609.24586666 635.63093333 610.2016 634.19733333 610.88426666 633.03679999 611.90826666 632.76373333 612.2496 632.62719999 612.72746666 632.28586666 613.0688 626.61973333 619.14453333 622.93333333 626.92693333 622.93333333 635.73333333c0 0.2048 0.13653333 0.4096 0.13653333 0.68266667C623.06986666 636.6208 622.93333333 636.8256 622.93333333 637.09866666l0 270.5408C622.93333333 927.232 638.29333333 943.2064 657.06666666 942.93333333c18.77333333 0.13653333 34.2016-15.70133333 34.2016-35.36213333l0-189.37173334 214.08426667 214.08426667c13.78986667 13.85813333 35.90826667 14.40426667 49.152 0.95573333 13.312-13.312 12.97066667-35.36213333-0.88746667-49.22026666L739.46453333 669.86666666z\"  ></path></symbol>\n    <symbol id=\"request-fullscreen\" viewBox=\"0 0 1024 1024\">\n      <path d=\"M69.818182 87.598545v273.128728a34.909091 34.909091 0 0 0 69.818182 0V163.653818l221.928727 222.021818a33.512727 33.512727 0 0 0 47.383273-47.383272L186.926545 116.363636h197.073455a34.909091 34.909091 0 0 0 0-69.818181H110.871273C85.364364 46.545455 69.818182 59.671273 69.818182 87.598545zM938.542545 46.545455H665.413818a34.909091 34.909091 0 0 0 0 69.818181h197.073455L640.465455 338.292364a33.512727 33.512727 0 0 0 47.383272 47.383272l221.928728-222.021818v197.073455a34.909091 34.909091 0 0 0 69.818181 0V87.598545c0-27.927273-15.453091-41.053091-40.96-41.05309z m-827.671272 907.636363h273.128727a34.909091 34.909091 0 0 0 0-69.818182H186.926545l222.021819-221.928727a33.512727 33.512727 0 0 0-47.383273-47.383273L139.636364 837.073455V640a34.909091 34.909091 0 0 0-69.818182 0v273.128727c0 27.927273 15.546182 41.053091 41.053091 41.053091z m868.724363-41.053091V640a34.909091 34.909091 0 0 0-69.818181 0v197.073455L687.941818 615.051636a33.512727 33.512727 0 0 0-47.383273 47.383273L862.487273 884.363636H665.413818a34.909091 34.909091 0 0 0 0 69.818182h273.128727c25.6 0 41.053091-13.125818 41.053091-41.053091z\"  ></path></symbol>\n  </svg>\n`;\n//# sourceMappingURL=util.js.map","import { Tooltip as TooltipComponent } from '@antv/component';\nimport { get } from '@antv/util';\nimport { BasePlugin } from './base-plugin';\nexport class Tooltip extends BasePlugin {\n    static defaultOptions = {\n        trigger: 'hover',\n        position: 'top-right',\n        enterable: false,\n        enable: true,\n        offset: [10, 10],\n        style: {\n            '.tooltip': {\n                visibility: 'hidden',\n            },\n        },\n    };\n    currentTarget = null;\n    tooltipElement = null;\n    container = null;\n    constructor(context, options) {\n        super(context, Object.assign({}, Tooltip.defaultOptions, options));\n        this.render();\n        this.bindEvents();\n    }\n    /**\n     * <zh/> 获取事件及处理事件的方法\n     *\n     * <en/> Get event and handle event methods\n     * @returns <zh/> 事件及处理事件的方法 | <en/> Event and handling event methods\n     */\n    getEvents() {\n        if (this.options.trigger === 'click') {\n            return {\n                'node:click': this.onClick,\n                'edge:click': this.onClick,\n                'combo:click': this.onClick,\n                'canvas:click': this.onPointerLeave,\n                contextmenu: this.onPointerLeave,\n                drag: this.onPointerLeave,\n            };\n        }\n        return {\n            'node:pointerenter': this.onPointerEnter,\n            'node:pointermove': this.onPointerMove,\n            'canvas:pointermove': this.onCanvasMove,\n            'edge:pointerenter': this.onPointerEnter,\n            'edge:pointermove': this.onPointerMove,\n            'combo:pointerenter': this.onPointerEnter,\n            'combo:pointermove': this.onPointerMove,\n            contextmenu: this.onPointerLeave,\n            'node:drag': this.onPointerLeave,\n        };\n    }\n    /**\n     * <zh/> 更新tooltip配置\n     *\n     * <en/> Update the tooltip configuration\n     * @param options - <zh/> 配置项 | <en/> options\n     * @internal\n     */\n    update(options) {\n        this.unbindEvents();\n        super.update(options);\n        if (this.tooltipElement) {\n            this.container?.removeChild(this.tooltipElement.HTMLTooltipElement);\n        }\n        this.tooltipElement = this.initTooltip();\n        this.bindEvents();\n    }\n    render() {\n        const { canvas } = this.context;\n        const $container = canvas.getContainer();\n        if (!$container)\n            return;\n        this.container = $container;\n        this.tooltipElement = this.initTooltip();\n    }\n    unbindEvents() {\n        const { graph } = this.context;\n        /** The previous event binding needs to be removed when updating the trigger. */\n        const events = this.getEvents();\n        Object.keys(events).forEach((eventName) => {\n            graph.off(eventName, events[eventName]);\n        });\n    }\n    bindEvents() {\n        const { graph } = this.context;\n        const events = this.getEvents();\n        Object.keys(events).forEach((eventName) => {\n            graph.on(eventName, events[eventName]);\n        });\n    }\n    isEnable = (event) => {\n        const { enable } = this.options;\n        if (typeof enable === 'function') {\n            return enable(event);\n        }\n        return enable;\n    };\n    /**\n     * <zh/> 点击事件\n     *\n     * <en/> Click event\n     * @param event - <zh/> 元素 | <en/> element\n     */\n    onClick = (event) => {\n        const { target: { id }, } = event;\n        // click the same item twice, tooltip will be hidden\n        if (this.currentTarget === id) {\n            this.currentTarget = null;\n            this.hide(event);\n        }\n        else {\n            this.currentTarget = id;\n            this.show(event);\n        }\n    };\n    /**\n     * <zh/> 在目标元素(node/edge/combo)上移动\n     *\n     * <en/> Move on target element (node/edge/combo)\n     * @param event - <zh/> 目标元素 | <en/> target element\n     */\n    onPointerMove = (event) => {\n        const { target } = event;\n        if (!this.currentTarget || target.id === this.currentTarget) {\n            return;\n        }\n        this.show(event);\n    };\n    /**\n     * <zh/> 点击画布/触发拖拽/出现上下文菜单隐藏tooltip\n     *\n     * <en/> Hide tooltip when clicking canvas/triggering drag/appearing context menu\n     * @param event - <zh/> 目标元素 | <en/> target element\n     */\n    onPointerLeave = (event) => {\n        this.hide(event);\n        this.currentTarget = null;\n    };\n    /**\n     * <zh/> 移动画布\n     *\n     * <en/> Move canvas\n     * @param event - <zh/> 目标元素 | <en/> target element\n     */\n    onCanvasMove = (event) => {\n        this.hide(event);\n        this.currentTarget = null;\n    };\n    onPointerEnter = (event) => {\n        this.show(event);\n    };\n    /**\n     * <zh/> 显示目标元素的提示框\n     *\n     * <en/> Show tooltip of target element\n     * @param id - <zh/> 元素 ID | <en/> element ID\n     */\n    showById = (id) => {\n        const event = {\n            target: { id },\n        };\n        this.show(event);\n    };\n    getElementData = (id, targetType) => {\n        const { model } = this.context;\n        switch (targetType) {\n            case 'node':\n                return model.getNodeData([id]);\n            case 'edge':\n                return model.getEdgeData([id]);\n            case 'combo':\n                return model.getComboData([id]);\n            default:\n                return [];\n        }\n    };\n    /**\n     * <zh/> 在目标元素上显示tooltip\n     *\n     * <en/> Show tooltip on target element\n     * @param event - <zh/> 目标元素 | <en/> target element\n     * @internal\n     */\n    show = (event) => {\n        const { client, target: { id }, } = event;\n        const targetType = this.context.graph.getElementType(id);\n        if (!this.tooltipElement || !this.isEnable(event))\n            return;\n        const { getContent, title } = this.options;\n        this.currentTarget = id;\n        const items = this.getElementData(id, targetType);\n        let x;\n        let y;\n        if (client) {\n            x = client.x;\n            y = client.y;\n        }\n        else {\n            const style = get(items, '0.style', { x: 0, y: 0 });\n            x = style.x;\n            y = style.y;\n        }\n        let tooltipContent = {};\n        if (getContent) {\n            tooltipContent.content = getContent(event, items);\n        }\n        else {\n            const style = this.context.graph.getElementRenderStyle(id);\n            const color = targetType === 'node' ? style.fill : style.stroke;\n            tooltipContent = {\n                title: title || targetType,\n                data: items.map((item) => {\n                    return {\n                        name: 'ID',\n                        value: item.id || `${item.source} -> ${item.target}`,\n                        color,\n                    };\n                }),\n            };\n        }\n        this.tooltipElement.update({\n            x,\n            y,\n            style: {\n                '.tooltip': {\n                    visibility: 'visible',\n                },\n            },\n            ...tooltipContent,\n        });\n    };\n    /**\n     * <zh/> 隐藏tooltip\n     *\n     * <en/> Hidden tooltip\n     * @param event - <zh/> 目标元素,不传则为外部调用 | <en/> Target element, not passed in as external call\n     */\n    hide = (event) => {\n        // if e is undefined, hide the tooltip， external call\n        if (!event) {\n            this.tooltipElement?.hide();\n            return;\n        }\n        if (!this.tooltipElement || !this.isEnable(event))\n            return;\n        const { client: { x, y }, } = event;\n        this.tooltipElement.hide(x, y);\n    };\n    initTooltip = () => {\n        const { canvas } = this.context;\n        const { center } = canvas.getBounds();\n        const $container = canvas.getContainer();\n        const { top, left } = $container.getBoundingClientRect();\n        const { style, position, enterable, container = { x: -left, y: -top }, title, offset } = this.options;\n        const [x, y] = center;\n        const [width, height] = canvas.getSize();\n        const tooltipElement = new TooltipComponent({\n            className: 'tooltip',\n            style: {\n                x,\n                y,\n                container,\n                title,\n                bounding: {\n                    x: 0,\n                    y: 0,\n                    width,\n                    height,\n                },\n                position,\n                enterable,\n                offset,\n                style,\n            },\n        });\n        this.container?.appendChild(tooltipElement.HTMLTooltipElement);\n        return tooltipElement;\n    };\n    /**\n     * <zh/> 销毁tooltip\n     *\n     * <en/> Destroy tooltip\n     */\n    destroy() {\n        this.unbindEvents();\n        if (this.tooltipElement) {\n            this.container?.removeChild(this.tooltipElement.HTMLTooltipElement);\n        }\n        super.destroy();\n    }\n}\n//# sourceMappingURL=tooltip.js.map","// Only use one instance.\nlet canvas;\n/**\n * Create a canvas instance.\n * @param width - width\n * @param height - height\n * @returns a new Canvas\n */\nfunction createCanvas(width, height) {\n    if (!canvas) {\n        canvas = document.createElement('canvas');\n    }\n    canvas.width = width;\n    canvas.height = height;\n    const ctx = canvas.getContext('2d');\n    ctx.clearRect(0, 0, width, height);\n    return canvas;\n}\n/**\n * 从文本获取水印的 base64\n * @param width - width\n * @param height - height\n * @param text - 样式\n * @param style - 样式\n * @returns 水印的 base64\n */\nexport async function getTextWatermark(width, height, text, style) {\n    const canvas = createCanvas(width, height);\n    const ctx = canvas.getContext('2d');\n    const { rotate, opacity, textFill, textFontSize, textFontFamily, textFontVariant, textFontWeight, textAlign, textBaseline, } = style;\n    // Set the style.\n    // Default is align center and middle.\n    ctx.textAlign = textAlign;\n    ctx.textBaseline = textBaseline;\n    ctx.translate(width / 2, height / 2);\n    ctx.font = `${textFontSize}px ${textFontFamily} ${textFontVariant} ${textFontWeight}`;\n    rotate && ctx.rotate(rotate);\n    opacity && (ctx.globalAlpha = opacity);\n    if (textFill) {\n        ctx.fillStyle = textFill;\n        // Draw the text.\n        ctx.fillText(`${text}`, 0, 0);\n    }\n    // Return the base64.\n    return canvas.toDataURL();\n}\n/**\n * Get the image base64 of the watermark.\n * @param width - width\n * @param height - height\n * @param imageURL - image URL\n * @param style - 样式\n * @returns 水印的 base64\n */\nexport async function getImageWatermark(width, height, imageURL, style) {\n    const canvas = createCanvas(width, height);\n    const ctx = canvas.getContext('2d');\n    const { rotate, opacity } = style;\n    rotate && ctx.rotate(rotate);\n    opacity && (ctx.globalAlpha = opacity);\n    const img = new Image();\n    img.crossOrigin = 'anonymous';\n    img.src = imageURL;\n    return new Promise((resolve) => {\n        img.onload = function () {\n            const sepX = width > img.width ? (width - img.width) / 2 : 0;\n            const sepY = height > img.height ? (height - img.height) / 2 : 0;\n            ctx.drawImage(img, 0, 0, img.width, img.height, sepX, sepY, width - sepX * 2, height - sepY * 2);\n            resolve(canvas.toDataURL());\n        };\n    });\n}\n//# sourceMappingURL=util.js.map","import { createPluginContainer } from '../../utils/dom';\nimport { BasePlugin } from '../base-plugin';\nimport { getImageWatermark, getTextWatermark } from './util';\n/**\n * <zh/> 水印\n *\n * <en/> Watermark\n * @remarks\n * <zh/> 支持使用文本和图片作为水印，实现原理是在 Graph 容器的 div 上加上 `background-image` 属性，然后就可以通过 css 来控制水印的位置和样式。对于文本，会使用隐藏 canvas 转成图片的方式来实现\n *\n * <en/> Support using text and image as watermark, the principle is to add the `background-image` property to the div of the Graph container, and then you can control the position and style of the watermark through css. For text, it will be converted to an image using a hidden canvas\n */\nexport class Watermark extends BasePlugin {\n    static defaultOptions = {\n        width: 200,\n        height: 100,\n        opacity: 0.2,\n        rotate: Math.PI / 12,\n        text: '',\n        textFill: '#000',\n        textFontSize: 16,\n        textAlign: 'center',\n        textBaseline: 'middle',\n        backgroundRepeat: 'repeat',\n    };\n    $element = createPluginContainer('watermark');\n    constructor(context, options) {\n        super(context, Object.assign({}, Watermark.defaultOptions, options));\n        const $container = this.context.canvas.getContainer();\n        $container.appendChild(this.$element);\n        this.update(options);\n    }\n    /**\n     * <zh/> 更新水印配置\n     *\n     * <en/> Update the watermark configuration\n     * @param options - <zh/> 配置项 | <en/> Options\n     * @internal\n     */\n    async update(options) {\n        super.update(options);\n        const { width, height, text, imageURL, ...rest } = this.options;\n        // Set the background style.\n        Object.keys(rest).forEach((key) => {\n            if (key.startsWith('background')) {\n                // @ts-expect-error ignore\n                this.$element.style[key] = options[key];\n            }\n        });\n        // Set the background image\n        const base64 = imageURL\n            ? await getImageWatermark(width, height, imageURL, rest)\n            : await getTextWatermark(width, height, text, rest);\n        this.$element.style.backgroundImage = `url(${base64})`;\n    }\n    /**\n     * <zh/> 销毁水印\n     *\n     * <en/> Destroy the watermark\n     */\n    destroy() {\n        super.destroy();\n        // Remove the background dom.\n        this.$element.remove();\n    }\n}\n//# sourceMappingURL=index.js.map","const BADGE_PALETTE = ['#7E92B5', '#F4664A', '#FFBE3A'];\nconst NODE_PALETTE_OPTIONS = {\n    type: 'group',\n    color: ['#1783FF', '#00C9C9', '#F08F56', '#D580FF', '#7863FF', '#DB9D0D', '#60C42D', '#FF80CA', '#2491B3', '#17C76F'],\n};\nconst EDGE_PALETTE_OPTIONS = {\n    type: 'group',\n    color: [\n        '#99ADD1',\n        '#1783FF',\n        '#00C9C9',\n        '#F08F56',\n        '#D580FF',\n        '#7863FF',\n        '#DB9D0D',\n        '#60C42D',\n        '#FF80CA',\n        '#2491B3',\n        '#17C76F',\n    ],\n};\n/**\n * <zh/> 创建主题\n *\n * <en/> Create a theme based on the given tokens\n * @param tokens - <zh/> 主题配置项 <en/> Theme tokens\n * @returns <zh/> 主题 <en/> Theme\n */\nexport function create(tokens) {\n    const { bgColor, textColor, nodeColor, nodeColorDisabled, nodeStroke, nodeHaloStrokeOpacityActive = 0.15, nodeHaloStrokeOpacitySelected = 0.25, nodeOpacityDisabled = 0.06, nodeIconOpacityInactive = 0.85, nodeOpacityInactive = 0.25, nodeBadgePalette = BADGE_PALETTE, nodePaletteOptions = NODE_PALETTE_OPTIONS, edgeColor, edgeColorDisabled, edgePaletteOptions = EDGE_PALETTE_OPTIONS, comboColor, comboColorDisabled, comboStroke, comboStrokeDisabled, edgeColorInactive, } = tokens;\n    return {\n        background: bgColor,\n        node: {\n            palette: nodePaletteOptions,\n            style: {\n                badgeFill: '#fff',\n                badgeFontSize: 8,\n                badgePadding: [0, 4],\n                badgePalette: nodeBadgePalette,\n                fill: nodeColor,\n                fillOpacity: 1,\n                halo: false,\n                iconFill: '#fff',\n                iconOpacity: 1,\n                labelBackground: false,\n                labelBackgroundFill: bgColor,\n                labelBackgroundLineWidth: 0,\n                labelBackgroundOpacity: 0.75,\n                labelFill: textColor,\n                labelFillOpacity: 0.85,\n                labelLineHeight: 16,\n                labelPadding: [0, 2],\n                labelFontSize: 12,\n                labelFontWeight: 400,\n                labelOpacity: 1,\n                labelOffsetY: 2,\n                lineWidth: 0,\n                portFill: nodeColor,\n                portLineWidth: 1,\n                portStroke: nodeStroke,\n                portStrokeOpacity: 0.65,\n                size: 32,\n                stroke: nodeStroke,\n                strokeOpacity: 1,\n                zIndex: 2,\n            },\n            state: {\n                selected: {\n                    halo: true,\n                    haloLineWidth: 24,\n                    haloStrokeOpacity: nodeHaloStrokeOpacitySelected,\n                    labelFontSize: 12,\n                    labelFontWeight: 'bold',\n                    lineWidth: 4,\n                    stroke: nodeStroke,\n                },\n                active: {\n                    halo: true,\n                    haloLineWidth: 12,\n                    haloStrokeOpacity: nodeHaloStrokeOpacityActive,\n                },\n                highlight: {\n                    labelFontWeight: 'bold',\n                    lineWidth: 4,\n                    stroke: nodeStroke,\n                    strokeOpacity: 0.85,\n                },\n                inactive: {\n                    badgeBackgroundOpacity: nodeOpacityInactive,\n                    donutOpacity: nodeOpacityInactive,\n                    fillOpacity: nodeOpacityInactive,\n                    iconOpacity: nodeIconOpacityInactive,\n                    labelFill: textColor,\n                    labelFillOpacity: nodeOpacityInactive,\n                    strokeOpacity: nodeOpacityInactive,\n                },\n                disabled: {\n                    badgeBackgroundOpacity: 0.25,\n                    donutOpacity: nodeOpacityDisabled,\n                    fill: nodeColorDisabled,\n                    fillOpacity: nodeOpacityDisabled,\n                    iconFill: nodeColorDisabled,\n                    iconOpacity: 0.25,\n                    labelFill: textColor,\n                    labelFillOpacity: 0.25,\n                    strokeOpacity: nodeOpacityDisabled,\n                },\n            },\n            animation: {\n                enter: 'fade',\n                exit: 'fade',\n                show: 'fade',\n                hide: 'fade',\n                expand: 'node-expand',\n                collapse: 'node-collapse',\n                update: [{ fields: ['x', 'y', 'fill', 'stroke'] }],\n                translate: [{ fields: ['x', 'y'] }],\n            },\n        },\n        edge: {\n            palette: edgePaletteOptions,\n            style: {\n                badgeBackgroundFill: edgeColor,\n                badgeFill: '#fff',\n                badgeFontSize: 8,\n                badgeOffsetX: 10,\n                fillOpacity: 1,\n                halo: false,\n                haloLineWidth: 12,\n                haloStrokeOpacity: 1,\n                increasedLineWidthForHitTesting: 2,\n                labelBackground: false,\n                labelBackgroundFill: bgColor,\n                labelBackgroundLineWidth: 0,\n                labelBackgroundOpacity: 0.75,\n                labelBackgroundPadding: [4, 4, 4, 4],\n                labelFill: textColor,\n                labelFontSize: 12,\n                labelFontWeight: 400,\n                labelOpacity: 1,\n                labelPlacement: 'center',\n                labelTextBaseline: 'middle',\n                lineWidth: 1,\n                stroke: edgeColor,\n                strokeOpacity: 1,\n                zIndex: 1,\n            },\n            state: {\n                selected: {\n                    halo: true,\n                    haloStrokeOpacity: 0.25,\n                    labelFontSize: 14,\n                    labelFontWeight: 'bold',\n                    lineWidth: 3,\n                },\n                active: {\n                    halo: true,\n                    haloStrokeOpacity: 0.15,\n                },\n                highlight: {\n                    labelFontWeight: 'bold',\n                    lineWidth: 3,\n                },\n                inactive: {\n                    stroke: edgeColorInactive,\n                    fillOpacity: 0.08,\n                    labelOpacity: 0.25,\n                    strokeOpacity: 0.08,\n                    badgeBackgroundOpacity: 0.25,\n                },\n                disabled: {\n                    stroke: edgeColorDisabled,\n                    fillOpacity: 0.45,\n                    strokeOpacity: 0.45,\n                    labelOpacity: 0.25,\n                    badgeBackgroundOpacity: 0.45,\n                },\n            },\n            animation: {\n                enter: 'fade',\n                exit: 'fade',\n                expand: 'path-in',\n                collapse: 'path-out',\n                show: 'fade',\n                hide: 'fade',\n                update: [{ fields: ['sourceNode', 'targetNode'] }, { fields: ['stroke'], shape: 'key' }],\n                translate: [{ fields: ['sourceNode', 'targetNode'] }],\n            },\n        },\n        combo: {\n            style: {\n                collapsedMarkerFill: bgColor,\n                collapsedMarkerFontSize: 12,\n                collapsedMarkerFillOpacity: 1,\n                collapsedSize: 32,\n                collapsedFillOpacity: 1,\n                fill: comboColor,\n                halo: false,\n                haloLineWidth: 12,\n                haloStroke: comboStroke,\n                haloStrokeOpacity: 0.25,\n                labelBackground: false,\n                labelBackgroundFill: bgColor,\n                labelBackgroundLineWidth: 0,\n                labelBackgroundOpacity: 0.75,\n                labelBackgroundPadding: [2, 4, 2, 4],\n                labelFill: textColor,\n                labelFontSize: 12,\n                labelFontWeight: 400,\n                labelOpacity: 1,\n                lineDash: 0,\n                lineWidth: 1,\n                fillOpacity: 0.04,\n                strokeOpacity: 1,\n                padding: 10,\n                stroke: comboStroke,\n            },\n            state: {\n                selected: {\n                    halo: true,\n                    labelFontSize: 14,\n                    labelFontWeight: 700,\n                    lineWidth: 4,\n                },\n                active: {\n                    halo: true,\n                },\n                highlight: {\n                    labelFontWeight: 700,\n                    lineWidth: 4,\n                },\n                inactive: {\n                    fillOpacity: 0.65,\n                    labelOpacity: 0.25,\n                    strokeOpacity: 0.65,\n                },\n                disabled: {\n                    fill: comboColorDisabled,\n                    fillOpacity: 0.25,\n                    labelOpacity: 0.25,\n                    stroke: comboStrokeDisabled,\n                    strokeOpacity: 0.25,\n                },\n            },\n            animation: {\n                enter: 'fade',\n                exit: 'fade',\n                show: 'fade',\n                hide: 'fade',\n                expand: 'combo-expand',\n                collapse: 'combo-collapse',\n                update: [{ fields: ['x', 'y'] }, { fields: ['fill', 'stroke', 'lineWidth'], shape: 'key' }],\n                translate: [{ fields: ['x', 'y'] }],\n            },\n        },\n    };\n}\n//# sourceMappingURL=base.js.map","import { create } from './base';\nconst EDGE_PALETTE_OPTIONS = {\n    type: 'group',\n    color: [\n        '#637088',\n        '#0F55A6',\n        '#008383',\n        '#9C5D38',\n        '#8B53A6',\n        '#4E40A6',\n        '#8F6608',\n        '#3E801D',\n        '#A65383',\n        '#175E75',\n        '#0F8248',\n    ],\n};\nconst tokens = {\n    bgColor: '#000000',\n    comboColor: '#fdfdfd',\n    comboColorDisabled: '#d0e4ff',\n    comboStroke: '#99add1',\n    comboStrokeDisabled: '#969696',\n    edgeColor: '#637088',\n    edgeColorDisabled: '#637088',\n    edgeColorInactive: '#D0E4FF',\n    edgePaletteOptions: EDGE_PALETTE_OPTIONS,\n    nodeColor: '#1783ff',\n    nodeColorDisabled: '#D0E4FF',\n    nodeHaloStrokeOpacityActive: 0.25,\n    nodeHaloStrokeOpacitySelected: 0.45,\n    nodeIconOpacityInactive: 0.45,\n    nodeOpacityDisabled: 0.25,\n    nodeOpacityInactive: 0.45,\n    nodeStroke: '#d0e4ff',\n    textColor: '#ffffff',\n};\nexport const dark = create(tokens);\n//# sourceMappingURL=dark.js.map","import { create } from './base';\nconst tokens = {\n    bgColor: '#ffffff',\n    comboColor: '#99ADD1',\n    comboColorDisabled: '#f0f0f0',\n    comboStroke: '#99add1',\n    comboStrokeDisabled: '#d9d9d9',\n    edgeColor: '#99add1',\n    edgeColorDisabled: '#d9d9d9',\n    edgeColorInactive: '#1B324F',\n    nodeColor: '#1783ff',\n    nodeColorDisabled: '#1B324F',\n    nodeHaloStrokeOpacityActive: 0.15,\n    nodeHaloStrokeOpacitySelected: 0.25,\n    nodeIconOpacityInactive: 0.85,\n    nodeOpacityDisabled: 0.06,\n    nodeOpacityInactive: 0.25,\n    nodeStroke: '#000000',\n    textColor: '#000000',\n};\nexport const light = create(tokens);\n//# sourceMappingURL=light.js.map","import { BaseExtension } from '../registry/extension';\nexport class BaseTransform extends BaseExtension {\n    beforeDraw(data, context) {\n        return data;\n    }\n}\n//# sourceMappingURL=base-transform.js.map","import { idOf } from '../utils/id';\n/**\n * <zh/> 重新分配绘制任务\n *\n * <en/> Reassign drawing tasks\n * @param input - <zh>绘制数据 | <en>DrawData\n * @param type - <zh>类型 | <en>type\n * @param elementType - <zh>元素类型 | <en>element type\n * @param datum - <zh>数据 | <en>data\n * @param overwrite - <zh>是否覆盖现有数据 | <en>whether to overwrite existing data\n */\nexport function reassignTo(input, type, elementType, datum, overwrite) {\n    const id = idOf(datum);\n    const typeName = `${elementType}s`;\n    const exitsDatum = overwrite\n        ? datum\n        : input.add[typeName].get(id) || input.update[typeName].get(id) || input.remove[typeName].get(id) || datum;\n    Object.entries(input).forEach(([_type, value]) => {\n        if (type === _type)\n            value[typeName].set(id, exitsDatum);\n        else\n            value[typeName].delete(id);\n    });\n}\n//# sourceMappingURL=utils.js.map","import { TREE_KEY } from '../constants';\nimport { isCollapsed } from '../utils/collapsibility';\nimport { idOf } from '../utils/id';\nimport { BaseTransform } from './base-transform';\nimport { reassignTo } from './utils';\n// 如果在任务列表中不存在，则添加到任务列表\n// If it does not exist in the task list, add it to the task list\nconst weakAssignTo = (input, type, elementType, datum) => {\n    const typeName = `${elementType}s`;\n    const id = idOf(datum);\n    if (!input.add[typeName].has(id) && !input.update[typeName].has(id)) {\n        input[type][typeName].set(idOf(datum), datum);\n    }\n};\n/**\n * <zh/> 处理(树图)节点的收起和展开\n *\n * <en/> Process the collapse and expand of (tree)nodes\n */\nexport class CollapseExpandNode extends BaseTransform {\n    getElement(id) {\n        return this.context.element.getElement(id);\n    }\n    handleExpand(node, input) {\n        weakAssignTo(input, 'add', 'node', node);\n        if (isCollapsed(node))\n            return;\n        const id = idOf(node);\n        weakAssignTo(input, 'add', 'node', node);\n        const relatedEdges = this.context.model.getRelatedEdgesData(id, 'out');\n        relatedEdges.forEach((edge) => {\n            reassignTo(input, 'add', 'edge', edge);\n        });\n        const children = this.context.model.getChildrenData(id);\n        children.forEach((child) => {\n            this.handleExpand(child, input);\n        });\n    }\n    beforeDraw(input) {\n        const { graph, model } = this.context;\n        const { add: { nodes: nodesToAdd, edges: edgesToAdd }, update: { nodes: nodesToUpdate }, } = input;\n        const nodesToCollapse = new Map();\n        const nodesToExpand = new Map();\n        nodesToAdd.forEach((node, id) => {\n            if (isCollapsed(node))\n                nodesToCollapse.set(id, node);\n        });\n        // 如果创建了一条连接到收起的节点的边，则将其添加到待展开列表\n        // If an edge is created that connects to a collapsed node, add it to the list to be expanded\n        edgesToAdd.forEach((edge) => {\n            if (graph.getElementType(edge.source) !== 'node')\n                return;\n            const source = graph.getNodeData(edge.source);\n            if (isCollapsed(source))\n                nodesToCollapse.set(edge.source, source);\n        });\n        nodesToUpdate.forEach((node, id) => {\n            const nodeElement = this.getElement(id);\n            if (!nodeElement)\n                return;\n            const isCurrentCollapsed = nodeElement.attributes.collapsed;\n            if (isCollapsed(node)) {\n                if (!isCurrentCollapsed)\n                    nodesToCollapse.set(id, node);\n            }\n            else {\n                if (isCurrentCollapsed)\n                    nodesToExpand.set(id, node);\n            }\n        });\n        const handledNodes = new Set();\n        nodesToCollapse.forEach((node, id) => {\n            // 将子节点添加到待删除列表，并删除关联的边\n            // Add child nodes to the list to be deleted，and delete the associated edges\n            const descendants = model.getDescendantsData(id);\n            descendants.forEach((descendant) => {\n                const id = idOf(descendant);\n                if (handledNodes.has(id))\n                    return;\n                reassignTo(input, 'remove', 'node', descendant);\n                const relatedEdges = model.getRelatedEdgesData(id);\n                relatedEdges.forEach((edge) => {\n                    reassignTo(input, 'remove', 'edge', edge);\n                });\n                handledNodes.add(id);\n            });\n        });\n        nodesToExpand.forEach((node, id) => {\n            const ancestors = model.getAncestorsData(id, TREE_KEY);\n            // 如果祖先节点是收起的，添加到移除列表\n            // If the ancestor node is collapsed, add it to the removal list\n            if (ancestors.some(isCollapsed)) {\n                reassignTo(input, 'remove', 'node', node);\n                return;\n            }\n            this.handleExpand(node, input);\n        });\n        return input;\n    }\n}\n//# sourceMappingURL=collapse-expand-node.js.map","export class BaseEvent {\n    type;\n    constructor(type) {\n        this.type = type;\n    }\n}\nexport class GraphLifeCycleEvent extends BaseEvent {\n    data;\n    constructor(type, data) {\n        super(type);\n        this.data = data;\n    }\n}\nexport class AnimateEvent extends BaseEvent {\n    animationType;\n    animation;\n    data;\n    constructor(type, animationType, animation, data) {\n        super(type);\n        this.animationType = animationType;\n        this.animation = animation;\n        this.data = data;\n    }\n}\nexport class ElementLifeCycleEvent extends BaseEvent {\n    elementType;\n    data;\n    constructor(type, elementType, data) {\n        super(type);\n        this.elementType = elementType;\n        this.data = data;\n    }\n}\nexport class ViewportEvent extends BaseEvent {\n    data;\n    constructor(type, data) {\n        super(type);\n        this.data = data;\n    }\n}\n//# sourceMappingURL=events.js.map","import { Document } from '@antv/g';\nimport { isCombo, isEdge, isNode } from '../element';\nexport * from './events';\n/**\n * <zh/> 基于 Event 对象触发事件\n *\n * <en/> Trigger event based on Event object\n * @param emitter - <zh/> 事件目标 | <en/> event target\n * @param event - <zh/> 事件对象 | <en/> event object\n */\nexport function emit(emitter, event) {\n    emitter.emit(event.type, event);\n}\n/**\n * <zh/> 获取事件目标元素\n *\n * <en/> Get the event target element\n * @param shape - <zh/> 事件图形 | <en/> event shape\n * @returns <zh/> 目标元素 | <en/> target element\n * @remarks\n * <zh/> 事件响应大多数情况会命中元素的内部图形，通过该方法可以获取到其所属元素\n *\n * <en/> Most of the event responses will hit the internal graphics of the element, and this method can be used to get the element to which it belongs\n */\nexport function eventTargetOf(shape) {\n    if (!shape)\n        return null;\n    if (shape instanceof Document) {\n        return { type: 'canvas', element: shape };\n    }\n    let element = shape;\n    while (element) {\n        // 此判断条件不适用于 label 和 节点分开渲染的情况\n        // This condition is not applicable to the case where the label and node are rendered separately\n        if (isNode(element))\n            return { type: 'node', element };\n        if (isEdge(element))\n            return { type: 'edge', element };\n        if (isCombo(element))\n            return { type: 'combo', element };\n        element = element.parentElement;\n    }\n    return null;\n}\n//# sourceMappingURL=index.js.map","import { executor } from '../animations/executor';\nimport { createAnimationsProxy, getElementAnimationOptions, inferDefaultValue } from '../utils/animation';\nimport { getCachedStyle } from '../utils/cache';\nexport class Animation {\n    context;\n    constructor(context) {\n        this.context = context;\n    }\n    tasks = [];\n    animations = new Set();\n    getTasks() {\n        const tasks = [...this.tasks];\n        this.tasks = [];\n        return tasks;\n    }\n    add(context, callbacks) {\n        this.tasks.push([context, callbacks]);\n    }\n    animate(localAnimation, callbacks, extendOptions) {\n        callbacks?.before?.();\n        const animations = this.getTasks()\n            .map(([context, cb]) => {\n            const { element, elementType, stage } = context;\n            const options = getElementAnimationOptions(this.context.options, elementType, stage, localAnimation);\n            cb?.before?.();\n            const animation = executor(element, this.inferStyle(context, extendOptions), options);\n            if (animation) {\n                cb?.beforeAnimate?.(animation);\n                animation.finished.then(() => {\n                    cb?.afterAnimate?.(animation);\n                    cb?.after?.();\n                    this.animations.delete(animation);\n                });\n            }\n            else\n                cb?.after?.();\n            return animation;\n        })\n            .filter(Boolean);\n        animations.forEach((animation) => this.animations.add(animation));\n        const animation = createAnimationsProxy(animations);\n        if (animation) {\n            callbacks?.beforeAnimate?.(animation);\n            animation.finished.then(() => {\n                callbacks?.afterAnimate?.(animation);\n                callbacks?.after?.();\n                this.release();\n            });\n        }\n        else\n            callbacks?.after?.();\n        return animation;\n    }\n    /**\n     * <zh/> 推断额外的动画样式\n     *\n     * <en/> Infer additional animation styles\n     * @param context - <zh/> 动画上下文 | <en/> Animation context\n     * @param options - <zh/> 扩展选项 | <en/> Extend options\n     * @returns <zh/> 始态样式与终态样式 | <en/> Initial style and final style\n     */\n    inferStyle(context, options) {\n        const { element, elementType, stage, originalStyle, modifiedStyle } = context;\n        const fromStyle = { ...originalStyle };\n        const toStyle = { ...modifiedStyle };\n        const getCacheOpacity = () => getCachedStyle(element, 'opacity') ?? inferDefaultValue('opacity');\n        if (stage === 'enter') {\n            Object.assign(fromStyle, { opacity: 0 });\n        }\n        else if (stage === 'exit') {\n            Object.assign(toStyle, { opacity: 0 });\n        }\n        else if (stage === 'show') {\n            Object.assign(fromStyle, { opacity: 0 });\n            Object.assign(toStyle, { opacity: getCacheOpacity() });\n        }\n        else if (stage === 'hide') {\n            Object.assign(fromStyle, { opacity: getCacheOpacity() });\n            Object.assign(toStyle, { opacity: 0 });\n        }\n        else if (stage === 'collapse') {\n            const { collapse } = options || {};\n            const { target, descendants, position } = collapse;\n            if (elementType === 'node') {\n                // 为即将被删除的元素设置目标位置\n                // Set the target position for the element to be deleted\n                if (descendants.includes(element.id)) {\n                    const [x, y, z] = position;\n                    Object.assign(toStyle, { x, y, z });\n                }\n            }\n            else if (elementType === 'combo') {\n                if (element.id === target || descendants.includes(element.id)) {\n                    const [x, y] = position;\n                    Object.assign(toStyle, { x, y, childrenNode: fromStyle.childrenNode });\n                }\n            }\n            else if (elementType === 'edge') {\n                Object.assign(toStyle, { sourceNode: fromStyle.sourceNode, targetNode: fromStyle.targetNode });\n            }\n        }\n        else if (stage === 'expand') {\n            const { expand } = options || {};\n            const { target, descendants, position } = expand;\n            if (elementType === 'node') {\n                // 设置展开节点的起点位置\n                // Set the starting position of the expanded node\n                if (element.id === target || descendants.includes(element.id)) {\n                    const [x, y, z] = position;\n                    Object.assign(fromStyle, { x, y, z });\n                }\n            }\n            else if (elementType === 'combo') {\n                // 设置展开后的组合子元素\n                // Set the child elements of the expanded combo\n                if (element.id === target || descendants.includes(element.id)) {\n                    const [x, y, z] = position;\n                    Object.assign(fromStyle, { x, y, z, childrenNode: toStyle.childrenNode });\n                }\n            }\n            else if (elementType === 'edge') {\n                // 设置展开后的边的起点和终点\n                // Set the starting point and end point of the edge after expansion\n                Object.assign(fromStyle, { sourceNode: toStyle.sourceNode, targetNode: toStyle.targetNode });\n            }\n        }\n        return [fromStyle, toStyle];\n    }\n    stop() {\n        this.animations.forEach((animation) => animation.cancel());\n    }\n    clear() {\n        this.tasks = [];\n    }\n    /**\n     * <zh/> 释放存量动画对象\n     *\n     * <en/> Release stock animation objects\n     * @description see: https://github.com/antvis/G/issues/1731\n     */\n    release() {\n        const { canvas } = this.context;\n        // @ts-expect-error private property\n        const animationsWithPromises = canvas.document?.timeline?.animationsWithPromises;\n        if (animationsWithPromises) {\n            // @ts-expect-error private property\n            canvas.document.timeline.animationsWithPromises = animationsWithPromises.filter((animation) => animation.playState !== 'finished');\n        }\n    }\n    destroy() {\n        this.stop();\n        this.animations.clear();\n        this.tasks = [];\n    }\n}\n//# sourceMappingURL=animation.js.map","import { GraphEvent } from '../constants';\nimport { GraphLifeCycleEvent } from '../utils/event';\nexport class BatchController {\n    context;\n    batchCount = 0;\n    constructor(context) {\n        this.context = context;\n    }\n    emit(event) {\n        const { graph } = this.context;\n        graph.emit(event.type, event);\n    }\n    startBatch(initiate = true) {\n        this.batchCount++;\n        if (this.batchCount === 1)\n            this.emit(new GraphLifeCycleEvent(GraphEvent.BATCH_START, { initiate }));\n    }\n    endBatch() {\n        this.batchCount--;\n        if (this.batchCount === 0)\n            this.emit(new GraphLifeCycleEvent(GraphEvent.BATCH_END));\n    }\n    get isBatching() {\n        return this.batchCount > 0;\n    }\n    destroy() {\n        // @ts-ignore\n        this.context = null;\n    }\n}\n//# sourceMappingURL=batch.js.map","import { CommonEvent, ContainerEvent } from '../constants';\nimport { ExtensionController } from '../registry/extension';\nimport { isToBeDestroyed } from '../utils/element';\nimport { eventTargetOf } from '../utils/event';\nexport class BehaviorController extends ExtensionController {\n    /**\n     * <zh/> 当前事件的目标\n     *\n     *  <en/> The current event target\n     */\n    currentTarget = null;\n    currentTargetType = null;\n    category = 'behavior';\n    constructor(context) {\n        super(context);\n        this.forwardEvents();\n        this.setBehaviors(this.context.options.behaviors || []);\n    }\n    setBehaviors(behaviors) {\n        this.setExtensions(behaviors);\n    }\n    forwardEvents() {\n        const container = this.context.canvas.getContainer();\n        if (container) {\n            [ContainerEvent.KEY_DOWN, ContainerEvent.KEY_UP].forEach((name) => {\n                container.addEventListener(name, this.forwardContainerEvents);\n            });\n        }\n        const canvas = this.context.canvas.document;\n        if (canvas) {\n            [\n                CommonEvent.CLICK,\n                CommonEvent.DBLCLICK,\n                CommonEvent.POINTER_OVER,\n                CommonEvent.POINTER_LEAVE,\n                CommonEvent.POINTER_ENTER,\n                CommonEvent.POINTER_MOVE,\n                CommonEvent.POINTER_OUT,\n                CommonEvent.POINTER_DOWN,\n                CommonEvent.POINTER_UP,\n                CommonEvent.CONTEXT_MENU,\n                CommonEvent.DRAG_START,\n                CommonEvent.DRAG,\n                CommonEvent.DRAG_END,\n                CommonEvent.DRAG_ENTER,\n                CommonEvent.DRAG_OVER,\n                CommonEvent.DRAG_LEAVE,\n                CommonEvent.DROP,\n                CommonEvent.WHEEL,\n            ].forEach((name) => {\n                canvas.addEventListener(name, this.forwardCanvasEvents);\n            });\n        }\n    }\n    forwardCanvasEvents = (event) => {\n        const { target: originalTarget } = event;\n        const target = eventTargetOf(originalTarget);\n        if (!target)\n            return;\n        const { graph, canvas } = this.context;\n        const { type: targetType, element: targetElement } = target;\n        // 即将销毁或已销毁的元素不再触发事件\n        // Elements that are about to be destroyed or have been destroyed no longer trigger events\n        if ('destroyed' in targetElement && (isToBeDestroyed(targetElement) || targetElement.destroyed))\n            return;\n        const { type, detail, button } = event;\n        const stdEvent = { ...event, target: targetElement, targetType, originalTarget };\n        if (type === CommonEvent.POINTER_MOVE) {\n            if (this.currentTarget !== targetElement) {\n                if (this.currentTarget) {\n                    graph.emit(`${this.currentTargetType}:${CommonEvent.POINTER_LEAVE}`, {\n                        ...stdEvent,\n                        type: CommonEvent.POINTER_LEAVE,\n                        target: this.currentTarget,\n                    });\n                }\n                if (targetElement) {\n                    Object.assign(stdEvent, { type: CommonEvent.POINTER_ENTER });\n                    graph.emit(`${targetType}:${CommonEvent.POINTER_ENTER}`, stdEvent);\n                }\n            }\n            this.currentTarget = targetElement;\n            this.currentTargetType = targetType;\n        }\n        // 非右键点击事件 / Click event except right click\n        if (!(type === CommonEvent.CLICK && button === 2)) {\n            graph.emit(`${targetType}:${type}`, stdEvent);\n            graph.emit(type, stdEvent);\n        }\n        // 双击事件 / Double click event\n        if (type === CommonEvent.CLICK && detail === 2) {\n            Object.assign(stdEvent, { type: CommonEvent.DBLCLICK });\n            graph.emit(`${targetType}:${CommonEvent.DBLCLICK}`, stdEvent);\n            graph.emit(CommonEvent.DBLCLICK, stdEvent);\n        }\n        // 右键菜单 / Contextmenu\n        if (type === CommonEvent.POINTER_DOWN && button === 2) {\n            Object.assign(stdEvent, {\n                type: CommonEvent.CONTEXT_MENU,\n                preventDefault: () => {\n                    canvas.getContainer()?.addEventListener(CommonEvent.CONTEXT_MENU, (e) => e.preventDefault(), {\n                        once: true,\n                    });\n                },\n            });\n            graph.emit(`${targetType}:${CommonEvent.CONTEXT_MENU}`, stdEvent);\n            graph.emit(CommonEvent.CONTEXT_MENU, stdEvent);\n        }\n    };\n    forwardContainerEvents = (event) => {\n        this.context.graph.emit(event.type, event);\n    };\n    destroy() {\n        const container = this.context.canvas.getContainer();\n        if (container) {\n            [ContainerEvent.KEY_DOWN, ContainerEvent.KEY_UP].forEach((name) => {\n                container.removeEventListener(name, this.forwardContainerEvents);\n            });\n        }\n        this.context.canvas.document.removeAllEventListeners();\n        super.destroy();\n    }\n}\n//# sourceMappingURL=behavior.js.map","import { CanvasEvent, Canvas as GCanvas } from '@antv/g';\nimport { Renderer as CanvasRenderer } from '@antv/g-canvas';\nimport { Plugin as DragNDropPlugin } from '@antv/g-plugin-dragndrop';\nimport { createDOM } from '@antv/util';\nimport { getBBoxSize, getCombinedBBox } from '../utils/bbox';\nimport { parsePoint, toPointObject } from '../utils/point';\nconst layersName = ['background', 'main', 'label', 'transient'];\nexport class Canvas {\n    extends;\n    config;\n    getConfig() {\n        return this.config;\n    }\n    getLayer(layer = 'main') {\n        return this.extends.layers[layer];\n    }\n    /**\n     * <zh/> 获取所有图层\n     *\n     * <en/> Get all layers\n     * @returns <zh/> 图层 <en/> Layer\n     */\n    getLayers() {\n        return this.extends.layers;\n    }\n    /**\n     * <zh/> 获取渲染器\n     *\n     * <en/> Get renderer\n     * @param layer - <zh/> 图层 <en/> Layer\n     * @returns <zh/> 渲染器 <en/> Renderer\n     */\n    getRenderer(layer) {\n        return this.extends.renderers[layer];\n    }\n    /**\n     * <zh/> 获取相机\n     *\n     * <en/> Get camera\n     * @param layer - <zh/> 图层 <en/> Layer\n     * @returns <zh/> 相机 <en/> Camera\n     */\n    getCamera(layer = 'main') {\n        return this.getLayer(layer).getCamera();\n    }\n    getRoot(layer = 'main') {\n        return this.getLayer(layer).getRoot();\n    }\n    getContextService(layer = 'main') {\n        return this.getLayer(layer).getContextService();\n    }\n    setCursor(cursor) {\n        this.config.cursor = cursor;\n        this.getLayer().setCursor(cursor);\n    }\n    get document() {\n        return this.getLayer().document;\n    }\n    get context() {\n        return this.getLayer().context;\n    }\n    constructor(config) {\n        this.config = config;\n        const { renderer, background, cursor, ...restConfig } = config;\n        const renderers = createRenderers(renderer);\n        const layers = Object.fromEntries(layersName.map((layer) => {\n            const canvas = new GCanvas({\n                ...restConfig,\n                supportsMutipleCanvasesInOneContainer: true,\n                renderer: renderers[layer],\n                background: layer === 'background' ? background : undefined,\n            });\n            return [layer, canvas];\n        }));\n        configCanvasDom(layers);\n        this.extends = {\n            config,\n            renderer,\n            renderers,\n            layers,\n        };\n    }\n    get ready() {\n        return Promise.all(Object.entries(this.getLayers()).map(([, canvas]) => canvas.ready));\n    }\n    resize(width, height) {\n        Object.assign(this.extends.config, { width, height });\n        Object.values(this.getLayers()).forEach((canvas) => canvas.resize(width, height));\n    }\n    getBounds() {\n        return getCombinedBBox(Object.values(this.getLayers())\n            .map((canvas) => canvas.document.documentElement)\n            .filter((el) => el.childNodes.length > 0)\n            .map((el) => el.getBounds()));\n    }\n    getContainer() {\n        const container = this.extends.config.container;\n        return typeof container === 'string' ? document.getElementById(container) : container;\n    }\n    getSize() {\n        return [this.extends.config.width || 0, this.extends.config.height || 0];\n    }\n    appendChild(child, index) {\n        const layer = (child.style?.$layer || 'main');\n        return this.getLayer(layer).appendChild(child, index);\n    }\n    setRenderer(renderer) {\n        if (renderer === this.extends.renderer)\n            return;\n        const renderers = createRenderers(renderer);\n        this.extends.renderers = renderers;\n        Object.entries(renderers).forEach(([layer, instance]) => this.getLayer(layer).setRenderer(instance));\n        configCanvasDom(this.getLayers());\n    }\n    getCanvasByViewport(point) {\n        return parsePoint(this.getLayer().viewport2Canvas(toPointObject(point)));\n    }\n    getViewportByCanvas(point) {\n        return parsePoint(this.getLayer().canvas2Viewport(toPointObject(point)));\n    }\n    getViewportByClient(point) {\n        return parsePoint(this.getLayer().client2Viewport(toPointObject(point)));\n    }\n    getClientByViewport(point) {\n        return parsePoint(this.getLayer().viewport2Client(toPointObject(point)));\n    }\n    getClientByCanvas(point) {\n        return this.getClientByViewport(this.getViewportByCanvas(point));\n    }\n    getCanvasByClient(point) {\n        const main = this.getLayer();\n        const viewportPoint = main.client2Viewport(toPointObject(point));\n        return parsePoint(main.viewport2Canvas(viewportPoint));\n    }\n    async toDataURL(options = {}) {\n        const devicePixelRatio = window.devicePixelRatio || 1;\n        const { mode = 'viewport', ...restOptions } = options;\n        let [startX, startY, width, height] = [0, 0, 0, 0];\n        if (mode === 'viewport') {\n            [width, height] = this.getSize();\n        }\n        else if (mode === 'overall') {\n            const bounds = this.getBounds();\n            const size = getBBoxSize(bounds);\n            [startX, startY] = bounds.min;\n            [width, height] = size;\n        }\n        const container = createDOM('<div id=\"virtual-image\"></div>');\n        const offscreenCanvas = new GCanvas({\n            width,\n            height,\n            renderer: new CanvasRenderer(),\n            devicePixelRatio,\n            container,\n            background: this.extends.config.background,\n        });\n        await offscreenCanvas.ready;\n        offscreenCanvas.appendChild(this.getLayer('background').getRoot().cloneNode(true));\n        offscreenCanvas.appendChild(this.getRoot().cloneNode(true));\n        // Handle label canvas\n        const label = this.getLayer('label').getRoot().cloneNode(true);\n        const originCanvasPosition = offscreenCanvas.viewport2Canvas({ x: 0, y: 0 });\n        const currentCanvasPosition = this.getCanvasByViewport([0, 0]);\n        label.translate([\n            currentCanvasPosition[0] - originCanvasPosition.x,\n            currentCanvasPosition[1] - originCanvasPosition.y,\n        ]);\n        label.scale(1 / this.getCamera().getZoom());\n        offscreenCanvas.appendChild(label);\n        offscreenCanvas.appendChild(this.getLayer('transient').getRoot().cloneNode(true));\n        const camera = this.getCamera();\n        const offscreenCamera = offscreenCanvas.getCamera();\n        if (mode === 'viewport') {\n            offscreenCamera.setZoom(camera.getZoom());\n            offscreenCamera.setPosition(camera.getPosition());\n            offscreenCamera.setFocalPoint(camera.getFocalPoint());\n        }\n        else if (mode === 'overall') {\n            const [x, y, z] = offscreenCamera.getPosition();\n            const [fx, fy, fz] = offscreenCamera.getFocalPoint();\n            offscreenCamera.setPosition([x + startX, y + startY, z]);\n            offscreenCamera.setFocalPoint([fx + startX, fy + startY, fz]);\n        }\n        const contextService = offscreenCanvas.getContextService();\n        return new Promise((resolve) => {\n            offscreenCanvas.addEventListener(CanvasEvent.RERENDER, async () => {\n                // 等待图片渲染完成 / Wait for the image to render\n                await new Promise((r) => setTimeout(r, 300));\n                const url = await contextService.toDataURL(restOptions);\n                resolve(url);\n            });\n        });\n    }\n    destroy() {\n        Object.values(this.getLayers()).forEach((canvas) => {\n            const camera = canvas.getCamera();\n            camera.cancelLandmarkAnimation();\n            canvas.destroy();\n        });\n    }\n}\n/**\n * <zh/> 创建渲染器\n *\n * <en/> Create renderers\n * @param renderer - <zh/> 渲染器创建器 <en/> Renderer creator\n * @returns <zh/> 渲染器 <en/> Renderer\n */\nfunction createRenderers(renderer) {\n    return Object.fromEntries(layersName.map((layer) => {\n        const instance = renderer?.(layer) || new CanvasRenderer();\n        if (layer === 'main') {\n            instance.registerPlugin(new DragNDropPlugin({\n                isDocumentDraggable: true,\n                isDocumentDroppable: true,\n                dragstartDistanceThreshold: 10,\n                dragstartTimeThreshold: 100,\n            }));\n        }\n        else {\n            instance.unregisterPlugin(instance.getPlugin('dom-interaction'));\n        }\n        return [layer, instance];\n    }));\n}\n/**\n * <zh/> 配置画布 DOM\n *\n * <en/> Configure canvas DOM\n * @param layers - <zh/> 画布 <en/> Canvas\n */\nfunction configCanvasDom(layers) {\n    Object.entries(layers).forEach(([layer, canvas]) => {\n        const domElement = canvas.getContextService().getDomElement();\n        domElement.style.position = 'absolute';\n        domElement.style.outline = 'none';\n        domElement.tabIndex = 1;\n        if (layer !== 'main')\n            domElement.style.pointerEvents = 'none';\n    });\n}\n//# sourceMappingURL=canvas.js.map","/**\n * Create DOM from a html string.\n * @param str\n * @returns\n */\nexport function createDOM(str) {\n    var container = document.createElement('div');\n    container.innerHTML = str;\n    var dom = container.childNodes[0];\n    if (dom && container.contains(dom)) {\n        container.removeChild(dom);\n    }\n    return dom;\n}\n//# sourceMappingURL=create-dom.js.map","import { get } from '@antv/util';\n/**\n * <zh/> 合并两个 节点/边/Combo 的数据\n *\n * <en/> Merge the data of two nodes/edges/combos\n * @param original - <zh/> 原始数据 | <en/> original data\n * @param modified - <zh/> 待合并的数据 | <en/> data to be merged\n * @returns <zh/> 合并后的数据 | <en/> merged data\n * @remarks\n * <zh/> 只会合并第一层的数据，data、style 下的二级数据会被覆盖\n *\n * <en/> Only the first level of data will be merged, the second level of data under data and style will be overwritten\n */\nexport function mergeElementsData(original, modified) {\n    const { data: originalData, style: originalStyle, ...originalAttrs } = original;\n    const { data: modifiedData, style: modifiedStyle, ...modifiedAttrs } = modified;\n    const result = {\n        ...originalAttrs,\n        ...modifiedAttrs,\n    };\n    if (originalData || modifiedData) {\n        Object.assign(result, { data: { ...originalData, ...modifiedData } });\n    }\n    if (originalStyle || modifiedStyle) {\n        Object.assign(result, { style: { ...originalStyle, ...modifiedStyle } });\n    }\n    return result;\n}\n/**\n * <zh/> 克隆元素数据\n *\n * <en/> Clone clement data\n * @param data - <zh/> 待克隆的数据 | <en/> data to be cloned\n * @returns <zh/> 克隆后的数据 | <en/> cloned data\n * @remarks\n * <zh/> 只会克隆到第二层（data、style）\n *\n * <en/> Only clone to the second level (data, style)\n */\nexport function cloneElementData(data) {\n    const { data: customData, style, ...restAttrs } = data;\n    const clonedData = restAttrs;\n    if (customData)\n        clonedData.data = { ...customData };\n    if (style)\n        clonedData.style = { ...style };\n    return clonedData;\n}\n/**\n * <zh/> 判断数据是否为空\n *\n * <en/> Determine if the data is empty\n * @param data - <zh/> 图数据 | <en/> graph data\n * @returns <zh/> 是否为空 | <en/> is empty\n */\nexport function isEmptyData(data) {\n    return !get(data, ['nodes', 'length']) && !get(data, ['edges', 'length']) && !get(data, ['combos', 'length']);\n}\n//# sourceMappingURL=data.js.map","import { TREE_KEY } from '../constants';\nimport { idOf } from './id';\nimport { isEdgeData } from './is';\n/**\n * <zh/> 将 NodeData、EdgeData、ComboData 转换为 graphlib 的数据结构\n *\n * <en/> Transform NodeData, EdgeData, ComboData to graphlib data structure\n * @param data - <zh/> 节点、边、combo 数据 | <en/> node, combo data\n * @returns <zh/> graphlib 数据 | <en/> graphlib data\n */\nexport function toGraphlibData(data) {\n    const { id = idOf(data), style, data: customData, ...rest } = data;\n    const _data = { ...data, style: { ...style }, data: { ...customData } };\n    if (isEdgeData(data))\n        return { id, data: _data, ...rest };\n    return { id, data: _data };\n}\n/**\n * <zh/> 将 Node、Edge、Combo 转换为 G6 的数据结构\n *\n * <en/> Transform Node, Edge, Combo to G6 data structure\n * @param data - <zh/> graphlib 节点、边、Combo 数据 | <en/> graphlib node, edge, combo data\n * @returns <zh/> G6 数据 | <en/> G6 data\n */\nexport function toG6Data(data) {\n    return data.data;\n}\n/**\n * <zh/> 创建树形结构\n *\n * <en/> Create tree structure\n * @param model - <zh/> 数据模型 | <en/> data model\n */\nexport function createTreeStructure(model) {\n    if (model.hasTreeStructure(TREE_KEY))\n        return;\n    model.attachTreeStructure(TREE_KEY);\n    const edges = model.getAllEdges();\n    for (const edge of edges) {\n        const { source, target } = edge;\n        model.setParent(target, source, TREE_KEY);\n    }\n}\n//# sourceMappingURL=graphlib.js.map","import { Graph as GraphLib } from '@antv/graphlib';\nimport { isEqual, isUndefined, uniq } from '@antv/util';\nimport { COMBO_KEY, ChangeType, TREE_KEY } from '../constants';\nimport { cloneElementData, mergeElementsData } from '../utils/data';\nimport { arrayDiff } from '../utils/diff';\nimport { toG6Data, toGraphlibData } from '../utils/graphlib';\nimport { idOf, parentIdOf } from '../utils/id';\nimport { positionOf } from '../utils/position';\nimport { format, print } from '../utils/print';\nimport { dfs } from '../utils/traverse';\nimport { add } from '../utils/vector';\nexport class DataController {\n    model;\n    /**\n     * <zh/> 最近一次删除的 combo 的 id\n     *\n     * <en/> The ids of the last deleted combos\n     * @remarks\n     * <zh/> 当删除 combo 后，会将其 id 从 comboIds 中移除，此时根据 Graphlib 的 changes 事件获取到的 NodeRemoved 无法区分是 combo 还是 node。\n     * 因此需要记录最近一次删除的 combo 的 id，并用于 isCombo 的判断\n     *\n     * <en/> When the combo is deleted, its id will be removed from comboIds. At this time, the NodeRemoved obtained according to the changes event of Graphlib cannot distinguish whether it is a combo or a node.\n     * Therefore, it is necessary to record the id of the last deleted combo and use it to judge isCombo\n     */\n    latestRemovedComboIds = new Set();\n    comboIds = new Set();\n    /**\n     * <zh/> 获取详细数据变更\n     *\n     * <en/> Get detailed data changes\n     */\n    changes = [];\n    /**\n     * <zh/> 批处理计数器\n     *\n     * <en/> Batch processing counter\n     */\n    batchCount = 0;\n    /**\n     * <zh/> 是否处于无痕模式\n     *\n     * <en/> Whether it is in traceless mode\n     */\n    isTraceless = false;\n    constructor() {\n        this.model = new GraphLib();\n    }\n    pushChange(change) {\n        if (this.isTraceless)\n            return;\n        const { type } = change;\n        if (type === ChangeType.NodeUpdated || type === ChangeType.EdgeUpdated || type === ChangeType.ComboUpdated) {\n            const { value, original } = change;\n            this.changes.push({ value: cloneElementData(value), original: cloneElementData(original), type });\n        }\n        else {\n            this.changes.push({ value: cloneElementData(change.value), type });\n        }\n    }\n    /**\n     * <zh/> [警告] 此 API 仅供 Element Controller 调用\n     *\n     * <en/> [WARNING] This API is only for Element Controller\n     * @returns <zh/> 数据变更 | <en/> data changes\n     */\n    getChanges() {\n        return this.changes;\n    }\n    clearChanges() {\n        this.changes = [];\n    }\n    batch(callback) {\n        this.batchCount++;\n        this.model.batch(callback);\n        this.batchCount--;\n    }\n    /**\n     * <zh/> 执行操作而不会留下记录\n     *\n     * <en/> Perform operations without leaving records\n     * @param callback - <zh/> 回调函数 | <en/> callback function\n     * @remarks\n     * <zh/> 通常用于运行时调整元素并同步数据，避免触发数据变更导致重绘\n     *\n     * <en/> Usually used to adjust elements at runtime and synchronize data to avoid triggering data changes and causing redraws\n     */\n    silence(callback) {\n        this.isTraceless = true;\n        callback();\n        this.isTraceless = false;\n    }\n    isCombo(id) {\n        return this.comboIds.has(id) || this.latestRemovedComboIds.has(id);\n    }\n    getData() {\n        return {\n            nodes: this.getNodeData(),\n            edges: this.getEdgeData(),\n            combos: this.getComboData(),\n        };\n    }\n    getNodeData(ids) {\n        return this.model.getAllNodes().reduce((acc, node) => {\n            const data = toG6Data(node);\n            if (this.isCombo(idOf(data)))\n                return acc;\n            if (ids === undefined)\n                acc.push(data);\n            else\n                ids.includes(idOf(data)) && acc.push(data);\n            return acc;\n        }, []);\n    }\n    getEdgeDatum(id) {\n        return toG6Data(this.model.getEdge(id));\n    }\n    getEdgeData(ids) {\n        return this.model.getAllEdges().reduce((acc, edge) => {\n            const data = toG6Data(edge);\n            if (ids === undefined)\n                acc.push(data);\n            else\n                ids.includes(idOf(data)) && acc.push(data);\n            return acc;\n        }, []);\n    }\n    getComboData(ids) {\n        return this.model.getAllNodes().reduce((acc, combo) => {\n            const data = toG6Data(combo);\n            if (!this.isCombo(idOf(data)))\n                return acc;\n            if (ids === undefined)\n                acc.push(data);\n            else\n                ids.includes(idOf(data)) && acc.push(data);\n            return acc;\n        }, []);\n    }\n    getAncestorsData(id, hierarchyKey) {\n        const { model } = this;\n        if (!model.hasNode(id) || !model.hasTreeStructure(hierarchyKey))\n            return [];\n        return model.getAncestors(id, hierarchyKey).map(toG6Data);\n    }\n    getDescendantsData(id) {\n        const root = this.getElementDataById(id);\n        const data = [];\n        dfs(root, (node) => {\n            if (node !== root)\n                data.push(node);\n        }, (node) => this.getChildrenData(idOf(node)), 'TB');\n        return data;\n    }\n    getParentData(id, hierarchyKey) {\n        const { model } = this;\n        if (!hierarchyKey) {\n            print.warn('The hierarchy structure key is not specified');\n            return undefined;\n        }\n        if (!model.hasNode(id) || !model.hasTreeStructure(hierarchyKey))\n            return undefined;\n        const parent = model.getParent(id, hierarchyKey);\n        return parent ? toG6Data(parent) : undefined;\n    }\n    getChildrenData(id) {\n        const structureKey = this.getElementType(id) === 'node' ? TREE_KEY : COMBO_KEY;\n        const { model } = this;\n        if (!model.hasNode(id) || !model.hasTreeStructure(structureKey))\n            return [];\n        return model.getChildren(id, structureKey).map(toG6Data);\n    }\n    /**\n     * <zh/> 获取指定类型元素的数据\n     *\n     * <en/> Get the data of the specified type of element\n     * @param elementType - <zh/> 元素类型 | <en/> element type\n     * @returns <zh/> 元素数据 | <en/> element data\n     */\n    getElementsDataByType(elementType) {\n        if (elementType === 'node')\n            return this.getNodeData();\n        if (elementType === 'edge')\n            return this.getEdgeData();\n        if (elementType === 'combo')\n            return this.getComboData();\n        return [];\n    }\n    /**\n     * <zh/> 根据 ID 获取元素的数据，不用关心元素的类型\n     *\n     * <en/> Get the data of the element by ID, no need to care about the type of the element\n     * @param id - <zh/> 元素 ID 数组 | <en/> element ID array\n     * @returns <zh/> 元素数据 | <en/> data of the element\n     */\n    getElementDataById(id) {\n        const type = this.getElementType(id);\n        if (type === 'edge')\n            return this.getEdgeDatum(id);\n        return this.getNodeLikeDatum(id);\n    }\n    /**\n     * <zh/> 获取节点的数据\n     *\n     * <en/> Get node data\n     * @param id - <zh/> 节点 ID | <en/> node ID\n     * @returns <zh/> 节点数据 | <en/> node data\n     */\n    getNodeLikeDatum(id) {\n        const data = this.model.getNode(id);\n        return toG6Data(data);\n    }\n    /**\n     * <zh/> 获取所有节点和 combo 的数据\n     *\n     * <en/> Get all node and combo data\n     * @param ids - <zh/> 节点和 combo ID 数组 | <en/> node and combo ID array\n     * @returns <zh/> 节点和 combo 的数据 | <en/> node and combo data\n     */\n    getNodeLikeData(ids) {\n        return this.model.getAllNodes().reduce((acc, node) => {\n            const data = toG6Data(node);\n            if (ids)\n                ids.includes(idOf(data)) && acc.push(data);\n            else\n                acc.push(data);\n            return acc;\n        }, []);\n    }\n    getElementDataByState(elementType, state) {\n        const elementData = this.getElementsDataByType(elementType);\n        return elementData.filter((datum) => datum.states?.includes(state));\n    }\n    getElementState(id) {\n        return this.getElementDataById(id)?.states || [];\n    }\n    hasNode(id) {\n        return this.model.hasNode(id) && !this.isCombo(id);\n    }\n    hasEdge(id) {\n        return this.model.hasEdge(id);\n    }\n    hasCombo(id) {\n        return this.model.hasNode(id) && this.isCombo(id);\n    }\n    getRelatedEdgesData(id, direction = 'both') {\n        return this.model.getRelatedEdges(id, direction).map(toG6Data);\n    }\n    getNeighborNodesData(id) {\n        return this.model.getNeighbors(id).map(toG6Data);\n    }\n    setData(data) {\n        const { nodes: modifiedNodes = [], edges: modifiedEdges = [], combos: modifiedCombos = [] } = data;\n        const { nodes: originalNodes, edges: originalEdges, combos: originalCombos } = this.getData();\n        const nodeDiff = arrayDiff(originalNodes, modifiedNodes, (node) => idOf(node));\n        const edgeDiff = arrayDiff(originalEdges, modifiedEdges, (edge) => idOf(edge));\n        const comboDiff = arrayDiff(originalCombos, modifiedCombos, (combo) => idOf(combo));\n        this.batch(() => {\n            this.addData({\n                nodes: nodeDiff.enter,\n                edges: edgeDiff.enter,\n                combos: comboDiff.enter,\n            });\n            this.updateData({\n                nodes: nodeDiff.update,\n                edges: edgeDiff.update,\n                combos: comboDiff.update,\n            });\n            this.removeData({\n                nodes: nodeDiff.exit.map(idOf),\n                edges: edgeDiff.exit.map(idOf),\n                combos: comboDiff.exit.map(idOf),\n            });\n        });\n    }\n    addData(data) {\n        const { nodes, edges, combos } = data;\n        this.batch(() => {\n            // add combo first\n            this.addComboData(combos);\n            this.addNodeData(nodes);\n            this.addEdgeData(edges);\n        });\n    }\n    addNodeData(nodes = []) {\n        if (!nodes.length)\n            return;\n        this.model.addNodes(nodes.map((node) => {\n            this.pushChange({ value: node, type: ChangeType.NodeAdded });\n            return toGraphlibData(node);\n        }));\n        this.updateNodeLikeHierarchy(nodes);\n    }\n    addEdgeData(edges = []) {\n        if (!edges.length)\n            return;\n        this.model.addEdges(edges.map((edge) => {\n            this.pushChange({ value: edge, type: ChangeType.EdgeAdded });\n            return toGraphlibData(edge);\n        }));\n    }\n    addComboData(combos = []) {\n        if (!combos.length)\n            return;\n        const { model } = this;\n        if (!model.hasTreeStructure(COMBO_KEY)) {\n            model.attachTreeStructure(COMBO_KEY);\n        }\n        model.addNodes(combos.map((combo) => {\n            this.comboIds.add(idOf(combo));\n            this.pushChange({ value: combo, type: ChangeType.ComboAdded });\n            return toGraphlibData(combo);\n        }));\n        this.updateNodeLikeHierarchy(combos);\n    }\n    addChildrenData(parentId, childrenData) {\n        const parentData = this.getNodeLikeDatum(parentId);\n        const childrenId = childrenData.map(idOf);\n        this.addNodeData(childrenData);\n        this.updateNodeData([{ id: parentId, children: [...(parentData.children || []), ...childrenId] }]);\n        this.addEdgeData(childrenId.map((childId) => ({ source: parentId, target: childId })));\n    }\n    updateNodeLikeHierarchy(data) {\n        if (!this.enableUpdateNodeLikeHierarchy)\n            return;\n        const { model } = this;\n        data.forEach((datum) => {\n            const id = idOf(datum);\n            model.attachTreeStructure(COMBO_KEY);\n            this.setParent(id, parentIdOf(datum), COMBO_KEY);\n            const children = datum.children;\n            if (children !== undefined) {\n                model.attachTreeStructure(TREE_KEY);\n                const _children = children.filter((child) => model.hasNode(child));\n                _children.forEach((child) => this.setParent(child, id, TREE_KEY));\n                if (_children.length !== children.length) {\n                    // 从数据中移除不存在的子节点\n                    // Remove non-existent child nodes from the data\n                    this.updateNodeData([{ id, children: _children }]);\n                }\n            }\n        });\n    }\n    enableUpdateNodeLikeHierarchy = true;\n    /**\n     * <zh/> 执行变更时不要更新节点层次结构\n     *\n     * <en/> Do not update the node hierarchy when executing changes\n     * @param callback - <zh/> 变更函数 | <en/> change function\n     */\n    preventUpdateNodeLikeHierarchy(callback) {\n        this.enableUpdateNodeLikeHierarchy = false;\n        callback();\n        this.enableUpdateNodeLikeHierarchy = true;\n    }\n    updateData(data) {\n        const { nodes, edges, combos } = data;\n        this.batch(() => {\n            this.updateNodeData(nodes);\n            this.updateComboData(combos);\n            this.updateEdgeData(edges);\n        });\n    }\n    updateNodeData(nodes = []) {\n        if (!nodes.length)\n            return;\n        const { model } = this;\n        this.batch(() => {\n            const modifiedNodes = [];\n            nodes.forEach((modifiedNode) => {\n                const id = idOf(modifiedNode);\n                const originalNode = toG6Data(model.getNode(id));\n                if (isEqual(originalNode, modifiedNode))\n                    return;\n                const value = mergeElementsData(originalNode, modifiedNode);\n                this.pushChange({ value, original: originalNode, type: ChangeType.NodeUpdated });\n                model.mergeNodeData(id, value);\n                modifiedNodes.push(value);\n            });\n            this.updateNodeLikeHierarchy(modifiedNodes);\n        });\n    }\n    /**\n     * <zh/> 将所有数据提交到变更记录中以进行重绘\n     *\n     * <en/> Submit all data to the change record for redrawing\n     */\n    refreshData() {\n        const { nodes, edges, combos } = this.getData();\n        nodes.forEach((node) => {\n            this.pushChange({ value: node, original: node, type: ChangeType.NodeUpdated });\n        });\n        edges.forEach((edge) => {\n            this.pushChange({ value: edge, original: edge, type: ChangeType.EdgeUpdated });\n        });\n        combos.forEach((combo) => {\n            this.pushChange({ value: combo, original: combo, type: ChangeType.ComboUpdated });\n        });\n    }\n    syncNodeDatum(datum) {\n        const { model } = this;\n        const id = idOf(datum);\n        const original = toG6Data(model.getNode(id));\n        const value = mergeElementsData(original, datum);\n        model.mergeNodeData(id, value);\n    }\n    updateEdgeData(edges = []) {\n        if (!edges.length)\n            return;\n        const { model } = this;\n        this.batch(() => {\n            edges.forEach((modifiedEdge) => {\n                const id = idOf(modifiedEdge);\n                const originalEdge = toG6Data(model.getEdge(id));\n                if (isEqual(originalEdge, modifiedEdge))\n                    return;\n                if (modifiedEdge.source && originalEdge.source !== modifiedEdge.source) {\n                    model.updateEdgeSource(id, modifiedEdge.source);\n                }\n                if (modifiedEdge.target && originalEdge.target !== modifiedEdge.target) {\n                    model.updateEdgeTarget(id, modifiedEdge.target);\n                }\n                const updatedData = mergeElementsData(originalEdge, modifiedEdge);\n                this.pushChange({ value: updatedData, original: originalEdge, type: ChangeType.EdgeUpdated });\n                model.mergeEdgeData(id, updatedData);\n            });\n        });\n    }\n    updateComboData(combos = []) {\n        if (!combos.length)\n            return;\n        const { model } = this;\n        model.batch(() => {\n            const modifiedCombos = [];\n            combos.forEach((modifiedCombo) => {\n                const id = idOf(modifiedCombo);\n                const originalCombo = toG6Data(model.getNode(id));\n                if (isEqual(originalCombo, modifiedCombo))\n                    return;\n                const value = mergeElementsData(originalCombo, modifiedCombo);\n                this.pushChange({ value, original: originalCombo, type: ChangeType.ComboUpdated });\n                model.mergeNodeData(id, value);\n                modifiedCombos.push(value);\n            });\n            this.updateNodeLikeHierarchy(modifiedCombos);\n        });\n    }\n    /**\n     * <zh/> 设置节点的父节点\n     *\n     * <en/> Set the parent node of the node\n     * @param id - <zh/> 节点 ID | <en/> node ID\n     * @param parent - <zh/> 父节点 ID | <en/> parent node ID\n     * @param hierarchyKey - <zh/> 层次结构类型 | <en/> hierarchy type\n     * @param update - <zh/> 添加新/旧父节点数据更新记录 | <en/> add new/old parent node data update record\n     */\n    setParent(id, parent, hierarchyKey, update = true) {\n        if (id === parent)\n            return;\n        const originalParentId = parentIdOf(this.getNodeLikeDatum(id));\n        // Sync data\n        if (originalParentId !== parent && hierarchyKey === COMBO_KEY) {\n            const modifiedDatum = { id, combo: parent };\n            if (this.isCombo(id))\n                this.syncComboDatum(modifiedDatum);\n            else\n                this.syncNodeDatum(modifiedDatum);\n        }\n        this.model.setParent(id, parent, hierarchyKey);\n        if (update && hierarchyKey === COMBO_KEY) {\n            uniq([originalParentId, parent]).forEach((pId) => {\n                if (pId !== undefined)\n                    this.refreshComboData(pId);\n            });\n        }\n    }\n    /**\n     * <zh/> 刷新 combo 数据\n     *\n     * <en/> Refresh combo data\n     * @param id - <zh/> combo ID | <en/> combo ID\n     * @remarks\n     * <zh/> 不会更改数据，但会触发数据变更事件\n     *\n     * <en/> Will not change the data, but will trigger data change events\n     */\n    refreshComboData(id) {\n        const combo = this.getComboData([id])[0];\n        const ancestors = this.getAncestorsData(id, COMBO_KEY);\n        if (combo)\n            this.pushChange({ value: combo, original: combo, type: ChangeType.ComboUpdated });\n        ancestors.forEach((value) => {\n            this.pushChange({ value: value, original: value, type: ChangeType.ComboUpdated });\n        });\n    }\n    /**\n     * <zh/> 将 combo 数据同步到 model 中\n     *\n     * <en/> Synchronize combo data to the model\n     * @param datum - <zh/> combo 数据 | <en/> combo data\n     */\n    syncComboDatum(datum) {\n        const { model } = this;\n        const id = idOf(datum);\n        if (!model.hasNode(id))\n            return;\n        const original = toG6Data(model.getNode(id));\n        const value = mergeElementsData(original, datum);\n        model.mergeNodeData(id, value);\n    }\n    getElementPosition(id) {\n        const datum = this.getElementDataById(id);\n        return positionOf(datum);\n    }\n    translateNodeLikeBy(id, offset) {\n        if (this.isCombo(id))\n            this.translateComboBy(id, offset);\n        else\n            this.translateNodeBy(id, offset);\n    }\n    translateNodeLikeTo(id, position) {\n        if (this.isCombo(id))\n            this.translateComboTo(id, position);\n        else\n            this.translateNodeTo(id, position);\n    }\n    translateNodeBy(id, offset) {\n        const curr = this.getElementPosition(id);\n        const position = add(curr, [...offset, 0].slice(0, 3));\n        this.translateNodeTo(id, position);\n    }\n    translateNodeTo(id, position) {\n        const [x = 0, y = 0, z = 0] = position;\n        this.preventUpdateNodeLikeHierarchy(() => {\n            this.updateNodeData([{ id, style: { x, y, z } }]);\n        });\n    }\n    translateComboBy(id, offset) {\n        const [dx = 0, dy = 0, dz = 0] = offset;\n        if ([dx, dy, dz].some(isNaN) || [dx, dy, dz].every((o) => o === 0))\n            return;\n        const combo = this.getComboData([id])[0];\n        if (!combo)\n            return;\n        dfs(combo, (succeed) => {\n            const succeedID = idOf(succeed);\n            const [x, y, z] = positionOf(succeed);\n            const value = mergeElementsData(succeed, {\n                style: { x: x + dx, y: y + dy, z: z + dz },\n            });\n            this.pushChange({\n                value,\n                // @ts-ignore\n                original: succeed,\n                type: this.isCombo(succeedID) ? ChangeType.ComboUpdated : ChangeType.NodeUpdated,\n            });\n            this.model.mergeNodeData(succeedID, value);\n        }, (node) => this.getChildrenData(idOf(node)), 'BT');\n    }\n    translateComboTo(id, position) {\n        if (position.some(isNaN))\n            return;\n        const [tx = 0, ty = 0, tz = 0] = position;\n        const combo = this.getComboData([id])?.[0];\n        if (!combo)\n            return;\n        const [comboX, comboY, comboZ] = positionOf(combo);\n        const dx = tx - comboX;\n        const dy = ty - comboY;\n        const dz = tz - comboZ;\n        dfs(combo, (succeed) => {\n            const succeedId = idOf(succeed);\n            const [x, y, z] = positionOf(succeed);\n            const value = mergeElementsData(succeed, {\n                style: { x: x + dx, y: y + dy, z: z + dz },\n            });\n            this.pushChange({\n                value,\n                // @ts-ignore\n                original: succeed,\n                type: this.isCombo(succeedId) ? ChangeType.ComboUpdated : ChangeType.NodeUpdated,\n            });\n            this.model.mergeNodeData(succeedId, value);\n        }, (node) => this.getChildrenData(idOf(node)), 'BT');\n    }\n    removeData(data) {\n        const { nodes, edges, combos } = data;\n        this.batch(() => {\n            // remove edges first\n            this.removeEdgeData(edges);\n            this.removeNodeData(nodes);\n            this.removeComboData(combos);\n            this.latestRemovedComboIds = new Set(combos);\n        });\n    }\n    removeNodeData(ids = []) {\n        if (!ids.length)\n            return;\n        this.batch(() => {\n            ids.forEach((id) => {\n                // 移除关联边、子节点\n                // remove related edges and child nodes\n                this.removeEdgeData(this.getRelatedEdgesData(id).map(idOf));\n                // TODO 树图情况下移除子节点\n                this.pushChange({ value: this.getNodeData([id])[0], type: ChangeType.NodeRemoved });\n                this.removeNodeLikeHierarchy(id);\n            });\n            this.model.removeNodes(ids);\n        });\n    }\n    removeEdgeData(ids = []) {\n        if (!ids.length)\n            return;\n        ids.forEach((id) => this.pushChange({ value: this.getEdgeData([id])[0], type: ChangeType.EdgeRemoved }));\n        this.model.removeEdges(ids);\n    }\n    removeComboData(ids = []) {\n        if (!ids.length)\n            return;\n        this.batch(() => {\n            ids.forEach((id) => {\n                this.pushChange({ value: this.getComboData([id])[0], type: ChangeType.ComboRemoved });\n                this.removeNodeLikeHierarchy(id);\n                this.comboIds.delete(id);\n            });\n            this.model.removeNodes(ids);\n        });\n    }\n    /**\n     * <zh/> 移除节点层次结构，将其子节点移动到父节点的 children 列表中\n     *\n     * <en/> Remove the node hierarchy and move its child nodes to the parent node's children list\n     * @param id - <zh/> 待处理的节点 | <en/> node to be processed\n     */\n    removeNodeLikeHierarchy(id) {\n        if (this.model.hasTreeStructure(COMBO_KEY)) {\n            const grandParent = parentIdOf(this.getNodeLikeDatum(id));\n            // 从父节点的 children 列表中移除\n            // remove from its parent's children list\n            // 调用 graphlib.setParent，不需要更新数据\n            this.setParent(id, undefined, COMBO_KEY, false);\n            // 将子节点移动到父节点的 children 列表中\n            // move the children to the grandparent's children list\n            this.model.getChildren(id, COMBO_KEY).forEach((child) => {\n                const childData = toG6Data(child);\n                const childId = idOf(childData);\n                this.setParent(idOf(childData), grandParent, COMBO_KEY, false);\n                const value = mergeElementsData(childData, {\n                    id: idOf(childData),\n                    combo: grandParent,\n                });\n                this.pushChange({\n                    value,\n                    original: childData,\n                    type: this.isCombo(childId) ? ChangeType.ComboUpdated : ChangeType.NodeUpdated,\n                });\n                this.model.mergeNodeData(idOf(childData), value);\n            });\n            if (!isUndefined(grandParent))\n                this.refreshComboData(grandParent);\n        }\n    }\n    /**\n     * <zh/> 获取元素的类型\n     *\n     * <en/> Get the type of the element\n     * @param id - <zh/> 元素 ID | <en/> ID of the element\n     * @returns <zh/> 元素类型 | <en/> type of the element\n     */\n    getElementType(id) {\n        if (this.model.hasNode(id)) {\n            if (this.isCombo(id))\n                return 'combo';\n            return 'node';\n        }\n        if (this.model.hasEdge(id))\n            return 'edge';\n        throw new Error(format(`Unknown element type of id: ${id}`));\n    }\n    destroy() {\n        const { model } = this;\n        const nodes = model.getAllNodes();\n        const edges = model.getAllEdges();\n        model.removeEdges(edges.map((edge) => edge.id));\n        model.removeNodes(nodes.map((node) => node.id));\n        // @ts-expect-error force delete\n        this.context = {};\n    }\n}\n//# sourceMappingURL=data.js.map","export default function uniq(arr, cache) {\n    if (cache === void 0) { cache = new Map(); }\n    var r = [];\n    if (Array.isArray(arr)) {\n        for (var i = 0, len = arr.length; i < len; i++) {\n            var item = arr[i];\n            // 加一个 cache，提升性能\n            if (!cache.has(item)) {\n                r.push(item);\n                cache.set(item, true);\n            }\n        }\n    }\n    return r;\n}\n//# sourceMappingURL=uniq.js.map","import { Group } from '@antv/g';\nimport { groupBy } from '@antv/util';\nimport { AnimationType, COMBO_KEY, GraphEvent } from '../constants';\nimport { ELEMENT_TYPES } from '../constants/element';\nimport { getExtension } from '../registry';\nimport { cacheStyle, getCachedStyle, hasCachedStyle, setCacheStyle } from '../utils/cache';\nimport { reduceDataChanges } from '../utils/change';\nimport { isCollapsed } from '../utils/collapsibility';\nimport { markToBeDestroyed, updateStyle } from '../utils/element';\nimport { AnimateEvent, ElementLifeCycleEvent, GraphLifeCycleEvent, emit } from '../utils/event';\nimport { idOf } from '../utils/id';\nimport { assignColorByPalette, parsePalette } from '../utils/palette';\nimport { positionOf } from '../utils/position';\nimport { print } from '../utils/print';\nimport { computeElementCallbackStyle } from '../utils/style';\nimport { themeOf } from '../utils/theme';\nexport class ElementController {\n    context;\n    container;\n    elementMap = {};\n    shapeTypeMap = {};\n    constructor(context) {\n        this.context = context;\n    }\n    init() {\n        if (!this.container) {\n            const { canvas } = this.context;\n            this.container = canvas.appendChild(new Group());\n        }\n    }\n    emit(event, context) {\n        if (context.silence)\n            return;\n        emit(this.context.graph, event);\n    }\n    forEachElementData(callback) {\n        ELEMENT_TYPES.forEach((elementType) => {\n            const elementData = this.context.model.getElementsDataByType(elementType);\n            callback(elementType, elementData);\n        });\n    }\n    getElementType(elementType, datum) {\n        const { options, graph } = this.context;\n        const userDefinedType = options[elementType]?.type || datum.type;\n        if (!userDefinedType) {\n            if (elementType === 'edge')\n                return 'line';\n            // node / combo\n            else\n                return 'circle';\n        }\n        if (typeof userDefinedType === 'string')\n            return userDefinedType;\n        // @ts-expect-error skip type check\n        return userDefinedType.call(graph, datum);\n    }\n    getTheme(elementType) {\n        return themeOf(this.context.options)[elementType] || {};\n    }\n    getThemeStyle(elementType) {\n        return this.getTheme(elementType).style || {};\n    }\n    getThemeStateStyle(elementType, states) {\n        const { state = {} } = this.getTheme(elementType);\n        return Object.assign({}, ...states.map((name) => state[name] || {}));\n    }\n    paletteStyle = {};\n    computePaletteStyle() {\n        const { options } = this.context;\n        this.paletteStyle = {};\n        this.forEachElementData((elementType, elementData) => {\n            const palette = Object.assign({}, parsePalette(this.getTheme(elementType)?.palette), parsePalette(options[elementType]?.palette));\n            if (palette?.field) {\n                Object.assign(this.paletteStyle, assignColorByPalette(elementData, palette));\n            }\n        });\n    }\n    getPaletteStyle(elementType, id) {\n        const color = this.paletteStyle[id];\n        if (!color)\n            return {};\n        if (elementType === 'edge')\n            return { stroke: color };\n        return { fill: color };\n    }\n    defaultStyle = {};\n    /**\n     * <zh/> 计算单个元素的默认样式\n     *\n     * <en/> compute default style of single element\n     */\n    computeElementDefaultStyle(elementType, context) {\n        const { options } = this.context;\n        const defaultStyle = options[elementType]?.style || {};\n        this.defaultStyle[idOf(context.datum)] = computeElementCallbackStyle(defaultStyle, context);\n    }\n    computeElementsDefaultStyle(ids) {\n        const { graph } = this.context;\n        this.forEachElementData((elementType, elementData) => {\n            const length = elementData.length;\n            for (let i = 0; i < length; i++) {\n                const datum = elementData[i];\n                if (ids === undefined || ids.includes(idOf(datum))) {\n                    this.computeElementDefaultStyle(elementType, { datum, graph });\n                }\n            }\n        });\n    }\n    getDefaultStyle(id) {\n        return this.defaultStyle[id] || {};\n    }\n    getElementState(id) {\n        try {\n            const { model } = this.context;\n            return model.getElementState(id);\n        }\n        catch {\n            return [];\n        }\n    }\n    stateStyle = {};\n    /**\n     * <zh/> 获取单个元素的单个状态的样式\n     *\n     * <en/> get single state style of single element\n     */\n    getElementStateStyle(elementType, state, context) {\n        const { options } = this.context;\n        const stateStyle = options[elementType]?.state?.[state] || {};\n        return computeElementCallbackStyle(stateStyle, context);\n    }\n    /**\n     * <zh/> 计算单个元素的合并状态样式\n     *\n     * <en/> compute merged state style of single element\n     */\n    computeElementStatesStyle(elementType, states, context) {\n        this.stateStyle[idOf(context.datum)] = Object.assign({}, ...states.map((state) => this.getElementStateStyle(elementType, state, context)));\n    }\n    /**\n     * <zh/> 计算全部元素的状态样式\n     *\n     * <en/> compute state style of all elements\n     * @param ids - <zh/> 计算指定元素的状态样式 | <en/> compute state style of specified elements\n     */\n    computeElementsStatesStyle(ids) {\n        const { graph } = this.context;\n        this.forEachElementData((elementType, elementData) => {\n            const length = elementData.length;\n            for (let i = 0; i < length; i++) {\n                const datum = elementData[i];\n                if (ids === undefined || ids.includes(idOf(datum))) {\n                    const states = this.getElementState(idOf(datum));\n                    this.computeElementStatesStyle(elementType, states, { datum, graph });\n                }\n            }\n        });\n    }\n    getStateStyle(id) {\n        return this.stateStyle[id] || {};\n    }\n    computeStyle(stage, ids) {\n        const skip = ['translate', 'zIndex'];\n        if (stage && skip.includes(stage))\n            return;\n        this.computePaletteStyle();\n        this.computeElementsDefaultStyle(ids);\n        this.computeElementsStatesStyle(ids);\n    }\n    getElement(id) {\n        return this.elementMap[id];\n    }\n    getElementZIndex(id) {\n        const element = this.getElement(id);\n        if (!element)\n            return 0;\n        return element.style.zIndex ?? 0;\n    }\n    getNodes() {\n        return this.context.model.getNodeData().map(({ id }) => this.elementMap[id]);\n    }\n    getEdges() {\n        return this.context.model.getEdgeData().map((edge) => this.elementMap[idOf(edge)]);\n    }\n    getCombos() {\n        return this.context.model.getComboData().map(({ id }) => this.elementMap[id]);\n    }\n    getElementComputedStyle(elementType, datum) {\n        const id = idOf(datum);\n        // 优先级(从低到高) Priority (from low to high):\n        const themeStyle = this.getThemeStyle(elementType);\n        const paletteStyle = this.getPaletteStyle(elementType, id);\n        const dataStyle = datum.style || {};\n        const defaultStyle = this.getDefaultStyle(id);\n        const themeStateStyle = this.getThemeStateStyle(elementType, this.getElementState(id));\n        const stateStyle = this.getStateStyle(id);\n        const style = Object.assign({}, themeStyle, paletteStyle, dataStyle, defaultStyle, themeStateStyle, stateStyle);\n        if (elementType === 'combo') {\n            const childrenData = this.context.model.getChildrenData(id);\n            const isCollapsed = !!style.collapsed;\n            const childrenNode = isCollapsed ? [] : childrenData.map(idOf).filter((id) => this.getElement(id));\n            Object.assign(style, { childrenNode, childrenData });\n        }\n        return style;\n    }\n    /**\n     * <zh/> 开始绘制流程\n     *\n     * <en/> start render process\n     */\n    draw(context = { animation: true }) {\n        this.init();\n        const data = this.computeChangesAndDrawData(context);\n        if (!data)\n            return null;\n        const { dataChanges, drawData } = data;\n        this.markDestroyElement(drawData);\n        // 计算样式 / Calculate style\n        this.computeStyle(context.stage);\n        // 创建渲染任务 / Create render task\n        const { add, update, remove } = drawData;\n        this.destroyElements(remove, context);\n        this.createElements(add, context);\n        this.updateElements(update, context);\n        const { animation, silence } = context;\n        return this.context.animation.animate(animation, silence\n            ? {}\n            : {\n                before: () => this.emit(new GraphLifeCycleEvent(GraphEvent.BEFORE_DRAW, { dataChanges, animation }), context),\n                beforeAnimate: (animation) => this.emit(new AnimateEvent(GraphEvent.BEFORE_ANIMATE, AnimationType.DRAW, animation, drawData), context),\n                afterAnimate: (animation) => this.emit(new AnimateEvent(GraphEvent.AFTER_ANIMATE, AnimationType.DRAW, animation, drawData), context),\n                after: () => this.emit(new GraphLifeCycleEvent(GraphEvent.AFTER_DRAW, { dataChanges, animation }), context),\n            });\n    }\n    computeChangesAndDrawData(context) {\n        const { model } = this.context;\n        const dataChanges = model.getChanges();\n        const tasks = reduceDataChanges(dataChanges);\n        if (tasks.length === 0)\n            return null;\n        const { NodeAdded = [], NodeUpdated = [], NodeRemoved = [], EdgeAdded = [], EdgeUpdated = [], EdgeRemoved = [], ComboAdded = [], ComboUpdated = [], ComboRemoved = [], } = groupBy(tasks, (change) => change.type);\n        const dataOf = (data) => new Map(data.map((datum) => {\n            const data = datum.value;\n            return [idOf(data), data];\n        }));\n        const input = {\n            add: {\n                nodes: dataOf(NodeAdded),\n                edges: dataOf(EdgeAdded),\n                combos: dataOf(ComboAdded),\n            },\n            update: {\n                nodes: dataOf(NodeUpdated),\n                edges: dataOf(EdgeUpdated),\n                combos: dataOf(ComboUpdated),\n            },\n            remove: {\n                nodes: dataOf(NodeRemoved),\n                edges: dataOf(EdgeRemoved),\n                combos: dataOf(ComboRemoved),\n            },\n        };\n        const drawData = this.transformData(input, context);\n        // 清空变更 / Clear changes\n        model.clearChanges();\n        return { dataChanges, drawData };\n    }\n    transformData(input, context) {\n        const transforms = this.context.transform.getTransformInstance();\n        return Object.values(transforms).reduce((data, transform) => transform.beforeDraw(data, context), input);\n    }\n    createElement(elementType, datum, context) {\n        const id = idOf(datum);\n        const currentElement = this.getElement(id);\n        if (currentElement)\n            return;\n        const type = this.getElementType(elementType, datum);\n        const style = this.getElementComputedStyle(elementType, datum);\n        // get shape constructor\n        const Ctor = getExtension(elementType, type);\n        if (!Ctor)\n            return print.warn(`The element ${type} of ${elementType} is not registered.`);\n        this.emit(new ElementLifeCycleEvent(GraphEvent.BEFORE_ELEMENT_CREATE, elementType, datum), context);\n        const element = this.container.appendChild(new Ctor({\n            id,\n            style: {\n                context: this.context,\n                ...style,\n            },\n        }));\n        this.shapeTypeMap[id] = type;\n        this.elementMap[id] = element;\n        const { stage = 'enter' } = context;\n        this.context.animation?.add({\n            element,\n            elementType,\n            stage,\n            originalStyle: { ...element.attributes },\n            modifiedStyle: { ...element.attributes, ...style },\n        }, {\n            after: () => {\n                this.emit(new ElementLifeCycleEvent(GraphEvent.AFTER_ELEMENT_CREATE, elementType, datum), context);\n                element.onCreate?.();\n            },\n        });\n    }\n    createElements(data, context) {\n        const { nodes, edges, combos } = data;\n        const iteration = [\n            ['node', nodes],\n            ['combo', combos],\n            ['edge', edges],\n        ];\n        iteration.forEach(([elementType, elementData]) => {\n            elementData.forEach((datum) => this.createElement(elementType, datum, context));\n        });\n    }\n    updateElement(elementType, datum, context) {\n        const id = idOf(datum);\n        const element = this.getElement(id);\n        if (!element)\n            return () => null;\n        this.emit(new ElementLifeCycleEvent(GraphEvent.BEFORE_ELEMENT_UPDATE, elementType, datum), context);\n        const type = this.getElementType(elementType, datum);\n        const style = this.getElementComputedStyle(elementType, datum);\n        // 如果类型不同，需要先销毁原有元素，再创建新元素\n        // If the type is different, you need to destroy the original element first, and then create a new element\n        if (this.shapeTypeMap[id] !== type) {\n            element.destroy();\n            delete this.shapeTypeMap[id];\n            delete this.elementMap[id];\n            this.createElement(elementType, datum, { animation: false, silence: true });\n        }\n        const { stage = 'update' } = context;\n        const exactStage = stage !== 'visibility' ? stage : style.visibility === 'hidden' ? 'hide' : 'show';\n        this.context.animation?.add({\n            element,\n            elementType,\n            stage: exactStage,\n            originalStyle: { ...element.attributes },\n            modifiedStyle: { ...element.attributes, ...style },\n        }, {\n            before: () => {\n                // 通过 elementMap[id] 访问最新的 element，防止 type 不同导致的 element 丢失\n                // Access the latest element through elementMap[id] to prevent the loss of element caused by different types\n                const element = this.elementMap[id];\n                if (stage !== 'collapse')\n                    updateStyle(element, style);\n                if (stage === 'visibility') {\n                    // 缓存原始透明度 / Cache original opacity\n                    // 会在 animation controller 中访问该缓存值 / The cached value will be accessed in the animation controller\n                    if (!hasCachedStyle(element, 'opacity'))\n                        cacheStyle(element, 'opacity');\n                    setCacheStyle(element, 'visibility', exactStage === 'show' ? 'visible' : 'hidden');\n                    if (exactStage === 'show')\n                        updateStyle(element, { visibility: 'visible' });\n                }\n            },\n            after: () => {\n                const element = this.elementMap[id];\n                if (stage === 'collapse')\n                    updateStyle(element, style);\n                if (exactStage === 'hide')\n                    updateStyle(element, { visibility: getCachedStyle(element, 'visibility') });\n                this.emit(new ElementLifeCycleEvent(GraphEvent.AFTER_ELEMENT_UPDATE, elementType, datum), context);\n                element.onUpdate?.();\n            },\n        });\n    }\n    updateElements(data, context) {\n        const { nodes, edges, combos } = data;\n        const iteration = [\n            ['node', nodes],\n            ['combo', combos],\n            ['edge', edges],\n        ];\n        iteration.forEach(([elementType, elementData]) => {\n            elementData.forEach((datum) => this.updateElement(elementType, datum, context));\n        });\n    }\n    /**\n     * <zh/> 标记销毁元素\n     *\n     * <en/> mark destroy element\n     * @param data - <zh/> 绘制数据 | <en/> draw data\n     */\n    markDestroyElement(data) {\n        Object.values(data.remove).forEach((elementData) => {\n            elementData.forEach((datum) => {\n                const id = idOf(datum);\n                const element = this.getElement(id);\n                if (element)\n                    markToBeDestroyed(element);\n            });\n        });\n    }\n    destroyElement(elementType, datum, context) {\n        const { stage = 'exit' } = context;\n        const id = idOf(datum);\n        const element = this.elementMap[id];\n        if (!element)\n            return () => null;\n        this.emit(new ElementLifeCycleEvent(GraphEvent.BEFORE_ELEMENT_DESTROY, elementType, datum), context);\n        this.context.animation?.add({\n            element,\n            elementType,\n            stage,\n            originalStyle: { ...element.attributes },\n            modifiedStyle: { ...element.attributes },\n        }, {\n            after: () => {\n                this.clearElement(id);\n                element.destroy();\n                element.onDestroy?.();\n                this.emit(new ElementLifeCycleEvent(GraphEvent.AFTER_ELEMENT_DESTROY, elementType, datum), context);\n            },\n        });\n    }\n    destroyElements(data, context) {\n        const { nodes, edges, combos } = data;\n        const iteration = [\n            ['combo', combos],\n            ['edge', edges],\n            ['node', nodes],\n        ];\n        iteration.forEach(([elementType, elementData]) => {\n            elementData.forEach((datum) => this.destroyElement(elementType, datum, context));\n        });\n        // TODO 重新计算色板样式，如果是分组色板，则不需要重新计算\n    }\n    clearElement(id) {\n        delete this.paletteStyle[id];\n        delete this.defaultStyle[id];\n        delete this.stateStyle[id];\n        delete this.elementMap[id];\n        delete this.shapeTypeMap[id];\n    }\n    /**\n     * <zh/> 收起节点\n     *\n     * <en/> collapse node\n     * @param id - <zh/> 元素 ID | <en/> element ID\n     * @param animation - <zh/> 是否使用动画，默认为 true | <en/> Whether to use animation, default is true\n     */\n    async collapseNode(id, animation) {\n        const { model, layout } = this.context;\n        const preprocess = this.computeChangesAndDrawData({ stage: 'collapse', animation });\n        this.markDestroyElement(preprocess.drawData);\n        // 进行预布局，计算出所有元素的位置\n        // Perform pre-layout to calculate the position of all elements\n        const result = await layout.simulate();\n        model.updateData(result);\n        // 重新计算数据 / Recalculate data\n        const { drawData } = this.computeChangesAndDrawData({ stage: 'collapse', animation });\n        const { add, remove, update } = drawData;\n        this.markDestroyElement(drawData);\n        const context = { animation, stage: 'collapse', data: drawData };\n        this.destroyElements(remove, context);\n        this.createElements(add, context);\n        this.updateElements(update, context);\n        await this.context.animation.animate(animation, {\n            beforeAnimate: (animation) => this.emit(new AnimateEvent(GraphEvent.BEFORE_ANIMATE, AnimationType.COLLAPSE, animation, drawData), context),\n            afterAnimate: (animation) => this.emit(new AnimateEvent(GraphEvent.AFTER_ANIMATE, AnimationType.COLLAPSE, animation, drawData), context),\n        }, {\n            collapse: {\n                target: id,\n                descendants: Array.from(remove.nodes).map(([, node]) => idOf(node)),\n                position: positionOf(update.nodes.get(id)),\n            },\n        })?.finished;\n    }\n    /**\n     * <zh/> 展开节点\n     *\n     * <en/> expand node\n     * @param id - <zh/> 元素 ID | <en/> element ID\n     * @param animation - <zh/> 是否使用动画，默认为 true | <en/> Whether to use animation, default is true\n     */\n    async expandNode(id, animation) {\n        const { model, layout } = this.context;\n        if (!model.getAncestorsData(id, COMBO_KEY).every((datum) => isCollapsed(datum)))\n            return;\n        const position = positionOf(model.getNodeData([id])[0]);\n        // 首先创建展开的元素，然后进行预布局\n        // First create the expanded element, then perform pre-layout\n        const { drawData: { add }, } = this.computeChangesAndDrawData({ stage: 'collapse', animation });\n        this.createElements(add, { animation: false, stage: 'expand' });\n        // 重置动画 / Reset animation\n        this.context.animation.clear();\n        const result = await layout.simulate();\n        model.updateData(result);\n        // 重新计算数据 / Recalculate data\n        this.computeStyle('expand');\n        const { drawData } = this.computeChangesAndDrawData({ stage: 'collapse', animation });\n        const { update } = drawData;\n        const context = { animation, stage: 'expand', data: drawData };\n        // 将新增边添加到更新列表 / Add new edges to the update list\n        add.edges.forEach((edge) => {\n            const id = idOf(edge);\n            if (!update.edges.has(id))\n                update.edges.set(id, edge);\n        });\n        this.updateElements(update, context);\n        await this.context.animation.animate(animation, {\n            beforeAnimate: (animation) => this.emit(new AnimateEvent(GraphEvent.BEFORE_ANIMATE, AnimationType.EXPAND, animation, drawData), context),\n            afterAnimate: (animation) => this.emit(new AnimateEvent(GraphEvent.AFTER_ANIMATE, AnimationType.EXPAND, animation, drawData), context),\n        }, {\n            expand: {\n                target: id,\n                descendants: Array.from(add.nodes).map(([, node]) => idOf(node)),\n                position,\n            },\n        })?.finished;\n    }\n    async collapseCombo(id, animation) {\n        const { model, element } = this.context;\n        if (model.getAncestorsData(id, COMBO_KEY).some((datum) => isCollapsed(datum)))\n            return;\n        const combo = element.getElement(id);\n        const position = combo.getComboPosition({\n            ...combo.attributes,\n            collapsed: true,\n        });\n        const { dataChanges, drawData } = this.computeChangesAndDrawData({ stage: 'collapse', animation });\n        this.markDestroyElement(drawData);\n        const { update, remove } = drawData;\n        const context = { animation, stage: 'collapse', data: drawData };\n        this.destroyElements(remove, context);\n        this.updateElements(update, context);\n        const idsOf = (data) => Array.from(data).map(([, node]) => idOf(node));\n        await this.context.animation.animate(animation, {\n            before: () => this.emit(new GraphLifeCycleEvent(GraphEvent.BEFORE_DRAW, { dataChanges, animation }), context),\n            beforeAnimate: (animation) => this.emit(new AnimateEvent(GraphEvent.BEFORE_ANIMATE, AnimationType.COLLAPSE, animation, drawData), context),\n            afterAnimate: (animation) => this.emit(new AnimateEvent(GraphEvent.AFTER_ANIMATE, AnimationType.COLLAPSE, animation, drawData), context),\n            after: () => this.emit(new GraphLifeCycleEvent(GraphEvent.AFTER_DRAW, { dataChanges, animation }), context),\n        }, {\n            collapse: {\n                target: id,\n                descendants: [...idsOf(remove.nodes), ...idsOf(remove.combos)],\n                position,\n            },\n        })?.finished;\n    }\n    async expandCombo(id, animation) {\n        const { model } = this.context;\n        const position = positionOf(model.getComboData([id])[0]);\n        // 重新计算数据 / Recalculate data\n        this.computeStyle('expand');\n        const { dataChanges, drawData } = this.computeChangesAndDrawData({ stage: 'expand', animation });\n        const { add, update } = drawData;\n        const context = { animation, stage: 'expand', data: drawData };\n        this.createElements(add, context);\n        this.updateElements(update, context);\n        const idsOf = (data) => Array.from(data).map(([, node]) => idOf(node));\n        await this.context.animation.animate(animation, {\n            before: () => this.emit(new GraphLifeCycleEvent(GraphEvent.BEFORE_DRAW, { dataChanges, animation }), context),\n            beforeAnimate: (animation) => this.emit(new AnimateEvent(GraphEvent.BEFORE_ANIMATE, AnimationType.EXPAND, animation, drawData), context),\n            afterAnimate: (animation) => this.emit(new AnimateEvent(GraphEvent.AFTER_ANIMATE, AnimationType.EXPAND, animation, drawData), context),\n            after: () => this.emit(new GraphLifeCycleEvent(GraphEvent.AFTER_DRAW, { dataChanges, animation }), context),\n        }, {\n            expand: {\n                target: id,\n                descendants: [...idsOf(add.nodes), ...idsOf(add.combos)],\n                position,\n            },\n        })?.finished;\n    }\n    /**\n     * <zh/> 计算元素置顶后的 zIndex\n     *\n     * <en/> Calculate the zIndex after the element is placed on top\n     * @param id - <zh/> 元素 ID | <en/> ID of the element\n     * @returns <zh/> zIndex | <en/> zIndex\n     */\n    getFrontZIndex(id) {\n        const { model } = this.context;\n        const elementType = model.getElementType(id);\n        const elementData = model.getElementDataById(id);\n        const data = model.getData();\n        // 排除当前元素 / Exclude the current element\n        Object.assign(data, {\n            [`${elementType}s`]: data[`${elementType}s`].filter((element) => idOf(element) !== id),\n        });\n        if (elementType === 'combo') {\n            // 如果 combo 展开，则排除 combo 的子节点/combo 及内部边\n            // If the combo is expanded, exclude the child nodes/combos of the combo and the internal edges\n            if (!isCollapsed(elementData)) {\n                const ancestors = model.getAncestorsData(id, COMBO_KEY).map(idOf);\n                data.nodes = data.nodes.filter((element) => !ancestors.includes(idOf(element)));\n                data.combos = data.combos.filter((element) => !ancestors.includes(idOf(element)));\n                data.edges = data.edges.filter(({ source, target }) => ancestors.includes(source) && ancestors.includes(target));\n            }\n        }\n        return (Math.max(0, ...Object.values(data)\n            .flat()\n            .map((datum) => {\n            const id = idOf(datum);\n            return this.getElementZIndex(id);\n        })) + 1);\n    }\n    destroy() {\n        this.container.destroy();\n        this.elementMap = {};\n        this.shapeTypeMap = {};\n        this.defaultStyle = {};\n        this.stateStyle = {};\n        this.paletteStyle = {};\n        // @ts-expect-error force delete\n        this.context = {};\n    }\n}\n//# sourceMappingURL=element.js.map","/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */\nconst proxyMarker = Symbol(\"Comlink.proxy\");\nconst createEndpoint = Symbol(\"Comlink.endpoint\");\nconst releaseProxy = Symbol(\"Comlink.releaseProxy\");\nconst finalizer = Symbol(\"Comlink.finalizer\");\nconst throwMarker = Symbol(\"Comlink.thrown\");\nconst isObject = (val) => (typeof val === \"object\" && val !== null) || typeof val === \"function\";\n/**\n * Internal transfer handle to handle objects marked to proxy.\n */\nconst proxyTransferHandler = {\n    canHandle: (val) => isObject(val) && val[proxyMarker],\n    serialize(obj) {\n        const { port1, port2 } = new MessageChannel();\n        expose(obj, port1);\n        return [port2, [port2]];\n    },\n    deserialize(port) {\n        port.start();\n        return wrap(port);\n    },\n};\n/**\n * Internal transfer handler to handle thrown exceptions.\n */\nconst throwTransferHandler = {\n    canHandle: (value) => isObject(value) && throwMarker in value,\n    serialize({ value }) {\n        let serialized;\n        if (value instanceof Error) {\n            serialized = {\n                isError: true,\n                value: {\n                    message: value.message,\n                    name: value.name,\n                    stack: value.stack,\n                },\n            };\n        }\n        else {\n            serialized = { isError: false, value };\n        }\n        return [serialized, []];\n    },\n    deserialize(serialized) {\n        if (serialized.isError) {\n            throw Object.assign(new Error(serialized.value.message), serialized.value);\n        }\n        throw serialized.value;\n    },\n};\n/**\n * Allows customizing the serialization of certain values.\n */\nconst transferHandlers = new Map([\n    [\"proxy\", proxyTransferHandler],\n    [\"throw\", throwTransferHandler],\n]);\nfunction isAllowedOrigin(allowedOrigins, origin) {\n    for (const allowedOrigin of allowedOrigins) {\n        if (origin === allowedOrigin || allowedOrigin === \"*\") {\n            return true;\n        }\n        if (allowedOrigin instanceof RegExp && allowedOrigin.test(origin)) {\n            return true;\n        }\n    }\n    return false;\n}\nfunction expose(obj, ep = globalThis, allowedOrigins = [\"*\"]) {\n    ep.addEventListener(\"message\", function callback(ev) {\n        if (!ev || !ev.data) {\n            return;\n        }\n        if (!isAllowedOrigin(allowedOrigins, ev.origin)) {\n            console.warn(`Invalid origin '${ev.origin}' for comlink proxy`);\n            return;\n        }\n        const { id, type, path } = Object.assign({ path: [] }, ev.data);\n        const argumentList = (ev.data.argumentList || []).map(fromWireValue);\n        let returnValue;\n        try {\n            const parent = path.slice(0, -1).reduce((obj, prop) => obj[prop], obj);\n            const rawValue = path.reduce((obj, prop) => obj[prop], obj);\n            switch (type) {\n                case \"GET\" /* MessageType.GET */:\n                    {\n                        returnValue = rawValue;\n                    }\n                    break;\n                case \"SET\" /* MessageType.SET */:\n                    {\n                        parent[path.slice(-1)[0]] = fromWireValue(ev.data.value);\n                        returnValue = true;\n                    }\n                    break;\n                case \"APPLY\" /* MessageType.APPLY */:\n                    {\n                        returnValue = rawValue.apply(parent, argumentList);\n                    }\n                    break;\n                case \"CONSTRUCT\" /* MessageType.CONSTRUCT */:\n                    {\n                        const value = new rawValue(...argumentList);\n                        returnValue = proxy(value);\n                    }\n                    break;\n                case \"ENDPOINT\" /* MessageType.ENDPOINT */:\n                    {\n                        const { port1, port2 } = new MessageChannel();\n                        expose(obj, port2);\n                        returnValue = transfer(port1, [port1]);\n                    }\n                    break;\n                case \"RELEASE\" /* MessageType.RELEASE */:\n                    {\n                        returnValue = undefined;\n                    }\n                    break;\n                default:\n                    return;\n            }\n        }\n        catch (value) {\n            returnValue = { value, [throwMarker]: 0 };\n        }\n        Promise.resolve(returnValue)\n            .catch((value) => {\n            return { value, [throwMarker]: 0 };\n        })\n            .then((returnValue) => {\n            const [wireValue, transferables] = toWireValue(returnValue);\n            ep.postMessage(Object.assign(Object.assign({}, wireValue), { id }), transferables);\n            if (type === \"RELEASE\" /* MessageType.RELEASE */) {\n                // detach and deactive after sending release response above.\n                ep.removeEventListener(\"message\", callback);\n                closeEndPoint(ep);\n                if (finalizer in obj && typeof obj[finalizer] === \"function\") {\n                    obj[finalizer]();\n                }\n            }\n        })\n            .catch((error) => {\n            // Send Serialization Error To Caller\n            const [wireValue, transferables] = toWireValue({\n                value: new TypeError(\"Unserializable return value\"),\n                [throwMarker]: 0,\n            });\n            ep.postMessage(Object.assign(Object.assign({}, wireValue), { id }), transferables);\n        });\n    });\n    if (ep.start) {\n        ep.start();\n    }\n}\nfunction isMessagePort(endpoint) {\n    return endpoint.constructor.name === \"MessagePort\";\n}\nfunction closeEndPoint(endpoint) {\n    if (isMessagePort(endpoint))\n        endpoint.close();\n}\nfunction wrap(ep, target) {\n    return createProxy(ep, [], target);\n}\nfunction throwIfProxyReleased(isReleased) {\n    if (isReleased) {\n        throw new Error(\"Proxy has been released and is not useable\");\n    }\n}\nfunction releaseEndpoint(ep) {\n    return requestResponseMessage(ep, {\n        type: \"RELEASE\" /* MessageType.RELEASE */,\n    }).then(() => {\n        closeEndPoint(ep);\n    });\n}\nconst proxyCounter = new WeakMap();\nconst proxyFinalizers = \"FinalizationRegistry\" in globalThis &&\n    new FinalizationRegistry((ep) => {\n        const newCount = (proxyCounter.get(ep) || 0) - 1;\n        proxyCounter.set(ep, newCount);\n        if (newCount === 0) {\n            releaseEndpoint(ep);\n        }\n    });\nfunction registerProxy(proxy, ep) {\n    const newCount = (proxyCounter.get(ep) || 0) + 1;\n    proxyCounter.set(ep, newCount);\n    if (proxyFinalizers) {\n        proxyFinalizers.register(proxy, ep, proxy);\n    }\n}\nfunction unregisterProxy(proxy) {\n    if (proxyFinalizers) {\n        proxyFinalizers.unregister(proxy);\n    }\n}\nfunction createProxy(ep, path = [], target = function () { }) {\n    let isProxyReleased = false;\n    const proxy = new Proxy(target, {\n        get(_target, prop) {\n            throwIfProxyReleased(isProxyReleased);\n            if (prop === releaseProxy) {\n                return () => {\n                    unregisterProxy(proxy);\n                    releaseEndpoint(ep);\n                    isProxyReleased = true;\n                };\n            }\n            if (prop === \"then\") {\n                if (path.length === 0) {\n                    return { then: () => proxy };\n                }\n                const r = requestResponseMessage(ep, {\n                    type: \"GET\" /* MessageType.GET */,\n                    path: path.map((p) => p.toString()),\n                }).then(fromWireValue);\n                return r.then.bind(r);\n            }\n            return createProxy(ep, [...path, prop]);\n        },\n        set(_target, prop, rawValue) {\n            throwIfProxyReleased(isProxyReleased);\n            // FIXME: ES6 Proxy Handler `set` methods are supposed to return a\n            // boolean. To show good will, we return true asynchronously ¯\\_(ツ)_/¯\n            const [value, transferables] = toWireValue(rawValue);\n            return requestResponseMessage(ep, {\n                type: \"SET\" /* MessageType.SET */,\n                path: [...path, prop].map((p) => p.toString()),\n                value,\n            }, transferables).then(fromWireValue);\n        },\n        apply(_target, _thisArg, rawArgumentList) {\n            throwIfProxyReleased(isProxyReleased);\n            const last = path[path.length - 1];\n            if (last === createEndpoint) {\n                return requestResponseMessage(ep, {\n                    type: \"ENDPOINT\" /* MessageType.ENDPOINT */,\n                }).then(fromWireValue);\n            }\n            // We just pretend that `bind()` didn’t happen.\n            if (last === \"bind\") {\n                return createProxy(ep, path.slice(0, -1));\n            }\n            const [argumentList, transferables] = processArguments(rawArgumentList);\n            return requestResponseMessage(ep, {\n                type: \"APPLY\" /* MessageType.APPLY */,\n                path: path.map((p) => p.toString()),\n                argumentList,\n            }, transferables).then(fromWireValue);\n        },\n        construct(_target, rawArgumentList) {\n            throwIfProxyReleased(isProxyReleased);\n            const [argumentList, transferables] = processArguments(rawArgumentList);\n            return requestResponseMessage(ep, {\n                type: \"CONSTRUCT\" /* MessageType.CONSTRUCT */,\n                path: path.map((p) => p.toString()),\n                argumentList,\n            }, transferables).then(fromWireValue);\n        },\n    });\n    registerProxy(proxy, ep);\n    return proxy;\n}\nfunction myFlat(arr) {\n    return Array.prototype.concat.apply([], arr);\n}\nfunction processArguments(argumentList) {\n    const processed = argumentList.map(toWireValue);\n    return [processed.map((v) => v[0]), myFlat(processed.map((v) => v[1]))];\n}\nconst transferCache = new WeakMap();\nfunction transfer(obj, transfers) {\n    transferCache.set(obj, transfers);\n    return obj;\n}\nfunction proxy(obj) {\n    return Object.assign(obj, { [proxyMarker]: true });\n}\nfunction windowEndpoint(w, context = globalThis, targetOrigin = \"*\") {\n    return {\n        postMessage: (msg, transferables) => w.postMessage(msg, targetOrigin, transferables),\n        addEventListener: context.addEventListener.bind(context),\n        removeEventListener: context.removeEventListener.bind(context),\n    };\n}\nfunction toWireValue(value) {\n    for (const [name, handler] of transferHandlers) {\n        if (handler.canHandle(value)) {\n            const [serializedValue, transferables] = handler.serialize(value);\n            return [\n                {\n                    type: \"HANDLER\" /* WireValueType.HANDLER */,\n                    name,\n                    value: serializedValue,\n                },\n                transferables,\n            ];\n        }\n    }\n    return [\n        {\n            type: \"RAW\" /* WireValueType.RAW */,\n            value,\n        },\n        transferCache.get(value) || [],\n    ];\n}\nfunction fromWireValue(value) {\n    switch (value.type) {\n        case \"HANDLER\" /* WireValueType.HANDLER */:\n            return transferHandlers.get(value.name).deserialize(value.value);\n        case \"RAW\" /* WireValueType.RAW */:\n            return value.value;\n    }\n}\nfunction requestResponseMessage(ep, msg, transfers) {\n    return new Promise((resolve) => {\n        const id = generateUUID();\n        ep.addEventListener(\"message\", function l(ev) {\n            if (!ev.data || !ev.data.id || ev.data.id !== id) {\n                return;\n            }\n            ep.removeEventListener(\"message\", l);\n            resolve(ev.data);\n        });\n        if (ep.start) {\n            ep.start();\n        }\n        ep.postMessage(Object.assign({ id }, msg), transfers);\n    });\n}\nfunction generateUUID() {\n    return new Array(4)\n        .fill(0)\n        .map(() => Math.floor(Math.random() * Number.MAX_SAFE_INTEGER).toString(16))\n        .join(\"-\");\n}\n\nexport { createEndpoint, expose, finalizer, proxy, proxyMarker, releaseProxy, transfer, transferHandlers, windowEndpoint, wrap };\n//# sourceMappingURL=comlink.mjs.map\n","import { __awaiter, __rest } from \"tslib\";\nimport EventEmitter from '@antv/event-emitter';\nimport { isFunction } from '@antv/util';\nimport * as Comlink from 'comlink';\n/**\n * @example\n * const graph = new Graph();\n * const layout = new CircularLayout();\n *\n * const supervisor = new Supervisor(graph, layout, { iterations: 1000 });\n * const positions = await supervisor.execute();\n * supervisor.stop();\n * supervisor.kill();\n */\nexport class Supervisor extends EventEmitter {\n    constructor(graph, layout, options) {\n        super();\n        this.graph = graph;\n        this.layout = layout;\n        this.options = options;\n        this.spawnWorker();\n    }\n    spawnWorker() {\n        this.proxy = Comlink.wrap(\n        // @ts-ignore\n        new Worker(new URL('./worker.js', import.meta.url), { type: 'module' }));\n        if (this.running) {\n            this.running = false;\n            this.execute();\n        }\n    }\n    execute() {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.running)\n                return this;\n            this.running = true;\n            // Payload should include nodes & edges(if needed).\n            const _b = this.layout.options, { onTick } = _b, rest = __rest(_b, [\"onTick\"]);\n            const noFunctionOptions = {};\n            Object.keys(rest).forEach((name) => {\n                if (!isFunction(rest[name]))\n                    noFunctionOptions[name] = rest[name];\n            });\n            const payload = {\n                layout: {\n                    id: this.layout.id,\n                    options: noFunctionOptions,\n                    iterations: (_a = this.options) === null || _a === void 0 ? void 0 : _a.iterations,\n                },\n                nodes: this.graph.getAllNodes(),\n                edges: this.graph.getAllEdges(),\n            };\n            /**\n             * TODO: Convert graph object to linear memory(e.g. csr, adjacency matrix), then transfer the ownership to worker.\n             * @example\n             * const arraybufferWithNodesEdges = graphToByteArrays(this.graph); // Float32Array\n             */\n            const arraybufferWithNodesEdges = new Float32Array([0]);\n            // TODO: Support transferables.\n            // @see https://www.npmjs.com/package/@naoak/workerize-transferable\n            // setupTransferableMethodsOnMain(this.worker, {\n            //   calculateLayout: {\n            //     // pick a transferable object from the method parameters\n            //     pickTransferablesFromParams: (params) => [params[1].buffer],\n            //   },\n            // });\n            const [positions] = yield this.proxy.calculateLayout(payload, [\n                arraybufferWithNodesEdges,\n            ]);\n            return positions;\n        });\n    }\n    stop() {\n        this.running = false;\n        // trigger `layout.stop()` if needed\n        this.proxy.stopLayout();\n        return this;\n    }\n    kill() {\n        // allow the GC to collect wrapper port\n        // @see https://github.com/GoogleChromeLabs/comlink#comlinkreleaseproxy\n        this.proxy[Comlink.releaseProxy]();\n        // TODO: unbind listeners on graph.\n        // TODO: release attached memory\n    }\n    isRunning() {\n        return this.running;\n    }\n}\n//# sourceMappingURL=supervisor.js.map","import { Graph as Graphlib } from '@antv/graphlib';\nimport { Supervisor, isLayoutWithIterations } from '@antv/layout';\nimport { deepMix } from '@antv/util';\nimport { GraphEvent, TREE_KEY } from '../constants';\nimport { BaseLayout } from '../layouts';\nimport { getExtension } from '../registry';\nimport { getAnimationOptions } from '../utils/animation';\nimport { isToBeDestroyed } from '../utils/element';\nimport { GraphLifeCycleEvent, emit } from '../utils/event';\nimport { createTreeStructure } from '../utils/graphlib';\nimport { idOf } from '../utils/id';\nimport { isTreeLayout, layoutAdapter, layoutMapping2GraphData } from '../utils/layout';\nimport { print } from '../utils/print';\nimport { parseSize } from '../utils/size';\nimport { dfs } from '../utils/traverse';\nexport class LayoutController {\n    context;\n    supervisor;\n    instance;\n    instances = [];\n    animationResult;\n    get presetOptions() {\n        return {\n            animation: !!getAnimationOptions(this.context.options, true),\n        };\n    }\n    get options() {\n        const { options } = this.context;\n        return options.layout;\n    }\n    constructor(context) {\n        this.context = context;\n    }\n    getLayoutInstance() {\n        return this.instances;\n    }\n    async layout() {\n        if (!this.options)\n            return;\n        const pipeline = Array.isArray(this.options) ? this.options : [this.options];\n        const { graph } = this.context;\n        emit(graph, new GraphLifeCycleEvent(GraphEvent.BEFORE_LAYOUT));\n        for (const options of pipeline) {\n            const index = pipeline.indexOf(options);\n            const data = this.getLayoutData(options);\n            const opts = { ...this.presetOptions, ...options };\n            emit(graph, new GraphLifeCycleEvent(GraphEvent.BEFORE_STAGE_LAYOUT, { options: opts, index }));\n            const result = await this.stepLayout(data, opts, index);\n            emit(graph, new GraphLifeCycleEvent(GraphEvent.AFTER_STAGE_LAYOUT, { options: opts, index }));\n            if (!options.animation) {\n                this.updateElementPosition(result, false);\n            }\n        }\n        emit(graph, new GraphLifeCycleEvent(GraphEvent.AFTER_LAYOUT));\n    }\n    /**\n     * <zh/> 模拟布局\n     *\n     * <en/> Simulate layout\n     * @returns <zh/> 模拟布局结果 | <en/> Simulated layout result\n     */\n    async simulate() {\n        if (!this.options)\n            return {};\n        const pipeline = Array.isArray(this.options) ? this.options : [this.options];\n        let simulation = {};\n        for (const options of pipeline) {\n            const index = pipeline.indexOf(options);\n            const data = this.getLayoutData(options);\n            const result = await this.stepLayout(data, { ...this.presetOptions, ...options, animation: false }, index);\n            simulation = result;\n        }\n        return simulation;\n    }\n    async stepLayout(data, options, index) {\n        if (isTreeLayout(options))\n            return await this.treeLayout(data, options, index);\n        return await this.graphLayout(data, options, index);\n    }\n    async graphLayout(data, options, index) {\n        const { animation, enableWorker, iterations = 300 } = options;\n        const layout = this.initGraphLayout(options);\n        if (!layout)\n            return {};\n        this.instances[index] = layout;\n        this.instance = layout;\n        // 使用 web worker 执行布局 / Use web worker to execute layout\n        if (enableWorker) {\n            const rawLayout = layout;\n            this.supervisor = new Supervisor(rawLayout.graphData2LayoutModel(data), rawLayout.instance, { iterations });\n            return layoutMapping2GraphData(await this.supervisor.execute());\n        }\n        if (isLayoutWithIterations(layout)) {\n            // 有动画，基于布局迭代 tick 更新位置 / Update position based on layout iteration tick\n            if (animation) {\n                return await layout.execute(data, {\n                    onTick: (tickData) => {\n                        this.updateElementPosition(tickData, false);\n                    },\n                });\n            }\n            // 无动画，直接返回终态位置 / No animation, return final position directly\n            layout.execute(data);\n            layout.stop();\n            return layout.tick(iterations);\n        }\n        // 无迭代的布局，直接返回终态位置 / Layout without iteration, return final position directly\n        const layoutResult = await layout.execute(data);\n        if (animation) {\n            this.updateElementPosition(layoutResult, animation);\n        }\n        return layoutResult;\n    }\n    async treeLayout(data, options, index) {\n        const { type, animation } = options;\n        // @ts-expect-error @antv/hierarchy 布局格式与 @antv/layout 不一致，其导出的是一个方法，而非 class\n        // The layout format of @antv/hierarchy is inconsistent with @antv/layout, it exports a method instead of a class\n        const layout = getExtension('layout', type);\n        if (!layout)\n            return {};\n        const { nodes = [], edges = [] } = data;\n        const model = new Graphlib({\n            nodes: nodes.map((node) => ({ id: idOf(node), data: node.data || {} })),\n            edges: edges.map((edge) => ({ id: idOf(edge), source: edge.source, target: edge.target, data: edge.data || {} })),\n        });\n        createTreeStructure(model);\n        const layoutResult = { nodes: [], edges: [] };\n        const roots = model.getRoots(TREE_KEY);\n        roots.forEach((root) => {\n            dfs(root, (node) => {\n                node.children = model.getSuccessors(node.id);\n            }, (node) => model.getSuccessors(node.id), 'TB');\n            const result = layout(root, options);\n            // 将布局结果转化为 LayoutMapping 格式 / Convert the layout result to LayoutMapping format\n            dfs(result, (node) => {\n                const { id, x, y, z = 0 } = node;\n                layoutResult.nodes.push({ id, style: { x, y, z } });\n            }, (node) => node.children, 'TB');\n        });\n        if (animation) {\n            this.updateElementPosition(layoutResult, animation);\n        }\n        return layoutResult;\n    }\n    stopLayout() {\n        if (this.instance && isLayoutWithIterations(this.instance)) {\n            this.instance.stop();\n            this.instance = undefined;\n        }\n        if (this.supervisor) {\n            this.supervisor.stop();\n            this.supervisor = undefined;\n        }\n        if (this.animationResult) {\n            this.animationResult.finish();\n            this.animationResult = undefined;\n        }\n    }\n    getLayoutData(options) {\n        const { nodeFilter = () => true } = options;\n        const { nodes, edges, combos } = this.context.model.getData();\n        const getElement = (id) => this.context.element.getElement(id);\n        const nodesToLayout = nodes.filter((node) => {\n            const id = idOf(node);\n            const element = getElement(id);\n            if (!element)\n                return false;\n            if (isToBeDestroyed(element))\n                return false;\n            return nodeFilter(node);\n        });\n        const nodesIdMap = new Map(nodesToLayout.map((node) => [idOf(node), node]));\n        const edgesToLayout = edges.filter((edge) => {\n            const { source, target } = edge;\n            if (!nodesIdMap.has(source) || !nodesIdMap.has(target))\n                return false;\n            return true;\n        });\n        return {\n            nodes: nodesToLayout,\n            edges: edgesToLayout,\n            combos,\n        };\n    }\n    /**\n     * <zh/> 创建布局实例\n     *\n     * <en/> Create layout instance\n     * @param options - <zh/> 布局配置项 | <en/> Layout options\n     * @returns <zh/> 布局对象 | <en/> Layout object\n     */\n    initGraphLayout(options) {\n        const { element, viewport } = this.context;\n        const { type, enableWorker, animation, iterations, ...restOptions } = options;\n        const [width, height] = viewport.getCanvasSize();\n        const center = [width / 2, height / 2];\n        const nodeSize = options?.nodeSize ??\n            ((node) => {\n                const nodeElement = element?.getElement(node.id);\n                const { size } = nodeElement?.attributes || {};\n                return Math.max(...parseSize(size));\n            });\n        const Ctor = getExtension('layout', type);\n        if (!Ctor)\n            return print.warn(`The layout of ${type} is not registered.`);\n        const STDCtor = Object.getPrototypeOf(Ctor.prototype) === BaseLayout.prototype\n            ? Ctor\n            : layoutAdapter(Ctor, this.context);\n        const layout = new STDCtor(this.context);\n        const config = { nodeSize, width, height, center };\n        switch (layout.id) {\n            case 'd3-force':\n            case 'd3-force-3d':\n                Object.assign(config, {\n                    center: { x: width / 2, y: height / 2, z: 0 },\n                });\n                break;\n            default:\n                break;\n        }\n        deepMix(layout.options, config, restOptions);\n        return layout;\n    }\n    updateElementPosition(layoutResult, animation) {\n        const { model, element } = this.context;\n        if (!element)\n            return null;\n        model.updateData(layoutResult);\n        return element.draw({ animation, silence: true });\n    }\n    destroy() {\n        this.stopLayout();\n        // @ts-expect-error force delete\n        this.context = {};\n        this.supervisor?.kill();\n        this.supervisor = undefined;\n        this.instance = undefined;\n        this.instances = [];\n        this.animationResult = undefined;\n    }\n}\n//# sourceMappingURL=layout.js.map","import { ExtensionController } from '../registry/extension';\nexport class PluginController extends ExtensionController {\n    category = 'plugin';\n    constructor(context) {\n        super(context);\n        this.setPlugins(this.context.options.plugins || []);\n    }\n    setPlugins(plugins) {\n        this.setExtensions(plugins);\n    }\n    getPluginInstance(key) {\n        return this.extensionMap[key];\n    }\n}\n//# sourceMappingURL=plugin.js.map","import { ExtensionController } from '../registry/extension';\nexport const REQUIRED_TRANSFORMS = [\n    'update-related-edges',\n    'collapse-expand-node',\n    'collapse-expand-combo',\n    'get-edge-actual-ends',\n    'arrange-draw-order',\n];\nexport class TransformController extends ExtensionController {\n    category = 'transform';\n    constructor(context) {\n        super(context);\n        this.setTransforms(this.context.options.transforms || []);\n    }\n    getTransforms() { }\n    setTransforms(transforms) {\n        this.setExtensions([\n            ...REQUIRED_TRANSFORMS.slice(0, REQUIRED_TRANSFORMS.length - 1),\n            ...transforms,\n            REQUIRED_TRANSFORMS[REQUIRED_TRANSFORMS.length - 1],\n        ]);\n    }\n    getTransformInstance(key) {\n        return key ? this.extensionMap[key] : this.extensionMap;\n    }\n}\n//# sourceMappingURL=transform.js.map","import { AABB } from '@antv/g';\nimport { clamp, isNumber, pick } from '@antv/util';\nimport { AnimationType, GraphEvent } from '../constants';\nimport { getAnimationOptions } from '../utils/animation';\nimport { getBBoxSize, getCombinedBBox } from '../utils/bbox';\nimport { AnimateEvent, ViewportEvent, emit } from '../utils/event';\nimport { parsePadding } from '../utils/padding';\nimport { add, divide, subtract } from '../utils/vector';\nexport class ViewportController {\n    context;\n    get padding() {\n        return parsePadding(this.context.options.padding);\n    }\n    get paddingOffset() {\n        const [top, right, bottom, left] = this.padding;\n        const [offsetX, offsetY, offsetZ] = [(left - right) / 2, (top - bottom) / 2, 0];\n        return [offsetX, offsetY, offsetZ];\n    }\n    constructor(context) {\n        this.context = context;\n        const [px, py] = this.paddingOffset;\n        const { zoom, rotation, x = px, y = py } = context.options;\n        this.transform({ mode: 'absolute', scale: zoom, translate: [x, y], rotate: rotation }, false);\n    }\n    get camera() {\n        return this.context.canvas.getCamera();\n    }\n    landmarkCounter = 0;\n    createLandmark(options) {\n        return this.camera.createLandmark(`landmark-${this.landmarkCounter++}`, options);\n    }\n    getAnimation(animation) {\n        const finalAnimation = getAnimationOptions(this.context.options, animation);\n        if (!finalAnimation)\n            return false;\n        return pick({ ...finalAnimation }, ['easing', 'duration']);\n    }\n    getCanvasSize() {\n        const { canvas } = this.context;\n        const { width = 0, height = 0 } = canvas.getConfig();\n        return [width, height];\n    }\n    /**\n     * <zh/> 获取画布中心坐标\n     *\n     * <en/> Get the center coordinates of the canvas\n     * @returns - <zh/> 画布中心坐标 | <en/> Center coordinates of the canvas\n     * @remarks\n     * <zh/> 基于画布的宽高计算中心坐标，不受视口变换影响\n     *\n     * <en/> Calculate the center coordinates based on the width and height of the canvas, not affected by the viewport transformation\n     */\n    getCanvasCenter() {\n        const { canvas } = this.context;\n        const { width = 0, height = 0 } = canvas.getConfig();\n        return [width / 2, height / 2, 0];\n    }\n    /**\n     * <zh/> 当前视口中心坐标\n     *\n     * <en/> Current viewport center coordinates\n     * @returns - <zh/> 视口中心坐标 | <en/> Viewport center coordinates\n     * @remarks\n     * <zh/> 以画布原点为原点，受到视口变换影响\n     *\n     * <en/> With the origin of the canvas as the origin, affected by the viewport transformation\n     */\n    getViewportCenter() {\n        // 理论上应该通过 camera.getFocalPoint() 获取\n        // 但在 2D 场景下，通过 pan 操作时，focalPoint 不会变化\n        const [x, y] = this.camera.getPosition();\n        return [x, y, 0];\n    }\n    getGraphCenter() {\n        return this.context.graph.getViewportByCanvas(this.getCanvasCenter());\n    }\n    getZoom() {\n        return this.camera.getZoom();\n    }\n    getRotation() {\n        return this.camera.getRoll();\n    }\n    getTranslateOptions(options) {\n        const { camera } = this;\n        const { mode, translate = [] } = options;\n        const currentZoom = this.getZoom();\n        const position = camera.getPosition();\n        const focalPoint = camera.getFocalPoint();\n        const [cx, cy] = this.getCanvasCenter();\n        const [x = 0, y = 0, z = 0] = translate;\n        const delta = divide([-x, -y, -z], currentZoom);\n        return mode === 'relative'\n            ? {\n                position: add(position, delta),\n                focalPoint: add(focalPoint, delta),\n            }\n            : {\n                position: add([cx, cy, position[2]], delta),\n                focalPoint: add([cx, cy, focalPoint[2]], delta),\n            };\n    }\n    getRotateOptions(options) {\n        const { mode, rotate = 0 } = options;\n        const roll = mode === 'relative' ? this.camera.getRoll() + rotate : rotate;\n        return { roll };\n    }\n    getZoomOptions(options) {\n        const { zoomRange } = this.context.options;\n        const currentZoom = this.camera.getZoom();\n        const { mode, scale = 1 } = options;\n        return clamp(mode === 'relative' ? currentZoom * scale : scale, ...zoomRange);\n    }\n    transformResolver;\n    async transform(options, animation) {\n        const { graph } = this.context;\n        const { translate, rotate, scale, origin } = options;\n        this.cancelAnimation();\n        const _animation = this.getAnimation(animation);\n        emit(graph, new ViewportEvent(GraphEvent.BEFORE_TRANSFORM, options));\n        // 针对缩放操作，且不涉及平移、旋转、中心点、动画时，直接调用 setZoomByViewportPoint\n        // For zoom operations, and no translation, rotation, center point, and animation involved, call setZoomByViewportPoint directly\n        if (!rotate && scale && !translate && origin && !_animation) {\n            this.camera.setZoomByViewportPoint(this.getZoomOptions(options), origin);\n            emit(graph, new ViewportEvent(GraphEvent.AFTER_TRANSFORM, options));\n            return;\n        }\n        const landmarkOptions = {};\n        if (translate)\n            Object.assign(landmarkOptions, this.getTranslateOptions(options));\n        if (isNumber(rotate))\n            Object.assign(landmarkOptions, this.getRotateOptions(options));\n        if (isNumber(scale))\n            Object.assign(landmarkOptions, { zoom: this.getZoomOptions(options) });\n        if (_animation) {\n            emit(graph, new AnimateEvent(GraphEvent.BEFORE_ANIMATE, AnimationType.TRANSFORM, null, options));\n            return new Promise((resolve) => {\n                this.transformResolver = resolve;\n                this.camera.gotoLandmark(this.createLandmark(landmarkOptions), {\n                    ..._animation,\n                    onfinish: () => {\n                        emit(graph, new AnimateEvent(GraphEvent.AFTER_ANIMATE, AnimationType.TRANSFORM, null, options));\n                        emit(graph, new ViewportEvent(GraphEvent.AFTER_TRANSFORM, options));\n                        this.transformResolver = undefined;\n                        resolve();\n                    },\n                });\n            });\n        }\n        else {\n            this.camera.gotoLandmark(this.createLandmark(landmarkOptions), {\n                duration: 0,\n            });\n            emit(graph, new ViewportEvent(GraphEvent.AFTER_TRANSFORM, options));\n        }\n    }\n    async fitView(options, animation) {\n        const [top, right, bottom, left] = this.padding;\n        const { when = 'always', direction = 'both' } = options || {};\n        const [width, height] = this.context.canvas.getSize();\n        const innerWidth = width - left - right;\n        const innerHeight = height - top - bottom;\n        const canvasBounds = this.context.canvas.getBounds();\n        const bboxInViewPort = this.getBBoxInViewport(canvasBounds);\n        const [contentWidth, contentHeight] = getBBoxSize(bboxInViewPort);\n        const isOverflow = (direction === 'x' && contentWidth >= innerWidth) ||\n            (direction === 'y' && contentHeight >= innerHeight) ||\n            (direction === 'both' && contentWidth >= innerWidth && contentHeight >= innerHeight);\n        if (when === 'overflow' && !isOverflow)\n            return await this.fitCenter(animation);\n        const scaleX = innerWidth / contentWidth;\n        const scaleY = innerHeight / contentHeight;\n        const scale = direction === 'x' ? scaleX : direction === 'y' ? scaleY : Math.min(scaleX, scaleY);\n        const _animation = this.getAnimation(animation);\n        await this.transform({\n            mode: 'relative',\n            scale,\n            translate: add(subtract(this.getCanvasCenter(), this.getBBoxInViewport(canvasBounds).center), divide(this.paddingOffset, scale)),\n        }, _animation);\n    }\n    async fitCenter(animation) {\n        const canvasBounds = this.context.canvas.getBounds();\n        await this.focus(canvasBounds, animation);\n    }\n    async focusElements(ids, animation) {\n        const { element } = this.context;\n        if (!element)\n            return;\n        const elementsBounds = getCombinedBBox(ids.map((id) => element.getElement(id).getRenderBounds()));\n        await this.focus(elementsBounds, animation);\n    }\n    async focus(bbox, animation) {\n        const center = this.context.graph.getViewportByCanvas(bbox.center);\n        const canvasCenter = this.getCanvasCenter();\n        const delta = subtract(canvasCenter, center);\n        await this.transform({ mode: 'relative', translate: add(delta, this.paddingOffset) }, animation);\n    }\n    /**\n     * <zh/> 获取画布元素在视口中的包围盒\n     *\n     * <en/> Get the bounding box of the canvas element in the viewport\n     * @param bbox - <zh/> 画布元素包围盒 | <en/> Canvas element bounding box\n     * @returns - <zh/> 视口中的包围盒 | <en/> Bounding box in the viewport\n     */\n    getBBoxInViewport(bbox) {\n        const { min, max } = bbox;\n        const { graph } = this.context;\n        const [x1, y1] = graph.getViewportByCanvas(min);\n        const [x2, y2] = graph.getViewportByCanvas(max);\n        const bboxInViewport = new AABB();\n        bboxInViewport.setMinMax([x1, y1, 0], [x2, y2, 0]);\n        return bboxInViewport;\n    }\n    cancelAnimation() {\n        // @ts-expect-error landmarks is private\n        if (this.camera.landmarks?.length) {\n            this.camera.cancelLandmarkAnimation();\n        }\n        this.transformResolver?.();\n    }\n}\n//# sourceMappingURL=viewport.js.map","import EventEmitter from '@antv/event-emitter';\nimport { debounce, isEqual, isFunction, isNumber, isObject, isString, omit } from '@antv/util';\nimport { COMBO_KEY, GraphEvent } from '../constants';\nimport { isCollapsed } from '../utils/collapsibility';\nimport { sizeOf } from '../utils/dom';\nimport { GraphLifeCycleEvent, emit } from '../utils/event';\nimport { idOf } from '../utils/id';\nimport { format } from '../utils/print';\nimport { subtract } from '../utils/vector';\nimport { Animation } from './animation';\nimport { BatchController } from './batch';\nimport { BehaviorController } from './behavior';\nimport { Canvas } from './canvas';\nimport { DataController } from './data';\nimport { ElementController } from './element';\nimport { LayoutController } from './layout';\nimport { PluginController } from './plugin';\nimport { TransformController } from './transform';\nimport { ViewportController } from './viewport';\nexport class Graph extends EventEmitter {\n    options;\n    /**\n     * @internal\n     */\n    static defaultOptions = {\n        autoResize: false,\n        theme: 'light',\n        rotation: 0,\n        zoom: 1,\n        zoomRange: [0.01, 10],\n    };\n    /**\n     * <zh/> 当前图实例是否已经被销毁\n     *\n     * <en/> Whether the current graph instance has been destroyed\n     */\n    destroyed = false;\n    // @ts-expect-error will be initialized in createRuntime\n    context = {\n        model: new DataController(),\n    };\n    constructor(options) {\n        super();\n        this.options = Object.assign({}, Graph.defaultOptions, options);\n        this.setOptions(this.options);\n        this.context.graph = this;\n        // Listening window.resize to autoResize.\n        this.options.autoResize && window.addEventListener('resize', this.onResize);\n    }\n    /**\n     * <zh/> 获取配置项\n     *\n     * <en/> Get options\n     * @returns <zh/> 配置项 | <en/> options\n     * @apiCategory option\n     */\n    getOptions() {\n        return this.options;\n    }\n    /**\n     * <zh/> 设置配置项\n     *\n     * <en/> Set options\n     * @param options - <zh/> 配置项 | <en/> options\n     * @remarks\n     * <zh/> 要更新 devicePixelRatio、container 属性请销毁后重新创建实例\n     *\n     * <en/> To update devicePixelRatio and container properties, please destroy and recreate the instance\n     * @apiCategory option\n     */\n    setOptions(options) {\n        const { behaviors, combo, data, edge, height, layout, node, plugins, theme, transforms, width, renderer } = options;\n        if (renderer) {\n            const canvas = this.context.canvas;\n            if (canvas) {\n                this.emit(GraphEvent.BEFORE_RENDERER_CHANGE, { renderer: this.options.renderer });\n                canvas.setRenderer(renderer);\n                this.emit(GraphEvent.AFTER_RENDERER_CHANGE, { renderer });\n            }\n        }\n        Object.assign(this.options, options);\n        if (behaviors)\n            this.setBehaviors(behaviors);\n        if (combo)\n            this.setCombo(combo);\n        if (data)\n            this.setData(data);\n        if (edge)\n            this.setEdge(edge);\n        if (layout)\n            this.setLayout(layout);\n        if (node)\n            this.setNode(node);\n        if (theme)\n            this.setTheme(theme);\n        if (plugins)\n            this.setPlugins(plugins);\n        if (transforms)\n            this.setTransforms(transforms);\n        if (isNumber(width) || isNumber(height))\n            this.setSize(width ?? this.options.width ?? 0, height ?? this.options.height ?? 0);\n    }\n    /**\n     * <zh/> 获取当前画布容器的尺寸\n     *\n     * <en/> Get the size of the current canvas container\n     * @returns <zh/> 画布尺寸 | <en/> canvas size\n     * @apiCategory canvas\n     */\n    getSize() {\n        if (this.context.canvas)\n            return this.context.canvas.getSize();\n        return [this.options.width || 0, this.options.height || 0];\n    }\n    /**\n     * <zh/> 获取当前画布容器的尺寸\n     *\n     * <en/> Get the size of the current canvas container\n     * @param width - <zh/> 画布宽度 | <en/> canvas width\n     * @param height - <zh/> 画布高度 | <en/> canvas height\n     * @apiCategory canvas\n     */\n    setSize(width, height) {\n        Object.assign(this.options, { width, height });\n        this.context.canvas?.resize(width, height);\n    }\n    /**\n     * <zh/> 设置当前图的缩放区间\n     *\n     * <en/> Get the zoom range of the current graph\n     * @param zoomRange - <zh/> 缩放区间 | <en/> zoom range\n     * @apiCategory viewport\n     */\n    setZoomRange(zoomRange) {\n        this.options.zoomRange = zoomRange;\n    }\n    /**\n     * <zh/> 获取当前图的缩放区间\n     *\n     * <en/> Get the zoom range of the current graph\n     * @returns <zh/> 缩放区间 | <en/> zoom range\n     * @apiCategory viewport\n     */\n    getZoomRange() {\n        return this.options.zoomRange;\n    }\n    /**\n     * <zh/> 设置节点样式映射\n     *\n     * <en/> Set node mapper\n     * @param node - <zh/> 节点配置 | <en/> node options\n     * @remarks\n     * <zh/> 即 `options.node` 的值\n     *\n     * <en/> The value of `options.node`\n     * @apiCategory element\n     */\n    setNode(node) {\n        this.options.node = node;\n        this.context.model.refreshData();\n    }\n    /**\n     * <zh/> 设置边样式映射\n     *\n     * <en/> Set edge mapper\n     * @param edge - <zh/> 边配置 | <en/> edge options\n     * @remarks\n     * <zh/> 即 `options.edge` 的值\n     *\n     * <en/> The value of `options.edge`\n     * @apiCategory element\n     */\n    setEdge(edge) {\n        this.options.edge = edge;\n        this.context.model.refreshData();\n    }\n    /**\n     * <zh/> 设置组合样式映射\n     *\n     * <en/> Set combo mapper\n     * @param combo - <zh/> 组合配置 | <en/> combo options\n     * @remarks\n     * <zh/> 即 `options.combo` 的值\n     *\n     * <en/> The value of `options.combo`\n     * @apiCategory element\n     */\n    setCombo(combo) {\n        this.options.combo = combo;\n        this.context.model.refreshData();\n    }\n    /**\n     * <zh/> 获取主题\n     *\n     * <en/> Get theme\n     * @returns <zh/> 当前主题 | <en/> current theme\n     * @apiCategory theme\n     */\n    getTheme() {\n        return this.options.theme;\n    }\n    /**\n     * <zh/> 设置主题\n     *\n     * <en/> Set theme\n     * @param theme - <zh/> 主题名 | <en/> theme name\n     * @example\n     * ```ts\n     * graph.setTheme('dark');\n     * ```\n     * @apiCategory theme\n     */\n    setTheme(theme) {\n        this.options.theme = isFunction(theme) ? theme(this.getTheme()) : theme;\n    }\n    /**\n     * <zh/> 设置布局\n     *\n     * <en/> Set layout\n     * @param layout - <zh/> 布局配置 | <en/> layout options\n     * @example\n     * ```ts\n     * graph.setLayout({\n     *  type: 'dagre',\n     * })\n     * ```\n     * @apiCategory layout\n     */\n    setLayout(layout) {\n        this.options.layout = isFunction(layout) ? layout(this.getLayout()) : layout;\n    }\n    /**\n     * <zh/> 获取布局配置\n     *\n     * <en/> Get layout options\n     * @returns <zh/> 布局配置 | <en/> layout options\n     * @apiCategory layout\n     */\n    getLayout() {\n        return this.options.layout;\n    }\n    /**\n     * <zh/> 设置交互\n     *\n     * <en/> Set behaviors\n     * @param behaviors - <zh/> 交互配置 | <en/> behavior options\n     * @remarks\n     * <zh/> 设置的交互会全量替换原有的交互，如果需要新增交互可以使用如下方式：\n     *\n     * <en/> The set behavior will completely replace the original behavior. If you need to add behavior, you can use the following method:\n     *\n     * ```ts\n     * graph.setBehaviors((behaviors) => [...behaviors, { type: 'zoom-canvas' }])\n     * ```\n     * @apiCategory behavior\n     */\n    setBehaviors(behaviors) {\n        this.options.behaviors = isFunction(behaviors) ? behaviors(this.getBehaviors()) : behaviors;\n        this.context.behavior?.setBehaviors(this.options.behaviors);\n    }\n    /**\n     * <zh/> 更新指定的交互配置\n     *\n     * <en/> Update specified behavior options\n     * @param behavior - <zh/> 交互配置 | <en/> behavior options\n     * @remarks\n     * <zh/> 如果要更新一个交互，那么必须在交互配置中指定 key 字段，例如：\n     *\n     * <en/> If you want to update a behavior, you must specify the key field in the behavior options, for example:\n     * ```ts\n     * {\n     *   behaviors: [{ type: 'zoom-canvas', key: 'zoom-canvas' }]\n     * }\n     *\n     * graph.updateBehavior({ key: 'zoom-canvas', enable: false })\n     * ```\n     * @apiCategory behavior\n     */\n    updateBehavior(behavior) {\n        this.setBehaviors((behaviors) => behaviors.map((_behavior) => {\n            if (typeof _behavior === 'object' && _behavior.key === behavior.key) {\n                return { ..._behavior, ...behavior };\n            }\n            return _behavior;\n        }));\n    }\n    /**\n     * <zh/> 获取交互配置\n     *\n     * <en/> Get behaviors options\n     * @returns <zh/> 交互配置 | <en/> behavior options\n     * @apiCategory behavior\n     */\n    getBehaviors() {\n        return this.options.behaviors || [];\n    }\n    /**\n     * <zh/> 设置插件配置\n     *\n     * <en/> Set plugins options\n     * @param plugins - <zh/> 插件配置 | <en/> plugin options\n     * @remarks\n     * <zh/> 设置的插件会全量替换原有的插件配置，如果需要新增插件可以使用如下方式：\n     *\n     * <en/> The set plugin will completely replace the original plugin configuration. If you need to add a plugin, you can use the following method:\n     * ```ts\n     * graph.setPlugins((plugins) => [...plugins, { key: 'grid-line' }])\n     * ```\n     * @apiCategory plugin\n     */\n    setPlugins(plugins) {\n        this.options.plugins = isFunction(plugins) ? plugins(this.getPlugins()) : plugins;\n        this.context.plugin?.setPlugins(this.options.plugins);\n    }\n    /**\n     * <zh/> 更新插件配置\n     *\n     * <en/> Update plugin options\n     * @param plugin - <zh/> 插件配置 | <en/> plugin options\n     * @remarks\n     * <zh/> 如果要更新一个插件，那么必须在插件配置中指定 key 字段，例如：\n     *\n     * <en/> If you want to update a plugin, you must specify the key field in the plugin options, for example:\n     * ```ts\n     * {\n     *   plugins: [{ key: 'grid-line' }]\n     * }\n     *\n     * graph.updatePlugin({ key: 'grid-line', follow: true })\n     * ```\n     * @apiCategory plugin\n     */\n    updatePlugin(plugin) {\n        this.setPlugins((plugins) => plugins.map((_plugin) => {\n            if (typeof _plugin === 'object' && _plugin.key === plugin.key) {\n                return { ..._plugin, ...plugin };\n            }\n            return _plugin;\n        }));\n    }\n    /**\n     * <zh/> 获取插件配置\n     *\n     * <en/> Get plugins options\n     * @returns <zh/> 插件配置 | <en/> plugin options\n     * @apiCategory plugin\n     */\n    getPlugins() {\n        return this.options.plugins || [];\n    }\n    /**\n     * <zh/> 获取插件实例\n     *\n     * <en/> Get plugin instance\n     * @param key - <zh/> 插件 key | <en/> plugin key\n     * @returns <zh/> 插件实例 | <en/> plugin instance\n     * @remarks\n     * <zh/> 一些插件提供了 API 方法可供调用，例如全屏插件可以调用 `request` 和 `exit` 方法来请求和退出全屏\n     *\n     * <en/> Some plugins provide API methods for calling, such as the full-screen plugin can call the `request` and `exit` methods to request and exit full-screen\n     * ```ts\n     * const fullscreen = graph.getPluginInstance('fullscreen');\n     *\n     * fullscreen.request();\n     *\n     * fullscreen.exit();\n     * ```\n     * @apiCategory plugin\n     */\n    getPluginInstance(key) {\n        return this.context.plugin.getPluginInstance(key);\n    }\n    /**\n     * <zh/> 设置数据转换器\n     *\n     * <en/> Set data transforms\n     * @param transforms - <zh/> 数据转换配置 | <en/> data transform options\n     * @remarks\n     * <zh/> 数据转换器能够在图渲染过程中执行数据转换，目前支持在渲染前对绘制数据进行转化。\n     *\n     * <en/> Data transforms can perform data transformation during the rendering process of the graph. Currently, it supports transforming the drawing data before rendering.\n     * @apiCategory transform\n     */\n    setTransforms(transforms) {\n        this.options.transforms = isFunction(transforms) ? transforms(this.getTransforms()) : transforms;\n        this.context.transform?.setTransforms(this.options.transforms);\n    }\n    /**\n     * <zh/> 更新数据转换器\n     *\n     * <en/> Update data transform\n     * @param transform - <zh/> 数据转换器配置 | <en/> data transform options\n     * @apiCategory transform\n     */\n    updateTransform(transform) {\n        this.setTransforms((transforms) => transforms.map((_transform) => {\n            if (typeof _transform === 'object' && _transform.key === transform.key) {\n                return { ..._transform, ...transform };\n            }\n            return _transform;\n        }));\n        this.context.model.refreshData();\n    }\n    /**\n     * <zh/> 获取数据转换器配置\n     *\n     * <en/> Get data transforms options\n     * @returns <zh/> 数据转换配置 | <en/> data transform options\n     * @apiCategory transform\n     */\n    getTransforms() {\n        return this.options.transforms || [];\n    }\n    /**\n     * <zh/> 获取图数据\n     *\n     * <en/> Get graph data\n     * @returns <zh/> 图数据 | <en/> Graph data\n     * <zh/> 获取当前图的数据，包括节点、边、组合数据\n     *\n     * <en/> Get the data of the current graph, including node, edge, and combo data\n     * @apiCategory data\n     */\n    getData() {\n        return this.context.model.getData();\n    }\n    getElementData(ids) {\n        if (Array.isArray(ids))\n            return ids.map((id) => this.context.model.getElementDataById(id));\n        return this.context.model.getElementDataById(ids);\n    }\n    getNodeData(id) {\n        if (id === undefined)\n            return this.context.model.getNodeData();\n        if (Array.isArray(id))\n            return this.context.model.getNodeData(id);\n        return this.context.model.getNodeData([id])?.[0];\n    }\n    getEdgeData(id) {\n        if (id === undefined)\n            return this.context.model.getEdgeData();\n        if (Array.isArray(id))\n            return this.context.model.getEdgeData(id);\n        return this.context.model.getEdgeData([id])?.[0];\n    }\n    getComboData(id) {\n        if (id === undefined)\n            return this.context.model.getComboData();\n        if (Array.isArray(id))\n            return this.context.model.getComboData(id);\n        return this.context.model.getComboData([id])?.[0];\n    }\n    /**\n     * <zh/> 设置全量数据\n     *\n     * <en/> Set full data\n     * @param data - <zh/> 数据 | <en/> data\n     * @remarks\n     * <zh/> 设置全量数据会替换当前图中的所有数据，G6 会自动进行数据差异计算\n     *\n     * <en/> Setting full data will replace all data in the current graph, and G6 will automatically calculate the data difference\n     * @apiCategory data\n     */\n    setData(data) {\n        this.context.model.setData(isFunction(data) ? data(this.getData()) : data);\n    }\n    /**\n     * <zh/> 新增元素数据\n     *\n     * <en/> Add element data\n     * @param data - <zh/> 元素数据 | <en/> element data\n     * @example\n     * ```ts\n     * graph.addData({\n     *  nodes: [{ id: 'node-1' }, { id: 'node-2' }],\n     *  edges: [{ source: 'node-1', target: 'node-2' }],\n     * });\n     * ```\n     * @apiCategory data\n     */\n    addData(data) {\n        this.context.model.addData(isFunction(data) ? data(this.getData()) : data);\n    }\n    /**\n     * <zh/> 新增节点数据\n     *\n     * <en/> Add node data\n     * @param data - <zh/> 节点数据 | <en/> node data\n     * @example\n     * ```ts\n     * graph.addNodeData([{ id: 'node-1' }, { id: 'node-2' }]);\n     * ```\n     * @apiCategory data\n     */\n    addNodeData(data) {\n        this.context.model.addNodeData(isFunction(data) ? data(this.getNodeData()) : data);\n    }\n    /**\n     * <zh/> 新增边数据\n     *\n     * <en/> Add edge data\n     * @param data - <zh/> 边数据 | <en/> edge data\n     * @example\n     * ```ts\n     * graph.addEdgeData([{ source: 'node-1', target: 'node-2' }]);\n     * ```\n     * @apiCategory data\n     */\n    addEdgeData(data) {\n        this.context.model.addEdgeData(isFunction(data) ? data(this.getEdgeData()) : data);\n    }\n    /**\n     * <zh/> 新增组合数据\n     *\n     * <en/> Add combo data\n     * @param data - <zh/> 组合数据 | <en/> combo data\n     * @example\n     * ```ts\n     * graph.addComboData([{ id: 'combo-1' }]);\n     * ```\n     * @apiCategory data\n     */\n    addComboData(data) {\n        this.context.model.addComboData(isFunction(data) ? data(this.getComboData()) : data);\n    }\n    /**\n     * <zh/> 为树图节点添加子节点数据\n     *\n     * <en/> Add child node data to the tree node\n     * @param parentId - <zh/> 父节点 ID | <en/> parent node ID\n     * @param childrenData - <zh/> 子节点数据 | <en/> child node data\n     * @remarks\n     * <zh/> 为组合添加子节点使用 addNodeData / addComboData 方法\n     *\n     * <en/> Use addNodeData / addComboData method to add child nodes to the combo\n     * @apiCategory data\n     */\n    addChildrenData(parentId, childrenData) {\n        this.context.model.addChildrenData(parentId, childrenData);\n    }\n    /**\n     * <zh/> 更新元素数据\n     *\n     * <en/> Update element data\n     * @param data - <zh/> 元素数据 | <en/> element data\n     * @remarks\n     * <zh/> 只需要传入需要更新的数据即可，不必传入完整的数据\n     *\n     * <en/> Just pass in the data that needs to be updated, no need to pass in the complete data\n     * @example\n     * ```ts\n     * graph.updateData({\n     *   nodes: [{ id: 'node-1', style: { x: 100, y: 100 } }],\n     *   edges: [{ id: 'edge-1', style: { lineWidth: 2 } }]\n     * });\n     * ```\n     * @apiCategory data\n     */\n    updateData(data) {\n        this.context.model.updateData(isFunction(data) ? data(this.getData()) : data);\n    }\n    /**\n     * <zh/> 更新节点数据\n     *\n     * <en/> Update node data\n     * @param data - <zh/> 节点数据 | <en/> node data\n     * @remarks\n     * <zh/> 只需要传入需要更新的数据即可，不必传入完整的数据\n     *\n     * <en/> Just pass in the data that needs to be updated, no need to pass in the complete data\n     * @example\n     * ```ts\n     * graph.updateNodeData([{ id: 'node-1', style: { x: 100, y: 100 } }]);\n     * ```\n     * @apiCategory data\n     */\n    updateNodeData(data) {\n        this.context.model.updateNodeData(isFunction(data) ? data(this.getNodeData()) : data);\n    }\n    /**\n     * <zh/> 更新边数据\n     *\n     * <en/> Update edge data\n     * @param data - <zh/> 边数据 | <en/> edge data\n     * @remarks\n     * <zh/> 只需要传入需要更新的数据即可，不必传入完整的数据\n     *\n     * <en/> Just pass in the data that needs to be updated, no need to pass in the complete data\n     * @example\n     * ```ts\n     * graph.updateEdgeData([{ id: 'edge-1', style: { lineWidth: 2 } }]);\n     * ```\n     * @apiCategory data\n     */\n    updateEdgeData(data) {\n        this.context.model.updateEdgeData(isFunction(data) ? data(this.getEdgeData()) : data);\n    }\n    /**\n     * <zh/> 更新组合数据\n     *\n     * <en/> Update combo data\n     * @param data - <zh/> 组合数据 | <en/> combo data\n     * @remarks\n     * <zh/> 只需要传入需要更新的数据即可，不必传入完整的数据\n     *\n     * <en/> Just pass in the data that needs to be updated, no need to pass in the complete data\n     * @example\n     * ```ts\n     * graph.updateComboData([{ id: 'combo-1', style: { x: 100, y: 100 } }]);\n     * ```\n     * @apiCategory data\n     */\n    updateComboData(data) {\n        this.context.model.updateComboData(isFunction(data) ? data(this.getComboData()) : data);\n    }\n    /**\n     * <zh/> 删除元素数据\n     *\n     * <en/> Remove element data\n     * @param ids - <zh/> 元素 ID 数组 | <en/> element ID array\n     * @example\n     * ```ts\n     * graph.removeData({\n     *   nodes: ['node-1', 'node-2'],\n     *   edges: ['edge-1'],\n     * });\n     * ```\n     * @apiCategory data\n     */\n    removeData(ids) {\n        this.context.model.removeData(isFunction(ids) ? ids(this.getData()) : ids);\n    }\n    /**\n     * <zh/> 删除节点数据\n     *\n     * <en/> Remove node data\n     * @param ids - <zh/> 节点 ID 数组 | <en/> node ID array\n     * @example\n     * ```ts\n     * graph.removeNodeData(['node-1', 'node-2']);\n     * ```\n     * @apiCategory data\n     */\n    removeNodeData(ids) {\n        this.context.model.removeNodeData(isFunction(ids) ? ids(this.getNodeData()) : ids);\n    }\n    /**\n     * <zh/> 删除边数据\n     *\n     * <en/> Remove edge data\n     * @param ids - <zh/> 边 ID 数组 | <en/> edge ID array\n     * @remarks\n     * <zh/> 如果传入边数据时仅提供了 source 和 target，那么需要通过 `idOf` 方法获取边的实际 ID\n     *\n     * <en/> If only the source and target are provided when passing in the edge data, you need to get the actual ID of the edge through the `idOf` method\n     * @example\n     * ```ts\n     * graph.removeEdgeData(['edge-1']);\n     * ```\n     * @apiCategory data\n     */\n    removeEdgeData(ids) {\n        this.context.model.removeEdgeData(isFunction(ids) ? ids(this.getEdgeData()) : ids);\n    }\n    /**\n     * <zh/> 删除组合数据\n     *\n     * <en/> Remove combo data\n     * @param ids - <zh/> 组合 ID 数组 | <en/> 组合 ID array\n     * @example\n     * ```ts\n     * graph.removeComboData(['combo-1']);\n     * ```\n     * @apiCategory data\n     */\n    removeComboData(ids) {\n        this.context.model.removeComboData(isFunction(ids) ? ids(this.getComboData()) : ids);\n    }\n    /**\n     * <zh/> 获取元素类型\n     *\n     * <en/> Get element type\n     * @param id - <zh/> 元素 ID | <en/> element ID\n     * @returns <zh/> 元素类型 | <en/> element type\n     * @apiCategory element\n     */\n    getElementType(id) {\n        return this.context.model.getElementType(id);\n    }\n    /**\n     * <zh/> 获取节点或组合关联边的数据\n     *\n     * <en/> Get edge data related to the node or combo\n     * @param id - <zh/> 节点或组合ID | <en/> node or combo ID\n     * @param direction - <zh/> 边的方向 | <en/> edge direction\n     * @returns <zh/> 边数据 | <en/> edge data\n     * @apiCategory data\n     */\n    getRelatedEdgesData(id, direction = 'both') {\n        return this.context.model.getRelatedEdgesData(id, direction);\n    }\n    /**\n     * <zh/> 获取节点或组合的一跳邻居节点数据\n     *\n     * <en/> Get the one-hop neighbor node data of the node or combo\n     * @param id - <zh/> 节点或组合ID | <en/> node or combo ID\n     * @returns <zh/> 邻居节点数据 | <en/> neighbor node data\n     * @apiCategory data\n     */\n    getNeighborNodesData(id) {\n        return this.context.model.getNeighborNodesData(id);\n    }\n    /**\n     * <zh/> 获取节点或组合的祖先元素数据\n     *\n     * <en/> Get the ancestor element data of the node or combo\n     * @param id - <zh/> 节点或组合ID | <en/> node or combo ID\n     * @param hierarchy - <zh/> 指定树图层级关系还是组合层级关系 | <en/> specify tree or combo hierarchy relationship\n     * @returns <zh/> 祖先元素数据 | <en/> ancestor element data\n     * @remarks\n     * <zh/> 数组中的顺序是从父节点到祖先节点\n     *\n     * <en/> The order in the array is from the parent node to the ancestor node\n     * @apiCategory data\n     */\n    getAncestorsData(id, hierarchy) {\n        return this.context.model.getAncestorsData(id, hierarchy);\n    }\n    /**\n     * <zh/> 获取节点或组合的父元素数据\n     *\n     * <en/> Get the parent element data of the node or combo\n     * @param id - <zh/> 节点或组合ID | <en/> node or combo ID\n     * @param hierarchy - <zh/> 指定树图层级关系还是组合层级关系 | <en/> specify tree or combo hierarchy relationship\n     * @returns <zh/> 父元素数据 | <en/> parent element data\n     * @apiCategory data\n     */\n    getParentData(id, hierarchy) {\n        return this.context.model.getParentData(id, hierarchy);\n    }\n    /**\n     * <zh/> 获取节点或组合的子元素数据\n     *\n     * <en/> Get the child element data of the node or combo\n     * @param id - <zh/> 节点或组合ID | <en/> node or combo ID\n     * @returns <zh/> 子元素数据 | <en/> child element data\n     * @apiCategory data\n     */\n    getChildrenData(id) {\n        return this.context.model.getChildrenData(id);\n    }\n    getElementDataByState(elementType, state) {\n        return this.context.model.getElementDataByState(elementType, state);\n    }\n    async initCanvas() {\n        if (this.context.canvas)\n            return await this.context.canvas.ready;\n        const { container = 'container', width, height, renderer, background } = this.options;\n        if (container instanceof Canvas) {\n            this.context.canvas = container;\n            await container.ready;\n        }\n        else {\n            const $container = isString(container) ? document.getElementById(container) : container;\n            const containerSize = sizeOf($container);\n            this.emit(GraphEvent.BEFORE_CANVAS_INIT, { container: $container, width, height });\n            const canvas = new Canvas({\n                container: $container,\n                width: width || containerSize[0],\n                height: height || containerSize[1],\n                background,\n                renderer,\n            });\n            this.context.canvas = canvas;\n            await canvas.ready;\n            this.emit(GraphEvent.AFTER_CANVAS_INIT, { canvas });\n        }\n    }\n    initRuntime() {\n        this.context.options = this.options;\n        if (!this.context.batch)\n            this.context.batch = new BatchController(this.context);\n        if (!this.context.plugin)\n            this.context.plugin = new PluginController(this.context);\n        if (!this.context.viewport)\n            this.context.viewport = new ViewportController(this.context);\n        if (!this.context.transform)\n            this.context.transform = new TransformController(this.context);\n        if (!this.context.element)\n            this.context.element = new ElementController(this.context);\n        if (!this.context.animation)\n            this.context.animation = new Animation(this.context);\n        if (!this.context.layout)\n            this.context.layout = new LayoutController(this.context);\n        if (!this.context.behavior)\n            this.context.behavior = new BehaviorController(this.context);\n    }\n    async prepare() {\n        // 等待同步任务执行完成，避免 render 后立即调用 destroy 导致的问题\n        // Wait for synchronous tasks to complete, to avoid problems caused by calling destroy immediately after render\n        await Promise.resolve();\n        if (this.destroyed)\n            throw new Error(format('The graph instance has been destroyed'));\n        await this.initCanvas();\n        this.initRuntime();\n    }\n    /**\n     * <zh/> 执行渲染\n     *\n     * <en/> Render\n     * @remarks\n     * <zh/> 此过程会执行数据更新、绘制元素、执行布局\n     *\n     * > ⚠️ render 为异步方法，如果需要在 render 后执行一些操作，可以使用 `await graph.render()` 或者监听 GraphEvent.AFTER_RENDER 事件\n     *\n     * <en/> This process will execute data update, element rendering, and layout execution\n     *\n     * > ⚠️ render is an asynchronous method. If you need to perform some operations after render, you can use `await graph.render()` or listen to the GraphEvent.AFTER_RENDER event\n     * @apiCategory render\n     */\n    async render() {\n        await this.prepare();\n        emit(this, new GraphLifeCycleEvent(GraphEvent.BEFORE_RENDER));\n        const animation = this.context.element.draw();\n        await Promise.all([animation?.finished, this.context.layout.layout()]);\n        await this.autoFit();\n        emit(this, new GraphLifeCycleEvent(GraphEvent.AFTER_RENDER));\n    }\n    /**\n     * <zh/> 绘制元素\n     *\n     * <en/> Draw elements\n     * @returns <zh/> 渲染结果 | <en/> draw result\n     * @remarks\n     * <zh/> 仅执行元素绘制，不会重新布局\n     *\n     * <zh/> ⚠️ draw 为异步方法，如果需要在 draw 后执行一些操作，可以使用 `await graph.draw()` 或者监听 GraphEvent.AFTER_DRAW 事件\n     *\n     * <en/> Only execute element drawing, no re-layout\n     *\n     * <en/> ⚠️ draw is an asynchronous method. If you need to perform some operations after draw, you can use `await graph.draw()` or listen to the GraphEvent.AFTER_DRAW event\n     * @apiCategory render\n     */\n    async draw() {\n        await this.prepare();\n        await this.context.element.draw()?.finished;\n    }\n    /**\n     * <zh/> 执行布局\n     *\n     * <en/> Execute layout\n     * @apiCategory layout\n     */\n    async layout() {\n        await this.context.layout.layout();\n    }\n    /**\n     * <zh/> 停止布局\n     *\n     * <en/> Stop layout\n     * @remarks\n     * <zh/> 适用于带有迭代动画的布局，目前有 `force` 属于此类布局，即停止力导布局的迭代，一般用于布局迭代时间过长情况下的手动停止迭代动画，例如在点击画布/节点的监听中调用\n     *\n     * <en/> Suitable for layouts with iterative animations. Currently, `force` belongs to this type of layout, that is, stop the iteration of the force-directed layout. It is generally used to manually stop the iteration animation when the layout iteration time is too long, such as calling in the click canvas/node listener\n     * @apiCategory layout\n     */\n    stopLayout() {\n        this.context.layout.stopLayout();\n    }\n    /**\n     * <zh/> 清空画布元素\n     *\n     * <en/> Clear canvas elements\n     * @apiCategory canvas\n     */\n    async clear() {\n        this.context.model.setData({});\n        await this.draw();\n    }\n    /**\n     * <zh/> 销毁当前图实例\n     *\n     * <en/> Destroy the current graph instance\n     * @remarks\n     * <zh/> 销毁后无法进行任何操作，如果需要重新使用，需要重新创建一个新的图实例\n     *\n     * <en/> After destruction, no operations can be performed. If you need to reuse it, you need to create a new graph instance\n     * @apiCategory instance\n     */\n    destroy() {\n        emit(this, new GraphLifeCycleEvent(GraphEvent.BEFORE_DESTROY));\n        const { layout, animation, element, model, canvas, behavior, plugin } = this.context;\n        plugin?.destroy();\n        behavior?.destroy();\n        layout?.destroy();\n        animation?.destroy();\n        element?.destroy();\n        model.destroy();\n        canvas?.destroy();\n        this.options = {};\n        // @ts-expect-error force delete\n        this.context = {};\n        this.off();\n        window.removeEventListener('resize', this.onResize);\n        this.destroyed = true;\n        emit(this, new GraphLifeCycleEvent(GraphEvent.AFTER_DESTROY));\n    }\n    /**\n     * <zh/> 获取画布实例\n     *\n     * <en/> Get canvas instance\n     * @returns - <zh/> 画布实例 | <en/> canvas instance\n     * @apiCategory canvas\n     */\n    getCanvas() {\n        return this.context.canvas;\n    }\n    resize(width, height) {\n        const size = !width || !height ? sizeOf(this.context.canvas.getContainer()) : [width, height];\n        if (isEqual(size, this.getSize()))\n            return;\n        emit(this, new GraphLifeCycleEvent(GraphEvent.BEFORE_SIZE_CHANGE, { size }));\n        this.context.canvas.resize(...size);\n        emit(this, new GraphLifeCycleEvent(GraphEvent.AFTER_SIZE_CHANGE, { size }));\n    }\n    /**\n     * <zh/> 将图缩放至合适大小并平移至视口中心\n     *\n     * <en/> Zoom the graph to fit the viewport and move it to the center of the viewport\n     * @param options - <zh/> 适配配置 | <en/> fit options\n     * @param animation - <zh/> 动画配置 | <en/> animation options\n     * @apiCategory viewport\n     */\n    async fitView(options, animation) {\n        await this.context.viewport?.fitView(options, animation);\n    }\n    /**\n     * <zh/> 将图平移至视口中心\n     *\n     * <en/> Move the graph to the center of the viewport\n     * @param animation - <zh/> 动画配置 | <en/> animation options\n     * @apiCategory viewport\n     */\n    async fitCenter(animation) {\n        await this.context.viewport?.fitCenter(animation);\n    }\n    async autoFit() {\n        const { autoFit } = this.context.options;\n        if (!autoFit)\n            return;\n        if (isString(autoFit)) {\n            if (autoFit === 'view')\n                await this.fitView();\n            else if (autoFit === 'center')\n                await this.fitCenter();\n        }\n        else {\n            const { type, animation } = autoFit;\n            if (type === 'view')\n                await this.fitView(autoFit.options, animation);\n            else if (type === 'center')\n                await this.fitCenter(animation);\n        }\n    }\n    /**\n     * <zh/> 聚焦元素\n     *\n     * <en/> Focus on element\n     * @param id - <zh/> 元素 ID | <en/> element ID\n     * @param animation - <zh/> 动画配置 | <en/> animation options\n     * @remarks\n     * <zh/> 移动图，使得元素对齐到视口中心\n     *\n     * <en/> Move the graph so that the element is aligned to the center of the viewport\n     * @apiCategory viewport\n     */\n    async focusElement(id, animation) {\n        await this.context.viewport?.focusElements(Array.isArray(id) ? id : [id], animation);\n    }\n    /**\n     * <zh/> 基于当前缩放比例进行缩放（相对缩放）\n     *\n     * <en/> Zoom based on the current zoom ratio (relative zoom)\n     * @param ratio - <zh/> 缩放比例 | <en/> zoom ratio\n     * @param animation - <zh/> 动画配置 | <en/> animation options\n     * @param origin - <zh/> 缩放中心(视口坐标) | <en/> zoom center(viewport coordinates)\n     * @remarks\n     * <zh/>\n     * - ratio > 1 放大\n     * - ratio < 1 缩小\n     *\n     * <en/>\n     * - ratio > 1 zoom in\n     * - ratio < 1 zoom out\n     * @apiCategory viewport\n     */\n    async zoomBy(ratio, animation, origin) {\n        await this.context.viewport.transform({ mode: 'relative', scale: ratio, origin }, animation);\n    }\n    /**\n     * <zh/> 缩放画布至指定比例（绝对缩放）\n     *\n     * <en/> Zoom the canvas to the specified ratio (absolute zoom)\n     * @param zoom - <zh/> 指定缩放比例 | <en/> specified zoom ratio\n     * @param animation - <zh/> 动画配置 | <en/> animation options\n     * @param origin - <zh/> 缩放中心(视口坐标) | <en/> zoom center(viewport coordinates)\n     * @remarks\n     * <zh/>\n     * - zoom = 1 默认大小\n     * - zoom > 1 放大\n     * - zoom < 1 缩小\n     *\n     * <en/>\n     * - zoom = 1 default size\n     * - zoom > 1 zoom in\n     * - zoom < 1 zoom out\n     * @apiCategory viewport\n     */\n    async zoomTo(zoom, animation, origin) {\n        this.context.viewport.transform({ mode: 'absolute', scale: zoom, origin }, animation);\n    }\n    /**\n     * <zh/> 获取当前缩放比例\n     *\n     * <en/> Get the current zoom ratio\n     * @returns <zh/> 缩放比例 | <en/> zoom ratio\n     * @apiCategory viewport\n     */\n    getZoom() {\n        return this.context.viewport.getZoom();\n    }\n    /**\n     * <zh/> 基于当前旋转角度进行旋转（相对旋转）\n     *\n     * <en/> Rotate based on the current rotation angle (relative rotation)\n     * @param angle - <zh/> 旋转角度 | <en/> rotation angle\n     * @param animation - <zh/> 动画配置 | <en/> animation options\n     * @param origin - <zh/> 旋转中心(视口坐标) | <en/> rotation center(viewport coordinates)\n     * @apiCategory viewport\n     */\n    async rotateBy(angle, animation, origin) {\n        await this.context.viewport.transform({ mode: 'relative', rotate: angle, origin }, animation);\n    }\n    /**\n     * <zh/> 旋转画布至指定角度 (绝对旋转)\n     *\n     * <en/> Rotate the canvas to the specified angle (absolute rotation)\n     * @param angle - <zh/> 目标角度 | <en/> target angle\n     * @param animation - <zh/> 动画配置 | <en/> animation options\n     * @param origin - <zh/> 旋转中心(视口坐标) | <en/> rotation center(viewport coordinates)\n     * @apiCategory viewport\n     */\n    async rotateTo(angle, animation, origin) {\n        await this.context.viewport.transform({ mode: 'absolute', rotate: angle, origin }, animation);\n    }\n    /**\n     * <zh/> 获取当前旋转角度\n     *\n     * <en/> Get the current rotation angle\n     * @returns <zh/> 旋转角度 | <en/> rotation angle\n     * @apiCategory viewport\n     */\n    getRotation() {\n        return this.context.viewport.getRotation();\n    }\n    /**\n     * <zh/> 将图平移指定距离 (相对平移)\n     *\n     * <en/> Translate the graph by the specified distance (relative translation)\n     * @param offset - <zh/> 偏移量 | <en/> offset\n     * @param animation - <zh/> 动画配置 | <en/> animation options\n     * @apiCategory viewport\n     */\n    async translateBy(offset, animation) {\n        await this.context.viewport.transform({ mode: 'relative', translate: offset }, animation);\n    }\n    /**\n     * <zh/> 将图平移至指定位置 (绝对平移)\n     *\n     * <en/> Translate the graph to the specified position (absolute translation)\n     * @param position - <zh/> 指定位置 | <en/> specified position\n     * @param animation - <zh/> 动画配置 | <en/> animation options\n     * @apiCategory viewport\n     */\n    async translateTo(position, animation) {\n        await this.context.viewport.transform({ mode: 'absolute', translate: position }, animation);\n    }\n    /**\n     * <zh/> 获取图的位置\n     *\n     * <en/> Get the position of the graph\n     * @returns <zh/> 图的位置 | <en/> position of the graph\n     * @remarks\n     * <zh/> 默认状态下，图的位置为 [0, 0]\n     *\n     * <en/> By default, the position of the graph is [0, 0]\n     * @apiCategory viewport\n     */\n    getPosition() {\n        return subtract([0, 0], this.getCanvasByViewport([0, 0]));\n    }\n    async translateElementBy(args1, args2, args3 = true) {\n        const [config, animation] = isObject(args1)\n            ? [args1, args2 ?? true]\n            : [{ [args1]: args2 }, args3];\n        Object.entries(config).forEach(([id, offset]) => this.context.model.translateNodeLikeBy(id, offset));\n        await this.context.element.draw({ animation, stage: 'translate' })?.finished;\n    }\n    async translateElementTo(args1, args2, args3 = true) {\n        const [config, animation] = isObject(args1)\n            ? [args1, args2 ?? true]\n            : [{ [args1]: args2 }, args3];\n        Object.entries(config).forEach(([id, position]) => this.context.model.translateNodeLikeTo(id, position));\n        await this.context.element.draw({ animation, stage: 'translate' })?.finished;\n    }\n    /**\n     * <zh/> 获取元素位置\n     *\n     * <en/> Get element position\n     * @param id - <zh/> 元素 ID | <en/> element ID\n     * @returns <zh/> 元素位置 | <en/> element position\n     * @apiCategory element\n     */\n    getElementPosition(id) {\n        return this.context.model.getElementPosition(id);\n    }\n    /**\n     * <zh/> 获取元素渲染样式\n     *\n     * <en/> Get element rendering style\n     * @param id - <zh/> 元素 ID | <en/> element ID\n     * @returns <zh/> 元素渲染样式 | <en/> element rendering style\n     * @apiCategory element\n     */\n    getElementRenderStyle(id) {\n        return omit(this.context.element.getElement(id).attributes, ['context']);\n    }\n    async setElementVisibility(args1, args2, args3 = true) {\n        const [config, animation] = isObject(args1)\n            ? [args1, args2 ?? true]\n            : [{ [args1]: args2 }, args3];\n        const dataToUpdate = { nodes: [], edges: [], combos: [] };\n        Object.entries(config).forEach(([id, value]) => {\n            const elementType = this.getElementType(id);\n            dataToUpdate[`${elementType}s`].push({ id, style: { visibility: value } });\n        });\n        const { model, element } = this.context;\n        model.preventUpdateNodeLikeHierarchy(() => {\n            model.updateData(dataToUpdate);\n        });\n        await element.draw({ animation, stage: 'visibility' })?.finished;\n    }\n    /**\n     * <zh/> 显示元素\n     *\n     * <en/> Show element\n     * @param id - <zh/> 元素 ID | <en/> element ID\n     * @param animation - <zh/> 是否启用动画 | <en/> whether to enable animation\n     * @apiCategory element\n     */\n    async showElement(id, animation) {\n        const ids = Array.isArray(id) ? id : [id];\n        await this.setElementVisibility(Object.fromEntries(ids.map((_id) => [_id, 'visible'])), animation);\n    }\n    /**\n     * <zh/> 隐藏元素\n     *\n     * <en/> Hide element\n     * @param id - <zh/> 元素 ID | <en/> element ID\n     * @param animation - <zh/> 是否启用动画 | <en/> whether to enable animation\n     * @apiCategory element\n     */\n    async hideElement(id, animation) {\n        const ids = Array.isArray(id) ? id : [id];\n        await this.setElementVisibility(Object.fromEntries(ids.map((_id) => [_id, 'hidden'])), animation);\n    }\n    /**\n     * <zh/> 获取元素可见性\n     *\n     * <en/> Get element visibility\n     * @param id - <zh/> 元素 ID | <en/> element ID\n     * @returns <zh/> 元素可见性 | <en/> element visibility\n     * @apiCategory element\n     */\n    getElementVisibility(id) {\n        const element = this.context.element.getElement(id);\n        return element?.style?.visibility ?? 'visible';\n    }\n    async setElementZIndex(args1, args2) {\n        const dataToUpdate = { nodes: [], edges: [], combos: [] };\n        const config = isObject(args1) ? args1 : { [args1]: args2 };\n        Object.entries(config).forEach(([id, value]) => {\n            const elementType = this.getElementType(id);\n            dataToUpdate[`${elementType}s`].push({ id, style: { zIndex: value } });\n        });\n        const { model, element } = this.context;\n        model.preventUpdateNodeLikeHierarchy(() => model.updateData(dataToUpdate));\n        await element.draw({ animation: false, stage: 'zIndex' })?.finished;\n    }\n    /**\n     * <zh/> 将元素置于最顶层\n     *\n     * <en/> Bring the element to the front\n     * @param id - <zh/> 元素 ID | <en/> element ID\n     * @apiCategory element\n     */\n    async frontElement(id) {\n        const ids = Array.isArray(id) ? id : [id];\n        const { model, element } = this.context;\n        const config = {};\n        ids.map((_id) => {\n            const zIndex = element.getFrontZIndex(_id);\n            const elementType = model.getElementType(_id);\n            if (elementType === 'combo') {\n                const ancestor = model.getAncestorsData(_id, COMBO_KEY).at(-1) || this.getComboData(_id);\n                const combos = [ancestor, ...model.getDescendantsData(idOf(ancestor))];\n                const delta = zIndex - element.getElementZIndex(_id);\n                combos.forEach((combo) => {\n                    config[idOf(combo)] = this.getElementZIndex(idOf(combo)) + delta;\n                });\n            }\n            else\n                config[_id] = zIndex;\n        });\n        await this.setElementZIndex(config);\n    }\n    /**\n     * <zh/> 获取元素层级\n     *\n     * <en/> Get element z-index\n     * @param id - <zh/> 元素 ID | <en/> element ID\n     * @returns <zh/> 元素层级 | <en/> element z-index\n     * @apiCategory element\n     */\n    getElementZIndex(id) {\n        const { model, element } = this.context;\n        return model.getElementDataById(id)?.style?.zIndex ?? element.getElementZIndex(id);\n    }\n    async setElementState(args1, args2, args3 = true) {\n        const [config, animation] = isObject(args1)\n            ? [args1, args2 ?? true]\n            : [{ [args1]: args2 }, args3];\n        const parseState = (state) => {\n            if (!state)\n                return [];\n            return Array.isArray(state) ? state : [state];\n        };\n        const dataToUpdate = { nodes: [], edges: [], combos: [] };\n        Object.entries(config).forEach(([id, value]) => {\n            const elementType = this.getElementType(id);\n            dataToUpdate[`${elementType}s`].push({ id, states: parseState(value) });\n        });\n        this.updateData(dataToUpdate);\n        await this.context.element.draw({ animation })?.finished;\n    }\n    /**\n     * <zh/> 获取元素状态\n     *\n     * <en/> Get element state\n     * @param id - <zh/> 元素 ID | <en/> element ID\n     * @returns <zh/> 元素状态 | <en/> element state\n     * @apiCategory element\n     */\n    getElementState(id) {\n        return this.context.model.getElementState(id);\n    }\n    /**\n     * <zh/> 获取元素自身以及子节点在世界坐标系下的渲染包围盒\n     *\n     * <en/> Get the rendering bounding box of the element itself and its child nodes in the world coordinate system\n     * @param id - <zh/> 元素 ID | <en/> element ID\n     * @returns <zh/> 渲染包围盒 | <en/> render bounding box\n     * @apiCategory element\n     */\n    getElementRenderBounds(id) {\n        return this.context.element.getElement(id).getRenderBounds();\n    }\n    isCollapsingExpanding = false;\n    /**\n     * <zh/> 收起组合\n     *\n     * <en/> Collapse Combo\n     * @param id - <zh/> 元素 ID | <en/> element ID\n     * @param animation - <zh/> 是否启用动画 | <en/> whether to enable animation\n     * @apiCategory element\n     */\n    async collapseElement(id, animation = true) {\n        const { model, element } = this.context;\n        if (isCollapsed(model.getNodeLikeData([id])[0]))\n            return;\n        if (this.isCollapsingExpanding)\n            return;\n        const elementType = model.getElementType(id);\n        this.isCollapsingExpanding = true;\n        this.setElementCollapsibility(id, true);\n        if (elementType === 'node')\n            await element.collapseNode(id, animation);\n        else if (elementType === 'combo')\n            await element.collapseCombo(id, animation);\n        this.isCollapsingExpanding = false;\n    }\n    /**\n     * <zh/> 展开组合\n     *\n     * <en/> Expand Combo\n     * @param id - <zh/> 元素 ID | <en/> element ID\n     * @param animation - <zh/> 是否启用动画 | <en/> whether to enable animation\n     * @apiCategory element\n     */\n    async expandElement(id, animation = true) {\n        const { model, element } = this.context;\n        if (!isCollapsed(model.getNodeLikeData([id])[0]))\n            return;\n        if (this.isCollapsingExpanding)\n            return;\n        const elementType = model.getElementType(id);\n        this.isCollapsingExpanding = true;\n        this.setElementCollapsibility(id, false);\n        if (elementType === 'node')\n            await element.expandNode(id, animation);\n        else if (elementType === 'combo')\n            await element.expandCombo(id, animation);\n        this.isCollapsingExpanding = false;\n    }\n    setElementCollapsibility(id, collapsed) {\n        const elementType = this.getElementType(id);\n        if (elementType === 'node')\n            this.updateNodeData([{ id, style: { collapsed } }]);\n        else if (elementType === 'combo')\n            this.updateComboData([{ id, style: { collapsed } }]);\n    }\n    /**\n     * <zh/> 导出画布内容为 DataURL\n     *\n     * <en/> Export canvas content as DataURL\n     * @param options - <zh/> 导出配置 | <en/> export options\n     * @returns <zh/> DataURL | <en/> DataURL\n     * @apiCategory exportImage\n     */\n    async toDataURL(options = {}) {\n        return this.context.canvas.toDataURL(options);\n    }\n    /**\n     * <zh/> 给定的视窗 DOM 坐标，转换为画布上的绘制坐标\n     *\n     * <en/> Convert the given viewport DOM coordinates to the drawing coordinates on the canvas\n     * @param point - <zh/> 视窗坐标 | <en/> viewport coordinates\n     * @returns <zh/> 画布上的绘制坐标 | <en/> drawing coordinates on the canvas\n     * @apiCategory viewport\n     */\n    getCanvasByViewport(point) {\n        return this.context.canvas.getCanvasByViewport(point);\n    }\n    /**\n     * <zh/> 给定画布上的绘制坐标，转换为视窗 DOM 的坐标\n     *\n     * <en/> Convert the given drawing coordinates on the canvas to the coordinates of the viewport DOM\n     * @param point - <zh/> 画布坐标 | <en/> canvas coordinates\n     * @returns <zh/> 视窗 DOM 的坐标 | <en/> coordinates of the viewport DOM\n     * @apiCategory viewport\n     */\n    getViewportByCanvas(point) {\n        return this.context.canvas.getViewportByCanvas(point);\n    }\n    /**\n     * <zh/> 给定画布上的绘制坐标，转换为浏览器坐标\n     *\n     * <en/> Convert the given drawing coordinates on the canvas to browser coordinates\n     * @param point - <zh/> 画布坐标 | <en/> canvas coordinates\n     * @returns <zh/> 浏览器坐标 | <en/> browser coordinates\n     * @apiCategory viewport\n     */\n    getClientByCanvas(point) {\n        return this.context.canvas.getClientByCanvas(point);\n    }\n    /**\n     * <zh/> 给定的浏览器坐标，转换为画布上的绘制坐标\n     *\n     * <en/> Convert the given browser coordinates to drawing coordinates on the canvas\n     * @param point - <zh/> 浏览器坐标 | <en/> browser coordinates\n     * @returns <zh/> 画布上的绘制坐标 | <en/> drawing coordinates on the canvas\n     * @apiCategory viewport\n     */\n    getCanvasByClient(point) {\n        return this.context.canvas.getCanvasByClient(point);\n    }\n    /**\n     * <zh/> 获取视口中心的画布坐标\n     *\n     * <en/> Get the canvas coordinates of the viewport center\n     * @returns <zh/> 视口中心的画布坐标 | <en/> Canvas coordinates of the viewport center\n     * @apiCategory viewport\n     */\n    getViewportCenter() {\n        return this.context.viewport.getViewportCenter();\n    }\n    /**\n     * <zh/> 获取画布中心的画布坐标\n     *\n     * <en/> Get the canvas coordinates of the canvas center\n     * @returns <zh/> 画布中心的画布坐标 | <en/> Canvas coordinates of the canvas center\n     * @apiCategory viewport\n     */\n    getCanvasCenter() {\n        return this.context.viewport.getCanvasCenter();\n    }\n    onResize = debounce(() => {\n        this.resize();\n    }, 300);\n    /**\n     * <zh/> 监听事件\n     *\n     * <en/> Listen to events\n     * @param eventName - <zh/> 事件名称 | <en/> event name\n     * @param callback - <zh/> 回调函数 | <en/> callback function\n     * @param once - <zh/> 是否只监听一次 | <en/> whether to listen only once\n     * @returns <zh/> Graph 实例 | <en/> Graph instance\n     * @apiCategory event\n     */\n    on(eventName, callback, once) {\n        return super.on(eventName, callback, once);\n    }\n    /**\n     * <zh/> 一次性监听事件\n     *\n     * <en/> Listen to events once\n     * @param eventName - <zh/> 事件名称 | <en/> event name\n     * @param callback - <zh/> 回调函数 | <en/> callback function\n     * @returns <zh/> Graph 实例 | <en/> Graph instance\n     * @apiCategory event\n     */\n    once(eventName, callback) {\n        return super.once(eventName, callback);\n    }\n    off(eventName, callback) {\n        return super.off(eventName, callback);\n    }\n}\n//# sourceMappingURL=graph.js.map","import { dfs } from './traverse';\n/**\n * <zh/> 将树数据转换为图数据\n *\n * <en/> Convert tree data to graph data\n * @param treeData - <zh/> 树数据 | <en/> Tree data\n * @param getter - <zh/> 获取节点和边的方法 | <en/> Methods to get nodes and edges\n * @returns <zh/> 图数据 | <en/> Graph data\n */\nexport function treeToGraphData(treeData, getter) {\n    const { getNodeData = (datum) => {\n        if (!datum.children)\n            return datum;\n        const { children, ...restDatum } = datum;\n        return { ...restDatum, children: children.map((child) => child.id) };\n    }, getEdgeData = (source, target) => ({ source: source.id, target: target.id }), getChildren = (datum) => datum.children || [], } = getter || {};\n    const nodes = [];\n    const edges = [];\n    dfs(treeData, (node) => {\n        nodes.push(getNodeData(node));\n        const children = getChildren(node);\n        for (const child of children) {\n            edges.push(getEdgeData(node, child));\n        }\n    }, (node) => getChildren(node), 'TB');\n    return { nodes, edges };\n}\n//# sourceMappingURL=tree.js.map","import { COMBO_KEY } from '../constants';\nimport { idOf } from '../exports';\nimport { findActualConnectNodeData } from '../utils/edge';\nimport { BaseTransform } from './base-transform';\n/**\n * <zh/> 获取边的实际端点\n *\n * <en/> Get the actual endpoints of the edge\n */\nexport class GetEdgeActualEnds extends BaseTransform {\n    beforeDraw(input) {\n        const { add, update } = input;\n        const { model } = this.context;\n        [...add.edges.entries(), ...update.edges.entries()].forEach(([, edge]) => {\n            getEdgeEndsContext(model, edge);\n        });\n        return input;\n    }\n}\nexport const getEdgeEndsContext = (model, edge) => {\n    const { source, target } = edge;\n    const sourceNodeData = model.getElementDataById(source);\n    const targetNodeData = model.getElementDataById(target);\n    const actualSourceNode = findActualConnectNodeData(sourceNodeData, (id) => model.getParentData(id, COMBO_KEY));\n    const actualTargetNode = findActualConnectNodeData(targetNodeData, (id) => model.getParentData(id, COMBO_KEY));\n    const sourceNode = idOf(actualSourceNode);\n    const targetNode = idOf(actualTargetNode);\n    const ends = { sourceNode, targetNode };\n    if (edge.style) {\n        Object.assign(edge.style, ends);\n    }\n    else\n        edge.style = ends;\n    return edge;\n};\n//# sourceMappingURL=get-edge-actual-ends.js.map","import { isBoolean, isEmpty, isEqual, isFunction } from '@antv/util';\nimport { groupByChangeType, reduceDataChanges } from '../utils/change';\nimport { idOf } from '../utils/id';\nimport { reassignTo } from '../utils/transform';\nimport { BaseTransform } from './base-transform';\nimport { getEdgeEndsContext } from './get-edge-actual-ends';\nconst CUBIC_EDGE_TYPE = 'quadratic';\nconst CUBIC_LOOP_PLACEMENTS = [\n    'top',\n    'top-right',\n    'right',\n    'right-bottom',\n    'bottom',\n    'bottom-left',\n    'left',\n    'left-top',\n];\n/**\n * <zh/> 处理平行边，即多条边共享同一源节点和目标节点\n *\n * <en/> Process parallel edges which share the same source and target nodes\n */\nexport class ProcessParallelEdges extends BaseTransform {\n    static defaultOptions = {\n        mode: 'bundle',\n        edges: undefined,\n        distance: 15, // only valid for bundling mode\n    };\n    cacheMergeStyle = new Map();\n    constructor(context, options) {\n        super(context, Object.assign({}, ProcessParallelEdges.defaultOptions, options));\n    }\n    beforeDraw(input) {\n        const edges = this.getAffectedParallelEdges(input);\n        if (edges.size === 0)\n            return input;\n        this.options.mode === 'bundle'\n            ? this.applyBundlingStyle(input, edges, this.options.distance)\n            : this.applyMergingStyle(input, edges);\n        return input;\n    }\n    getAffectedParallelEdges = (input) => {\n        const { add: { edges: edgesToAdd }, update: { nodes: nodesToUpdate, edges: edgesToUpdate, combos: combosToUpdate }, remove: { edges: edgesToRemove }, } = input;\n        const { model } = this.context;\n        const edges = new Map();\n        const addRelatedEdges = (_, id) => {\n            const relatedEdgesData = model.getRelatedEdgesData(id);\n            relatedEdgesData.forEach((edge) => !edges.has(idOf(edge)) && edges.set(idOf(edge), edge));\n        };\n        nodesToUpdate.forEach(addRelatedEdges);\n        combosToUpdate.forEach(addRelatedEdges);\n        const pushParallelEdges = (edge) => {\n            const edgeData = model.getEdgeData().map((edge) => getEdgeEndsContext(model, edge));\n            const parallelEdges = getParallelEdges(edge, edgeData, true);\n            parallelEdges.forEach((e) => !edges.has(idOf(e)) && edges.set(idOf(e), e));\n        };\n        if (edgesToRemove.size)\n            edgesToRemove.forEach(pushParallelEdges);\n        if (edgesToAdd.size)\n            edgesToAdd.forEach(pushParallelEdges);\n        if (edgesToUpdate.size) {\n            const changes = groupByChangeType(reduceDataChanges(model.getChanges())).update.edges;\n            edgesToUpdate.forEach((edge) => {\n                pushParallelEdges(edge);\n                // 当边的端点发生变化时，将原始边及其平行边一并添加到更新列表 | Add the original edge and its parallel edges to the update list when the endpoints of the edge change\n                const originalEdge = changes.find((e) => idOf(e.value) === idOf(edge))?.original;\n                if (originalEdge && !isParallelEdges(edge, originalEdge)) {\n                    pushParallelEdges(originalEdge);\n                }\n            });\n        }\n        if (!isEmpty(this.options.edges)) {\n            edges.forEach((_, id) => !this.options.edges.includes(id) && edges.delete(id));\n        }\n        // <zh/> 按照用户指定的顺序排序，防止捆绑时的抖动 | <en/> Sort by user-set order to prevent jitter during bundling\n        const edgeIds = model.getEdgeData().map(idOf);\n        return new Map([...edges].sort((a, b) => edgeIds.indexOf(a[0]) - edgeIds.indexOf(b[0])));\n    };\n    applyBundlingStyle = (input, edges, distance) => {\n        const { edgeMap, reverses } = groupByEndpoints(edges);\n        edgeMap.forEach((arcEdges) => {\n            arcEdges.forEach((edge, i, edgeArr) => {\n                const computeStyle = () => {\n                    const length = edgeArr.length;\n                    const style = {};\n                    if (edge.source === edge.target) {\n                        const len = CUBIC_LOOP_PLACEMENTS.length;\n                        style.loopPlacement = CUBIC_LOOP_PLACEMENTS[i % len];\n                        style.loopDist = Math.floor(i / len) * distance + 50;\n                    }\n                    else if (length === 1) {\n                        style.curveOffset = 0;\n                    }\n                    else {\n                        const sign = (i % 2 === 0 ? 1 : -1) * (reverses[`${edge.source}|${edge.target}|${i}`] ? -1 : 1);\n                        style.curveOffset =\n                            length % 2 === 1\n                                ? sign * Math.ceil(i / 2) * distance * 2\n                                : sign * (Math.floor(i / 2) * distance * 2 + distance);\n                    }\n                    return Object.assign({}, edge.style, style);\n                };\n                const mergedEdgeData = Object.assign(edge, { type: CUBIC_EDGE_TYPE, style: computeStyle() });\n                const element = this.context.element?.getElement(idOf(edge));\n                if (element)\n                    reassignTo(input, 'update', 'edge', mergedEdgeData, true);\n                else\n                    reassignTo(input, 'add', 'edge', mergedEdgeData, true);\n            });\n        });\n    };\n    resetEdgeStyle = (edge) => {\n        const style = edge.style || {};\n        const cacheStyle = this.cacheMergeStyle.get(idOf(edge)) || {};\n        Object.keys(cacheStyle).forEach((key) => {\n            if (isEqual(style[key], cacheStyle[key])) {\n                if (edge[key]) {\n                    style[key] = edge[key];\n                }\n                else {\n                    delete style[key];\n                }\n            }\n        });\n        return Object.assign(edge, { style });\n    };\n    applyMergingStyle = (input, edges) => {\n        const { edgeMap, reverses } = groupByEndpoints(edges);\n        edgeMap.forEach((edges) => {\n            if (edges.length === 1) {\n                const edge = edges[0];\n                const element = this.context.element?.getElement(idOf(edge));\n                reassignTo(input, element ? 'update' : 'add', 'edge', this.resetEdgeStyle(edge), true);\n                return;\n            }\n            const mergedStyle = edges\n                .map(({ source, target, style = {} }, i) => {\n                const { startArrow, endArrow } = style;\n                const newStyle = {};\n                const [start, end] = reverses[`${source}|${target}|${i}`]\n                    ? ['endArrow', 'startArrow']\n                    : ['startArrow', 'endArrow'];\n                if (isBoolean(startArrow))\n                    newStyle[start] = startArrow;\n                if (isBoolean(endArrow))\n                    newStyle[end] = endArrow;\n                return newStyle;\n            })\n                .reduce((acc, style) => ({ ...acc, ...style }), {});\n            edges.forEach((edge, i, edges) => {\n                if (i === 0) {\n                    const parsedStyle = Object.assign({}, isFunction(this.options.style) ? this.options.style(edges) : this.options.style, { childrenData: edges });\n                    this.cacheMergeStyle.set(idOf(edge), parsedStyle);\n                    const mergedEdgeData = {\n                        ...edge,\n                        type: 'line',\n                        style: { ...mergedStyle, ...parsedStyle },\n                    };\n                    const element = this.context.element?.getElement(idOf(edge));\n                    reassignTo(input, element ? 'update' : 'add', 'edge', mergedEdgeData, true);\n                }\n                else {\n                    reassignTo(input, 'remove', 'edge', edge);\n                }\n            });\n        });\n    };\n}\n/**\n * <zh/> 按照端点分组\n *\n * <en/> Group by endpoints\n * @param edges - <zh/> 边集合 | <en/> Edges\n * @returns <zh/> 端点分组后的边集合 | <en/> Edges grouped by endpoints\n */\nexport const groupByEndpoints = (edges) => {\n    const edgeMap = new Map();\n    const processedEdgesSet = new Set();\n    const reverses = {};\n    for (const [id, edge] of edges) {\n        if (processedEdgesSet.has(id))\n            continue;\n        const { source, target } = edge;\n        const sourceTarget = `${source}-${target}`;\n        if (!edgeMap.has(sourceTarget))\n            edgeMap.set(sourceTarget, []);\n        edgeMap.get(sourceTarget).push(edge);\n        processedEdgesSet.add(id);\n        for (const [otherId, sedge] of edges) {\n            if (processedEdgesSet.has(otherId))\n                continue;\n            if (isParallelEdges(edge, sedge)) {\n                edgeMap.get(sourceTarget).push(sedge);\n                processedEdgesSet.add(otherId);\n                if (source === sedge.target && target === sedge.source) {\n                    reverses[`${sedge.source}|${sedge.target}|${edgeMap.get(sourceTarget).length - 1}`] = true;\n                }\n            }\n        }\n    }\n    return { edgeMap, reverses };\n};\n/**\n * <zh/> 获取平行边\n *\n * <en/> Get parallel edges\n * @param edge - <zh/> 目标边 | <en/> Target edge\n * @param edges - <zh/> 边集合 | <en/> Edges\n * @param containsSelf - <zh/> 输出结果是否包含目标边 | <en/> Whether the output result contains the target edge\n * @returns <zh/> 平行边集合 | <en/> Parallel edges\n */\nexport const getParallelEdges = (edge, edges, containsSelf) => {\n    return edges.filter((e) => (containsSelf || idOf(e) !== idOf(edge)) && isParallelEdges(e, edge));\n};\n/**\n * <zh/> 判断两条边是否平行\n *\n * <en/> Determine whether two edges are parallel\n * @param edge1 - <zh/> 边1 | <en/> Edge 1\n * @param edge2 - <zh/> 边2 | <en/> Edge 2\n * @returns <zh/> 是否平行 | <en/> Whether is parallel\n */\nexport const isParallelEdges = (edge1, edge2) => {\n    const { sourceNode: src1, targetNode: tgt1 } = edge1.style || {};\n    const { sourceNode: src2, targetNode: tgt2 } = edge2.style || {};\n    return (src1 === src2 && tgt1 === tgt2) || (src1 === tgt2 && tgt1 === src2);\n};\n//# sourceMappingURL=process-parallel-edges.js.map","import { ComboCollapse, ComboExpand, Fade, NodeCollapse, NodeExpand, PathIn, PathOut, Translate } from '../animations';\nimport { BrushSelect, ClickSelect, CollapseExpand, CreateEdge, DragCanvas, DragElement, DragElementForce, FixElementSize, FocusElement, HoverActivate, LassoSelect, OptimizeViewportTransform, ScrollCanvas, ZoomCanvas, } from '../behaviors';\nimport { Circle, CircleCombo, Cubic, CubicHorizontal, CubicVertical, Diamond, Donut, Ellipse, HTML, Hexagon, Image, Line, Polyline, Quadratic, Rect, RectCombo, Star, Triangle, } from '../elements';\nimport { AntVDagreLayout, CircularLayout, ComboCombinedLayout, ConcentricLayout, D3ForceLayout, DagreLayout, ForceAtlas2Layout, ForceLayout, FruchtermanLayout, GridLayout, MDSLayout, RadialLayout, RandomLayout, compactBox, dendrogram, indented, mindmap, } from '../layouts';\nimport { blues, greens, oranges, spectral, tableau } from '../palettes';\nimport { Background, BubbleSets, Contextmenu, Fullscreen, GridLine, History, Hull, Legend, Timebar, Toolbar, Tooltip, Watermark, } from '../plugins';\nimport { dark, light } from '../themes';\nimport { ArrangeDrawOrder, CollapseExpandCombo, CollapseExpandNode, GetEdgeActualEnds, ProcessParallelEdges, UpdateRelatedEdge, } from '../transforms';\n/**\n * <zh/> 内置插件统一在这里注册。\n * <en/> Built-in extensions are registered here.\n */\nexport const BUILT_IN_EXTENSIONS = {\n    animation: {\n        'combo-collapse': ComboCollapse,\n        'combo-expand': ComboExpand,\n        'node-collapse': NodeCollapse,\n        'node-expand': NodeExpand,\n        'path-in': PathIn,\n        'path-out': PathOut,\n        fade: Fade,\n        translate: Translate,\n    },\n    behavior: {\n        'brush-select': BrushSelect,\n        'click-select': ClickSelect,\n        'collapse-expand': CollapseExpand,\n        'create-edge': CreateEdge,\n        'drag-canvas': DragCanvas,\n        'drag-element-force': DragElementForce,\n        'drag-element': DragElement,\n        'fix-element-size': FixElementSize,\n        'focus-element': FocusElement,\n        'hover-activate': HoverActivate,\n        'lasso-select': LassoSelect,\n        'optimize-viewport-transform': OptimizeViewportTransform,\n        'scroll-canvas': ScrollCanvas,\n        'zoom-canvas': ZoomCanvas,\n    },\n    combo: {\n        circle: CircleCombo,\n        rect: RectCombo,\n    },\n    edge: {\n        cubic: Cubic,\n        line: Line,\n        polyline: Polyline,\n        quadratic: Quadratic,\n        'cubic-horizontal': CubicHorizontal,\n        'cubic-vertical': CubicVertical,\n    },\n    layout: {\n        'antv-dagre': AntVDagreLayout,\n        'combo-combined': ComboCombinedLayout,\n        'compact-box': compactBox,\n        'force-atlas2': ForceAtlas2Layout,\n        circular: CircularLayout,\n        concentric: ConcentricLayout,\n        'd3-force': D3ForceLayout,\n        dagre: DagreLayout,\n        dendrogram,\n        force: ForceLayout,\n        fruchterman: FruchtermanLayout,\n        grid: GridLayout,\n        indented,\n        mds: MDSLayout,\n        mindmap,\n        radial: RadialLayout,\n        random: RandomLayout,\n    },\n    node: {\n        circle: Circle,\n        diamond: Diamond,\n        ellipse: Ellipse,\n        hexagon: Hexagon,\n        html: HTML,\n        image: Image,\n        rect: Rect,\n        star: Star,\n        donut: Donut,\n        triangle: Triangle,\n    },\n    palette: {\n        spectral,\n        tableau,\n        oranges,\n        greens,\n        blues,\n    },\n    theme: {\n        dark,\n        light,\n    },\n    plugin: {\n        'bubble-sets': BubbleSets,\n        'grid-line': GridLine,\n        background: Background,\n        contextmenu: Contextmenu,\n        fullscreen: Fullscreen,\n        history: History,\n        hull: Hull,\n        legend: Legend,\n        timebar: Timebar,\n        toolbar: Toolbar,\n        tooltip: Tooltip,\n        watermark: Watermark,\n    },\n    transform: {\n        'update-related-edges': UpdateRelatedEdge,\n        'arrange-draw-order': ArrangeDrawOrder,\n        'collapse-expand-combo': CollapseExpandCombo,\n        'collapse-expand-node': CollapseExpandNode,\n        'process-parallel-edges': ProcessParallelEdges,\n        'get-edge-actual-ends': GetEdgeActualEnds,\n    },\n};\n//# sourceMappingURL=build-in.js.map","import { idOf } from '../utils/id';\nimport { getLayoutProperty, invokeLayoutMethod } from '../utils/layout';\nimport { print } from '../utils/print';\nimport { add } from '../utils/vector';\nimport { DragElement } from './drag-element';\n/**\n * <zh/> 调用力导布局拖拽元素的交互\n *\n * <en/> Call d3-force layout to drag element behavior\n * @remarks\n * <zh/> 只能在使用 d3-force 布局时使用该交互，在拖拽过程中会实时重新计算布局。\n *\n * <en/> This behavior can only be used with d3-force layout. The layout will be recalculated in real time during dragging.\n */\nexport class DragElementForce extends DragElement {\n    get forceLayoutInstance() {\n        return this.context.layout.getLayoutInstance().find((layout) => ['d3-force', 'd3-force-3d'].includes(layout?.id));\n    }\n    /**\n     * Whether the behavior is enabled\n     * @param event - The event object\n     * @returns Is the behavior enabled\n     * @internal\n     */\n    validate(event) {\n        if (!this.context.layout)\n            return false;\n        // 未使用力导布局 / The force layout is not used\n        if (!this.forceLayoutInstance) {\n            print.warn('DragElementForce only works with d3-force or d3-force-3d layout');\n            return false;\n        }\n        return super.validate(event);\n    }\n    /**\n     * Move selected elements by offset\n     * @param ids - The selected element IDs\n     * @param offset - The offset to move\n     * @internal\n     */\n    async moveElement(ids, offset) {\n        const layout = this.forceLayoutInstance;\n        this.context.graph.getNodeData(ids).forEach((element, index) => {\n            const { x = 0, y = 0 } = element.style || {};\n            if (layout)\n                invokeLayoutMethod(layout, 'setFixedPosition', ids[index], [...add([+x, +y], offset)]);\n        });\n    }\n    /**\n     * Triggered when the drag starts\n     * @param event - The event object\n     * @internal\n     */\n    onDragStart(event) {\n        this.enable = this.validate(event);\n        if (!this.enable)\n            return;\n        this.target = this.getSelectedNodeIDs([event.target.id]);\n        this.hideEdge();\n        this.context.graph.frontElement(this.target);\n        const layout = this.forceLayoutInstance;\n        if (layout)\n            getLayoutProperty(layout, 'simulation').alphaTarget(0.3).restart();\n        this.context.graph.getNodeData(this.target).forEach((element) => {\n            const { x = 0, y = 0 } = element.style || {};\n            if (layout)\n                invokeLayoutMethod(layout, 'setFixedPosition', idOf(element), [+x, +y]);\n        });\n    }\n    /**\n     * Triggered when dragging\n     * @param event - The event object\n     * @internal\n     */\n    onDrag(event) {\n        if (!this.enable)\n            return;\n        const delta = this.getDelta(event);\n        this.moveElement(this.target, delta);\n    }\n    /**\n     * Triggered when the drag ends\n     * @internal\n     */\n    onDragEnd() {\n        const layout = this.forceLayoutInstance;\n        if (layout)\n            getLayoutProperty(layout, 'simulation').alphaTarget(0);\n        this.context.graph.getNodeData(this.target).forEach((element) => {\n            if (layout)\n                invokeLayoutMethod(layout, 'setFixedPosition', idOf(element), [null, null, null]);\n        });\n    }\n}\n//# sourceMappingURL=drag-element-force.js.map","import { Path } from '@antv/g';\nimport { pointsToPath } from '../utils/path';\nimport { BrushSelect, getCursorPoint } from './brush-select';\n/**\n * <zh/> 套索选择交互\n *\n * <en/> Lasso select behavior\n * @remarks\n * <zh/> 用不规则多边形框选一组元素。\n *\n * <en/> Select a group of elements with an irregular polygon.\n */\nexport class LassoSelect extends BrushSelect {\n    points;\n    pathShape;\n    /**\n     * Triggered when the mouse is pressed\n     * @param event - mouse event\n     * @internal\n     */\n    onPointerDown(event) {\n        if (!super.validate(event) || !super.isKeydown() || this.points)\n            return;\n        const { canvas } = this.context;\n        this.pathShape = new Path({\n            id: 'g6-lasso-select',\n            style: this.options.style,\n        });\n        canvas.appendChild(this.pathShape);\n        this.points = [getCursorPoint(event)];\n    }\n    /**\n     * Triggered when the mouse is moved\n     * @param event - mouse event\n     * @internal\n     */\n    onPointerMove(event) {\n        if (!this.points)\n            return;\n        const { immediately, mode } = this.options;\n        this.points.push(getCursorPoint(event));\n        this.pathShape?.setAttribute('d', pointsToPath(this.points));\n        if (immediately && mode === 'default' && this.points.length > 2)\n            super.updateElementsStates(this.points);\n    }\n    /**\n     * Triggered when the mouse is released\n     * @internal\n     */\n    onPointerUp() {\n        if (!this.points)\n            return;\n        if (this.points.length < 2) {\n            this.clearLasso();\n            return;\n        }\n        super.updateElementsStates(this.points);\n        this.clearLasso();\n    }\n    clearLasso() {\n        this.pathShape?.remove();\n        this.pathShape = undefined;\n        this.points = undefined;\n    }\n}\n//# sourceMappingURL=lasso-select.js.map","import { Circle as GCircle } from '@antv/g';\nimport { getBBoxSize } from '../../utils/bbox';\nimport { getEllipseIntersectPoint } from '../../utils/point';\nimport { subStyleProps } from '../../utils/prefix';\nimport { parseSize } from '../../utils/size';\nimport { BaseCombo } from './base-combo';\n/**\n * <zh/> 圆形组合\n *\n * <en/> Circle combo\n */\nexport class CircleCombo extends BaseCombo {\n    constructor(options) {\n        super(options);\n    }\n    drawKeyShape(attributes, container) {\n        return this.upsert('key', GCircle, this.getKeyStyle(attributes), container);\n    }\n    getKeyStyle(attributes) {\n        const { collapsed } = attributes;\n        const keyStyle = super.getKeyStyle(attributes);\n        const [width] = this.getKeySize(attributes);\n        return {\n            ...keyStyle,\n            ...(collapsed && subStyleProps(keyStyle, 'collapsed')),\n            r: width / 2,\n        };\n    }\n    getCollapsedKeySize(attributes) {\n        const [collapsedWidth, collapsedHeight] = parseSize(attributes.collapsedSize);\n        const collapsedR = Math.max(collapsedWidth, collapsedHeight) / 2;\n        return [collapsedR * 2, collapsedR * 2, 0];\n    }\n    getExpandedKeySize(attributes) {\n        const contentBBox = this.getContentBBox(attributes);\n        const [width, height] = getBBoxSize(contentBBox);\n        const expandedR = Math.sqrt(width ** 2 + height ** 2) / 2;\n        return [expandedR * 2, expandedR * 2, 0];\n    }\n    getIntersectPoint(point) {\n        const keyShapeBounds = this.getShape('key').getBounds();\n        return getEllipseIntersectPoint(point, keyShapeBounds);\n    }\n}\n//# sourceMappingURL=circle.js.map","import { Rect as GRect } from '@antv/g';\nimport { subStyleProps } from '../../utils/prefix';\nimport { BaseCombo } from './base-combo';\n/**\n * <zh/> 矩形组合\n *\n * <en/> Rect combo\n */\nexport class RectCombo extends BaseCombo {\n    constructor(options) {\n        super(options);\n    }\n    drawKeyShape(attributes, container) {\n        return this.upsert('key', GRect, this.getKeyStyle(attributes), container);\n    }\n    getKeyStyle(attributes) {\n        const keyStyle = super.getKeyStyle(attributes);\n        const [width, height] = this.getKeySize(attributes);\n        return {\n            ...keyStyle,\n            ...(attributes.collapsed && subStyleProps(keyStyle, 'collapsed')),\n            width,\n            height,\n            x: -width / 2,\n            y: -height / 2,\n        };\n    }\n}\n//# sourceMappingURL=rect.js.map","import { getDiamondPoints } from '../../utils/element';\nimport { Polygon } from '../shapes/polygon';\n/**\n * <zh/> 菱形节点\n *\n * <en/> Diamond node\n */\nexport class Diamond extends Polygon {\n    constructor(options) {\n        super(options);\n    }\n    getPoints(attributes) {\n        const [width, height] = this.getSize(attributes);\n        return getDiamondPoints(width, height);\n    }\n}\n//# sourceMappingURL=diamond.js.map","import { ICON_SIZE_RATIO } from '../../constants/element';\nimport { getHexagonPoints } from '../../utils/element';\nimport { Polygon } from '../shapes/polygon';\n/**\n * <zh/> 六边形节点\n *\n * <en/> Hexagon node\n */\nexport class Hexagon extends Polygon {\n    constructor(options) {\n        super(options);\n    }\n    getOuterR(attributes) {\n        return attributes.outerR || Math.min(...this.getSize(attributes)) / 2;\n    }\n    getPoints(attributes) {\n        return getHexagonPoints(this.getOuterR(attributes));\n    }\n    getIconStyle(attributes) {\n        const style = super.getIconStyle(attributes);\n        const size = this.getOuterR(attributes) * ICON_SIZE_RATIO;\n        return style ? { width: size, height: size, ...style } : false;\n    }\n}\n//# sourceMappingURL=hexagon.js.map","import { Rect as GRect } from '@antv/g';\nimport { ICON_SIZE_RATIO } from '../../constants/element';\nimport { BaseNode } from './base-node';\n/**\n * <zh/> 矩形节点\n *\n * <en/> Rect node\n */\nexport class Rect extends BaseNode {\n    constructor(options) {\n        super(options);\n    }\n    getKeyStyle(attributes) {\n        const [width, height] = this.getSize(attributes);\n        return {\n            ...super.getKeyStyle(attributes),\n            width,\n            height,\n            x: -width / 2,\n            y: -height / 2,\n        };\n    }\n    getIconStyle(attributes) {\n        const style = super.getIconStyle(attributes);\n        const { width, height } = this.getShape('key').attributes;\n        return style\n            ? {\n                width: width * ICON_SIZE_RATIO,\n                height: height * ICON_SIZE_RATIO,\n                ...style,\n            }\n            : false;\n    }\n    drawKeyShape(attributes, container) {\n        return this.upsert('key', GRect, this.getKeyStyle(attributes), container);\n    }\n}\n//# sourceMappingURL=rect.js.map","import { ICON_SIZE_RATIO } from '../../constants/element';\nimport { getPortXYByPlacement, getStarPoints, getStarPorts } from '../../utils/element';\nimport { Polygon } from '../shapes/polygon';\n/**\n * <zh/> 五角星节点\n *\n * <en/> Star node\n */\nexport class Star extends Polygon {\n    constructor(options) {\n        super(options);\n    }\n    getInnerR(attributes) {\n        return attributes.innerR || (this.getOuterR(attributes) * 3) / 8;\n    }\n    getOuterR(attributes) {\n        return Math.min(...this.getSize(attributes)) / 2;\n    }\n    getPoints(attributes) {\n        return getStarPoints(this.getOuterR(attributes), this.getInnerR(attributes));\n    }\n    getIconStyle(attributes) {\n        const style = super.getIconStyle(attributes);\n        const size = this.getInnerR(attributes) * 2 * ICON_SIZE_RATIO;\n        return style ? { width: size, height: size, ...style } : false;\n    }\n    getPortXY(attributes, style) {\n        const { placement = 'top' } = style;\n        const bbox = this.getShape('key').getLocalBounds();\n        const ports = getStarPorts(this.getOuterR(attributes), this.getInnerR(attributes));\n        return getPortXYByPlacement(bbox, placement, ports, false);\n    }\n}\n//# sourceMappingURL=star.js.map","/**\n * <zh/> 内置色板\n *\n * <en/> Built-in palettes\n */\nexport const spectral = [\n    'rgb(158, 1, 66)',\n    'rgb(213, 62, 79)',\n    'rgb(244, 109, 67)',\n    'rgb(253, 174, 97)',\n    'rgb(254, 224, 139)',\n    'rgb(255, 255, 191)',\n    'rgb(230, 245, 152)',\n    'rgb(171, 221, 164)',\n    'rgb(102, 194, 165)',\n    'rgb(50, 136, 189)',\n    'rgb(94, 79, 162)',\n];\nexport const tableau = [\n    'rgb(78, 121, 167)',\n    'rgb(242, 142, 44)',\n    'rgb(225, 87, 89)',\n    'rgb(118, 183, 178)',\n    'rgb(89, 161, 79)',\n    'rgb(237, 201, 73)',\n    'rgb(175, 122, 161)',\n    'rgb(255, 157, 167)',\n    'rgb(156, 117, 95)',\n    'rgb(186, 176, 171)',\n];\nexport const oranges = [\n    'rgb(255, 245, 235)',\n    'rgb(254, 230, 206)',\n    'rgb(253, 208, 162)',\n    'rgb(253, 174, 107)',\n    'rgb(253, 141, 60)',\n    'rgb(241, 105, 19)',\n    'rgb(217, 72, 1)',\n    'rgb(166, 54, 3)',\n    'rgb(127, 39, 4)',\n];\nexport const greens = [\n    'rgb(247, 252, 245)',\n    'rgb(229, 245, 224)',\n    'rgb(199, 233, 192)',\n    'rgb(161, 217, 155)',\n    'rgb(116, 196, 118)',\n    'rgb(65, 171, 93)',\n    'rgb(35, 139, 69)',\n    'rgb(0, 109, 44)',\n    'rgb(0, 68, 27)',\n];\nexport const blues = [\n    'rgb(247, 251, 255)',\n    'rgb(222, 235, 247)',\n    'rgb(198, 219, 239)',\n    'rgb(158, 202, 225)',\n    'rgb(107, 174, 214)',\n    'rgb(66, 146, 198)',\n    'rgb(33, 113, 181)',\n    'rgb(8, 81, 156)',\n    'rgb(8, 48, 107)',\n];\n//# sourceMappingURL=index.js.map","import { idOf } from '../utils/id';\nimport { BaseTransform } from './base-transform';\n/**\n * 如果更新了节点 / combo，需要更新连接的边\n * If the node / combo is updated, the connected edge and the combo it is in need to be updated\n */\nexport class UpdateRelatedEdge extends BaseTransform {\n    beforeDraw(input, context) {\n        const { stage } = context;\n        if (stage === 'visibility')\n            return input;\n        const { model } = this.context;\n        const { update: { nodes, edges, combos }, } = input;\n        const addRelatedEdges = (_, id) => {\n            const relatedEdgesData = model.getRelatedEdgesData(id);\n            relatedEdgesData.forEach((edge) => !edges.has(idOf(edge)) && edges.set(idOf(edge), edge));\n        };\n        nodes.forEach(addRelatedEdges);\n        combos.forEach(addRelatedEdges);\n        return input;\n    }\n}\n//# sourceMappingURL=update-related-edge.js.map","import { idOf } from '../utils/id';\nimport { BaseTransform } from './base-transform';\n/**\n * <zh/> 调整元素绘制顺序\n *\n * <en/> Adjust the drawing order of elements\n */\nexport class ArrangeDrawOrder extends BaseTransform {\n    beforeDraw(input) {\n        const { model } = this.context;\n        const combosToAdd = input.add.combos;\n        const arrangeCombo = (combos) => {\n            // id, data, zIndex\n            const order = [];\n            combos.forEach((combo, id) => {\n                const ancestors = model.getAncestorsData(id, 'combo');\n                const path = ancestors.map((ancestor) => idOf(ancestor)).reverse();\n                // combo 的 zIndex 为距离根 combo 的深度\n                // The zIndex of the combo is the depth from the root combo\n                order.push([id, combo, path.length]);\n            });\n            return new Map(order\n                // 基于 zIndex 降序排序，优先绘制子 combo / Sort based on zIndex in descending order, draw child combo first\n                .sort(([, , zIndex1], [, , zIndex2]) => zIndex2 - zIndex1)\n                .map(([id, datum]) => [id, datum]));\n        };\n        input.add.combos = arrangeCombo(combosToAdd);\n        input.update.combos = arrangeCombo(input.update.combos);\n        return input;\n    }\n}\n//# sourceMappingURL=arrange-draw-order.js.map","import { isCollapsed } from '../utils/collapsibility';\nimport { getSubgraphRelatedEdges } from '../utils/edge';\nimport { idOf } from '../utils/id';\n// import { reassignTo } from '../utils/transform';\nimport { BaseTransform } from './base-transform';\nimport { reassignTo } from './utils';\n/**\n * <zh/> 处理组合的收起和展开\n *\n * <en/> Process the collapse and expand of combos\n */\nexport class CollapseExpandCombo extends BaseTransform {\n    beforeDraw(input, context) {\n        if (context.stage === 'visibility')\n            return input;\n        const { model } = this.context;\n        const { add, update } = input;\n        // combo 添加和更新的顺序为先子后父，因此采用倒序遍历\n        // The order of adding and updating combos is first child and then parent, so reverse traversal is used\n        const combos = [...input.update.combos.entries(), ...input.add.combos.entries()];\n        while (combos.length) {\n            const [id, combo] = combos.pop();\n            if (isCollapsed(combo)) {\n                const descendants = model.getDescendantsData(id);\n                const descendantIds = descendants.map(idOf);\n                const { internal, external } = getSubgraphRelatedEdges(descendantIds, (id) => model.getRelatedEdgesData(id));\n                // 移除所有后代元素 / Remove all descendant elements\n                descendants.forEach((descendant) => {\n                    const descendantId = idOf(descendant);\n                    // 不再处理当前 combo 的后代 combo\n                    // No longer process the descendant combo of the current combo\n                    const comboIndex = combos.findIndex(([id]) => id === descendantId);\n                    if (comboIndex !== -1)\n                        combos.splice(comboIndex, 1);\n                    const elementType = model.getElementType(descendantId);\n                    reassignTo(input, 'remove', elementType, descendant);\n                });\n                // 如果是内部边/节点 销毁\n                // If it is an internal edge/node, destroy it\n                internal.forEach((edge) => reassignTo(input, 'remove', 'edge', edge));\n                // 如果是外部边，连接到收起对象上\n                // If it is an external edge, connect to the collapsed object\n                external.forEach((edge) => {\n                    const id = idOf(edge);\n                    const edgeElement = this.context.element?.getElement(id);\n                    if (edgeElement)\n                        update.edges.set(id, edge);\n                    else\n                        add.edges.set(id, edge);\n                });\n            }\n            else {\n                const children = model.getChildrenData(id);\n                const childrenIds = children.map(idOf);\n                const { edges } = getSubgraphRelatedEdges(childrenIds, (id) => model.getRelatedEdgesData(id));\n                [...children, ...edges].forEach((descendant) => {\n                    const id = idOf(descendant);\n                    const elementType = model.getElementType(id);\n                    const element = this.context.element?.getElement(id);\n                    // 如果节点不存在，则添加到新增列表，如果存在，添加到更新列表\n                    // If the node does not exist, add it to the new list, if it exists, add it to the update list\n                    if (element)\n                        reassignTo(input, 'update', elementType, descendant);\n                    else\n                        reassignTo(input, 'add', elementType, descendant);\n                    // 继续展开子节点 / Continue to expand child nodes\n                    if (elementType === 'combo')\n                        combos.push([id, descendant]);\n                });\n            }\n        }\n        return input;\n    }\n}\n//# sourceMappingURL=collapse-expand-combo.js.map","import { print } from '../utils/print';\nimport { BUILT_IN_EXTENSIONS } from './build-in';\n/**\n * <zh/> 扩展注册表\n *\n * <en/> Extension registry\n */\nconst EXTENSION_REGISTRY = {\n    animation: {},\n    behavior: {},\n    combo: {},\n    edge: {},\n    layout: {},\n    node: {},\n    palette: {},\n    theme: {},\n    plugin: {},\n    transform: {},\n};\n/**\n * <zh/> 注册一个新的扩展。\n *\n * <en/> Registers a new extension.\n * @param category\n * <zh/> 扩展要注册的分类，目前支持注册的扩展分类有：{@link ExtensionCategory}\n *\n * <en/> The category under which the extension is to be registered, see {@link ExtensionCategory}\n * @param type\n * <zh/> 要注册的扩展的类型，将作为使用扩展时的标识\n *\n * <en/> Extension type that used as an identifier when mounting the extension on a graph\n * @param Ctor\n * <zh/> 要注册的扩展类，在使用时创建实例\n *\n * <en/> The extension class to be registered. An instance will be created upon use\n * @param override\n * <zh/> 是否覆盖已注册的扩展\n *\n * <en/> Whether to override the registered extension\n * @remarks\n * <zh/> 内置扩展在项目导入时会自动注册。对于非内置扩展，可以通过 `register` 方法手动注册。扩展只需要注册一次，即可在项目的任何位置使用。\n *\n * <en/> Built-in extensions are automatically registered when the project is imported. For non-built-in extensions, you can manually register them using the `register` method. Extensions only need to be registered once and can be used anywhere in the project.\n * @example\n * ```ts\n * import { register, BaseNode } from '@antv/g6';\n *\n * class CircleNode extends BaseNode {}\n *\n * register('node', 'circle-node', CircleNode);\n * ```\n * @public\n */\nexport function register(category, type, Ctor, override = false) {\n    const ext = EXTENSION_REGISTRY[category][type];\n    if (!override && ext) {\n        if (ext !== Ctor)\n            print.warn(`The extension ${type} of ${category} has been registered before.`);\n    }\n    else\n        Object.assign(EXTENSION_REGISTRY[category], { [type]: Ctor });\n}\n/**\n * <zh/> 根据类别和类型获取扩展\n *\n * <en/> Get the extension by category and type\n * @param category - <zh/> 扩展类别 | <en/> Extension category\n * @param type - <zh/> 扩展类型 | <en/> Extension type\n * @returns <zh/> 注册的扩展 | <en/> Registered extension\n * @internal\n */\nexport function getExtension(category, type) {\n    const extension = EXTENSION_REGISTRY[category]?.[type];\n    if (extension) {\n        return extension;\n    }\n    return undefined;\n}\n/**\n * <zh/> 根据类别获取扩展\n *\n * <en/> Get the extension by category and type\n * @param category - <zh/> 扩展类别 | <en/> Extension category\n * @returns <zh/> 注册的扩展 | <en/> Registered extension\n * @internal\n */\nexport function getExtensions(category) {\n    return EXTENSION_REGISTRY[category];\n}\n/**\n * <zh/> 注册内置扩展\n *\n * <en/> Register built-in extensions\n */\nexport function registerBuiltInExtensions() {\n    Object.entries(BUILT_IN_EXTENSIONS).forEach(([category, extensions]) => {\n        Object.entries(extensions).forEach(([type, extension]) => {\n            register(category, type, extension);\n        });\n    });\n}\n//# sourceMappingURL=index.js.map","import { runtime } from '@antv/g';\nimport { registerBuiltInExtensions } from './registry';\nruntime.enableCSSParsing = false;\nregisterBuiltInExtensions();\n//# sourceMappingURL=preset.js.map","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Hierarchy\"] = factory();\n\telse\n\t\troot[\"Hierarchy\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 5);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports) {\n\n/**\n * Get average height or height for node's position calculation, according to align.\n * @param {*} preNode previous node\n * @param {*} node current node, whose position is going to be calculated\n * @param {'center' | undefined} align 'center' means nodes align at the center, other value means align at the left-top\n * @param {string} heightField field name for height value on preNode and node\n * @return {number} the height for calculation\n */\nfunction getHeight(preNode, node, align, heightField) {\n  if (heightField === void 0) {\n    heightField = 'height';\n  }\n  return align === 'center' ? (preNode[heightField] + node[heightField]) / 2 : preNode.height;\n}\nmodule.exports = {\n  assign: Object.assign,\n  getHeight: getHeight\n};\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar hierarchy = __webpack_require__(3);\nvar Layout = /*#__PURE__*/function () {\n  function Layout(root, options) {\n    if (options === void 0) {\n      options = {};\n    }\n    var me = this;\n    me.options = options;\n    me.rootNode = hierarchy(root, options);\n  }\n  var _proto = Layout.prototype;\n  _proto.execute = function execute() {\n    throw new Error('please override this method');\n  };\n  return Layout;\n}();\nmodule.exports = Layout;\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar separateTree = __webpack_require__(4);\nvar VALID_DIRECTIONS = ['LR',\n// left to right\n'RL',\n// right to left\n'TB',\n// top to bottom\n'BT',\n// bottom to top\n'H',\n// horizontal\n'V' // vertical\n];\nvar HORIZONTAL_DIRECTIONS = ['LR', 'RL', 'H'];\nvar isHorizontal = function isHorizontal(direction) {\n  return HORIZONTAL_DIRECTIONS.indexOf(direction) > -1;\n};\nvar DEFAULT_DIRECTION = VALID_DIRECTIONS[0];\nmodule.exports = function (root, options, layoutAlgrithm) {\n  var direction = options.direction || DEFAULT_DIRECTION;\n  options.isHorizontal = isHorizontal(direction);\n  if (direction && VALID_DIRECTIONS.indexOf(direction) === -1) {\n    throw new TypeError(\"Invalid direction: \" + direction);\n  }\n  if (direction === VALID_DIRECTIONS[0]) {\n    // LR\n    layoutAlgrithm(root, options);\n  } else if (direction === VALID_DIRECTIONS[1]) {\n    // RL\n    layoutAlgrithm(root, options);\n    root.right2left();\n  } else if (direction === VALID_DIRECTIONS[2]) {\n    // TB\n    layoutAlgrithm(root, options);\n  } else if (direction === VALID_DIRECTIONS[3]) {\n    // BT\n    layoutAlgrithm(root, options);\n    root.bottom2top();\n  } else if (direction === VALID_DIRECTIONS[4] || direction === VALID_DIRECTIONS[5]) {\n    // H or V\n    // separate into left and right trees\n    var _separateTree = separateTree(root, options),\n      left = _separateTree.left,\n      right = _separateTree.right;\n    // do layout for left and right trees\n    layoutAlgrithm(left, options);\n    layoutAlgrithm(right, options);\n    options.isHorizontal ? left.right2left() : left.bottom2top();\n    // combine left and right trees\n    right.translate(left.x - right.x, left.y - right.y);\n    // translate root\n    root.x = left.x;\n    root.y = right.y;\n    var bb = root.getBoundingBox();\n    if (options.isHorizontal) {\n      if (bb.top < 0) {\n        root.translate(0, -bb.top);\n      }\n    } else {\n      if (bb.left < 0) {\n        root.translate(-bb.left, 0);\n      }\n    }\n  }\n  // fixed root position, default value is true\n  var fixedRoot = options.fixedRoot;\n  if (fixedRoot === undefined) fixedRoot = true;\n  if (fixedRoot) {\n    root.translate(-(root.x + root.width / 2 + root.hgap), -(root.y + root.height / 2 + root.vgap));\n  }\n  return root;\n};\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/* eslint-disable no-cond-assign */\nvar util = __webpack_require__(0);\nvar PEM = 18;\nvar DEFAULT_HEIGHT = PEM * 2;\nvar DEFAULT_GAP = PEM;\nvar DEFAULT_OPTIONS = {\n  getId: function getId(d) {\n    return d.id || d.name;\n  },\n  getPreH: function getPreH(d) {\n    return d.preH || 0;\n  },\n  getPreV: function getPreV(d) {\n    return d.preV || 0;\n  },\n  getHGap: function getHGap(d) {\n    return d.hgap || DEFAULT_GAP;\n  },\n  getVGap: function getVGap(d) {\n    return d.vgap || DEFAULT_GAP;\n  },\n  getChildren: function getChildren(d) {\n    return d.children;\n  },\n  getHeight: function getHeight(d) {\n    return d.height || DEFAULT_HEIGHT;\n  },\n  getWidth: function getWidth(d) {\n    var label = d.label || ' ';\n    return d.width || label.split('').length * PEM; // FIXME DO NOT get width like this\n  }\n};\nfunction Node(data, options) {\n  var me = this;\n  me.vgap = me.hgap = 0;\n  if (data instanceof Node) return data;\n  me.data = data;\n  /*\n   * Gaps: filling space between nodes\n   * (x, y) ----------------------\n   * |            vgap            |\n   * |    --------------------    h\n   * | h |                    |   e\n   * | g |                    |   i\n   * | a |                    |   g\n   * | p |                    |   h\n   * |   ---------------------    t\n   * |                            |\n   *  -----------width------------\n   */\n  var hgap = options.getHGap(data);\n  var vgap = options.getVGap(data);\n  me.preH = options.getPreH(data);\n  me.preV = options.getPreV(data);\n  me.width = options.getWidth(data);\n  me.height = options.getHeight(data);\n  me.width += me.preH;\n  me.height += me.preV;\n  me.id = options.getId(data);\n  me.x = me.y = 0;\n  me.depth = 0;\n  if (!me.children) {\n    me.children = [];\n  }\n  me.addGap(hgap, vgap);\n  return me;\n}\nutil.assign(Node.prototype, {\n  isRoot: function isRoot() {\n    return this.depth === 0;\n  },\n  isLeaf: function isLeaf() {\n    return this.children.length === 0;\n  },\n  addGap: function addGap(hgap, vgap) {\n    var me = this;\n    me.hgap += hgap;\n    me.vgap += vgap;\n    me.width += 2 * hgap;\n    me.height += 2 * vgap;\n  },\n  eachNode: function eachNode(callback) {\n    // Depth First traverse\n    var me = this;\n    var nodes = [me];\n    var current;\n    while (current = nodes.shift()) {\n      callback(current);\n      nodes = current.children.concat(nodes);\n    }\n  },\n  DFTraverse: function DFTraverse(callback) {\n    // Depth First traverse\n    this.eachNode(callback);\n  },\n  BFTraverse: function BFTraverse(callback) {\n    // Breadth First traverse\n    var me = this;\n    var nodes = [me];\n    var current;\n    while (current = nodes.shift()) {\n      callback(current);\n      nodes = nodes.concat(current.children);\n    }\n  },\n  getBoundingBox: function getBoundingBox() {\n    // BBox for just one tree node\n    var bb = {\n      left: Number.MAX_VALUE,\n      top: Number.MAX_VALUE,\n      width: 0,\n      height: 0\n    };\n    this.eachNode(function (node) {\n      bb.left = Math.min(bb.left, node.x);\n      bb.top = Math.min(bb.top, node.y);\n      bb.width = Math.max(bb.width, node.x + node.width);\n      bb.height = Math.max(bb.height, node.y + node.height);\n    });\n    return bb;\n  },\n  // translate\n  translate: function translate(tx, ty) {\n    if (tx === void 0) {\n      tx = 0;\n    }\n    if (ty === void 0) {\n      ty = 0;\n    }\n    this.eachNode(function (node) {\n      node.x += tx;\n      node.y += ty;\n      node.x += node.preH;\n      node.y += node.preV;\n    });\n  },\n  right2left: function right2left() {\n    var me = this;\n    var bb = me.getBoundingBox();\n    me.eachNode(function (node) {\n      node.x = node.x - (node.x - bb.left) * 2 - node.width;\n      // node.x = - node.x;\n    });\n    me.translate(bb.width, 0);\n  },\n  bottom2top: function bottom2top() {\n    var me = this;\n    var bb = me.getBoundingBox();\n    me.eachNode(function (node) {\n      node.y = node.y - (node.y - bb.top) * 2 - node.height;\n      // node.y = - node.y;\n    });\n    me.translate(0, bb.height);\n  }\n});\nfunction hierarchy(data, options, isolated) {\n  if (options === void 0) {\n    options = {};\n  }\n  options = util.assign({}, DEFAULT_OPTIONS, options);\n  var root = new Node(data, options);\n  var nodes = [root];\n  var node;\n  if (!isolated && !data.collapsed) {\n    while (node = nodes.shift()) {\n      if (!node.data.collapsed) {\n        var children = options.getChildren(node.data);\n        var length = children ? children.length : 0;\n        node.children = new Array(length);\n        if (children && length) {\n          for (var i = 0; i < length; i++) {\n            var child = new Node(children[i], options);\n            node.children[i] = child;\n            nodes.push(child);\n            child.parent = node;\n            child.depth = node.depth + 1;\n          }\n        }\n      }\n    }\n  }\n  return root;\n}\nmodule.exports = hierarchy;\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar hierarchy = __webpack_require__(3);\nmodule.exports = function (root, options) {\n  // separate into left and right trees\n  var left = hierarchy(root.data, options, true); // root only\n  var right = hierarchy(root.data, options, true); // root only\n  // automatically\n  var treeSize = root.children.length;\n  var rightTreeSize = Math.round(treeSize / 2);\n  // separate left and right tree by meta data\n  var getSide = options.getSide || function (child, index) {\n    if (index < rightTreeSize) {\n      return 'right';\n    }\n    return 'left';\n  };\n  for (var i = 0; i < treeSize; i++) {\n    var child = root.children[i];\n    var side = getSide(child, i);\n    if (side === 'right') {\n      right.children.push(child);\n    } else {\n      left.children.push(child);\n    }\n  }\n  left.eachNode(function (node) {\n    if (!node.isRoot()) {\n      node.side = 'left';\n    }\n  });\n  right.eachNode(function (node) {\n    if (!node.isRoot()) {\n      node.side = 'right';\n    }\n  });\n  return {\n    left: left,\n    right: right\n  };\n};\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar hierarchy = {\n  compactBox: __webpack_require__(6),\n  dendrogram: __webpack_require__(8),\n  indented: __webpack_require__(10),\n  mindmap: __webpack_require__(12)\n};\nmodule.exports = hierarchy;\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nvar TreeLayout = __webpack_require__(1);\nvar nonLayeredTidyTree = __webpack_require__(7);\nvar doTreeLayout = __webpack_require__(2);\nvar util = __webpack_require__(0);\nvar CompactBoxTreeLayout = /*#__PURE__*/function (_TreeLayout) {\n  function CompactBoxTreeLayout() {\n    return _TreeLayout.apply(this, arguments) || this;\n  }\n  _inheritsLoose(CompactBoxTreeLayout, _TreeLayout);\n  var _proto = CompactBoxTreeLayout.prototype;\n  _proto.execute = function execute() {\n    var me = this;\n    return doTreeLayout(me.rootNode, me.options, nonLayeredTidyTree);\n  };\n  return CompactBoxTreeLayout;\n}(TreeLayout);\nvar DEFAULT_OPTIONS = {};\nfunction compactBoxLayout(root, options) {\n  options = util.assign({}, DEFAULT_OPTIONS, options);\n  return new CompactBoxTreeLayout(root, options).execute();\n}\nmodule.exports = compactBoxLayout;\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports) {\n\n// wrap tree node\nfunction WrappedTree(w, h, y, c) {\n  if (c === void 0) {\n    c = [];\n  }\n  var me = this;\n  // size\n  me.w = w || 0;\n  me.h = h || 0;\n\n  // position\n  me.y = y || 0;\n  me.x = 0;\n\n  // children\n  me.c = c || [];\n  me.cs = c.length;\n\n  // modified\n  me.prelim = 0;\n  me.mod = 0;\n  me.shift = 0;\n  me.change = 0;\n\n  // left/right tree\n  me.tl = null;\n  me.tr = null;\n\n  // extreme left/right tree\n  me.el = null;\n  me.er = null;\n\n  // modified left/right tree\n  me.msel = 0;\n  me.mser = 0;\n}\nWrappedTree.fromNode = function (root, isHorizontal) {\n  if (!root) return null;\n  var children = [];\n  root.children.forEach(function (child) {\n    children.push(WrappedTree.fromNode(child, isHorizontal));\n  });\n  if (isHorizontal) return new WrappedTree(root.height, root.width, root.x, children);\n  return new WrappedTree(root.width, root.height, root.y, children);\n};\n\n// node utils\nfunction moveRight(node, move, isHorizontal) {\n  if (isHorizontal) {\n    node.y += move;\n  } else {\n    node.x += move;\n  }\n  node.children.forEach(function (child) {\n    moveRight(child, move, isHorizontal);\n  });\n}\nfunction getMin(node, isHorizontal) {\n  var res = isHorizontal ? node.y : node.x;\n  node.children.forEach(function (child) {\n    res = Math.min(getMin(child, isHorizontal), res);\n  });\n  return res;\n}\nfunction normalize(node, isHorizontal) {\n  var min = getMin(node, isHorizontal);\n  moveRight(node, -min, isHorizontal);\n}\nfunction convertBack(converted /* WrappedTree */, root /* TreeNode */, isHorizontal) {\n  if (isHorizontal) {\n    root.y = converted.x;\n  } else {\n    root.x = converted.x;\n  }\n  converted.c.forEach(function (child, i) {\n    convertBack(child, root.children[i], isHorizontal);\n  });\n}\nfunction layer(node, isHorizontal, d) {\n  if (d === void 0) {\n    d = 0;\n  }\n  if (isHorizontal) {\n    node.x = d;\n    d += node.width;\n  } else {\n    node.y = d;\n    d += node.height;\n  }\n  node.children.forEach(function (child) {\n    layer(child, isHorizontal, d);\n  });\n}\nmodule.exports = function (root, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  var isHorizontal = options.isHorizontal;\n  function firstWalk(t) {\n    if (t.cs === 0) {\n      setExtremes(t);\n      return;\n    }\n    firstWalk(t.c[0]);\n    var ih = updateIYL(bottom(t.c[0].el), 0, null);\n    for (var i = 1; i < t.cs; ++i) {\n      firstWalk(t.c[i]);\n      var min = bottom(t.c[i].er);\n      separate(t, i, ih);\n      ih = updateIYL(min, i, ih);\n    }\n    positionRoot(t);\n    setExtremes(t);\n  }\n  function setExtremes(t) {\n    if (t.cs === 0) {\n      t.el = t;\n      t.er = t;\n      t.msel = t.mser = 0;\n    } else {\n      t.el = t.c[0].el;\n      t.msel = t.c[0].msel;\n      t.er = t.c[t.cs - 1].er;\n      t.mser = t.c[t.cs - 1].mser;\n    }\n  }\n  function separate(t, i, ih) {\n    var sr = t.c[i - 1];\n    var mssr = sr.mod;\n    var cl = t.c[i];\n    var mscl = cl.mod;\n    while (sr !== null && cl !== null) {\n      if (bottom(sr) > ih.low) ih = ih.nxt;\n      var dist = mssr + sr.prelim + sr.w - (mscl + cl.prelim);\n      if (dist > 0) {\n        mscl += dist;\n        moveSubtree(t, i, ih.index, dist);\n      }\n      var sy = bottom(sr);\n      var cy = bottom(cl);\n      if (sy <= cy) {\n        sr = nextRightContour(sr);\n        if (sr !== null) mssr += sr.mod;\n      }\n      if (sy >= cy) {\n        cl = nextLeftContour(cl);\n        if (cl !== null) mscl += cl.mod;\n      }\n    }\n    if (!sr && !!cl) {\n      setLeftThread(t, i, cl, mscl);\n    } else if (!!sr && !cl) {\n      setRightThread(t, i, sr, mssr);\n    }\n  }\n  function moveSubtree(t, i, si, dist) {\n    t.c[i].mod += dist;\n    t.c[i].msel += dist;\n    t.c[i].mser += dist;\n    distributeExtra(t, i, si, dist);\n  }\n  function nextLeftContour(t) {\n    return t.cs === 0 ? t.tl : t.c[0];\n  }\n  function nextRightContour(t) {\n    return t.cs === 0 ? t.tr : t.c[t.cs - 1];\n  }\n  function bottom(t) {\n    return t.y + t.h;\n  }\n  function setLeftThread(t, i, cl, modsumcl) {\n    var li = t.c[0].el;\n    li.tl = cl;\n    var diff = modsumcl - cl.mod - t.c[0].msel;\n    li.mod += diff;\n    li.prelim -= diff;\n    t.c[0].el = t.c[i].el;\n    t.c[0].msel = t.c[i].msel;\n  }\n  function setRightThread(t, i, sr, modsumsr) {\n    var ri = t.c[i].er;\n    ri.tr = sr;\n    var diff = modsumsr - sr.mod - t.c[i].mser;\n    ri.mod += diff;\n    ri.prelim -= diff;\n    t.c[i].er = t.c[i - 1].er;\n    t.c[i].mser = t.c[i - 1].mser;\n  }\n  function positionRoot(t) {\n    t.prelim = (t.c[0].prelim + t.c[0].mod + t.c[t.cs - 1].mod + t.c[t.cs - 1].prelim + t.c[t.cs - 1].w) / 2 - t.w / 2;\n  }\n  function secondWalk(t, modsum) {\n    modsum += t.mod;\n    t.x = t.prelim + modsum;\n    addChildSpacing(t);\n    for (var i = 0; i < t.cs; i++) {\n      secondWalk(t.c[i], modsum);\n    }\n  }\n  function distributeExtra(t, i, si, dist) {\n    if (si !== i - 1) {\n      var nr = i - si;\n      t.c[si + 1].shift += dist / nr;\n      t.c[i].shift -= dist / nr;\n      t.c[i].change -= dist - dist / nr;\n    }\n  }\n  function addChildSpacing(t) {\n    var d = 0;\n    var modsumdelta = 0;\n    for (var i = 0; i < t.cs; i++) {\n      d += t.c[i].shift;\n      modsumdelta += d + t.c[i].change;\n      t.c[i].mod += modsumdelta;\n    }\n  }\n  function updateIYL(low, index, ih) {\n    while (ih !== null && low >= ih.low) {\n      ih = ih.nxt;\n    }\n    return {\n      low: low,\n      index: index,\n      nxt: ih\n    };\n  }\n\n  // do layout\n  layer(root, isHorizontal);\n  var wt = WrappedTree.fromNode(root, isHorizontal);\n  firstWalk(wt);\n  secondWalk(wt, 0);\n  convertBack(wt, root, isHorizontal);\n  normalize(root, isHorizontal);\n  return root;\n};\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nvar TreeLayout = __webpack_require__(1);\nvar dendrogram = __webpack_require__(9);\nvar doTreeLayout = __webpack_require__(2);\nvar util = __webpack_require__(0);\nvar DendrogramLayout = /*#__PURE__*/function (_TreeLayout) {\n  function DendrogramLayout() {\n    return _TreeLayout.apply(this, arguments) || this;\n  }\n  _inheritsLoose(DendrogramLayout, _TreeLayout);\n  var _proto = DendrogramLayout.prototype;\n  _proto.execute = function execute() {\n    var me = this;\n    me.rootNode.width = 0;\n    return doTreeLayout(me.rootNode, me.options, dendrogram);\n  };\n  return DendrogramLayout;\n}(TreeLayout);\nvar DEFAULT_OPTIONS = {};\nfunction dendrogramLayout(root, options) {\n  options = util.assign({}, DEFAULT_OPTIONS, options);\n  return new DendrogramLayout(root, options).execute();\n}\nmodule.exports = dendrogramLayout;\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n// wrap tree node\n// TODO considering size\nvar util = __webpack_require__(0);\nfunction WrappedTree(height, children) {\n  if (height === void 0) {\n    height = 0;\n  }\n  if (children === void 0) {\n    children = [];\n  }\n  var me = this;\n  me.x = me.y = 0;\n  me.leftChild = me.rightChild = null;\n  me.height = 0;\n  me.children = children;\n}\nvar DEFAULT_OPTIONS = {\n  isHorizontal: true,\n  nodeSep: 20,\n  nodeSize: 20,\n  rankSep: 200,\n  subTreeSep: 10\n};\nfunction convertBack(converted /* WrappedTree */, root /* TreeNode */, isHorizontal) {\n  if (isHorizontal) {\n    root.x = converted.x;\n    root.y = converted.y;\n  } else {\n    root.x = converted.y;\n    root.y = converted.x;\n  }\n  converted.children.forEach(function (child, i) {\n    convertBack(child, root.children[i], isHorizontal);\n  });\n}\nmodule.exports = function (root, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  options = util.assign({}, DEFAULT_OPTIONS, options);\n  var maxDepth = 0;\n  function wrappedTreeFromNode(n) {\n    if (!n) return null;\n    n.width = 0;\n    if (n.depth && n.depth > maxDepth) {\n      maxDepth = n.depth; // get the max depth\n    }\n    var children = n.children;\n    var childrenCount = children.length;\n    var t = new WrappedTree(n.height, []);\n    children.forEach(function (child, i) {\n      var childWT = wrappedTreeFromNode(child);\n      t.children.push(childWT);\n      if (i === 0) {\n        // t.leftChild = childWT.leftChild ? childWT.leftChild : childWT\n        t.leftChild = childWT;\n      }\n      if (i === childrenCount - 1) {\n        // t.rightChild = childWT.rightChild ? childWT.rightChild : childWT\n        t.rightChild = childWT;\n      }\n    });\n    t.originNode = n;\n    t.isLeaf = n.isLeaf();\n    return t;\n  }\n  function getDrawingDepth(t) {\n    if (t.isLeaf || t.children.length === 0) {\n      t.drawingDepth = maxDepth;\n    } else {\n      var depths = t.children.map(function (child) {\n        return getDrawingDepth(child);\n      });\n      var minChildDepth = Math.min.apply(null, depths);\n      t.drawingDepth = minChildDepth - 1;\n    }\n    return t.drawingDepth;\n  }\n  var prevLeaf;\n  function position(t) {\n    t.x = t.drawingDepth * options.rankSep;\n    if (t.isLeaf) {\n      t.y = 0;\n      if (prevLeaf) {\n        t.y = prevLeaf.y + prevLeaf.height + options.nodeSep;\n        if (t.originNode.parent !== prevLeaf.originNode.parent) {\n          t.y += options.subTreeSep;\n        }\n      }\n      prevLeaf = t;\n    } else {\n      t.children.forEach(function (child) {\n        position(child);\n      });\n      t.y = (t.leftChild.y + t.rightChild.y) / 2;\n    }\n  }\n\n  // wrap node\n  var wt = wrappedTreeFromNode(root);\n  // get depth for drawing\n  getDrawingDepth(wt);\n  // get position\n  position(wt);\n  // get x, y\n  convertBack(wt, root, options.isHorizontal);\n  return root;\n};\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nvar TreeLayout = __webpack_require__(1);\nvar indentedTree = __webpack_require__(11);\nvar separateTree = __webpack_require__(4);\nvar util = __webpack_require__(0);\nvar VALID_DIRECTIONS = ['LR',\n// left to right\n'RL',\n// right to left\n'H' // horizontal\n];\nvar DEFAULT_DIRECTION = VALID_DIRECTIONS[0];\nvar IndentedLayout = /*#__PURE__*/function (_TreeLayout) {\n  function IndentedLayout() {\n    return _TreeLayout.apply(this, arguments) || this;\n  }\n  _inheritsLoose(IndentedLayout, _TreeLayout);\n  var _proto = IndentedLayout.prototype;\n  _proto.execute = function execute() {\n    var me = this;\n    var options = me.options;\n    var root = me.rootNode;\n    options.isHorizontal = true;\n    // default indent 20 and sink first children;\n    var _options$indent = options.indent,\n      indent = _options$indent === void 0 ? 20 : _options$indent,\n      _options$dropCap = options.dropCap,\n      dropCap = _options$dropCap === void 0 ? true : _options$dropCap,\n      _options$direction = options.direction,\n      direction = _options$direction === void 0 ? DEFAULT_DIRECTION : _options$direction,\n      align = options.align;\n    if (direction && VALID_DIRECTIONS.indexOf(direction) === -1) {\n      throw new TypeError(\"Invalid direction: \" + direction);\n    }\n    if (direction === VALID_DIRECTIONS[0]) {\n      // LR\n      indentedTree(root, indent, dropCap, align);\n    } else if (direction === VALID_DIRECTIONS[1]) {\n      // RL\n      indentedTree(root, indent, dropCap, align);\n      root.right2left();\n    } else if (direction === VALID_DIRECTIONS[2]) {\n      // H\n      // separate into left and right trees\n      var _separateTree = separateTree(root, options),\n        left = _separateTree.left,\n        right = _separateTree.right;\n      indentedTree(left, indent, dropCap, align);\n      left.right2left();\n      indentedTree(right, indent, dropCap, align);\n      var bbox = left.getBoundingBox();\n      right.translate(bbox.width, 0);\n      root.x = right.x - root.width / 2;\n    }\n    return root;\n  };\n  return IndentedLayout;\n}(TreeLayout);\nvar DEFAULT_OPTIONS = {};\nfunction indentedLayout(root, options) {\n  options = util.assign({}, DEFAULT_OPTIONS, options);\n  return new IndentedLayout(root, options).execute();\n}\nmodule.exports = indentedLayout;\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar util = __webpack_require__(0);\nfunction positionNode(node, previousNode, indent, dropCap, align) {\n  //  caculate the node's horizontal offset DX, dx's type might be number or function\n  var displacementX = typeof indent === \"function\" ? indent(node) : indent * node.depth;\n  if (!dropCap) {\n    try {\n      if (node.id === node.parent.children[0].id) {\n        node.x += displacementX;\n        node.y = previousNode ? previousNode.y : 0;\n        return;\n      }\n    } catch (e) {\n      // skip to normal when a node has no parent\n    }\n  }\n  node.x += displacementX;\n  if (previousNode) {\n    node.y = previousNode.y + util.getHeight(previousNode, node, align);\n    if (previousNode.parent && node.parent.id !== previousNode.parent.id) {\n      // previous node has different parent\n      var prevParent = previousNode.parent;\n      var preY = prevParent.y + util.getHeight(prevParent, node, align);\n      node.y = preY > node.y ? preY : node.y;\n    }\n  } else {\n    node.y = 0;\n  }\n  return;\n}\nmodule.exports = function (root, indent, dropCap, align) {\n  var previousNode = null;\n  root.eachNode(function (node) {\n    positionNode(node, previousNode, indent, dropCap, align);\n    previousNode = node;\n  });\n};\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nvar TreeLayout = __webpack_require__(1);\nvar mindmap = __webpack_require__(13);\nvar doTreeLayout = __webpack_require__(2);\nvar util = __webpack_require__(0);\nvar MindmapLayout = /*#__PURE__*/function (_TreeLayout) {\n  function MindmapLayout() {\n    return _TreeLayout.apply(this, arguments) || this;\n  }\n  _inheritsLoose(MindmapLayout, _TreeLayout);\n  var _proto = MindmapLayout.prototype;\n  _proto.execute = function execute() {\n    var me = this;\n    return doTreeLayout(me.rootNode, me.options, mindmap);\n  };\n  return MindmapLayout;\n}(TreeLayout);\nvar DEFAULT_OPTIONS = {};\nfunction mindmapLayout(root, options) {\n  options = util.assign({}, DEFAULT_OPTIONS, options);\n  return new MindmapLayout(root, options).execute();\n}\nmodule.exports = mindmapLayout;\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar util = __webpack_require__(0);\nfunction secondWalk(node, options) {\n  var totalHeight = 0;\n  if (!node.children.length) {\n    totalHeight = node.height;\n  } else {\n    node.children.forEach(function (c) {\n      totalHeight += secondWalk(c, options);\n    });\n  }\n  node._subTreeSep = options.getSubTreeSep(node.data);\n  node.totalHeight = Math.max(node.height, totalHeight) + 2 * node._subTreeSep;\n  return node.totalHeight;\n}\nfunction thirdWalk(node) {\n  var children = node.children;\n  var len = children.length;\n  if (len) {\n    children.forEach(function (c) {\n      thirdWalk(c);\n    });\n    var first = children[0];\n    var last = children[len - 1];\n    var childrenHeight = last.y - first.y + last.height;\n    var childrenTotalHeight = 0;\n    children.forEach(function (child) {\n      childrenTotalHeight += child.totalHeight;\n    });\n    if (childrenHeight > node.height) {\n      // 当子节点总高度大于父节点高度\n      node.y = first.y + childrenHeight / 2 - node.height / 2;\n    } else if (children.length !== 1 || node.height > childrenTotalHeight) {\n      // 多于一个子节点或者父节点大于所有子节点的总高度\n      var offset = node.y + (node.height - childrenHeight) / 2 - first.y;\n      children.forEach(function (c) {\n        c.translate(0, offset);\n      });\n    } else {\n      // 只有一个子节点\n      node.y = (first.y + first.height / 2 + last.y + last.height / 2) / 2 - node.height / 2;\n    }\n  }\n}\nvar DEFAULT_OPTIONS = {\n  getSubTreeSep: function getSubTreeSep() {\n    return 0;\n  }\n};\nmodule.exports = function (root, options) {\n  if (options === void 0) {\n    options = {};\n  }\n  options = util.assign({}, DEFAULT_OPTIONS, options);\n  root.parent = {\n    x: 0,\n    width: 0,\n    height: 0,\n    y: 0\n  };\n  // first walk\n  root.BFTraverse(function (node) {\n    node.x = node.parent.x + node.parent.width; // simply get x\n  });\n  root.parent = null;\n  // second walk\n  secondWalk(root, options); // assign sub tree totalHeight\n  // adjusting\n  // separating nodes\n  root.startY = 0;\n  root.y = root.totalHeight / 2 - root.height / 2;\n  root.eachNode(function (node) {\n    var children = node.children;\n    var len = children.length;\n    if (len) {\n      var first = children[0];\n      first.startY = node.startY + node._subTreeSep;\n      if (len === 1) {\n        first.y = node.y + node.height / 2 - first.height / 2;\n      } else {\n        first.y = first.startY + first.totalHeight / 2 - first.height / 2;\n        for (var i = 1; i < len; i++) {\n          var c = children[i];\n          c.startY = children[i - 1].startY + children[i - 1].totalHeight;\n          c.y = c.startY + c.totalHeight / 2 - c.height / 2;\n        }\n      }\n    }\n  });\n\n  // third walk\n  thirdWalk(root);\n};\n\n/***/ })\n/******/ ]);\n});\n//# sourceMappingURL=hierarchy.js.map","function _cross(o, a, b) {\n    return (a[0] - o[0]) * (b[1] - o[1]) - (a[1] - o[1]) * (b[0] - o[0]);\n}\n\nfunction _upperTangent(pointset) {\n    const lower = [];\n    for (let l = 0; l < pointset.length; l++) {\n        while (lower.length >= 2 && (_cross(lower[lower.length - 2], lower[lower.length - 1], pointset[l]) <= 0)) {\n            lower.pop();\n        }\n        lower.push(pointset[l]);\n    }\n    lower.pop();\n    return lower;\n}\n\nfunction _lowerTangent(pointset) {\n    const reversed = pointset.reverse(),\n        upper = [];\n    for (let u = 0; u < reversed.length; u++) {\n        while (upper.length >= 2 && (_cross(upper[upper.length - 2], upper[upper.length - 1], reversed[u]) <= 0)) {\n            upper.pop();\n        }\n        upper.push(reversed[u]);\n    }\n    upper.pop();\n    return upper;\n}\n\n// pointset has to be sorted by X\nfunction convex(pointset) {\n    const upper = _upperTangent(pointset),\n          lower = _lowerTangent(pointset);\n    const convex = lower.concat(upper);\n    convex.push(pointset[0]);  \n    return convex;  \n}\n\nmodule.exports = convex;\n","module.exports = {\n\n    toXy: function(pointset, format) {\n        if (format === undefined) {\n            return pointset.slice();\n        }\n        return pointset.map(function(pt) {\n            /*jslint evil: true */\n            const _getXY = new Function('pt', 'return [pt' + format[0] + ',' + 'pt' + format[1] + '];');\n            return _getXY(pt);\n        });\n    },\n\n    fromXy: function(pointset, format) {\n        if (format === undefined) {\n            return pointset.slice();\n        }\n        return pointset.map(function(pt) {\n            /*jslint evil: true */\n            const _getObj = new Function('pt', 'const o = {}; o' + format[0] + '= pt[0]; o' + format[1] + '= pt[1]; return o;');\n            return _getObj(pt);\n        });\n    }\n\n}","function Grid(points, cellSize) {\n    this._cells = [];\n    this._cellSize = cellSize;\n    this._reverseCellSize = 1 / cellSize;\n\n    for (let i = 0; i < points.length; i++) {\n        const point = points[i];\n        const x = this.coordToCellNum(point[0]);\n        const y = this.coordToCellNum(point[1]);\n        if (!this._cells[x]) {\n            const array = [];\n            array[y] = [point];\n            this._cells[x] = array;\n        } else if (!this._cells[x][y]) {\n            this._cells[x][y] = [point];\n        } else {\n            this._cells[x][y].push(point);\n        }\n    }\n}\n\nGrid.prototype = {\n    cellPoints: function(x, y) { // (Number, Number) -> Array\n        return (this._cells[x] !== undefined && this._cells[x][y] !== undefined) ? this._cells[x][y] : [];\n    },\n\n    rangePoints: function(bbox) { // (Array) -> Array\n        const tlCellX = this.coordToCellNum(bbox[0]);\n        const tlCellY = this.coordToCellNum(bbox[1]);\n        const brCellX = this.coordToCellNum(bbox[2]);\n        const brCellY = this.coordToCellNum(bbox[3]);\n        const points = [];\n\n        for (let x = tlCellX; x <= brCellX; x++) {\n            for (let y = tlCellY; y <= brCellY; y++) {\n                // replaced Array.prototype.push.apply to avoid hitting stack size limit on larger arrays.\n                for (let i = 0; i < this.cellPoints(x, y).length; i++) {\n                    points.push(this.cellPoints(x, y)[i]);\n                }\n            }\n        }\n\n        return points;\n    },\n\n    removePoint: function(point) { // (Array) -> Array\n        const cellX = this.coordToCellNum(point[0]);\n        const cellY = this.coordToCellNum(point[1]);\n        const cell = this._cells[cellX][cellY];\n        let pointIdxInCell;\n\n        for (let i = 0; i < cell.length; i++) {\n            if (cell[i][0] === point[0] && cell[i][1] === point[1]) {\n                pointIdxInCell = i;\n                break;\n            }\n        }\n\n        cell.splice(pointIdxInCell, 1);\n\n        return cell;\n    },\n\n    trunc: Math.trunc || function(val) { // (number) -> number\n        return val - val % 1;\n    },\n\n    coordToCellNum: function(x) { // (number) -> number\n        return this.trunc(x * this._reverseCellSize);\n    },\n\n    extendBbox: function(bbox, scaleFactor) { // (Array, Number) -> Array\n        return [\n            bbox[0] - (scaleFactor * this._cellSize),\n            bbox[1] - (scaleFactor * this._cellSize),\n            bbox[2] + (scaleFactor * this._cellSize),\n            bbox[3] + (scaleFactor * this._cellSize)\n        ];\n    }\n};\n\nfunction grid(points, cellSize) {\n    return new Grid(points, cellSize);\n}\n\nmodule.exports = grid;","'use strict';\n\nconst intersect = require('./intersect.js');\nconst grid = require('./grid.js');\nconst formatUtil = require('./format.js');\nconst convexHull = require('./convex.js');\n\nfunction _filterDuplicates(pointset) {\n    const unique = [pointset[0]];\n    let lastPoint = pointset[0];\n    for (let i = 1; i < pointset.length; i++) {\n        const currentPoint = pointset[i];\n        if (lastPoint[0] !== currentPoint[0] || lastPoint[1] !== currentPoint[1]) {\n            unique.push(currentPoint);\n        }\n        lastPoint = currentPoint;\n    }\n    return unique;\n}\n\nfunction _sortByX(pointset) {\n    return pointset.sort(function(a, b) {\n        return (a[0] - b[0]) || (a[1] - b[1]);\n    });\n}\n\nfunction _sqLength(a, b) {\n    return Math.pow(b[0] - a[0], 2) + Math.pow(b[1] - a[1], 2);\n}\n\nfunction _cos(o, a, b) {\n    const aShifted = [a[0] - o[0], a[1] - o[1]],\n        bShifted = [b[0] - o[0], b[1] - o[1]],\n        sqALen = _sqLength(o, a),\n        sqBLen = _sqLength(o, b),\n        dot = aShifted[0] * bShifted[0] + aShifted[1] * bShifted[1];\n\n    return dot / Math.sqrt(sqALen * sqBLen);\n}\n\nfunction _intersect(segment, pointset) {\n    for (let i = 0; i < pointset.length - 1; i++) {\n        const seg = [pointset[i], pointset[i + 1]];\n        if (segment[0][0] === seg[0][0] && segment[0][1] === seg[0][1] ||\n            segment[0][0] === seg[1][0] && segment[0][1] === seg[1][1]) {\n            continue;\n        }\n        if (intersect(segment, seg)) {\n            return true;\n        }\n    }\n    return false;\n}\n\nfunction _occupiedArea(pointset) {\n    let minX = Infinity;\n    let minY = Infinity;\n    let maxX = -Infinity;\n    let maxY = -Infinity;\n\n    for (let i = pointset.length - 1; i >= 0; i--) {\n        if (pointset[i][0] < minX) {\n            minX = pointset[i][0];\n        }\n        if (pointset[i][1] < minY) {\n            minY = pointset[i][1];\n        }\n        if (pointset[i][0] > maxX) {\n            maxX = pointset[i][0];\n        }\n        if (pointset[i][1] > maxY) {\n            maxY = pointset[i][1];\n        }\n    }\n\n    return [\n        maxX - minX, // width\n        maxY - minY  // height\n    ];\n}\n\nfunction _bBoxAround(edge) {\n    return [\n        Math.min(edge[0][0], edge[1][0]), // left\n        Math.min(edge[0][1], edge[1][1]), // top\n        Math.max(edge[0][0], edge[1][0]), // right\n        Math.max(edge[0][1], edge[1][1])  // bottom\n    ];\n}\n\nfunction _midPoint(edge, innerPoints, convex) {\n    let point = null,\n        angle1Cos = MAX_CONCAVE_ANGLE_COS,\n        angle2Cos = MAX_CONCAVE_ANGLE_COS,\n        a1Cos, a2Cos;\n\n    for (let i = 0; i < innerPoints.length; i++) {\n        a1Cos = _cos(edge[0], edge[1], innerPoints[i]);\n        a2Cos = _cos(edge[1], edge[0], innerPoints[i]);\n\n        if (a1Cos > angle1Cos && a2Cos > angle2Cos &&\n            !_intersect([edge[0], innerPoints[i]], convex) &&\n            !_intersect([edge[1], innerPoints[i]], convex)) {\n\n            angle1Cos = a1Cos;\n            angle2Cos = a2Cos;\n            point = innerPoints[i];\n        }\n    }\n\n    return point;\n}\n\nfunction _concave(convex, maxSqEdgeLen, maxSearchArea, grid, edgeSkipList) {\n    let midPointInserted = false;\n\n    for (let i = 0; i < convex.length - 1; i++) {\n        const edge = [convex[i], convex[i + 1]];\n        // generate a key in the format X0,Y0,X1,Y1\n        const keyInSkipList = edge[0][0] + ',' + edge[0][1] + ',' + edge[1][0] + ',' + edge[1][1];\n\n        if (_sqLength(edge[0], edge[1]) < maxSqEdgeLen ||\n            edgeSkipList.has(keyInSkipList)) { continue; }\n\n        let scaleFactor = 0;\n        let bBoxAround = _bBoxAround(edge);\n        let bBoxWidth;\n        let bBoxHeight;\n        let midPoint;\n        do {\n            bBoxAround = grid.extendBbox(bBoxAround, scaleFactor);\n            bBoxWidth = bBoxAround[2] - bBoxAround[0];\n            bBoxHeight = bBoxAround[3] - bBoxAround[1];\n\n            midPoint = _midPoint(edge, grid.rangePoints(bBoxAround), convex);\n            scaleFactor++;\n        }  while (midPoint === null && (maxSearchArea[0] > bBoxWidth || maxSearchArea[1] > bBoxHeight));\n\n        if (bBoxWidth >= maxSearchArea[0] && bBoxHeight >= maxSearchArea[1]) {\n            edgeSkipList.add(keyInSkipList);\n        }\n\n        if (midPoint !== null) {\n            convex.splice(i + 1, 0, midPoint);\n            grid.removePoint(midPoint);\n            midPointInserted = true;\n        }\n    }\n\n    if (midPointInserted) {\n        return _concave(convex, maxSqEdgeLen, maxSearchArea, grid, edgeSkipList);\n    }\n\n    return convex;\n}\n\nfunction hull(pointset, concavity, format) {\n    let maxEdgeLen = concavity || 20;\n\n    const points = _filterDuplicates(_sortByX(formatUtil.toXy(pointset, format)));\n\n    if (points.length < 4) {\n        const concave = points.concat([points[0]]);\n        return format ? formatUtil.fromXy(concave, format) : concave;\n    }\n\n    const occupiedArea = _occupiedArea(points);\n    const maxSearchArea = [\n        occupiedArea[0] * MAX_SEARCH_BBOX_SIZE_PERCENT,\n        occupiedArea[1] * MAX_SEARCH_BBOX_SIZE_PERCENT\n    ];\n\n    const convex = convexHull(points);\n    const innerPoints = points.filter(function(pt) {\n        return convex.indexOf(pt) < 0;\n    });\n\n    const cellSize = Math.ceil(1 / (points.length / (occupiedArea[0] * occupiedArea[1])));\n\n    const concave = _concave(\n        convex, Math.pow(maxEdgeLen, 2),\n        maxSearchArea, grid(innerPoints, cellSize), new Set());\n\n    return format ? formatUtil.fromXy(concave, format) : concave;\n}\n\nconst MAX_CONCAVE_ANGLE_COS = Math.cos(90 / (180 / Math.PI)); // angle = 90 deg\nconst MAX_SEARCH_BBOX_SIZE_PERCENT = 0.6;\n\nmodule.exports = hull;\n","function ccw(x1, y1, x2, y2, x3, y3) {           \n    const cw = ((y3 - y1) * (x2 - x1)) - ((y2 - y1) * (x3 - x1));\n    return cw > 0 ? true : cw < 0 ? false : true; // colinear\n}\n\nfunction intersect(seg1, seg2) {\n  const x1 = seg1[0][0], y1 = seg1[0][1],\n      x2 = seg1[1][0], y2 = seg1[1][1],\n      x3 = seg2[0][0], y3 = seg2[0][1],\n      x4 = seg2[1][0], y4 = seg2[1][1];\n\n    return ccw(x1, y1, x3, y3, x4, y4) !== ccw(x2, y2, x3, y3, x4, y4) && ccw(x1, y1, x2, y2, x3, y3) !== ccw(x1, y1, x2, y2, x4, y4);\n}\n\nmodule.exports = intersect;","var baseGet = require('./_baseGet');\n\n/**\n * Gets the value at `path` of `object`. If the resolved value is\n * `undefined`, the `defaultValue` is returned in its place.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.get(object, 'a[0].b.c');\n * // => 3\n *\n * _.get(object, ['a', '0', 'b', 'c']);\n * // => 3\n *\n * _.get(object, 'a.b.c', 'default');\n * // => 'default'\n */\nfunction get(object, path, defaultValue) {\n  var result = object == null ? undefined : baseGet(object, path);\n  return result === undefined ? defaultValue : result;\n}\n\nmodule.exports = get;\n","var baseGetTag = require('./_baseGetTag'),\n    isArray = require('./isArray'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar stringTag = '[object String]';\n\n/**\n * Checks if `value` is classified as a `String` primitive or object.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a string, else `false`.\n * @example\n *\n * _.isString('abc');\n * // => true\n *\n * _.isString(1);\n * // => false\n */\nfunction isString(value) {\n  return typeof value == 'string' ||\n    (!isArray(value) && isObjectLike(value) && baseGetTag(value) == stringTag);\n}\n\nmodule.exports = isString;\n","var baseAssignValue = require('./_baseAssignValue'),\n    baseForOwn = require('./_baseForOwn'),\n    baseIteratee = require('./_baseIteratee');\n\n/**\n * Creates an object with the same keys as `object` and values generated\n * by running each own enumerable string keyed property of `object` thru\n * `iteratee`. The iteratee is invoked with three arguments:\n * (value, key, object).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Object\n * @param {Object} object The object to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Object} Returns the new mapped object.\n * @see _.mapKeys\n * @example\n *\n * var users = {\n *   'fred':    { 'user': 'fred',    'age': 40 },\n *   'pebbles': { 'user': 'pebbles', 'age': 1 }\n * };\n *\n * _.mapValues(users, function(o) { return o.age; });\n * // => { 'fred': 40, 'pebbles': 1 } (iteration order is not guaranteed)\n *\n * // The `_.property` iteratee shorthand.\n * _.mapValues(users, 'age');\n * // => { 'fred': 40, 'pebbles': 1 } (iteration order is not guaranteed)\n */\nfunction mapValues(object, iteratee) {\n  var result = {};\n  iteratee = baseIteratee(iteratee, 3);\n\n  baseForOwn(object, function(value, key, object) {\n    baseAssignValue(result, key, iteratee(value, key, object));\n  });\n  return result;\n}\n\nmodule.exports = mapValues;\n","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nmodule.exports = _classCallCheck, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","var toPropertyKey = require(\"./toPropertyKey.js\");\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, toPropertyKey(descriptor.key), descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\nmodule.exports = _createClass, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;"],"names":["format","message","print","mute","debug","console","info","warn","error","value","toString","str","charAt","toUpperCase","substring","isEqual","other","length","rst","i","valueKeys","Object","keys","otherKeys","DEFAULT_ANIMATION_OPTIONS","duration","DEFAULT_ELEMENTS_ANIMATION_OPTIONS","easing","iterations","fill","ChangeType","AnimationType","CanvasEvent","ComboEvent","CommonEvent","ContainerEvent","EdgeEvent","HistoryEvent","NodeEvent","GraphEvent","COMBO_KEY","TREE_KEY","ExtensionCategory","themeOf","options","theme","themeOptions","getExtension","THEME","createAnimationsProxy","args1","args2","Array","isArray","sourceAnimation","targetAnimations","slice","Proxy","get","target","propKey","includes","Promise","all","finished","map","animation","Reflect","args","forEach","set","preprocessKeyframes","keyframes","propertyIndexedKeyframes","reduce","acc","kf","entries","key","undefined","push","values","some","every","output","index","_","inferDefaultValue","name","getAnimationOptions","localAnimation","effectTiming","assign","getElementAnimationOptions","elementType","stage","globalAnimation","userElementAnimation","useElementStageAnimation","themeElementAnimation","combine","ANIMATION","animationOf","themeElementStageAnimation","idOf","data","id","source","Error","parentIdOf","combo","idsOf","flat","ids","nodes","edges","combos","replaceTranslateInTransform","x","y","z","transform","removedTranslate","replace","reassignTo","input","type","datum","merge","typeName","exitsDatum","add","update","remove","_type","delete","executor","element","originalStyle","modifiedStyle","mainResult","subResults","fields","shape","shapeID","states","enabledStates","keyframeStyle","getShape","styler","bind","attrs","fromStyle","toStyle","getKeyframeStyle","attr","keyframe","attributes","result","animate","filter","Boolean","NodeCollapse","NodeExpand","PathIn","PathOut","ComboCollapse","ComboExpand","arrayDiff","original","modified","originalMap","Map","d","modifiedMap","originalSet","Set","modifiedSet","enter","exit","keep","has","ExtensionController","context","extensions","extensionMap","constructor","this","setExtensions","stdExtensions","graph","category","counter","getKey","extension","call","parseExtensions","createExtensions","updateExtensions","destroyExtensions","createExtension","Ctor","instance","updateExtension","destroyExtension","destroy","BaseExtension","events","destroyed","BaseBehavior","isPoint","p","Float32Array","elem","isBetween","min","max","parsePadding","padding","top","right","bottom","left","getBBoxWidth","bbox","getBBoxHeight","getBBoxSize","getNodeBBox","node","point","setMinMax","getPointBBox","getBounds","getExpandedBBox","minX","minY","minZ","maxX","maxY","maxZ","eBbox","getCombinedBBox","bboxes","b2","Math","isPointInBBox","getNearestSideToPoint","getNearestPointToPoint","ref","clone","VECTOR_ZERO","a","b","v","subtract","multiply","divide","scale","s","distance","sqrt","sum","manhattanDistance","abs","normalize","angle","clockwise","determinant","acos","PI","perpendicular","toVector2","toVector3","isLinesParallel","l1","l2","p1","p2","p3","p4","a2","cross","getLinesIntersection","extended","t","u","positionOf","style","getXYByRelativePlacement","placement","getXYByPlacement","relativePlacement","direction","split","parsePlacement","parsePoint","toPointObject","round","digits","parseFloat","toFixed","moveTo","reverse","normalizedDirection","moveVector","isHorizontal","getPolygonIntersectPoint","center","points","isRelativePos","start","end","intersect","line","getEllipseIntersectPoint","vec","atan2","isNaN","rx","ry","cos","sin","getDistanceToLine","findNearestPointOnLine","x1","y1","x2","y2","x3","y3","px","py","sortByClockwise","centerOf","sort","angle1","angle2","getBoundingPoints","lowerCaseKeys","toLocaleLowerCase","Shortcut","emitter","recordKey","bindEvents","handler","unbind","h","k","unbindAll","clear","match","recordKeyList","from","keyList","on","KEY_DOWN","onKeyDown","KEY_UP","onKeyUp","WHEEL","onWheel","DRAG","onDrag","window","addEventListener","onFocus","event","trigger","triggerExtendKey","eventType","off","removeEventListener","BrushSelect","static","enable","enableElements","immediately","mode","state","width","height","lineWidth","stroke","fillOpacity","zIndex","pointerEvents","startPoint","endPoint","rectShape","shortcut","super","defaultOptions","onPointerDown","onPointerMove","onPointerUp","clearStates","validate","isKeydown","canvas","appendChild","getCursorPoint","updateElementsStates","clearBrush","clearElementsStates","getData","setElementState","onSelect","selectedIds","selector","getElementState","prevStates","itemTypes","elements","graphData","itemType","getElementVisibility","inside","len","j","xi","yi","xj","yj","isPointInPolygon","getElementPosition","edge","unbindEvents","POINTER_DOWN","POINTER_MOVE","POINTER_UP","CLICK","ICON_SIZE_RATIO","ELEMENT_TYPES","dfs","visitor","navigator","depth","children","child","getElementNthDegreeIds","elementId","degree","getNodeNthDegreeIds","edgeData","getEdgeData","sourceRelations","targetRelations","startNodeId","visitedNodes","visitedEdges","relations","queue","current","shift","bfs","nodeId","getRelatedEdgesData","edgeId","neighborNodeId","statesOf","ClickSelect","multiple","neighborState","unselectedState","onClickSelect","onClickCanvas","async","updateState","onClick","clearState","isMultipleSelect","getNeighborIds","targetType","selectState","getElementData","click","neighbor","getDataStates","addState","list","dataStatesSet","_states","targetState","getClearStates","complete","statesToClear","datumStates","newStates","isCollapsed","nodeLike","collapsed","obj","defaultValue","keyArr","path","o","idx","toLowerCase","startsWith","prefix","nextChart","addPrefix","removePrefix","string","lowercaseFirstLetter","subStyleProps","subStyle","subOpacityKey","opacity","subOpacity","subObject","prefixLength","omitStyleProps","prefixArray","omitStyle","find","parseSize","size","computeElementCallbackStyle","callableStyle","fromEntries","mergeOptions","opt1","opt2","s1","s2","CacheTargetKey","getStyleCacheKey","cacheStyle","names","n","getCachedStyle","hasCachedStyle","setCacheStyle","effect","propertyKey","descriptor","fn","rest","initKey","styleKey","isStyleEqual","keys1","keys2","val1","val2","prototype","hasOwnProperty","condition","predicate","item","parsePalette","palette","field","color","invert","getPaletteColors","colorPalette","getWordWrapWidthWithBase","maxWidth","wordWrapWidth","Number","getWordWrapWidthByBox","keyShapeBox","zoom","enableBalanceShape","balanceZoom","objectProto","getDescendantShapes","succeeds","traverse","PropertyKey","setVisibility","visibility","shapes","sp","cachedVisibility","BaseShape","transformPosition","render","parsedAttributes","shapeMap","animateMap","upsert","className","container","updateStyle","removeChild","getGraphicStyle","class","cls","transformOrigin","getSubShapeStyle","compositeShapes","animationMap","_x","_y","_z","releaseAnimation","skippedAttrs","method","subKeyframes","handleCompositeShapeAnimation","shapeSet","itemsKeyframes","styles","oncancel","log","then","activeAnimations","findIndex","splice","Label","fontSize","fontFamily","wordWrap","maxLines","textOverflow","textBaseline","backgroundOpacity","backgroundZIndex","backgroundLineWidth","defaultStyleProps","isTextStyle","isBackgroundStyle","getTextStyle","getBackgroundStyle","background","backgroundStyle","centerX","centerY","halfExtents","halfWidth","halfHeight","text","getGeometryBounds","totalWidth","radius","endsWith","percentage","Badge","backgroundRadius","getBadgeStyle","labelShape","PATH_COMMANDS","M","m","H","V","L","l","Z","C","c","S","Q","q","T","A","pathToPoints","segments","items","trim","currentCommand","currentElement","it","unshift","prop","parsePath","seg","command","getClosedSpline","first","second","last","lastSecond","closedPath","x0","y0","cp1x","cp1y","cp2x","cp2y","getPolygonTextStyleByPlacement","bounds","offsetX","offsetY","closeToContour","autoRotate","textAlign","lines","minDistance","Infinity","nearestLine","findNearestLine","intersection","atan","Contour","label","labelPlacement","labelCloseToPath","labelAutoRotate","labelOffsetX","labelOffsetY","getLabelStyle","closeToPath","labelStyle","keyBounds","getRenderBounds","getKeyStyle","Icon","isGImage","getAttribute","getIconStyle","BaseElement","onframe","__decorate","decorators","desc","arguments","r","getOwnPropertyDescriptor","decorate","defineProperty","BaseNode","droppable","draggable","port","ports","portZIndex","portLinkToCenter","badge","badges","badgeZIndex","halo","haloDroppable","haloLineDash","haloLineWidth","haloStrokeOpacity","haloPointerEvents","haloZIndex","icon","iconZIndex","labelIsBillboard","labelMaxWidth","labelWordWrap","labelZIndex","getSize","labelText","getLocalBounds","getTextStyleByPlacement","getHaloStyle","keyStyle","iconText","iconSrc","iconStyle","stdSize","src","inferIconStyle","getBadgesStyle","badgesShapeStyle","badgeOptions","badgePalette","restAttributes","colors","badgeStyle","option","backgroundFill","keyShape","restStyle","getPortsStyle","getPorts","portsShapeStyle","portStyle","portOptions","mergedStyle","isSimplePort","getPortXY","getPortXYByPlacement","getCenter","getIntersectPoint","getRectIntersectPoint","drawHaloShape","drawIconShape","drawBadgeShapes","badgesStyle","drawPortShapes","portsStyle","drawLabelShape","_drawKeyShape","drawKeyShape","self","Circle","Polygon","getPoints","Donut","innerR","donuts","donutPalette","parseOuterR","parseInnerR","parseInt","drawDonutShape","parsedDonuts","cur","outerR","roundStyle","arc","angel","R","full","e","P","flag","part","Ellipse","majorAxis","minorAxis","HTML","rootPointerEvent","eventService","POINTER_OVER","POINTER_LEAVE","getDomElement","pick","connectedCallback","eventName","forwardEvents","attributeChangedCallback","oldValue","newValue","nativeEvent","iCanvas","renderingContext","root","ownerDocument","defaultView","normalizeToPointerEvent","normalizedEvent","bootstrapEvent","mapEvent","normalizedEvents","isTouchEvent","changedTouches","touch","button","buttons","isPrimary","touches","radiusX","radiusY","tiltX","tiltY","pointerType","pointerId","identifier","pressure","force","twist","tangentialPressure","isNormalized","isMouseEvent","tempEvent","transferMouseData","isTrusted","srcElement","timeStamp","performance","now","altKey","metaKey","shiftKey","ctrlKey","client","clientX","clientY","movement","movementX","movementY","page","pageX","pageY","screen","screenX","screenY","relatedTarget","view","originalEvent","getViewportXY","viewport","canvasX","canvasY","getCanvasByViewport","global","copyFrom","offset","config","supportsCSSTransform","client2Viewport","keyStyleFill","keyStyleStroke","haloStyle","Triangle","MAP","up","down","getTrianglePoints","getTrianglePorts","getTriangleCenter","w","getIncircleRadius","BaseCombo","childrenNode","collapsedSize","collapsedMarker","collapsedMarkerZIndex","collapsedMarkerFontSize","collapsedMarkerTextAlign","collapsedMarkerTextBaseline","collapsedMarkerType","updateComboPosition","getKeySize","getEmptyKeySize","getCollapsedKeySize","getExpandedKeySize","contentBBox","getContentBBox","getElement","childrenBBox","drawCollapsedMarkerShape","getCollapsedMarkerStyle","collapsedMarkerStyle","getCollapsedMarkerText","childrenData","model","getDescendantsData","getElementType","getComboZIndex","getAncestorsData","getComboPosition","descendants","isCombo","getComboStyle","comboStyle","syncComboDatum","resolve","arr","func","indexOf","opposites","N","W","E","radians","getDirection","to","fx","fy","tx","ty","pointToPoint","d1","d2","opposite","nodeToPoint","fromBBox","freeJoin","pointToNode","toBBox","freePoints","isPointOutsideBBox","onTopOrBottomLine","onLeftOrRightLine","isPointOnBBoxBoundary","freeDirectionPoints","nodeToNode","route","fromBorder","toBorder","midPoint","startRoute","endRoute","insideNode","DEFAULT_OFFSET","boundary","reversed","halfPerimeter","rad","getLabelPositionStyle","ratio","getPoint","pointOffset","pointX","pointY","actualOffsetX","actualOffsetY","getCurveControlPoint","sourcePoint","targetPoint","curvePosition","curveOffset","lineVector","controlPoint","perpVector","getCubicPath","controlPoints","getPolylinePath","pathArray","prevPoint","nextPoint","ps","pt","d0","getBorderRadiusPoints","getLoopEndpoints","sourcePort","targetPort","getPortPosition","halfPI","angleWithX","angleWithY","getRadians","point1","point2","getNodeConnectionPoint","getCubicLoopPath","dist","sourcePortKey","targetPortKey","adjustment","sign","getCubicLoopControlPoints","getPortConnectionPoint","getPolylineLoopPath","allPortsMap","getAllPorts","sourceSide","targetSide","getPointOffSide","side","getPolylineLoopControlPoints","getSubgraphRelatedEdges","getRelatedEdges","internal","external","findActualConnectNodeData","getParentData","parent","at","circle","triangle","diamond","vee","rect","triangleRect","tWidth","rWidth","rBeginX","simple","BaseEdge","badgeOffsetX","badgeOffsetY","badgePlacement","isBillboard","labelTextBaseline","loop","startArrow","startArrowLineDash","startArrowLineJoin","startArrowLineWidth","startArrowTransformOrigin","startArrowType","endArrow","endArrowLineDash","endArrowLineJoin","endArrowLineWidth","endArrowTransformOrigin","endArrowType","loopPlacement","loopClockwise","sourceNode","targetNode","node1","node2","getLoopPath","getKeyPath","defaultDist","getEndpoints","findPorts","getConnectionPoint","labelPositionStyle","getWordWrapWidthByEnds","badgeText","badgeWidth","labelWidth","getBadgePositionStyle","drawArrow","isStart","arrowStyle","getArrowStyle","marker","markerOffset","arrowOffset","arrow","parsedStyle","arrowShape","arrowType","getArrowSize","drawBadgeShape","drawSourceArrow","drawTargetArrow","Cubic","actualControlPoints","getControlPoints","parseCurvePosition","parseCurveOffset","CubicHorizontal","xDist","CubicVertical","yDist","Line","Polyline","router","routerName","routerPadding","getEndpointsAndPorts","newSourcePoint","newTargetPoint","sourceBBox","targetBBox","fromIdx","toIdx","isOrth","isVertical","intersects","orth","Quadratic","getQuadraticPath","isNode","isEdge","PORT_MAP","default","isRelative","DEFAULT","getPosition","findPort","oppositeNode","portKey","oppositePortKey","portsMap","positions","oppositePositions","oppositePorts","findConnectionPoints","nearestPosition","group1","group2","nearestPoints","findNearestPoints","linkToCenter","oppositePosition","isReverseBaseline","isToBeDestroyed","CollapseExpand","DBLCLICK","onCollapseExpand","getElementDataById","onCollapse","onExpand","expandElement","collapseElement","ASSIST_NODE_ID","CreateEdge","onCreate","onFinish","handleCreateEdge","cancelEdge","DRAG_START","drop","updateAssistEdge","batch","createEdge","startBatch","setCursor","getSelectedNodeIDs","addNodeData","addEdgeData","draw","translateNodeTo","silence","targetId","removeNodeData","endBatch","currTarget","getElementDataByState","concat","wait","immediate","timeout","callNow","clearTimeout","setTimeout","apply","DragCanvas","sensitivity","defaultCursor","getConfig","cursor","onTranslate","onDragStart","DRAG_END","onDragEnd","isDragging","translate","invokeOnFinish","delta","translateBy","DragElement","dropEffect","hideEdge","shadow","shadowZIndex","shadowFill","shadowFillOpacity","shadowStroke","shadowStrokeOpacity","shadowLineDash","grab","grabbing","shadowOrigin","hiddenEdges","onDrop","POINTER_ENTER","DROP","getDelta","getZoom","dx","dy","frontElement","createShadow","moveShadow","moveElement","showEdges","modifiedParentId","originalParent","refreshComboData","setParent","translateElementBy","shadowStyle","positionStyle","$layer","showElement","hideElement","BaseLayout","stop","tick","layoutMapping2GraphData","layoutMapping","_isCombo","invokeLayoutMethod","layout","getLayoutProperty","FixElementSize","parentElement","elementCache","isZoomEvent","fixElementSize","elementData","currentScale","el","setLocalScale","descendantShapes","shapeFilter","oriFieldValue","resetTransform","AFTER_TRANSFORM","BEFORE_DRAW","FocusElement","focus","focusElement","HoverActivate","inactiveState","isFrozen","toggleFrozen","hoverElement","POINTER_OUT","document","isOver","updateElementsState","onHover","onHoverEnd","activeIds","getElementsState","inactiveIds","currentState","updatedState","OptimizeViewportTransform","debounce","isVisible","filterShapes","classnames","setElementsVisibility","excludedClassnames","hideShapes","getNodes","getEdges","getCombos","showShapes","BEFORE_TRANSFORM","ScrollCanvas","graphDom","scroll","passive","getCanvas","getContextService","preventDefault","diffX","deltaX","diffY","deltaY","formatDisplacement","formattedValue","ZoomCanvas","zoomIn","zoomOut","reset","onReset","origin","clamp","zoomTo","getContainer","init","each","curr","parseInt10","sizeOf","effectiveWidth","effectiveHeight","containerWidth","containerHeight","getComputedStyle","wrapperWidth","clientWidth","wrapperHeight","clientHeight","paddingLeft","paddingRight","paddingTop","paddingBottom","getContainerSize","createPluginContainer","cover","createElement","setAttribute","position","display","inset","overflow","insertDOM","tag","innerHTML","body","dom","getElementById","div","Background","transition","backgroundSize","$element","prepend","omit","linePtSegDistSq","lx1","ly1","lx2","ly2","dotprod","projlenSq","lenSq","ptsDistanceSq","doublePointsEqual","lineBoundingBox","equals","that","ctx","lineTo","cuts","distSquare","ptClose","EState","OutCode","Intersection","intersectLineLine","la","lb","uaT","ubT","uB","ua","ub","POINT","NONE","COINCIDENT","PARALLEL","fractionAlongLineA","POSITIVE_INFINITY","outcode","out","LEFT","RIGHT","TOP","BOTTOM","intersectsLine","out2","out1","fractionToLineCenter","countIntersections","testLine","xa","ya","xb","yb","testDistance","testIntersection","count","Rectangle","cx","cy","addPoint","containsPt","area","tempX","tempY","code","ellipse","Area","pixelGroup","pixelX","pixelY","pixels","createSub","pixelPos","fromPixelRegion","pixelRect","ceil","copy","sub","pixelPoint","scaleX","scaleY","boundX","pos","boundY","pixel","floor","invertScaleX","invertScaleY","addPadding","pixelPadding","NaN","inc","incArea","factor","aw","i1","j1","i2","j2","subRow","row","fillArea","fillHorizontalLine","fillVerticalLine","padStart","save","NEGATIVE_INFINITY","fillStyle","fillRect","restore","drawThreshold","threshold","createLineInfluenceArea","potentialArea","createGenericInfluenceArea","lr","scaled","distanceFunction","padding2","distanceSq","dr","sample","calculateVirtualEdges","nonMembers","maxRoutingIterations","morphBuffer","sorted","totalX","totalY","sortByDistanceToCentroid","visited","itemCenter","closestNeighbor","minLengthSq","neighborItem","directLine","numberInterferenceItems","hasFractionToLineCenter","itemsCuttingLine","calculateClosestNeighbor","scannedLines","linesToCheck","hasIntersection","pop","closestItem","getCenterItem","intersections","tempMorphBuffer","movePoint","rerouteLine","foundFirst","pointExists","pointInside","isPointInRectangles","foundSecond","computeRoute","finalRoute","line1","line2","mergeLine","mergeLines","connectItem","rects","pointToCheck","checkEndPointsLine","rerouteBuffer","wrapNormal","topIntersect","leftIntersect","bottomIntersect","rightIntersect","totalArea","canTakeNext","toleranceSquared","closed","basicFunction","PointPath","roundToDigits","rounder","isFinite","pow","beginPath","closePath","skip","actSkip","finalHull","samplePath","simplify","tolerance","shapeSimplifier","bSplines","granularity","calcPoint","REL_END","bf","res","ORDER","ix","bSplineShapeGenerator","transformer","containsElements","members","bb","boundingBox","member","withinArea","crossings","PointList","contains","isFirst","marchingSquares","estLength","contour","updateDir","dir","getState","doMarch","xPos","yPos","xPixel","yPixel","maxMarchingIterations","edgeR0","edgeR1","nodeR0","nodeR1","memberInfluenceFactor","edgeInfluenceFactor","nonMemberInfluenceFactor","virtualEdges","isCircle","bc","br","EDirty","dirty","activeRegion","pushMember","MEMBERS","raw","removeMember","removeNonMember","nonMember","NON_MEMBERS","removeEdge","pushNonMember","pushEdge","EDGES","dirtyMembers","dirtyNonMembers","dirtyEdges","memberObjs","old","_a","activeRegionDirty","memberItems","edgeItems","unionBoundingBox","potentialWidth","potentialHeight","existing","addCache","createOrAddCache","padded","innerWidth","innerHeight","straightDistances","maxPadding","cornerDistances","maxHorizontalPadding","maxVerticalPadding","ii","createRectangleInfluenceArea","drawMembers","drawNonMembers","drawEdges","drawPotentialArea","compute","validPath","nodeInfA","edgeInfA","f","calculatePotentialOutline","BubbleSets","bubbleSets","avoidMembers","bubbleSetOptions","strokeOpacity","AFTER_RENDER","drawBubbleSets","AFTER_ELEMENT_UPDATE","updateBubbleSetsPath","parseOptions","finalStyle","getPath","forceUpdateId","currMembers","prevMembers","currAvoidMembers","prevAvoidMembers","membersToEnter","membersToExit","avoidMembersToEnter","avoidMembersToExit","updateBubbleSets","isEntering","isMember","convertToLine","convertToRectangle","cleanPath","addMember","membersToAdd","membersToRemove","updateMember","getMember","addAvoidMember","avoidMembersToAdd","AvoidMember","removeAvoidMember","avoidMembersToRemove","updateAvoidMember","getAvoidMember","getElementRenderBounds","Contextmenu","loadingContent","getContent","initElement","classList","head","show","hide","content","getDOMContent","HTMLElement","clientRect","getBoundingClientRect","getItems","join","onTriggerEvent","onMenuItemClick","Fullscreen","autoFit","$el","graphSize","request","onFullscreenChange","setGraphSize","fullScreen","setSize","isFull","fullscreenElement","onEnter","onExit","fullscreenEnabled","requestFullscreen","catch","err","exitFullscreen","GridLine","border","borderLineWidth","borderStroke","borderStyle","firstChild","insertBefore","onTransform","backgroundImage","updateOffset","backgroundPosition","follow","reduceDataChanges","changes","results","Added","Updated","Removed","change","groupByChangeType","NodeAdded","NodeUpdated","NodeRemoved","EdgeAdded","EdgeUpdated","EdgeRemoved","ComboAdded","ComboUpdated","ComboRemoved","alignFields","refObject","targetObject","parseCommand","cmd","newOriginal","colorKey","getElementComputedStyle","History","stackSize","batchChanges","batchAnimation","undoStack","redoStack","freezed","AFTER_DRAW","addCommand","BATCH_START","initBatchCommand","BATCH_END","canUndo","canRedo","undo","executeCommand","before","beforeAddCommand","afterAddCommand","notify","UNDO","redo","undoStackPush","REDO","undoAndCancel","CANCEL","revert","addData","updateData","removeData","dataChanges","isBatching","ADD","initiate","CLEAR","emit","CHANGE","genSinglePointHullPath","corner","arcData","genTwoPointsHullPath","offsetVector","invOffsetVector","prev","genMultiPointsRoundedHull","prev2Index","prevIndex","nextIndex","prev2","next","v0","v1","v2","isConcave","concavePrev","concaveNext","concave","startIndex","segment","sortedSegments","concavePoints","flatMap","pathFragment","lastSegment","genMultiPointsSmoothHull","hullPoints","hp","priorIndex","prevV","extensionVec","genMultiPointsSharpHull","Hull","hullMemberIds","optionsCache","concavity","labelOpacity","drawHull","updateHullPath","getHullStyle","forceUpdate","getHullPath","getNodeData","vertices","computeHullPath","getPadding","Legend","orientation","itemSpacing","rowPadding","colPadding","itemMarkerSize","itemLabelFontSize","typePrefix","fieldMap","selectedItems","changeState","composeId","mouseleave","mouseenter","updateElement","getChildByIndex","itemMarkerOpacity","itemLabelOpacity","setFieldMap","getEvents","getMarkerData","getField","defaultType","markerMapping","image","star","cubic","polyline","quadratic","getElementModel","getElementStyle","flexDirection","alignItems","justifyContent","canvasWidth","canvasHeight","nodeField","edgeField","comboField","nodeItems","comboItems","layoutWrapper","categoryStyle","itemMarkerLineWidth","itemMarker","itemMarkerStroke","itemMarkerFill","gridCol","formatTime","date","mask","timeMap","YYYY","getFullYear","MM","getMonth","DD","getDate","HH","getHours","mm","getMinutes","ss","getSeconds","strftime","val","Option","_super","_this","hoverColor","selectedColor","enumerable","configurable","renderLabel","maybeAppend","renderBackground","labelBBox","getBBox","labelHeight","backgroundWidth","backgroundHeight","_b","_c","styleWidth","_d","styleHeight","selected","Select","currentValue","isPointerInSelect","select","dropdown","setValue","getValue","dropdownPadding","renderSelect","bordered","showDropdownIcon","selectStyle","placeholderStyle","strokeWidth","currentOption","finalPlaceholderStyle","selectAll","append","finalValueStyle","renderDropdown","open","dropdownStyle","optionStyle","dispatchEvent","detail","accHeight","parentNode","getElementsByClassName","spacing","stopPropagation","selectRadius","selectStroke","placeholderText","placeholderFontSize","placeholderTextBaseline","placeholderFill","dropdownFill","dropdownStroke","dropdownRadius","dropdownShadowBlur","dropdownShadowColor","dropdownSpacing","optionPadding","optionFontSize","optionTextBaseline","optionBackgroundFill","optionBackgroundRadius","optionLabelFontSize","optionLabelTextBaseline","IconBase","backgroundOpacities","showBackground","log10","halfSize","showIndicator","indicator","hideIndicator","disconnectedCallback","renderIcon","resetBackground_1","hover","active","Reset","arcPath","getPosByAngle","iconSize","arrowSize","markerStart","Backward","Forward","Play","Pause","Range","gap","markerEnd","Value","getCoordinatePoints","LineChart","ox","oy","BarChart","Split","SpeedSelect","speed","inheritStyle","ToggleIcon","currentType","getType","restStyles","onChange","toggles","nextType","PlayPause","SelectionType","ChartType","componentsMap","backward","playPause","forward","selectionType","chartType","Controller","functions","renderFunctions","iconSpacing","align","components","componentsWidth","xOffset","speedSelect","removeChildren","handleFunctionChange","backgroundStroke","TimeModeHandle","ChartModeHandle","renderBorder","xx","backgroundFillOpacity","iconStroke","iconLineWidth","labelFormatter","time","interval","parseBySeries","Date","parseByTime","hours","String","minutes","seconds","Timebar","axis","startPos","endPos","showArrow","timeline","handleSliderChange","controller","prevValues","setBySliderValues","dispatchOnChange","playMode","setByTimebarValues","axisBBox","controllerHeight","availableTimelineHeight","controllerBBox","axisHeight","timelineHeight","timelineBBox","startRatio","endRatio","startDatum","endDatum","setByIndex","_e","endIndex","startDatumIndex","isValue","endDatumIndex","getEndValue","getDatumByRatio","space","getChartStyle","userDefinedLabelFormatter","userDefinedChartStyle","isRange","handleIconShape","selectionFill","selectionFillOpacity","showLabelOnInteraction","handleLabelDy","autoFitLabel","handleSpacing","trackFill","trackLength","trackOpacity","trackRadius","trackSize","sliderValues","formatter","handleIconOffset","sparklineData","chartHandleIconShape","sparklineSpacing","sparklineColumnLineWidth","sparklineColor","sparklineAreaOpacity","sparklineAreaLineWidth","sparklineType","sparklineScale","renderChart","updateSelection","setValues","getAxisStyle","userDefinedAxisStyle","axisData","labelFilter","_datum","renderAxis","renderController","userDefinedControllerStyle","internalReset","handleSpeedChange","internalBackward","internalPlay","internalPause","internalForward","handleSelectionTypeChange","handleChartTypeChange","endTime","preventEvent","moveSelection","startTime","currentIndexes","diff","normalizedIndexes","indexes","clampIndex","normalizeIndexes","onBackward","playInterval","setInterval","onPlay","play","clearInterval","onPause","pause","onForward","onSpeedChange","onSelectionTypeChange","onChartTypeChange","axisLabelFill","axisLabelTextAlign","axisLabelTextBaseline","axisLabelTransform","axisLineLineWidth","axisLineStroke","axisTickLength","axisTickLineWidth","axisTickStroke","chartShowLabel","controllerAlign","prospectiveTimeKeys","timebarType","elementTypes","getTime","inferTime","timebar","wrapper","originalData","backup","upsertTimebar","upsertWrapper","shallowCopy","restOptions","canvasSize","upsertCanvas","ready","range","filterElements","hiddenElements","renderer","supportsMutipleCanvasesInOneContainer","newData","nodeLikeIds","setData","hideElementId","showElementId","elementDatum","optionsKeys","Toolbar","$container","onToolbarItemClick","parsePositionToStyle","Element","Tooltip","enterable","currentTarget","tooltipElement","onPointerLeave","contextmenu","drag","onPointerEnter","onCanvasMove","HTMLTooltipElement","initTooltip","isEnable","showById","getComboData","title","tooltipContent","getElementRenderStyle","bounding","createCanvas","getContext","clearRect","Watermark","rotate","textFill","textFontSize","backgroundRepeat","imageURL","base64","globalAlpha","img","Image","crossOrigin","onload","sepX","sepY","drawImage","toDataURL","getImageWatermark","textFontFamily","textFontVariant","textFontWeight","font","fillText","getTextWatermark","BADGE_PALETTE","NODE_PALETTE_OPTIONS","EDGE_PALETTE_OPTIONS","create","tokens","bgColor","textColor","nodeColor","nodeColorDisabled","nodeStroke","nodeHaloStrokeOpacityActive","nodeHaloStrokeOpacitySelected","nodeOpacityDisabled","nodeIconOpacityInactive","nodeOpacityInactive","nodeBadgePalette","nodePaletteOptions","edgeColor","edgeColorDisabled","edgePaletteOptions","comboColor","comboColorDisabled","comboStroke","comboStrokeDisabled","edgeColorInactive","badgeFill","badgeFontSize","badgePadding","iconFill","iconOpacity","labelBackground","labelBackgroundFill","labelBackgroundLineWidth","labelBackgroundOpacity","labelFill","labelFillOpacity","labelLineHeight","labelPadding","labelFontSize","labelFontWeight","portFill","portLineWidth","portStroke","portStrokeOpacity","highlight","inactive","badgeBackgroundOpacity","donutOpacity","disabled","expand","collapse","badgeBackgroundFill","increasedLineWidthForHitTesting","labelBackgroundPadding","collapsedMarkerFill","collapsedMarkerFillOpacity","collapsedFillOpacity","haloStroke","lineDash","dark","light","BaseTransform","beforeDraw","overwrite","weakAssignTo","BaseEvent","GraphLifeCycleEvent","AnimateEvent","animationType","ElementLifeCycleEvent","ViewportEvent","Animation","tasks","animations","getTasks","callbacks","extendOptions","cb","inferStyle","beforeAnimate","afterAnimate","after","release","getCacheOpacity","cancel","animationsWithPromises","playState","BatchController","batchCount","BehaviorController","currentTargetType","setBehaviors","behaviors","forwardContainerEvents","CONTEXT_MENU","DRAG_ENTER","DRAG_OVER","DRAG_LEAVE","forwardCanvasEvents","originalTarget","eventTargetOf","targetElement","stdEvent","once","removeAllEventListeners","layersName","Canvas","extends","getLayer","layer","layers","getLayers","getRenderer","renderers","getCamera","getRoot","restConfig","createRenderers","configCanvasDom","resize","documentElement","childNodes","setRenderer","viewport2Canvas","getViewportByCanvas","canvas2Viewport","getViewportByClient","getClientByViewport","viewport2Client","getClientByCanvas","getCanvasByClient","main","viewportPoint","devicePixelRatio","startX","startY","createDOM","offscreenCanvas","cloneNode","originCanvasPosition","currentCanvasPosition","camera","offscreenCamera","setZoom","setPosition","setFocalPoint","getFocalPoint","fz","contextService","RERENDER","url","cancelLandmarkAnimation","registerPlugin","isDocumentDraggable","isDocumentDroppable","dragstartDistanceThreshold","dragstartTimeThreshold","unregisterPlugin","getPlugin","domElement","outline","tabIndex","mergeElementsData","originalAttrs","modifiedData","modifiedAttrs","cloneElementData","customData","restAttrs","clonedData","toGraphlibData","_data","isEdgeData","toG6Data","DataController","latestRemovedComboIds","comboIds","isTraceless","pushChange","getChanges","clearChanges","callback","getAllNodes","getEdgeDatum","getEdge","getAllEdges","hierarchyKey","hasNode","hasTreeStructure","getAncestors","getChildrenData","getParent","structureKey","getChildren","getElementsDataByType","getNodeLikeDatum","getNode","getNodeLikeData","hasEdge","hasCombo","getNeighborNodesData","getNeighbors","modifiedNodes","modifiedEdges","modifiedCombos","originalNodes","originalEdges","originalCombos","nodeDiff","edgeDiff","comboDiff","addComboData","addNodes","updateNodeLikeHierarchy","addEdges","attachTreeStructure","addChildrenData","parentId","parentData","childrenId","updateNodeData","childId","enableUpdateNodeLikeHierarchy","_children","preventUpdateNodeLikeHierarchy","updateComboData","updateEdgeData","modifiedNode","originalNode","mergeNodeData","refreshData","syncNodeDatum","modifiedEdge","originalEdge","updateEdgeSource","updateEdgeTarget","updatedData","mergeEdgeData","modifiedCombo","originalCombo","originalParentId","modifiedDatum","cache","uniq","pId","ancestors","translateNodeLikeBy","translateComboBy","translateNodeBy","translateNodeLikeTo","translateComboTo","dz","succeed","succeedID","tz","comboX","comboY","comboZ","succeedId","removeEdgeData","removeComboData","removeNodeLikeHierarchy","removeNodes","removeEdges","grandParent","childData","ElementController","elementMap","shapeTypeMap","forEachElementData","userDefinedType","getTheme","getThemeStyle","getThemeStateStyle","paletteStyle","computePaletteStyle","assignColor","parseField","groupData","assignResult","groupKey","assignColorByPalette","getPaletteStyle","defaultStyle","computeElementDefaultStyle","computeElementsDefaultStyle","getDefaultStyle","stateStyle","getElementStateStyle","computeElementStatesStyle","computeElementsStatesStyle","getStateStyle","computeStyle","getElementZIndex","themeStyle","dataStyle","themeStateStyle","computeChangesAndDrawData","drawData","markDestroyElement","destroyElements","createElements","updateElements","BEFORE_ANIMATE","DRAW","AFTER_ANIMATE","dataOf","transformData","transforms","getTransformInstance","BEFORE_ELEMENT_CREATE","AFTER_ELEMENT_CREATE","BEFORE_ELEMENT_UPDATE","exactStage","onUpdate","markToBeDestroyed","destroyElement","BEFORE_ELEMENT_DESTROY","clearElement","onDestroy","AFTER_ELEMENT_DESTROY","collapseNode","preprocess","simulate","COLLAPSE","expandNode","EXPAND","collapseCombo","expandCombo","getFrontZIndex","proxyMarker","Symbol","createEndpoint","releaseProxy","finalizer","throwMarker","isObject","transferHandlers","canHandle","serialize","port1","port2","MessageChannel","expose","deserialize","wrap","serialized","isError","stack","ep","globalThis","allowedOrigins","ev","allowedOrigin","RegExp","test","isAllowedOrigin","argumentList","fromWireValue","returnValue","rawValue","proxy","transfers","transferCache","transfer","wireValue","transferables","toWireValue","postMessage","closeEndPoint","TypeError","endpoint","isMessagePort","close","createProxy","throwIfProxyReleased","isReleased","releaseEndpoint","requestResponseMessage","proxyCounter","WeakMap","proxyFinalizers","FinalizationRegistry","newCount","isProxyReleased","_target","unregister","unregisterProxy","_thisArg","rawArgumentList","processArguments","construct","register","registerProxy","processed","serializedValue","msg","random","MAX_SAFE_INTEGER","Supervisor","spawnWorker","Worker","URL","running","execute","onTick","noFunctionOptions","payload","arraybufferWithNodesEdges","calculateLayout","stopLayout","kill","isRunning","LayoutController","supervisor","instances","animationResult","presetOptions","getLayoutInstance","pipeline","BEFORE_LAYOUT","getLayoutData","opts","BEFORE_STAGE_LAYOUT","stepLayout","AFTER_STAGE_LAYOUT","updateElementPosition","AFTER_LAYOUT","simulation","isTreeLayout","treeLayout","graphLayout","enableWorker","initGraphLayout","rawLayout","graphData2LayoutModel","tickData","layoutResult","createTreeStructure","getRoots","getSuccessors","finish","nodeFilter","nodesToLayout","nodesIdMap","getCanvasSize","nodeSize","nodeElement","STDCtor","getPrototypeOf","transformOptions","edgesToLayout","combosToLayout","layoutModel","layoutAdapter","PluginController","setPlugins","plugins","getPluginInstance","REQUIRED_TRANSFORMS","TransformController","setTransforms","getTransforms","ViewportController","paddingOffset","offsetZ","rotation","landmarkCounter","createLandmark","getAnimation","finalAnimation","getCanvasCenter","getViewportCenter","getGraphCenter","getRotation","getRoll","getTranslateOptions","currentZoom","focalPoint","getRotateOptions","roll","getZoomOptions","zoomRange","transformResolver","cancelAnimation","_animation","setZoomByViewportPoint","landmarkOptions","TRANSFORM","gotoLandmark","onfinish","fitView","when","canvasBounds","bboxInViewPort","getBBoxInViewport","contentWidth","contentHeight","fitCenter","focusElements","elementsBounds","bboxInViewport","landmarks","Graph","autoResize","setOptions","onResize","getOptions","BEFORE_RENDERER_CHANGE","AFTER_RENDERER_CHANGE","setCombo","setEdge","setLayout","setNode","setTheme","setZoomRange","getZoomRange","getLayout","getBehaviors","behavior","updateBehavior","_behavior","getPlugins","plugin","updatePlugin","_plugin","updateTransform","_transform","hierarchy","initCanvas","containerSize","BEFORE_CANVAS_INIT","AFTER_CANVAS_INIT","initRuntime","prepare","BEFORE_RENDER","BEFORE_DESTROY","AFTER_DESTROY","BEFORE_SIZE_CHANGE","AFTER_SIZE_CHANGE","zoomBy","rotateBy","rotateTo","translateTo","args3","translateElementTo","setElementVisibility","dataToUpdate","_id","setElementZIndex","ancestor","isCollapsingExpanding","setElementCollapsibility","treeToGraphData","treeData","getter","restDatum","getEdgeEndsContext","sourceNodeData","targetNodeData","actualSourceNode","actualTargetNode","ends","CUBIC_LOOP_PLACEMENTS","ProcessParallelEdges","cacheMergeStyle","getAffectedParallelEdges","applyBundlingStyle","applyMergingStyle","edgesToAdd","nodesToUpdate","edgesToUpdate","combosToUpdate","edgesToRemove","addRelatedEdges","pushParallelEdges","getParallelEdges","isParallelEdges","edgeIds","edgeMap","reverses","groupByEndpoints","arcEdges","edgeArr","mergedEdgeData","loopDist","resetEdgeStyle","newStyle","processedEdgesSet","sourceTarget","otherId","sedge","containsSelf","edge1","edge2","src1","tgt1","src2","tgt2","BUILT_IN_EXTENSIONS","fade","forceLayoutInstance","alphaTarget","restart","pathShape","isClose","pointsToPath","clearLasso","collapsedWidth","collapsedHeight","collapsedR","expandedR","compactBox","circular","concentric","dagre","dendrogram","fruchterman","grid","indented","mds","mindmap","radial","getDiamondPoints","hexagon","getOuterR","html","getInnerR","getStarPorts","donut","spectral","tableau","oranges","greens","blues","fullscreen","history","hull","legend","toolbar","tooltip","watermark","combosToAdd","arrangeCombo","order","zIndex1","zIndex2","descendantIds","descendant","descendantId","comboIndex","edgeElement","childrenIds","handleExpand","nodesToAdd","nodesToCollapse","nodesToExpand","isCurrentCollapsed","handledNodes","EXTENSION_REGISTRY","override","ext","enableCSSParsing","factory","modules","installedModules","moduleId","exports","module","__esModule","object","property","getHeight","preNode","heightField","Layout","rootNode","separateTree","VALID_DIRECTIONS","HORIZONTAL_DIRECTIONS","DEFAULT_DIRECTION","layoutAlgrithm","right2left","bottom2top","_separateTree","getBoundingBox","fixedRoot","hgap","vgap","util","DEFAULT_OPTIONS","getId","getPreH","preH","getPreV","preV","getHGap","getVGap","PEM","getWidth","Node","me","addGap","isRoot","isLeaf","eachNode","DFTraverse","BFTraverse","MAX_VALUE","isolated","treeSize","rightTreeSize","getSide","_setPrototypeOf","setPrototypeOf","__proto__","TreeLayout","nonLayeredTidyTree","doTreeLayout","CompactBoxTreeLayout","_TreeLayout","subClass","superClass","WrappedTree","cs","prelim","mod","tl","tr","er","msel","mser","moveRight","move","getMin","convertBack","converted","fromNode","setExtremes","separate","ih","sr","mssr","cl","mscl","low","nxt","moveSubtree","sy","nextRightContour","nextLeftContour","modsumcl","li","setLeftThread","modsumsr","ri","setRightThread","si","nr","distributeExtra","updateIYL","wt","firstWalk","positionRoot","secondWalk","modsum","modsumdelta","addChildSpacing","DendrogramLayout","leftChild","rightChild","nodeSep","rankSep","subTreeSep","prevLeaf","maxDepth","wrappedTreeFromNode","childrenCount","childWT","originNode","getDrawingDepth","drawingDepth","depths","minChildDepth","indentedTree","IndentedLayout","_options$indent","indent","_options$dropCap","dropCap","_options$direction","previousNode","displacementX","prevParent","preY","positionNode","MindmapLayout","totalHeight","_subTreeSep","getSubTreeSep","thirdWalk","childrenHeight","childrenTotalHeight","_cross","pointset","upper","lower","_upperTangent","convex","_lowerTangent","toXy","Function","_getXY","fromXy","_getObj","Grid","cellSize","_cells","_cellSize","_reverseCellSize","coordToCellNum","array","cellPoints","rangePoints","tlCellX","tlCellY","brCellX","brCellY","removePoint","cellX","cellY","cell","pointIdxInCell","trunc","extendBbox","scaleFactor","formatUtil","convexHull","_sqLength","_cos","aShifted","bShifted","sqALen","sqBLen","_intersect","_bBoxAround","_midPoint","innerPoints","a1Cos","a2Cos","angle1Cos","MAX_CONCAVE_ANGLE_COS","angle2Cos","_concave","maxSqEdgeLen","maxSearchArea","edgeSkipList","midPointInserted","keyInSkipList","bBoxWidth","bBoxHeight","bBoxAround","MAX_SEARCH_BBOX_SIZE_PERCENT","maxEdgeLen","unique","lastPoint","currentPoint","_filterDuplicates","_sortByX","occupiedArea","_occupiedArea","ccw","cw","seg1","seg2","x4","y4","baseGet","baseGetTag","isObjectLike","baseAssignValue","baseForOwn","baseIteratee","iteratee","Constructor","toPropertyKey","_defineProperties","props","writable","protoProps","staticProps"],"sourceRoot":""}